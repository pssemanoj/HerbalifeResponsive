function dynamicDividerLine_(){var a=findControl2("3tabsbox"),b=findControl2("tab1-col1"),c=findControl2("tab1-divider"),d=findControl2("tab1-col2");if(null!=a&&null!=b){var e=b.offsetHeight,f=(c.offsetHeight,d.offsetHeight);if(e>130||f>130){var g;e>f?(g=e,c.style.height=g+"px"):f>e&&(g=f,c.style.height=g+"px")}}}function adjustDividerLineTab2_(){var a=findControl2("3tabsbox"),b=findControl2("tab2-col1"),c=findControl2("tab2-divider"),d=findControl2("tab2-col2");if(a&&b&&d){var e=b.offsetHeight,f=(c.offsetHeight,d.offsetHeight);if(e>130||f>130){var g;e>f?(g=e,c.style.height=g+"px"):f>e&&(g=f,c.style.height=g+"px")}}$('#tab2-col1 [id$="pDetails"]').html().trim()||($('#tab2-col1 [id$="lbDetails"]').css("display","none"),$("#tab2-col2").css("width","auto"))}function adjustDividerLineTab3_(){var a=findControl2("3tabsbox"),b=findControl2("tab3-col1"),c=findControl2("tab3-divider"),d=findControl2("tab3-col2");if(a&&b&&d){var e=b.offsetHeight,f=(c.offsetHeight,d.offsetHeight);if(e>130||f>130){var g;e>f?(g=e,c.style.height=g+"px"):f>e&&(g=f,c.style.height=g+"px")}}}function ShowWrap(a){var b=findControl2("dynamic_wrap1");null!=b&&("dynamic_wrap1"!=a?b.style.display="none":b.style.display="inline"),b=findControl2("dynamic_wrap2"),null!=b&&("dynamic_wrap2"!=a?b.style.display="none":b.style.display="inline"),b=findControl2("dynamic_wrap3"),null!=b&&("dynamic_wrap3"!=a?b.style.display="none":b.style.display="inline")}function findControl(a){return document.getElementById(a)}function findControl2(a){controlFound=null;var b,c=document.getElementsByTagName("div"),d=c.length;for(b=0;b<d;b++)c[b].id==a&&(controlFound=c[b]);return controlFound}function switchingTab(a){hideAllWraps(),ShowWrap("dynamic_wrap"+a),"1"==a?($("#vis2").addClass("unFocusTab"),$("#vis3").addClass("unFocusTab"),$("#vis1").addClass("focusTab"),$("#vis2").removeClass("focusTab"),$("#vis3").removeClass("focusTab"),$("#vis1").removeClass("unFocusTab")):"2"==a?($("#vis1").addClass("unFocusTab"),$("#vis3").addClass("unFocusTab"),$("#vis2").addClass("focusTab"),$("#vis1").removeClass("focusTab"),$("#vis3").removeClass("focusTab"),$("#vis2").removeClass("unFocusTab")):"3"==a&&($("#vis1").addClass("unFocusTab"),$("#vis2").addClass("unFocusTab"),$("#vis3").addClass("focusTab"),$("#vis1").removeClass("focusTab"),$("#vis2").removeClass("focusTab"),$("#vis3").removeClass("unFocusTab"))}function InitializeControls(){$("#OrderBySkuMain .productInput").length>0&&($(".onlyNumbers").addClass("qtyInput"),$(".qtyInput").setNumeric2(),$.ajaxPost("GetAutoCompleteOptions","{ }",SetAutoCompleteOptions),$(".productInput").blur(function(){if(this.value){var a=$.inArray(this.value,autoCompleteOptions)>=0,b=$.inArray(this.value,skuList)>=0;a||b?($(this).parent().prev().find("img").addClass("hide"),$(this).addClass("completeSKUInput"),IsRowComplete($(this),$(this).parent().parent().find(".qtyInput"),!1)):0==$(".ui-autocomplete:visible").length&&($(".errorList").html(noSKUFoundText.format(this.value.toUpperCase())),$(this).parent().prev().find(".gdo-error-message-icon").removeClass("hide"),$(this).removeClass("completeSKUInput"),$(this).parent().prev().find("img").removeClass("hide"))}}),$(".productInput").focus(function(){$(this).removeClass("completeSKUInput")}),$(".qtyInput").blur(function(){IsRowComplete($(this).parent().parent().find(".productInput"),$(this),!0)}),$(".productInput").each(function(){this.value&&($(this).parent().parent().removeClass("hide"),$(this).parent().prev().find("img").removeClass("hide"))}))}function SetAutoCompleteOptions(a){a&&a.d&&(autoCompleteOptions=a.d.ProductsList,skuList=a.d.SkuList,InitializeAutocompleteOptions())}function InitializeAutocompleteOptions(){autoCompleteOptions&&$(".productInput").kendoAutoComplete({dataSource:autoCompleteOptions,filter:"contains",placeholder:autoPlaceHolderText});$.each($(".productInput"),function(a,b){b.value})}function IsRowComplete(a,b,c){var d=a.eq(2).val()?a.eq(2).val():a.eq(1).val(),e=b.val();d&&e&&(a.parent().parent().next().removeClass("hide"),c&&a.parent().parent().next().find(".productInput").focus())}function CheckNumeric(a,b){var c;if(!a)var a=window.event;a.keyCode?c=a.keyCode:a.which&&(c=a.which),(c>57||c<48)&&(a.cancelBubble=!0,a.keyCode?a.keyCode=2:a.which&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation()))}function CheckAreaPlusPhone(a,b,c,d){var e=document.getElementById(b),f=document.getElementById(c);null!=e&&null!=f&&e.value.length+f.value.length>=d&&(a.cancelBubble=!0,window.event?a.keyCode=0:a.which&&(a.which=0))}function PickupSelected(a){var b=document.getElementsByTagName("input");for(i=0;i<b.length;i++)"radio"==b[i].type&&b[i].name.indexOf("rbSelected")!=-1&&b[i]!=a&&(b[i].checked=!1)}function CheckChanges(a,b){var c=!1;".txtPostCode2"===b?(oldTxtCP2=$(b).val(),oldTxtCP1!=$(a).val()&&(c=!0),oldTxtCP1=$(a).val()):(oldTxtCP1=$(b).val(),oldTxtCP2!=$(a).val()&&(c=!0),oldTxtCP2=$(a).val()),($(b).val()&&$(a).val()&&c||!$(b).val()&&!$(a).val())&&__doPostBack(a.name,"")}function AllowOnlyNumbers2(a){$(a).val($(a).val().replace(/[^\d]/g,""))}function AllowOnlyNumbers(a){46==a.keyCode||8==a.keyCode||(a.keyCode<48||a.keyCode>57)&&a.preventDefault()}function EnableMasterScrolling(){$("body").css("overflow","auto")}function DisableMasterScrolling(){$("body").css("overflow","hidden")}function checkSKUChar(a,b){var c;a||(a=window.event),c=String.fromCharCode(a.keyCode||a.which),/^ *[0-9a-zA-Z]+ *$/.test(c)||(a.cancelBubble=!0,a.keyCode?a.keyCode=2:a.which&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation()))}function cronometro(){new Date;if($("#ctl00_ctl00_PageHeaderArea_hTargetDate").length>0)var a=document.getElementById("ctl00_ctl00_PageHeaderArea_hTargetDate").value;else var a=document.getElementById("PageHeaderArea_hTargetDate").value;if(a){Sys.WebForms.PageRequestManager.getInstance().add_endRequest(cronometro);var b,c,d,e,f,g=a.split(" ")[0],h=a.split(" ")[1],i=a.split(" ")[2],j=a.split(" ")[3],k=a.split(" ")[4],l=a.split(" ")[5],m=new Date(g,h-1,i,j,k,l),n=document.getElementById("ctl00_ctl00_PageHeaderArea_counter"),o=(document.getElementById("countdown_sec"),document.getElementById("countdown_min")),p=document.getElementById("countdown_hr"),q=document.getElementById("countdown_dy");if($("#ctl00_ctl00_PageHeaderArea_hcurrentDate").length>0)var r=document.getElementById("ctl00_ctl00_PageHeaderArea_hcurrentDate").value;else var r=document.getElementById("PageHeaderArea_hcurrentDate").value;var s=r.split(" ")[0],t=r.split(" ")[1],u=r.split(" ")[2],v=r.split(" ")[3],w=r.split(" ")[4],x=r.split(" ")[5],y=new Date(s,t-1,u,v,w,x),z=(new Date).getTime(),A=m-y+z;f=setInterval(function(){var a=((new Date).getTime(),(A-new Date)/1e3);b=parseInt(a/86400),a%=86400,c=parseInt(a/3600),a%=3600,d=parseInt(a/60),e=parseInt(a%60),b<=0&&c<=0&&d<=0&&e<=0?(o.innerHTML="00",p.innerHTML="00",q.innerHTML="00",n.className=n.className+" hide",clearInterval(f)):(d<10?o.innerHTML="0"+d:o.innerHTML=d,c<10?p.innerHTML="0"+c:p.innerHTML=c,b<10?q.innerHTML="0"+b:q.innerHTML=b)},1e3)}}function cookieEater(){eraseCookie("DUPCHECKWITHREFID_STATUS"),document.cookie.indexOf("DUPCHECKWITHREFID_STATUS")>=0&&$(document).ready(function(){$.cookie("DUPCHECKWITHREFID_STATUS",null)})}function createCookie(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="; expires="+d.toGMTString()}else var e="";document.cookie=a+"="+b+e+"; path=/"}function eraseCookie(a){createCookie(a,"",-1)}function toggleCatalog(){(is_page("productdetail")||is_page("catalog"))&&($(".toggle-child").hide(),$(".toggle-child:not(.grandson)").show(),$("li.toggle-parent:not(.grandpa) i").remove(),$(".grandpa").addClass("toggle-parent").find(".arrow").removeClass("hide"),document.cookie.indexOf("showcat")>=0&&($('[id$="toggleMe"]').show().addClass("opened"),$('[id$="toggleMe"]').prev().find(".arrow").toggleClass("up icon-minus-ln-1")),$(".toggle-parent.grandpa").click(function(a){a.preventDefault();var b=$(this),c=$(b).next(".toggle-child"),d=b.parent().find(".opened");!d.length||c.is(d)||b.hasClass("grandpa")||(d.prev().find(".arrow").toggleClass("up icon-minus-ln-1"),d.removeClass("opened").slideUp()),c.hasClass("opened")?(b.find(".arrow").toggleClass("up icon-minus-ln-1"),c.slideUp().removeClass("opened"),b.hasClass("grandpa")&&b.hasClass("catalog")?eraseCookie("showcat"):b.hasClass("grandpa")&&b.hasClass("apparel")&&eraseCookie("showapp")):(b.find(".arrow").toggleClass("up icon-minus-ln-1"),c.slideDown().addClass("opened"),b.hasClass("grandpa")&&b.hasClass("catalog")?createCookie("showcat","true",7):b.hasClass("grandpa")&&b.hasClass("apparel")&&createCookie("showapp","true",7))}))}function RemovePopup(a){$("#ctl00_ctl00_ContentArea_uchrblMessageBoxControl2_popup_MessageBox_backgroundElement").hide(),$("#ctl00_ctl00_ContentArea_uchrblMessageBoxControl2_pnlMessageBox").hide()}function scroll_to_element(a,b){$("html, body").animate({scrollTop:$(a).offset().top},b)}function hidePromoPopup(){$(document).ready(function(){var a=$.cookie("RENDERING_LOCALE");"en_CA"!=a&&"fr_CA"!=a||document.cookie.indexOf("valPopup")>=0&&($("div[id$='MessageBoxControl2_pnlMessageBox']").css({display:"none"}),$("div[id$='uchrblMessageBoxControl2_popup_MessageBox_backgroundElement']").css({display:"none"}),setTimeout(function(){$("div[id$='uchrblMessageBoxControl2_popup_MessageBox_backgroundElement']").hide(),$("div[id$='MessageBoxControl2_pnlMessageBox']").hide()},1),eraseCookie("valPopup"))})}function freeze_header_cols(){var a=$(window).scrollTop(),b=$(".freeze-header").next().next().find(".col-Product").outerWidth();$(".freeze-header .col-Product").css("width",b);var c=$(".freeze-vp"),d=$(".freeze-vp + tr"),e=c.next().outerWidth(),f=c.next().outerHeight(),g=c.offset().top,h=d.offset().top,i=g-a,j=h-a;i<0?c.addClass("topSticky").css({width:e,"background-color":"#FFF"}):j>f&&c.removeClass("topSticky");var k=$(".freeze-actions"),l=$(".freeze-actions + tr"),m=k.next().outerWidth(),n=k.next().outerHeight(),o=k.offset().top,p=l.offset().top,q=o-a,r=p-a;q<0?(k.addClass("topSticky").css({width:m}),k.children().first().css("width",m)):r>n&&k.removeClass("topSticky");var s=$(".freeze-header"),t=$(".freeze-header + tr"),u=s.next().outerWidth(),v=s.next().outerHeight(),w=s.offset().top,x=t.offset().top,y=w-a,z=x-a;y<0?s.addClass("topSticky").css({width:u,top:c.outerHeight()}):z>v&&s.removeClass("topSticky")}function is_page(a){return window.location.pathname.toLowerCase().indexOf(a)>-1}function visibleAreaHeight(){jQuery("#TB_ajaxContent .gdo-popup").css("max-height",$(window).outerHeight()-Math.round(.2*$(window).outerHeight())),jQuery(window).resize(function(){jQuery("#TB_ajaxContent .gdo-popup").css("max-height",$(window).outerHeight()-Math.round(.2*$(window).outerHeight()))})}function toggleMemberInfo(a){var b=$("div.member-information");b.animate({left:0==parseInt(b.css("left"),10)||isNaN(parseInt(b.css("left"),10))?-b.outerWidth():0},{start:function(){$(a).toggleClass("icon-arrow-circle-fl-8"),$(a).hasClass("icon-arrow-circle-fl-8")?(b.css("z-index",-1),$(a).html("<span>"+showText+"</span>")):$(a).html("<span>"+collapse+"</span>")},complete:function(){$(a).hasClass("icon-arrow-circle-fl-8")||b.css("z-index","auto")}})}function RedirectToReceipts(){var a=_AnalyticsFacts_.LanguageCode+"-"+_AnalyticsFacts_.CountryCode,b=["EN-US","ES-US","ES-PR"];return!!(is_page("invoice")&&b.indexOf(a.toUpperCase())>-1)&&(logger.log("Page not longer available, please use Receipts page!"),"/"+a+"/Shop/Receipts/Invoice/Index/Ds")}function drawShowData(a,b){var c=$("<tr />");$("#showDataGrid").append(c);for(var d=0;d<a.length;d++)1==b?"Shipping"==a[d].Option?c.append($("<td><input id='dwhouse"+d+"' type='checkbox' name='dwhouse' checked='checked' /> "+a[d].Name+" ("+a[d].OptionText+")</input></td>")):c.append($("<td><input id='dwhouse"+d+"' type='checkbox' name='dwhouse'/> "+a[d].Name+" ("+a[d].OptionText+")</input></td>")):c.append($("<td><input id='dwhouse"+d+"' type='checkbox' name='dwhouse' checked='checked' /> "+a[d].Name+" ("+a[d].OptionText+")</input></td>"))}function drawTable(a){var b=$("<tr />");$("#inventoryGrid").append(b),b.append($("<th class='col-SKU'>"+SkuColumnTitleText+"</th>")),b.append($("<th class='col-Product'>"+DescriptionColumnText+"</th>"));for(var c=0;c<a.WhDetails.length;c++)1==a.HasShipping?"Shipping"==a.WhDetails[c].Option?b.append($("<th reference=dwhouse"+c+">"+a.WhDetails[c].Name+"</th>")):b.append($("<th reference=dwhouse"+c+">"+a.WhDetails[c].Name+"</th>").hide()):b.append($("<th reference=dwhouse"+c+">"+a.WhDetails[c].Name+"</th>"));var d=$("<tr />");$("#inventoryGrid").append(d),d.append($("<th class='invSubHeader'></th>")),d.append($("<th class='invSubHeader'></th>"));for(var c=0;c<a.WhDetails.length;c++)1==a.HasShipping&&("Shipping"==a.WhDetails[c].Option?d.append($("<th class='invSubHeader' reference=dwhouse"+c+">"+a.WhDetails[c].OptionText+"</th>")):d.append($("<th class='invSubHeader' reference=dwhouse"+c+">"+a.WhDetails[c].OptionText+"</th>").hide()));for(var c=0;c<a.FullCatalog.length;c++){var e=$("<tr rowRef="+c+" />");$("#inventoryGrid").append(e),e.append($("<td class='col-SKU'>"+a.FullCatalog[c].SKU+"</td>")),e.append($("<td class='col-Product'>"+a.FullCatalog[c].SKUDescription+"</td>"));for(var f,g=new Array(a.WhDetails.length),h=0;h<a.FullCatalog[c].InventoryDetails.length;h++)for(var i=0;i<a.WhDetails.length;i++)if(a.FullCatalog[c].InventoryDetails[h].WHCode==a.WhDetails[i].WHCode&&a.FullCatalog[c].InventoryDetails[h].DeliveryType==a.WhDetails[i].Option&&a.FullCatalog[c].InventoryDetails[h].Location==a.WhDetails[i].Name){var j,k=!0,f=!1;"Unavailable"!=a.FullCatalog[c].InventoryDetails[h].Status&&null!=a.FullCatalog[c].InventoryDetails[h].Status||a.FullCatalog[c].InventoryDetails[h].DeliveryType!=a.WhDetails[i].Option?"Available"==a.FullCatalog[c].InventoryDetails[h].Status&&a.FullCatalog[c].InventoryDetails[h].DeliveryType==a.WhDetails[i].Option?(j="<img src='/Content/Global/Products/Img/circle_green.gif' />",k=!1,f=!0):"AllowBackOrder"==a.FullCatalog[c].InventoryDetails[h].Status&&a.FullCatalog[c].InventoryDetails[h].DeliveryType==a.WhDetails[i].Option?(j="<img src='/Content/Global/Products/Img/circle_orange.gif' />",k=!1,f=!0):"UnavailableInPrimaryWh"==a.FullCatalog[c].InventoryDetails[h].Status&&a.FullCatalog[c].InventoryDetails[h].DeliveryType==a.WhDetails[i].Option?(j="<img src='/Content/Global/Products/Img/circle_blue.gif' />",k=!1,f=!0):(j=a.FullCatalog[c].InventoryDetails[h].Status,k=!1):j="<img src='/Content/Global/Products/Img/circle_red.gif' />",k?g[i]=j+"<div class='ttip'><a href='#' location='"+a.FullCatalog[c].InventoryDetails[h].Location+"' dateAvailability='"+a.FullCatalog[c].InventoryDetails[h].AvailabilityDate+"' type='"+a.FullCatalog[c].InventoryDetails[h].Type+"' tooltipcomments='"+a.FullCatalog[c].InventoryDetails[h].ToolTipComments+"' comments='"+a.FullCatalog[c].InventoryDetails[h].Comments+"' x='"+c+"' z='"+i+"'>"+StatusText+"</a></div>":g[i]=j}for(var l=0;l<g.length;l++)"undefined"!=typeof g[l]?1==a.HasShipping?"Shipping"==a.WhDetails[l].Option?e.append($("<td reference=dwhouse"+l+">"+g[l]+"</td>").css("background-color","#f3f3f3")):e.append($("<td reference=dwhouse"+l+">"+g[l]+"</td>").hide()):e.append($("<td reference=dwhouse"+l+">"+g[l]+"</td>").css("background-color","#f3f3f3")):e.append($("<td reference=dwhouse"+l+"><img src='/Content/Global/Products/Img/circle_red.gif' /></td>"))}}var controlFound=null,autoCompleteOptions=null,skuList=null;$(function(){setTimeout(InitializeControls,1e3)}),$.ajaxPost=function(a,b,c,d){$.ajax({type:"POST",url:window.location.href.replace("#","")+"/"+a,data:b,contentType:"application/json; charset=utf-8",dataType:"json",success:c,error:function(a,b,c){location.reload(!0)}})},function(a,b,c){function d(a){return a}function e(a){return f(decodeURIComponent(a.replace(h," ")))}function f(a){return 0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),a}function g(a){return i.json?JSON.parse(a):a}var h=/\+/g,i=a.cookie=function(f,h,j){if(h!==c){if(j=a.extend({},i.defaults,j),null===h&&(j.expires=-1),"number"==typeof j.expires){var k=j.expires,l=j.expires=new Date;l.setDate(l.getDate()+k)}return h=i.json?JSON.stringify(h):String(h),b.cookie=[encodeURIComponent(f),"=",i.raw?h:encodeURIComponent(h),j.expires?"; expires="+j.expires.toUTCString():"",j.path?"; path="+j.path:"",j.domain?"; domain="+j.domain:"",j.secure?"; secure":""].join("")}for(var m=i.raw?d:e,n=b.cookie.split("; "),o=f?null:{},p=0,q=n.length;p<q;p++){var r=n[p].split("="),s=m(r.shift()),t=m(r.join("="));if(f&&f===s){o=g(t);break}f||(o[s]=g(t))}return o};i.defaults={},a.removeCookie=function(b,c){return null!==a.cookie(b)&&(a.cookie(b,null,c),!0)}}(jQuery,document),$(document).ready(function(){if($(document).keydown(function(a){var b=null!=a?a.target.nodeName.toLowerCase():"null",c=null!=a?a.target.type:"null";if("input"!=b&&"textarea"!=b&&"text"!=c&&8===a.keyCode)return!1}),0!=$("ul.skin2").length&&"ul.skin2".tabs("div.skin2 > div"),$HFFModal={message:null,init:function(){$("#modal-container").modal({closeHTML:"<a href='#' title='Close' class='modal-close'>x</a>",position:["15%"],overlayId:"modal-overlay",containerId:"modal-container",onOpen:$HFFModal.open,onShow:$HFFModal.show,onClose:$HFFModal.close})},open:function(a){var b=$("#modal-container .modal-title").html();$("#modal-container .modal-title").html("Loading..."),a.overlay.fadeIn(200,function(){a.container.fadeIn(200,function(){a.data.fadeIn(200,function(){var a=$("#modal-container .modal-innerContent").height();$("#modal-container .modal-content").animate({height:a},function(){$("#modal-container .modal-title").html(b),$("#modal-container .modal-innerContent").fadeIn(200,function(){})})})})})},show:function(a){},close:function(a){$("#modal-container .modal-innerContent").fadeOut(),$("#modal-container .modal-title").html("Thank you..."),$("#modal-container .modal-content").animate({height:40},function(){a.data.fadeOut(200,function(){a.container.fadeOut(200,function(){a.overlay.fadeOut(200,function(){$.modal.close()})})})})},error:function(a){alert(a.statusText)},showError:function(){$("#modal-container .error-message").html($('<div class="contact-error"></div>').append(contact.message)).fadeIn(200)}},$("#zoomIntoProduct").length>0){$("#zoomIntoProduct").kendoWindow();var a=$("#zoomIntoProduct").data("kendoWindow");a.setOptions({width:500})}if($("#printThisPage").length>0){$("#printThisPage").kendoWindow();var a=$("#printThisPage").data("kendoWindow");a.setOptions({height:$(window).outerHeight()-($("#printThisPage").prev().outerHeight()+50),width:700})}$(".btnPrintThisPage").click(function(a){a.preventDefault(),$("#printThisPage").length>0&&$("#printThisPage").kendoWindow().data("kendoWindow").close()}),"zh_CN"==$.cookie("RENDERING_LOCALE")&&($('[id$="UpdatePanelTermCondition"] [id$="backgroundElement"]').live("click",function(){$('div[id$="PnlTermCondition"] a[id$="btnTermConditionYes"]')[0].click()}),$(window).bind("scroll",function(){is_page("pricelist")&&1!=responsiveMode&&$(window).bind("scroll",function(){freeze_header_cols()})}),1!=responsiveMode&&$(".tabs-SKU input[id$='Quantity']").live("keyup",function(){$('[id$="lbVolumePoint"].totalVP').length>0&&$('[id$="lbVolumePoint"].totalVP').text(ProdDetailVPCalculation.get_total_vp()),$('[id$="lbTotalAmount"].totalAmount').length>0&&$('[id$="lbTotalAmount"].totalAmount').text(ProdDetailVPCalculation.get_total_ammount())})),$('[name$="rblPaymentOptions"]').live("change",function(){var a=this,b=$(a).parent();$(".tab_link_selected").removeClass("tab_link_selected"),$(b).addClass("tab_link_selected");var c=$(b).attr("href");$(".active_tab").removeClass("active_tab").hide(),$('[id$="'+c+'"]').addClass("active_tab").show()})}),$.fn.switchClasses=function(a,b){this.each(function(){$(this).removeClass(b).addClass(a)})},$.fn.keyPressHandlerExist=function(a){var b=!1;return this.each(function(){a&&$(this).data("events")&&$(this).data("events").keypress&&$.each($(this).data("events").keypress,function(c,d){d.handler.toString().indexOf(a)>=0&&(b=!0)})}),b},String.prototype.format=String.prototype.f=function(){for(var a=this,b=arguments.length;b--;)a=a.replace(new RegExp("\\{"+b+"\\}","gm"),arguments[b]);return a},$.fn.setNumeric2=function(a){this.each(function(){$(this).keypress(function(a){var b="";b="Netscape"==navigator.appName?String.fromCharCode(a.charCode):String.fromCharCode(a.keyCode);var c=!1,d=/[0-9]+/;d.test(b)&&(c=!0);for(var e=$(this).val(),f=$(this).val().length-1;f>=0;f--){var g=$(this).val().charAt(f);d.test(g)||(e=e.substring(0,f)+e.substring(f+1))}$(this).val(e),a&&!c&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}),$(this).blur(function(a){for(var b=/[0-9]+/,c=$(this).val(),d=$(this).val().length-1;d>=0;d--){var e=$(this).val().charAt(d);b.test(e)||(c=c.substring(0,d)+c.substring(d+1))}$(this).val(c)})})},$.fn.setAsNumeric=function(a){this.each(function(){$(this).keypress(function(a){var b="";b="Netscape"==navigator.appName?String.fromCharCode(a.charCode):String.fromCharCode(a.keyCode);var c=!0,d=$(this).val().indexOf(".")>=0,e=$(this).val().indexOf(",")>=0;"."!==b&&","!==b||!d&&!e||(c=!1),a&&!c&&(a.preventDefault?a.preventDefault():a.returnValue=!1)})})},$.fn.disableEnglish=function(a){this.each(function(){$(this).keypress(function(a){var b="";b="Netscape"==navigator.appName?String.fromCharCode(a.charCode):String.fromCharCode(a.keyCode);var c=!0,d=/[a-zA-Z]+/;d.test(b)&&(c=!1),$(control).val($(control).val().replace(/[a-zA-Z]+/,"")),a&&!c&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}),$(this).blur(function(a){var b="";b="Netscape"==navigator.appName?String.fromCharCode(a.charCode):String.fromCharCode(a.keyCode);var c=!0,d=/[a-zA-Z]+/;d.test(b)&&(c=!1),$(control).val($(control).val().replace(/[a-zA-Z]+/,"")),a&&!c&&(a.preventDefault?a.preventDefault():a.returnValue=!1)})})},$(document).mouseup(function(a){var b=$("#ctl00_ctl00_ContentArea_uchrblMessageBoxControl2_pnlMessageBox");b.is(a.target)||0!==b.has(a.target).length||(b.hide(),$("#ctl00_ctl00_ContentArea_uchrblMessageBoxControl2_popup_MessageBox_backgroundElement").hide())}),$(document).ready(function(){var a=$.cookie("RENDERING_LOCALE");"zh_CN"==a?$("a[name='checkoutButton']").live("click",function(){$("div[id$='updateProgressDiv']").css({"background-color":"white",opacity:"0.75","background-image":"url('/Ordering/Images/China/hrblpreloader.gif')"})}):"ru_BY"!=a&&"ru_KZ"!=a||$("input[type=radio]").live("click",function(){3==$(this).val()?$("div.checkout-logos").css({display:"none"}):$("div.checkout-logos").css({display:"inherit"})})});var VPCalculation={selected_skus:[],get_skus:function(){var a=$('[id$="pricelistGridInfo"]').val();if(""==a)return!1;var b="{";a=a.split(","),$.each(a,function(a,c){""!=c&&(skus=c.split("|"),sku=skus[0].replace("txt_",""),qty=""!=skus[1]?parseInt(skus[1],10):0,isNaN(qty)&&(qty=0),psku=void 0!=$("tr[product-sku='"+sku+"'] .col-VolumePoint").attr("item-vp")?'"vp" : '+$("tr[product-sku='"+sku+"'] .col-VolumePoint").attr("item-vp"):"",comma=""==psku?"":",",b+='"'+sku+'": {"price" : '+$("tr[product-sku='"+sku+"'] .col-RetailPrice").attr("list-price")+',"qty" : '+qty+comma+psku+"},")}),b=b.substring(0,b.length-1),b+="}",this.selected_skus=JSON.parse(b)},get_total_vp:function(){var a=0;return $.each(VPCalculation.selected_skus,function(b,c){a+=c.vp*c.qty}),this.format_totals(a)},get_total_ammount:function(){var a=0;return $.each(VPCalculation.selected_skus,function(b,c){a+=c.price*c.qty}),this.format_totals(a)},format_totals:function(a){var b=!1;return a<0&&(b=!0,a=Math.abs(a)),parseFloat(a,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString()}},ProdDetailVPCalculation={total_vp:0,total_ammount:0,get_total_vp:function(){var a=$(".tabs-SKU input[id$='Quantity']"),b=$(".tabs-SKU span[id$='VolumePoints']"),c=0,d=0,e=0;return $.each(a,function(a,f){c=""!=$(f).val()?parseInt($(f).val(),10):0,isNaN(c)&&(c=0),c>0&&(d=$(b[a]).text(),e+=c*d)}),this.format_totals(e)},get_total_ammount:function(){var a=$(".tabs-SKU input[id$='Quantity']"),b=$(".tabs-SKU span[id$='Retail']"),c=0,d=0,e=0;return $.each(a,function(a,f){c=""!=$(f).val()?parseInt($(f).val(),10):0,isNaN(c)&&(c=0),c>0&&(d=$(b[a]).parent().attr("list-price"),e+=c*d)}),this.format_totals(e)},format_totals:function(a){var b=!1;return a<0&&(b=!0,a=Math.abs(a)),parseFloat(a,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString()}};!function(a){a.support.placeholder="placeholder"in document.createElement("input")}(jQuery),$(function(){$.support.placeholder||($("[placeholder]").focus(function(){$(this).val()==$(this).attr("placeholder")&&$(this).val("")}).blur(function(){""==$(this).val()&&$(this).val($(this).attr("placeholder"))}).blur(),$("[placeholder]").parents("form").submit(function(){$(this).find("[placeholder]").each(function(){$(this).val()==$(this).attr("placeholder")&&$(this).val("")})}))});var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(a){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var b=a.document,c=function(){return a.URL||a.webkitURL||a},d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e=!a.externalHost&&"download"in d,f=function(c){var d=b.createEvent("MouseEvents");d.initMouseEvent("click",!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null),c.dispatchEvent(d)},g=a.webkitRequestFileSystem,h=a.requestFileSystem||g||a.mozRequestFileSystem,i=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},j="application/octet-stream",k=0,l=10,m=function(b){var d=function(){"string"==typeof b?c().revokeObjectURL(b):b.remove()};a.chrome?d():setTimeout(d,l)},n=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(f){i(f)}}},o=function(b,i){var l,o,p,q=this,r=b.type,s=!1,t=function(){n(q,"writestart progress write writeend".split(" "))},u=function(){if(!s&&l||(l=c().createObjectURL(b)),o)o.location.href=l;else{var d=a.open(l,"_blank");void 0==d&&"undefined"!=typeof safari&&(a.location.href=l)}q.readyState=q.DONE,t(),m(l)},v=function(a){return function(){if(q.readyState!==q.DONE)return a.apply(this,arguments)}},w={create:!0,exclusive:!1};return q.readyState=q.INIT,i||(i="download"),e?(l=c().createObjectURL(b),d.href=l,d.download=i,f(d),q.readyState=q.DONE,t(),void m(l)):(a.chrome&&r&&r!==j&&(p=b.slice||b.webkitSlice,b=p.call(b,0,b.size,j),s=!0),g&&"download"!==i&&(i+=".download"),(r===j||g)&&(o=a),h?(k+=b.size,void h(a.TEMPORARY,k,v(function(a){a.root.getDirectory("saved",w,v(function(a){var c=function(){a.getFile(i,w,v(function(a){a.createWriter(v(function(c){c.onwriteend=function(b){o.location.href=a.toURL(),q.readyState=q.DONE,n(q,"writeend",b),m(a)},c.onerror=function(){var a=c.error;a.code!==a.ABORT_ERR&&u()},"writestart progress write abort".split(" ").forEach(function(a){c["on"+a]=q["on"+a]}),c.write(b),q.abort=function(){c.abort(),q.readyState=q.DONE},q.readyState=q.WRITING}),u)}),u)};a.getFile(i,{create:!1},v(function(a){a.remove(),c()}),v(function(a){a.code===a.NOT_FOUND_ERR?c():u()}))}),u)}),u)):void u())},p=o.prototype,q=function(a,b){return new o(a,b)};return p.abort=function(){var a=this;a.readyState=a.DONE,n(a,"abort")},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,q}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs}),function(a){function b(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw new Error("Implement me")}}function c(a,b){return za.call(a,b)}function d(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function e(a){ta.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function f(a,b){var c=!0;return m(function(){return c&&(e(a),c=!1),b.apply(this,arguments)},b)}function g(a,b){qb[a]||(e(b),qb[a]=!0)}function h(a,b){return function(c){return p(a.call(this,c),b)}}function i(a,b){return function(c){return this.localeData().ordinal(a.call(this,c),b)}}function j(){}function k(a,b){b!==!1&&F(a),n(this,a),this._d=new Date((+a._d))}function l(a){var b=y(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=ta.localeData(),this._bubble()}function m(a,b){for(var d in b)c(b,d)&&(a[d]=b[d]);return c(b,"toString")&&(a.toString=b.toString),c(b,"valueOf")&&(a.valueOf=b.valueOf),a}function n(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=b._pf),"undefined"!=typeof b._locale&&(a._locale=b._locale),Ia.length>0)for(c in Ia)d=Ia[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function o(a){return a<0?Math.ceil(a):Math.floor(a)}function p(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function q(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function r(a,b){var c;return b=K(b,a),a.isBefore(b)?c=q(a,b):(c=q(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function s(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(g(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=ta.duration(c,d),t(this,e,a),this}}function t(a,b,c,d){var e=b._milliseconds,f=b._days,g=b._months;d=null==d||d,e&&a._d.setTime(+a._d+e*c),f&&na(a,"Date",ma(a,"Date")+f*c),g&&la(a,ma(a,"Month")+g*c),d&&ta.updateOffset(a,f||g)}function u(a){return"[object Array]"===Object.prototype.toString.call(a)}function v(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function w(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;d<e;d++)(c&&a[d]!==b[d]||!c&&A(a[d])!==A(b[d]))&&g++;return g+f}function x(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=jb[a]||kb[b]||b}return a}function y(a){var b,d,e={};for(d in a)c(a,d)&&(b=x(d),b&&(e[b]=a[d]));return e}function z(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}ta[b]=function(e,f){var g,h,i=ta._locale[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=ta().utc().set(d,a);return i.call(ta._locale,b,e||"")},null!=f)return h(f);for(g=0;g<c;g++)j.push(h(g));return j}}function A(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function B(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function C(a,b,c){return ha(ta([a,11,31+b-c]),b,c).week}function D(a){return E(a)?366:365}function E(a){return a%4===0&&a%100!==0||a%400===0}function F(a){var b;a._a&&a._pf.overflow===-2&&(b=a._a[Ba]<0||a._a[Ba]>11?Ba:a._a[Ca]<1||a._a[Ca]>B(a._a[Aa],a._a[Ba])?Ca:a._a[Da]<0||a._a[Da]>24||24===a._a[Da]&&(0!==a._a[Ea]||0!==a._a[Fa]||0!==a._a[Ga])?Da:a._a[Ea]<0||a._a[Ea]>59?Ea:a._a[Fa]<0||a._a[Fa]>59?Fa:a._a[Ga]<0||a._a[Ga]>999?Ga:-1,a._pf._overflowDayOfYear&&(b<Aa||b>Ca)&&(b=Ca),a._pf.overflow=b)}function G(b){return null==b._isValid&&(b._isValid=!isNaN(b._d.getTime())&&b._pf.overflow<0&&!b._pf.empty&&!b._pf.invalidMonth&&!b._pf.nullInput&&!b._pf.invalidFormat&&!b._pf.userInvalidated,
b._strict&&(b._isValid=b._isValid&&0===b._pf.charsLeftOver&&0===b._pf.unusedTokens.length&&b._pf.bigHour===a)),b._isValid}function H(a){return a?a.toLowerCase().replace("_","-"):a}function I(a){for(var b,c,d,e,f=0;f<a.length;){for(e=H(a[f]).split("-"),b=e.length,c=H(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=J(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&w(e,c,!0)>=b-1)break;b--}f++}return null}function J(a){var b=null;if(!Ha[a]&&Ja)try{b=ta.locale(),require("./locale/"+a),ta.locale(b)}catch(c){}return Ha[a]}function K(a,b){var c,d;return b._isUTC?(c=b.clone(),d=(ta.isMoment(a)||v(a)?+a:+ta(a))-+c,c._d.setTime(+c._d+d),ta.updateOffset(c,!1),c):ta(a).local()}function L(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function M(a){var b,c,d=a.match(Na);for(b=0,c=d.length;b<c;b++)pb[d[b]]?d[b]=pb[d[b]]:d[b]=L(d[b]);return function(e){var f="";for(b=0;b<c;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function N(a,b){return a.isValid()?(b=O(b,a.localeData()),lb[b]||(lb[b]=M(b)),lb[b](a)):a.localeData().invalidDate()}function O(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Oa.lastIndex=0;d>=0&&Oa.test(a);)a=a.replace(Oa,c),Oa.lastIndex=0,d-=1;return a}function P(a,b){var c,d=b._strict;switch(a){case"Q":return Za;case"DDDD":return _a;case"YYYY":case"GGGG":case"gggg":return d?ab:Ra;case"Y":case"G":case"g":return cb;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?bb:Sa;case"S":if(d)return Za;case"SS":if(d)return $a;case"SSS":if(d)return _a;case"DDD":return Qa;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ua;case"a":case"A":return b._locale._meridiemParse;case"x":return Xa;case"X":return Ya;case"Z":case"ZZ":return Va;case"T":return Wa;case"SSSS":return Ta;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?$a:Pa;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Pa;case"Do":return d?b._locale._ordinalParse:b._locale._ordinalParseLenient;default:return c=new RegExp(Y(X(a.replace("\\","")),"i"))}}function Q(a){a=a||"";var b=a.match(Va)||[],c=b[b.length-1]||[],d=(c+"").match(hb)||["-",0,0],e=+(60*d[1])+A(d[2]);return"+"===d[0]?-e:e}function R(a,b,c){var d,e=c._a;switch(a){case"Q":null!=b&&(e[Ba]=3*(A(b)-1));break;case"M":case"MM":null!=b&&(e[Ba]=A(b)-1);break;case"MMM":case"MMMM":d=c._locale.monthsParse(b,a,c._strict),null!=d?e[Ba]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[Ca]=A(b));break;case"Do":null!=b&&(e[Ca]=A(parseInt(b.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=A(b));break;case"YY":e[Aa]=ta.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":e[Aa]=A(b);break;case"a":case"A":c._isPm=c._locale.isPM(b);break;case"h":case"hh":c._pf.bigHour=!0;case"H":case"HH":e[Da]=A(b);break;case"m":case"mm":e[Ea]=A(b);break;case"s":case"ss":e[Fa]=A(b);break;case"S":case"SS":case"SSS":case"SSSS":e[Ga]=A(1e3*("0."+b));break;case"x":c._d=new Date(A(b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=Q(b);break;case"dd":case"ddd":case"dddd":d=c._locale.weekdaysParse(b),null!=d?(c._w=c._w||{},c._w.d=d):c._pf.invalidWeekday=b;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":a=a.substr(0,1);case"gggg":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=A(b));break;case"gg":case"GG":c._w=c._w||{},c._w[a]=ta.parseTwoDigitYear(b)}}function S(a){var c,d,e,f,g,h,i;c=a._w,null!=c.GG||null!=c.W||null!=c.E?(g=1,h=4,d=b(c.GG,a._a[Aa],ha(ta(),1,4).year),e=b(c.W,1),f=b(c.E,1)):(g=a._locale._week.dow,h=a._locale._week.doy,d=b(c.gg,a._a[Aa],ha(ta(),g,h).year),e=b(c.w,1),null!=c.d?(f=c.d,f<g&&++e):f=null!=c.e?c.e+g:g),i=ia(d,e,f,h,g),a._a[Aa]=i.year,a._dayOfYear=i.dayOfYear}function T(a){var c,d,e,f,g=[];if(!a._d){for(e=V(a),a._w&&null==a._a[Ca]&&null==a._a[Ba]&&S(a),a._dayOfYear&&(f=b(a._a[Aa],e[Aa]),a._dayOfYear>D(f)&&(a._pf._overflowDayOfYear=!0),d=da(f,0,a._dayOfYear),a._a[Ba]=d.getUTCMonth(),a._a[Ca]=d.getUTCDate()),c=0;c<3&&null==a._a[c];++c)a._a[c]=g[c]=e[c];for(;c<7;c++)a._a[c]=g[c]=null==a._a[c]?2===c?1:0:a._a[c];24===a._a[Da]&&0===a._a[Ea]&&0===a._a[Fa]&&0===a._a[Ga]&&(a._nextDay=!0,a._a[Da]=0),a._d=(a._useUTC?da:ca).apply(null,g),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()+a._tzm),a._nextDay&&(a._a[Da]=24)}}function U(a){var b;a._d||(b=y(a._i),a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],T(a))}function V(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function W(b){if(b._f===ta.ISO_8601)return void $(b);b._a=[],b._pf.empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,j=0;for(e=O(b._f,b._locale).match(Na)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(P(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&b._pf.unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),j+=d.length),pb[f]?(d?b._pf.empty=!1:b._pf.unusedTokens.push(f),R(f,d,b)):b._strict&&!d&&b._pf.unusedTokens.push(f);b._pf.charsLeftOver=i-j,h.length>0&&b._pf.unusedInput.push(h),b._pf.bigHour===!0&&b._a[Da]<=12&&(b._pf.bigHour=a),b._isPm&&b._a[Da]<12&&(b._a[Da]+=12),b._isPm===!1&&12===b._a[Da]&&(b._a[Da]=0),T(b),F(b)}function X(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function Y(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Z(a){var b,c,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(NaN));for(f=0;f<a._f.length;f++)g=0,b=n({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._pf=d(),b._f=a._f[f],W(b),G(b)&&(g+=b._pf.charsLeftOver,g+=10*b._pf.unusedTokens.length,b._pf.score=g,(null==e||g<e)&&(e=g,c=b));m(a,c||b)}function $(a){var b,c,d=a._i,e=db.exec(d);if(e){for(a._pf.iso=!0,b=0,c=fb.length;b<c;b++)if(fb[b][1].exec(d)){a._f=fb[b][0]+(e[6]||" ");break}for(b=0,c=gb.length;b<c;b++)if(gb[b][1].exec(d)){a._f+=gb[b][0];break}d.match(Va)&&(a._f+="Z"),W(a)}else a._isValid=!1}function _(a){$(a),a._isValid===!1&&(delete a._isValid,ta.createFromInputFallback(a))}function aa(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function ba(b){var c,d=b._i;d===a?b._d=new Date:v(d)?b._d=new Date((+d)):null!==(c=Ka.exec(d))?b._d=new Date((+c[1])):"string"==typeof d?_(b):u(d)?(b._a=aa(d.slice(0),function(a){return parseInt(a,10)}),T(b)):"object"==typeof d?U(b):"number"==typeof d?b._d=new Date(d):ta.createFromInputFallback(b)}function ca(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return a<1970&&h.setFullYear(a),h}function da(a){var b=new Date(Date.UTC.apply(null,arguments));return a<1970&&b.setUTCFullYear(a),b}function ea(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function fa(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function ga(a,b,c){var d=ta.duration(a).abs(),e=ya(d.as("s")),f=ya(d.as("m")),g=ya(d.as("h")),h=ya(d.as("d")),i=ya(d.as("M")),j=ya(d.as("y")),k=e<mb.s&&["s",e]||1===f&&["m"]||f<mb.m&&["mm",f]||1===g&&["h"]||g<mb.h&&["hh",g]||1===h&&["d"]||h<mb.d&&["dd",h]||1===i&&["M"]||i<mb.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,fa.apply({},k)}function ha(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),f<e-7&&(f+=7),d=ta(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function ia(a,b,c,d,e){var f,g,h=da(a,0,1).getUTCDay();return h=0===h?7:h,c=null!=c?c:e,f=e-h+(h>d?7:0)-(h<e?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:D(a-1)+g}}function ja(b){var c,d=b._i,e=b._f;return b._locale=b._locale||ta.localeData(b._l),null===d||e===a&&""===d?ta.invalid({nullInput:!0}):("string"==typeof d&&(b._i=d=b._locale.preparse(d)),ta.isMoment(d)?new k(d,(!0)):(e?u(e)?Z(b):W(b):ba(b),c=new k(b),c._nextDay&&(c.add(1,"d"),c._nextDay=a),c))}function ka(a,b){var c,d;if(1===b.length&&u(b[0])&&(b=b[0]),!b.length)return ta();for(c=b[0],d=1;d<b.length;++d)b[d][a](c)&&(c=b[d]);return c}function la(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),B(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function ma(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function na(a,b,c){return"Month"===b?la(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function oa(a,b){return function(c){return null!=c?(na(this,a,c),ta.updateOffset(this,b),this):ma(this,a)}}function pa(a){return 400*a/146097}function qa(a){return 146097*a/400}function ra(a){ta.duration.fn[a]=function(){return this._data[a]}}function sa(a){"undefined"==typeof ender&&(ua=xa.moment,a?xa.moment=f("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",ta):xa.moment=ta)}for(var ta,ua,va,wa="2.8.4",xa="undefined"!=typeof global?global:this,ya=Math.round,za=Object.prototype.hasOwnProperty,Aa=0,Ba=1,Ca=2,Da=3,Ea=4,Fa=5,Ga=6,Ha={},Ia=[],Ja="undefined"!=typeof module&&module&&module.exports,Ka=/^\/?Date\((\-?\d+)/i,La=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ma=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Na=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Oa=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Pa=/\d\d?/,Qa=/\d{1,3}/,Ra=/\d{1,4}/,Sa=/[+\-]?\d{1,6}/,Ta=/\d+/,Ua=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Va=/Z|[\+\-]\d\d:?\d\d/gi,Wa=/T/i,Xa=/[\+\-]?\d+/,Ya=/[\+\-]?\d+(\.\d{1,3})?/,Za=/\d/,$a=/\d\d/,_a=/\d{3}/,ab=/\d{4}/,bb=/[+-]?\d{6}/,cb=/[+-]?\d+/,db=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,eb="YYYY-MM-DDTHH:mm:ssZ",fb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],gb=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],hb=/([\+\-]|\d\d)/gi,ib=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),jb={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},kb={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},lb={},mb={s:45,m:45,h:22,d:26,M:11},nb="DDD w W M D d".split(" "),ob="M D H h m s w W".split(" "),pb={M:function(){return this.month()+1},MMM:function(a){return this.localeData().monthsShort(this,a)},MMMM:function(a){return this.localeData().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.localeData().weekdaysMin(this,a)},ddd:function(a){return this.localeData().weekdaysShort(this,a)},dddd:function(a){return this.localeData().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return p(this.year()%100,2)},YYYY:function(){return p(this.year(),4)},YYYYY:function(){return p(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+p(Math.abs(a),6)},gg:function(){return p(this.weekYear()%100,2)},gggg:function(){return p(this.weekYear(),4)},ggggg:function(){return p(this.weekYear(),5)},GG:function(){return p(this.isoWeekYear()%100,2)},GGGG:function(){return p(this.isoWeekYear(),4)},GGGGG:function(){return p(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return A(this.milliseconds()/100)},SS:function(){return p(A(this.milliseconds()/10),2)},SSS:function(){return p(this.milliseconds(),3)},SSSS:function(){return p(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return a<0&&(a=-a,b="-"),b+p(A(a/60),2)+":"+p(A(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return a<0&&(a=-a,b="-"),b+p(A(a/60),2)+p(A(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},qb={},rb=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];nb.length;)va=nb.pop(),pb[va+"o"]=i(pb[va],va);for(;ob.length;)va=ob.pop(),pb[va+va]=h(pb[va],2);pb.DDDD=h(pb.DDD,3),m(j.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;d<12;d++){if(e=ta.utc([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;b<7;b++)if(this._weekdaysParse[b]||(c=ta([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.apply(b,[c]):d},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(a){return a},postformat:function(a){return a},week:function(a){return ha(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),ta=function(b,c,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=b,g._f=c,g._l=e,g._strict=f,g._isUTC=!1,g._pf=d(),ja(g)},ta.suppressDeprecationWarnings=!1,ta.createFromInputFallback=f("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),ta.min=function(){var a=[].slice.call(arguments,0);return ka("isBefore",a)},ta.max=function(){var a=[].slice.call(arguments,0);return ka("isAfter",a)},ta.utc=function(b,c,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=b,g._f=c,g._strict=f,g._pf=d(),ja(g).utc()},ta.unix=function(a){return ta(1e3*a)},ta.duration=function(a,b){var d,e,f,g,h=a,i=null;return ta.isDuration(a)?h={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(h={},b?h[b]=a:h.milliseconds=a):(i=La.exec(a))?(d="-"===i[1]?-1:1,h={y:0,d:A(i[Ca])*d,h:A(i[Da])*d,m:A(i[Ea])*d,s:A(i[Fa])*d,ms:A(i[Ga])*d}):(i=Ma.exec(a))?(d="-"===i[1]?-1:1,f=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*d},h={y:f(i[2]),M:f(i[3]),d:f(i[4]),h:f(i[5]),m:f(i[6]),s:f(i[7]),w:f(i[8])}):"object"==typeof h&&("from"in h||"to"in h)&&(g=r(ta(h.from),ta(h.to)),h={},h.ms=g.milliseconds,h.M=g.months),e=new l(h),ta.isDuration(a)&&c(a,"_locale")&&(e._locale=a._locale),e},ta.version=wa,ta.defaultFormat=eb,ta.ISO_8601=function(){},ta.momentProperties=Ia,ta.updateOffset=function(){},ta.relativeTimeThreshold=function(b,c){return mb[b]!==a&&(c===a?mb[b]:(mb[b]=c,!0))},ta.lang=f("moment.lang is deprecated. Use moment.locale instead.",function(a,b){return ta.locale(a,b)}),ta.locale=function(a,b){var c;return a&&(c="undefined"!=typeof b?ta.defineLocale(a,b):ta.localeData(a),c&&(ta.duration._locale=ta._locale=c)),ta._locale._abbr},ta.defineLocale=function(a,b){return null!==b?(b.abbr=a,Ha[a]||(Ha[a]=new j),Ha[a].set(b),ta.locale(a),Ha[a]):(delete Ha[a],null)},ta.langData=f("moment.langData is deprecated. Use moment.localeData instead.",function(a){return ta.localeData(a)}),ta.localeData=function(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return ta._locale;if(!u(a)){if(b=J(a))return b;a=[a]}return I(a)},ta.isMoment=function(a){return a instanceof k||null!=a&&c(a,"_isAMomentObject")},ta.isDuration=function(a){return a instanceof l};for(va=rb.length-1;va>=0;--va)z(rb[va]);ta.normalizeUnits=function(a){return x(a)},ta.invalid=function(a){var b=ta.utc(NaN);return null!=a?m(b._pf,a):b._pf.userInvalidated=!0,b},ta.parseZone=function(){return ta.apply(null,arguments).parseZone()},ta.parseTwoDigitYear=function(a){return A(a)+(A(a)>68?1900:2e3)},m(ta.fn=k.prototype,{clone:function(){return ta(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date((+this)):this._d},toISOString:function(){var a=ta(this).utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():N(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):N(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return G(this)},isDSTShifted:function(){return!!this._a&&(this.isValid()&&w(this._a,(this._isUTC?ta.utc(this._a):ta(this._a)).toArray())>0)},parsingFlags:function(){return m({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(a){return this.zone(0,a)},local:function(a){return this._isUTC&&(this.zone(0,a),this._isUTC=!1,a&&this.add(this._dateTzOffset(),"m")),this},format:function(a){var b=N(this,a||ta.defaultFormat);return this.localeData().postformat(b)},add:s(1,"add"),subtract:s(-1,"subtract"),diff:function(a,b,c){var d,e,f,g=K(a,this),h=6e4*(this.zone()-g.zone());return b=x(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+g.daysInMonth()),e=12*(this.year()-g.year())+(this.month()-g.month()),f=this-ta(this).startOf("month")-(g-ta(g).startOf("month")),f-=6e4*(this.zone()-ta(this).startOf("month").zone()-(g.zone()-ta(g).startOf("month").zone())),e+=f/d,"year"===b&&(e/=12)):(d=this-g,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-h)/864e5:"week"===b?(d-h)/6048e5:d),c?e:o(e)},from:function(a,b){return ta.duration({to:this,from:a}).locale(this.locale()).humanize(!b)},fromNow:function(a){return this.from(ta(),a)},calendar:function(a){var b=a||ta(),c=K(b,this).startOf("day"),d=this.diff(c,"days",!0),e=d<-6?"sameElse":d<-1?"lastWeek":d<0?"lastDay":d<1?"sameDay":d<2?"nextDay":d<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(e,this,ta(b)))},isLeapYear:function(){return E(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=ea(a,this.localeData()),this.add(a-b,"d")):b},month:oa("Month",!0),startOf:function(a){switch(a=x(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(b){return b=x(b),b===a||"millisecond"===b?this:this.startOf(b).add(1,"isoWeek"===b?"week":b).subtract(1,"ms")},isAfter:function(a,b){var c;return b=x("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=ta.isMoment(a)?a:ta(a),+this>+a):(c=ta.isMoment(a)?+a:+ta(a),c<+this.clone().startOf(b))},isBefore:function(a,b){var c;return b=x("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=ta.isMoment(a)?a:ta(a),+this<+a):(c=ta.isMoment(a)?+a:+ta(a),+this.clone().endOf(b)<c)},isSame:function(a,b){var c;return b=x(b||"millisecond"),"millisecond"===b?(a=ta.isMoment(a)?a:ta(a),+this===+a):(c=+ta(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))},min:f("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(a){return a=ta.apply(null,arguments),a<this?this:a}),max:f("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(a){return a=ta.apply(null,arguments),a>this?this:a}),zone:function(a,b){var c,d=this._offset||0;return null==a?this._isUTC?d:this._dateTzOffset():("string"==typeof a&&(a=Q(a)),Math.abs(a)<16&&(a=60*a),!this._isUTC&&b&&(c=this._dateTzOffset()),this._offset=a,this._isUTC=!0,null!=c&&this.subtract(c,"m"),d!==a&&(!b||this._changeInProgress?t(this,ta.duration(d-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,ta.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?ta(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return B(this.year(),this.month())},dayOfYear:function(a){var b=ya((ta(this).startOf("day")-ta(this).startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=ha(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")},isoWeekYear:function(a){var b=ha(this,1,4).year;return null==a?b:this.add(a-b,"y")},week:function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")},isoWeek:function(a){var b=ha(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},weekday:function(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return C(this.year(),1,4)},weeksInYear:function(){var a=this.localeData()._week;return C(this.year(),a.dow,a.doy)},get:function(a){return a=x(a),this[a]()},set:function(a,b){return a=x(a),"function"==typeof this[a]&&this[a](b),this},locale:function(b){var c;return b===a?this._locale._abbr:(c=ta.localeData(b),null!=c&&(this._locale=c),this)},lang:f("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(b){return b===a?this.localeData():this.locale(b)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),ta.fn.millisecond=ta.fn.milliseconds=oa("Milliseconds",!1),ta.fn.second=ta.fn.seconds=oa("Seconds",!1),ta.fn.minute=ta.fn.minutes=oa("Minutes",!1),ta.fn.hour=ta.fn.hours=oa("Hours",!0),ta.fn.date=oa("Date",!0),ta.fn.dates=f("dates accessor is deprecated. Use date instead.",oa("Date",!0)),ta.fn.year=oa("FullYear",!0),ta.fn.years=f("years accessor is deprecated. Use year instead.",oa("FullYear",!0)),ta.fn.days=ta.fn.day,ta.fn.months=ta.fn.month,ta.fn.weeks=ta.fn.week,ta.fn.isoWeeks=ta.fn.isoWeek,ta.fn.quarters=ta.fn.quarter,ta.fn.toJSON=ta.fn.toISOString,m(ta.duration.fn=l.prototype,{_bubble:function(){var a,b,c,d=this._milliseconds,e=this._days,f=this._months,g=this._data,h=0;g.milliseconds=d%1e3,a=o(d/1e3),g.seconds=a%60,b=o(a/60),g.minutes=b%60,c=o(b/60),g.hours=c%24,e+=o(c/24),h=o(pa(e)),e-=o(qa(h)),f+=o(e/30),e%=30,h+=o(f/12),f%=12,g.days=e,g.months=f,g.years=h},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return o(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*A(this._months/12)},humanize:function(a){var b=ga(this,!a,this.localeData());return a&&(b=this.localeData().pastFuture(+this,b)),this.localeData().postformat(b)},add:function(a,b){var c=ta.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=ta.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=x(a),this[a.toLowerCase()+"s"]()},as:function(a){var b,c;if(a=x(a),"month"===a||"year"===a)return b=this._days+this._milliseconds/864e5,c=this._months+12*pa(b),"month"===a?c:c/12;switch(b=this._days+Math.round(qa(this._months/12)),a){case"week":return b/7+this._milliseconds/6048e5;case"day":return b+this._milliseconds/864e5;case"hour":return 24*b+this._milliseconds/36e5;case"minute":return 24*b*60+this._milliseconds/6e4;case"second":return 24*b*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*b*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+a)}},lang:ta.fn.lang,locale:ta.fn.locale,toIsoString:f("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"},localeData:function(){return this._locale}}),ta.duration.fn.toString=ta.duration.fn.toISOString;for(va in ib)c(ib,va)&&ra(va.toLowerCase());ta.duration.fn.asMilliseconds=function(){return this.as("ms")},ta.duration.fn.asSeconds=function(){return this.as("s")},ta.duration.fn.asMinutes=function(){return this.as("m")},ta.duration.fn.asHours=function(){return this.as("h")},ta.duration.fn.asDays=function(){return this.as("d")},ta.duration.fn.asWeeks=function(){return this.as("weeks")},ta.duration.fn.asMonths=function(){return this.as("M")},ta.duration.fn.asYears=function(){return this.as("y")},ta.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===A(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),Ja?module.exports=ta:"function"==typeof define&&define.amd?(define("moment",function(a,b,c){return c.config&&c.config()&&c.config().noGlobal===!0&&(xa.moment=ua),ta}),sa(!0)):sa()}.call(this);var invSearch={Init:function(){var a=kendo.observable(new invSearch.SearchModel);kendo.bind($("#dvInvSearch"),a),a.loadInvoice(),a.loadErrorMessages()},deleteInv:function(){return kendo.template($("#deleteInvTpl").html())},createOrderInv:function(){return kendo.template($("#createOrderInvTpl").html())},displayInv:function(){return kendo.template($("#displayInvTpl").html())},selectMyOrdersTemplate:function(){return kendo.template($("#selectMyOrdersTpl").html())},dateMyOrdersTemplate:function(){return kendo.template($("#dateMyOrdersTpl").html())},statusTemplate:function(){return kendo.template($("#statusInvTpl").html())},SearchModel:function(){this.isLoading=!0,this.isLoaded=!1,this.from="",this.to="",this.filterBy="",this.filterValue="",this.invoices=[],this.ListEmpty=!1,this.selectedFilterItem=null,this.filterByValue="",this.currentInvoiceId=0,this.memberInvoiceNumber=0,this.myOrdersFilter="",this.index_Invoice_Action=window.index_Invoice_Action,this.myOrdersErrorText="",this.errorMessages=[],this.statusUpdateText="",this.loadInvoice=function(){var a=this;"Invoice_Search"==this.index_Invoice_Action&&(kendo.ui.progress($("#loading"),!0),$.ajax({type:"get",dataType:"json",cache:!0,url:"/Ordering/api/InvoiceSearch/LoadAll",success:function(b){a.dataHandler(b)},error:function(){a.error=!0},complete:function(){kendo.ui.progress($("#loading"),!1)}}))},this.filterCategoriesSource=new kendo.data.DataSource({type:"json",transport:{read:{url:"/Ordering/api/InvoiceSearch/LoadFilterCategory"}}}),this.statusDataSource=new kendo.data.DataSource({type:"json",transport:{read:{url:"/Ordering/api/InvoiceBase/LoadStatus"}}}),this.onStatusChange=function(a){var b=this,c={Id:a.data.Id,Status:a.data.Status};kendo.ui.progress($("#loading"),!0),$.ajax({url:"/Ordering/api/InvoiceBase/UpdateStatus",type:"POST",data:JSON.stringify(c),contentType:"application/json; charset=utf-8",success:function(a){a?b.set("statusUpdateText",b.errorMessages.statusUpdateText):b.set("statusUpdateText","")},error:function(a){},complete:function(){kendo.ui.progress($("#loading"),!1),b.loadInvoice()}})},this.loadErrorMessages=function(){if("Invoice_Search"==this.index_Invoice_Action){var a=this;$.ajax({type:"get",dataType:"json",cache:!0,url:"/Ordering/api/InvoiceEdit/LoadErrorMessage",success:function(b){b&&a.set("errorMessages",b)},error:function(){a.error=!0},complete:function(){}})}},this.doSearch=function(){var a=this,b={From:this.from,To:this.to};null!=this.selectedFilterItem&&(b.SelectedFilterId=this.selectedFilterItem,b.SelectedFilterValue=this.filterByValue),kendo.ui.progress($("#loading"),!0),$.ajax({url:"/Ordering/api/InvoiceSearch/Filter",type:"POST",data:JSON.stringify(b),contentType:"application/json; charset=utf-8",success:function(b){a.dataHandler(b)},error:function(a){},complete:function(){
a.set("statusUpdateText",""),kendo.ui.progress($("#loading"),!1)}})},this.doClear=function(){this.set("from",""),this.set("to",""),this.set("filterByValue",""),this.set("selectedFilterItem",null),this.set("statusUpdateText",""),this.loadInvoice()},this.dataHandler=function(a){a&&(this.set("invoices",a),this.set("isLoading ",!1),this.set("isLoaded ",!0),0==this.invoices.length?this.set("ListEmpty",!0):this.set("ListEmpty",!1))},this.viewDeletePopUp=function(a){var b=this,c=a.data.DisplayMemberInvoiceNumber,d=a.data.Id;if(b.set("currentInvoiceId",d),b.set("memberInvoiceNumber",c),0!=d){var e=$("#confirmDeleteInvoice").data("kendoWindow");e.center().open()}},this.closeDeleteInvoice=function(){var a=$("#confirmDeleteInvoice").data("kendoWindow");a&&a.close()},this.DeleteInvoice=function(){var a=this,b=this.currentInvoiceId;$.ajax({url:"/Ordering/api/InvoiceSearch/Delete/"+b,type:"POST",contentType:"application/json; charset=utf-8",success:function(){},error:function(){},complete:function(){a.loadInvoice(),a.closeDeleteInvoice()}})},this.createOrderRedirect=function(){$.ajax({url:"/Ordering/Invoice/CreateOrderRedirect/",type:"POST",contentType:"application/json; charset=utf-8",success:function(){},error:function(){},complete:function(){}})},this.clickMyOrders=function(){kendo.ui.progress($("#loading"),!0);var a=$("#dvInvMyOrders").data("kendoWindow");a.center().open(),this.myOrdersDataSource.read(),kendo.ui.progress($("#loading"),!1)},this.selectMyOrders=function(a){return window.location.href="/Ordering/Invoice/EditByOrderId/"+a.data.Id,!1},this.searchMyOrders=function(){this.myOrdersDataSource.filter([{logic:"or",filters:[{field:"Id",operator:"startswith",value:this.myOrdersFilter},{field:"Name",operator:"startswith",value:this.contactsFilter}]}])},this.myOrdersDataSource=new kendo.data.DataSource({type:"json",serverFiltering:!0,serverPaging:!0,pageSize:10,transport:{read:{url:"/Ordering/api/MyOrders",type:"POST"}},schema:{data:function(a){return a&&a.Items&&a.Items.$values?a.Items.$values:a&&a.Items?a.Items:null},total:function(a){return a?a.TotalCount:0}},requestStart:function(a){kendo.ui.progress($("#dgMyOrders"),!0)},requestEnd:function(a){kendo.ui.progress($("#dgMyOrders"),!1)}}),this.myOrdersDataBound=function(a){kendo.ui.progress($("#dgMyOrders"),!1),this.myOrdersDataSource&&0==this.myOrdersDataSource.total()?this.set("myOrdersErrorText",this.errorMessages.myOrdersError):this.set("myOrdersErrorText","")},this.loadMyOrders=function(){var a=this;$.ajax({type:"get",dataType:"json",cache:!0,url:"/Ordering/api/MyOrders",success:function(b){a.set("myOrders",b)},error:function(){a.error=!0},beforeSend:function(){kendo.ui.progress($("#dgMyOrders"),!0)},complete:function(){kendo.ui.progress($("#dgMyOrders"),!1)}})},this.ExportToCSV=function(){kendo.ui.progress($("#loading"),!0);for(var a="Invoices.csv",b=$("#dgInvoices").data("kendoGrid"),c="",d=b.dataSource.view(),e=0;e<b.columns.length;e++){var f=b.columns[e].field,g=b.columns[e].title||f;f&&"Delete"!=f&&"CreateOrder"!=f&&(g=g.replace(/"/g,'""'),c+='"'+g+'"',e<b.columns.length-1&&(c+=","))}c+="\n";for(var h in d){for(var e=0;e<b.columns.length;e++){var i=b.columns[e].field;if(i&&"Delete"!=i&&"CreateOrder"!=i){var j="";if(i.indexOf(".")>=0)for(var k=i.split("."),j=d[h]||"",l=0;l<k.length;l++){var m=k[l];j=j[m]||""}else j=d[h][i]||"";j=j.toString().replace(/"/g,'""'),c+='"'+j+'"',e<b.columns.length-1&&(c+=",")}}c+="\n"}var n=new Blob([c],{type:"text/csv;charset=utf-8"});saveAs(n,a),kendo.ui.progress($("#loading"),!1)}}};$(function(){invSearch.Init()});var invEdit={Init:function(){var a=RedirectToReceipts();if(a)return window.location=a,!1;var b=kendo.observable(new invEdit.invoiceEditViewModel);kendo.bind($("#dvInvEdit"),b),b.loadInvoicedata(),b.loadErrorMessages()},productquantityTemplate:function(){return kendo.template($("#ProductQuantityInvTpl").html())},productTotalPriceTemplate:function(){return kendo.template($("#ProductTotalPriceInvTpl").html())},deleteProductTemplate:function(){return kendo.template($("#deleteProductTpl").html())},selectContactTemplate:function(){return kendo.template($("#selectContactTpl").html())},savedCartsTemplate:function(){return kendo.template($("#savedCartsTpl").html())},savedDateTemplate:function(){return kendo.template($("#savedDateTpl").html())},productDescTemplate:function(){return kendo.template($("#productDescTpl").html())},validator:function(){return $("#dvInvEdit").kendoValidator({rules:{ProductValidation:function(a){if("individual-products"==a[0].id){var b=a.prop("kendoBindingTarget").source;return!(!b.invoice.InvoiceLines||0==b.invoice.InvoiceLines.length)&&(b.set("validIndProducts",!0),!0)}return!0}},messages:{ProductValidation:function(a){var b=a.prop("kendoBindingTarget").source;return b.errorMessages.reqProducts}}}).data("kendoValidator")},invoiceEditViewModel:function(){this.isLoading=!0,this.isLoaded=!1,this.invoice=null,this.stateSelected=null,this.rootCategories=[],this.contacts=[],this.selectedRootCategoryItem=null,this.categories=[],this.contactsFilter="",this.productsFilter="",this.savedCartsFilter="",this.autocompleteData=[],this.savedCarts=[],this.selectedProduct=null,this.edit_InvoiceId=window.edit_InvoiceId,this.edit_OrderId=window.edit_OrderId,this.edit_CopyInvoiceId=window.edit_CopyInvoiceId,this.statusSelected="Unpaid",this.memberAddressstateSelected=null,this.errorMessages=[],this.selectedAddress=null,this.selectedIdAddress=null,this.errorText="",this.edit_Invoice_Action=window.edit_Invoice_Action,this.productSearchErrorText="",this.addProductErrorText="",this.contactsErrorText="",this.edit_Order_Source=window.edit_Order_Source,this.edit_Invoice_Date=window.edit_Invoice_Date,this.priceAlertText="",this.memberTaxEdit=!1,this.memberShippingEdit=!1,this.IsEditTaxClickClicked=!1,this.IsEditHandlingFeeClicked=!1,this.validIndProducts=!1,this.editHandlingFeeClick=function(){this.set("IsEditHandlingFeeClicked",!0)},this.editTaxClick=function(){this.set("IsEditTaxClickClicked",!0)},this.onMemberHandlingFeeChange=function(){this.invoice.set("IsMemberHandlingFeeEdited",!0),this.calculateMemberTotal()},this.onMemberTaxChange=function(){this.invoice.set("IsMemberTaxEdited",!0),this.calculateMemberTotal()},this.saveChanges=function(){if(invEdit.validator().validate()){var a=this,b=this.invoice;this.statusSelected&&(this.statusSelected.Value?b.Status=this.statusSelected.Value:b.Status=this.statusSelected),this.stateSelected&&(this.stateSelected.Value?b.Address.StateStatus=this.stateSelected.Value:"object"==typeof this.stateSelected?b.Address.State="":b.Address.State=this.stateSelected),b.InvoiceDate&&(b.InvoiceDate=new Date(moment(b.InvoiceDate))),$.ajax({url:"/Ordering/api/InvoiceEdit/Post",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(b),success:function(b){b&&(b.IsSuccess?(a.set("errorText",""),a.setInvoiceData(b.InvoiceModel),window.location.href="/Ordering/Invoice/Display/"+a.invoice.Id):a.set("errorText",a.errorMessages[b.ErrorCodeKey]))},error:function(a){},beforeSend:function(){kendo.ui.progress($("#dvCustomerPricingInfo"),!0),kendo.ui.progress($("#dvinvPricing"),!0)},complete:function(){kendo.ui.progress($("#dvCustomerPricingInfo"),!1),kendo.ui.progress($("#dvinvPricing"),!1)}})}else{var c=$("#individual-products"),d=c.prop("kendoBindingTarget").source;invEdit.validator().validateInput("#status")?invEdit.validator().validateInput("#first-name")?d.get("validIndProducts")?this.invoice.InvoiceShipToAddress&&$.ajax({url:"/Ordering/api/InvoiceEdit/Post",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(b),success:function(b){b&&(b.IsSuccess?(a.set("errorText",""),a.setInvoiceData(b.InvoiceModel),window.location.href="/Ordering/Invoice/Display/"+a.invoice.Id):a.set("errorText",a.errorMessages[b.ErrorCodeKey]))},error:function(a){},beforeSend:function(){kendo.ui.progress($("#dvCustomerPricingInfo"),!0),kendo.ui.progress($("#dvinvPricing"),!0)},complete:function(){kendo.ui.progress($("#dvCustomerPricingInfo"),!1),kendo.ui.progress($("#dvinvPricing"),!1)}}):invEdit.scrollTo("#individual-products"):invEdit.scrollTo("#first-name"):invEdit.scrollTo('[for="status"]')}},this.invoiceAddressClick=function(a){a.preventDefault(),this.invoice.set("InvoiceShipToAddress",this.invoice.InvoiceShipToAddress),this.calculateBasePrice()},this.invoiceTypeClick=function(a){var b=$("#dgProducts").data("kendoGrid");this.invoice.set("InvoicePrice",new invEdit.InvoicePriceModel),"Distributor"==this.invoice.Type?(b.showColumn("EarnBase"),this.invoice.set("IsGdoMemberPricing",!0),this.invoice.InvoicePrice.set("DiscountAmount",0),this.invoice.InvoicePrice.set("DiscountPercentage",25),this.invoice.InvoicePrice.set("TaxAmount",0),this.invoice.InvoicePrice.set("TaxPercentage",0),this.invoice.InvoicePrice.set("ShippingAmount",0),this.invoice.InvoicePrice.set("ShippingPercentage",0)):(b.hideColumn("EarnBase"),this.invoice.set("IsGdoMemberPricing",!1),this.invoice.InvoicePrice.set("DiscountAmount",0),this.invoice.InvoicePrice.set("TaxAmount",0),this.invoice.InvoicePrice.set("TaxPercentage",0),this.invoice.InvoicePrice.set("DiscountPercentage",0),this.invoice.InvoicePrice.set("ShippingAmount",0),this.invoice.InvoicePrice.set("ShippingPercentage",0))},this.onInvoiceLinesDataBinding=function(a){var b=a.sender;"Distributor"==this.invoice.Type?b.showColumn("EarnBase"):b.hideColumn("EarnBase")},this.calculateMemberTotal=function(){var a=this,b=this.invoice;$.ajax({url:"/Ordering/api/InvoiceEdit/CalculateMemberTotal",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(b),success:function(b){b&&a.setInvoiceData(b)},error:function(a){},beforeSend:function(){kendo.ui.progress($("#dvCustomerPricingInfo"),!0)},complete:function(){kendo.ui.progress($("#dvCustomerPricingInfo"),!1)}})},this.calculateBasePrice=function(){var a=this;$("#priceInfoText").removeClass("red"),$("#priceInfoText").addClass("red");var b=this.invoice;$.ajax({url:"/Ordering/api/InvoiceEdit/CalculateBasicPrice",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(b),success:function(b){b&&a.setInvoiceData(b)},error:function(a){},beforeSend:function(){kendo.ui.progress($("#dvCustomerPricingInfo"),!0)},complete:function(){kendo.ui.progress($("#dvCustomerPricingInfo"),!1)}})},this.calculateTotalDue=function(){var a=this;$("#priceInfoText").removeClass("red"),$("#priceInfoText").addClass("red");var b=this.invoice;$.ajax({url:"/Ordering/api/InvoiceEdit/CalculateTotalDue",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(b),success:function(b){b&&a.setInvoiceData(b)},error:function(a){},beforeSend:function(){kendo.ui.progress($("#dvCustomerPricingInfo"),!0)},complete:function(){kendo.ui.progress($("#dvCustomerPricingInfo"),!1)}})},this.price=function(){if($("#priceInfoText").removeClass("red"),invEdit.validator().validate()){var a=this,b=this.invoice;this.stateSelected&&(this.stateSelected.Value?b.Address.StateStatus=this.stateSelected.Value:"object"==typeof this.stateSelected?b.Address.State="":b.Address.State=this.stateSelected),$.ajax({url:"/Ordering/api/InvoiceEdit/Price",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(b),success:function(b){b&&(b.IsSuccess?(a.set("errorText",""),a.setInvoiceData(b.InvoiceModel),b.InvoiceModel&&a.invoice.set("ResetCustomerTaxValue",!1),b.InvoiceModel.Address&&b.InvoiceModel.Address.State&&a.set("stateSelected",{Value:b.InvoiceModel.Address.State})):(a.set("errorText",a.errorMessages[b.ErrorCodeKey]),a.invoice.InvoicePrice.set("ShippingAmount",0),a.invoice.InvoicePrice.set("TaxAmount",0),a.invoice.InvoicePrice.set("DisplayShipping",b.InvoiceModel.InvoicePrice.DisplayShipping),a.invoice.InvoicePrice.set("DisplayCalculatedTax",b.InvoiceModel.InvoicePrice.DisplayCalculatedTax),a.invoice.InvoicePrice.set("DisplayTotalDue",b.InvoiceModel.InvoicePrice.DisplaySubtotal)))},error:function(a){},beforeSend:function(){kendo.ui.progress($("#dvCustomerPricingInfo"),!0),kendo.ui.progress($("#dvinvPricing"),!0)},complete:function(){kendo.ui.progress($("#dvCustomerPricingInfo"),!1),kendo.ui.progress($("#dvinvPricing"),!1)}})}else{var c=$("#individual-products"),d=c.prop("kendoBindingTarget").source;invEdit.validator().validateInput("#status")?invEdit.validator().validateInput("#first-name")?invEdit.validator().validateInput("#street-address")?invEdit.validator().validateInput("#city")?invEdit.validator().validateInput("#zip-code")?d.get("validIndProducts")||invEdit.scrollTo("#individual-products"):invEdit.scrollTo("[for='zip-code']"):invEdit.scrollTo("[for='city']"):invEdit.scrollTo("#street-address"):invEdit.scrollTo("#first-name"):invEdit.scrollTo('[for="status"]')}},this.cancel=function(){return window.location.href="/Ordering/Invoice",!1},this.ChangeClicked=function(){kendo.ui.progress($("#loading"),!0);var a=$("#dvMemberAddress").data("kendoWindow");a.center().open(),this.memberAddressDataSource.read(),kendo.ui.progress($("#loading"),!1)},this.onChangeAddress=function(){var a=this;$.ajax({type:"get",dataType:"json",cache:!0,data:JSON.stringify(a.selectedAddress),url:"/Ordering/api/InvoiceEdit/FilterShippingAddress/"+a.selectedIdAddress,success:function(b){a.set("selectedAddress",b)},error:function(){a.error=!0},beforeSend:function(){kendo.ui.progress($("#changeAddressDetails"),!0)},complete:function(){kendo.ui.progress($("#changeAddressDetails"),!1)}})},this.AddressChanged=function(){var a=this;a.invoice&&(a.invoice.MemberAddress=a.selectedAddress);var b=$("#dvMemberAddress").data("kendoWindow");b.center().close(),a.calculateBasePrice()},this.onQuantityChange=function(){this.calculateBasePrice()},this.autocompleteDataSource=new kendo.data.DataSource({type:"json",serverFiltering:!0,serverPaging:!0,pageSize:20,transport:{read:{url:"/Ordering/api/InvoiceBase/LoadProductsForAutocomplete"},parameterMap:function(){return{startsWith:$("#individual-products").data("kendoAutoComplete").value(),type:$("#taxAmount").prop("kendoBindingTarget").source.invoice.Type}}}}),this.statusDataSource=new kendo.data.DataSource({type:"json",transport:{read:{url:"/Ordering/api/InvoiceBase/LoadStatus"}}}),this.statesDataSource=new kendo.data.DataSource({type:"json",transport:{read:{url:"/Ordering/api/InvoiceBase/LoadStates"}}}),this.memberAddressDataSource=new kendo.data.DataSource({type:"json",transport:{read:{url:"/Ordering/api/InvoiceEdit/GetShippingAddress"}}}),this.contactsDataSource=new kendo.data.DataSource({type:"json",serverFiltering:!0,serverPaging:!0,pageSize:10,transport:{read:{url:"/Bizworks/api/Contacts",type:"POST"}},schema:{data:function(a){return a&&a.Items?a.Items:null},total:function(a){return a?a.TotalCount:0}},requestStart:function(a){kendo.ui.progress($("#dgContacts"),!0)},requestEnd:function(a){kendo.ui.progress($("#dgContacts"),!1)}}),this.discountsDataSource=new kendo.data.DataSource({type:"json",transport:{read:{url:"/Ordering/api/InvoiceEdit/GetMemberDiscounts"}}}),this.loadErrorMessages=function(){if("Invoice_Edit"==this.edit_Invoice_Action){var a=this;$.ajax({type:"get",dataType:"json",cache:!0,url:"/Ordering/api/InvoiceEdit/LoadErrorMessage",success:function(b){b&&a.set("errorMessages",b)},error:function(){a.error=!0},complete:function(){}})}},this.loadInvoicedata=function(){var a=this;if("Invoice_Edit"==this.edit_Invoice_Action)if(0==a.edit_InvoiceId&&""!=a.edit_OrderId&&0==a.edit_CopyInvoiceId){var b={OrderId:a.edit_OrderId,Source:a.edit_Order_Source};$.ajax({url:"/Ordering/api/InvoiceEdit/GetInvoiceFromOrderId",type:"POST",data:JSON.stringify(b),contentType:"application/json; charset=utf-8",success:function(b){a.setInvoiceData(b),a.set("statusSelected",{Value:b.Status}),a.set("stateSelected",{Value:b.Address.State}),a.loadShippingAddress()},error:function(a){},beforeSend:function(){kendo.ui.progress($("#loading"),!0)},complete:function(){kendo.ui.progress($("#loading"),!1)}})}else if(a.edit_InvoiceId>0&&""==a.edit_OrderId&&0==a.edit_CopyInvoiceId){var c=a.edit_InvoiceId;$.ajax({type:"get",dataType:"json",cache:!0,data:JSON.stringify(c),url:"/Ordering/api/InvoiceSearch/Load/"+c,success:function(b){return b&&b.Id>0?(a.setInvoiceData(b),a.set("statusSelected",{Value:b.Status}),a.set("stateSelected",{Value:b.Address.State}),void 0):(window.location.href="/Ordering/Invoice",!1)},error:function(){a.error=!0},beforeSend:function(){kendo.ui.progress($("#loading"),!0)},complete:function(){kendo.ui.progress($("#loading"),!1)}})}else if(0==a.edit_InvoiceId&&""==a.edit_OrderId&&a.edit_CopyInvoiceId>0){var c=a.edit_CopyInvoiceId;$.ajax({type:"get",dataType:"json",cache:!0,data:JSON.stringify(c),url:"/Ordering/api/InvoiceEdit/Copy/"+c,success:function(b){b&&(a.setInvoiceData(b),a.set("statusSelected",{Value:b.Status}),a.set("stateSelected",{Value:b.Address.State}))},error:function(){a.error=!0},beforeSend:function(){kendo.ui.progress($("#loading"),!0)},complete:function(){kendo.ui.progress($("#loading"),!1)}})}else a.set("invoice",new invEdit.InvoiceModel),a.invoice.set("InvoiceDate",new Date(moment(a.edit_Invoice_Date))),$.ajax({type:"get",dataType:"json",cache:!0,url:"/Ordering/api/InvoiceEdit/LoadMemberAddress",success:function(b){b&&(a.invoice.set("MemberAddress",b),a.invoice.set("HasShippingAddress",!0)),null==b&&(a.invoice.set("InvoiceShipToAddress",!0),a.invoice.set("HasShippingAddress",!1))},error:function(){a.error=!0},beforeSend:function(){kendo.ui.progress($("#dvinvProduct"),!0)},complete:function(){kendo.ui.progress($("#dvinvProduct"),!1)}})},this.setInvoiceData=function(a){a&&(this.set("invoice",a),this.invoice.set("InvoiceDate",new Date(moment(a.InvoiceDate))),this.set("stateSelected",{Value:a.Address.State}))},this.onRootCategoryChange=function(){if(this.selectedRootCategoryItem){this.loadCategories(this.selectedRootCategoryItem.Id);var a=$("#pager").data("kendoPager");a.page(1)}},this.dataBound=function(a){a.sender.expandRow(a.sender.tbody.find("tr.k-master-row").first())},this.contactsDataBound=function(a){kendo.ui.progress($("#dgContacts"),!1),this.contactsDataSource&&0==this.contactsDataSource.total()?this.set("contactsErrorText",this.errorMessages.contactsError):this.set("contactsErrorText","")},this.clickContacts=function(){kendo.ui.progress($("#loading"),!0);var a=$("#dvInvContacts").data("kendoWindow");a.center().open(),this.contactsDataSource.read(),kendo.ui.progress($("#loading"),!1)},this.clickProducts=function(){kendo.ui.progress($("#loading"),!0),this.loadRootCategories();var a=$("#dvInvProducts").data("kendoWindow");a.center().open(),kendo.ui.progress($("#loading"),!1)},this.clickSavedCarts=function(){kendo.ui.progress($("#loading"),!0),this.loadSavedCarts();var a=$("#dvSavedCarts").data("kendoWindow");a.center().open(),kendo.ui.progress($("#loading"),!1)},this.addProducts=function(){kendo.ui.progress($("#loading"),!0);var a=this,b=this.get("selectedProduct"),c=!1;if(null!=b&&null!=b.Sku){for(var d=0;d<a.invoice.InvoiceLines.length;d++)if(a.invoice.InvoiceLines[d].Sku==b.Sku){a.invoice.InvoiceLines[d].set("Quantity",a.invoice.InvoiceLines[d].Quantity+b.Quantity),c=!0;break}c||null==b||null==b.Sku||a.invoice.InvoiceLines.push(b),null!=b&&null!=b.Sku&&(a.set("selectedProduct",null),a.calculateBasePrice(),invEdit.validator().hideMessages(),$("#individual-products").removeClass("k-invalid")),a.set("addProductErrorText","")}else a.set("addProductErrorText",a.errorMessages.productSearchError);kendo.ui.progress($("#loading"),!1)},this.deleteProducts=function(a){var b=this;b.invoice.InvoiceLines.remove(a.data),b.calculateBasePrice()},this.onProductChange=function(){var a=this.get("selectedProduct");alert(a.Sku),alert(kendo.stringify(a))},this.loadRootCategories=function(){var a=this;$.when($.ajax({type:"get",dataType:"json",cache:!0,url:"/Ordering/api/InvoiceBase/LoadRootCategories",success:function(b){a.set("rootCategories",b),b&&a.set("selectedRootCategoryItem",b[0])},error:function(){a.error=!0},beforeSend:function(){kendo.ui.progress($("#products-search"),!0)},complete:function(){kendo.ui.progress($("#products-search"),!1)}})).then(function(){a.selectedRootCategoryItem&&a.loadCategories(a.selectedRootCategoryItem.Id),kendo.ui.progress($("#products-search"),!1)})},this.loadCategories=function(a){var b=this;$.ajax({type:"get",dataType:"json",cache:!0,url:"/Ordering/api/InvoiceBase/LoadCategories/"+a+"/"+b.invoice.Type,success:function(a){b.set("categories",a)},error:function(){b.error=!0},beforeSend:function(){kendo.ui.progress($("#lvProducts"),!0)},complete:function(){kendo.ui.progress($("#lvProducts"),!1)}})},this.selectCategory=function(a){a.preventDefault();var b=this,c=$(a.target).data("parameter"),d=null;$.ajax({type:"get",dataType:"json",cache:!0,async:!0,url:"/Ordering/api/InvoiceBase/GetInvoiceLineModel/"+c+"/"+b.invoice.Type,success:function(a){if(a){d=a;var e=!1;if(null!=d){null==b.invoice&&b.set("invoice",new invEdit.InvoiceModel);for(var f=0;f<b.invoice.InvoiceLines.length;f++)if(b.invoice.InvoiceLines[f].Sku==c){b.invoice.InvoiceLines[f].set("Quantity",b.invoice.InvoiceLines[f].Quantity+d.Quantity),e=!0;break}e||b.invoice.InvoiceLines.push(d),b.calculateBasePrice(),invEdit.validator().hideMessages(),$("#individual-products").removeClass("k-invalid")}}},error:function(){},beforeSend:function(){kendo.ui.progress($("#lvProducts"),!0)},complete:function(){kendo.ui.progress($("#lvProducts"),!1)}})},this.selectContact=function(a){a.preventDefault(),this.invoice&&(this.invoice.set("FirstName",a.data.FirstName),this.invoice.set("LastName",a.data.LastName),this.invoice.set("Phone",a.data.PhoneNumber),this.invoice.set("Email",a.data.PrimaryEmailAddress),this.invoice.Address&&(this.invoice.Address.set("Address1",a.data.StreetAddress1),this.invoice.Address.set("City",a.data.City),this.invoice.Address.set("State",a.data.State),this.set("stateSelected",a.data.State),this.invoice.Address.set("PostalCode",a.data.PostalCode),this.invoice.Address.set("Country",a.data.Country)));var b=$("#dvInvContacts").data("kendoWindow");b&&b.close()},this.selectSavedCarts=function(a){a.preventDefault();var b=this,c=a.data.Id;$.ajax({url:"/Ordering/api/InvoiceEdit/GetInvoiceFromCartId",type:"POST",data:{"":c},success:function(a){b.setInvoiceData(a);var c=$("#dvSavedCarts").data("kendoWindow");c&&c.close()},error:function(a){},beforeSend:function(){kendo.ui.progress($("#loading"),!0)},complete:function(){kendo.ui.progress($("#loading"),!1)}})},this.searchSavedCarts=function(){var a=this;$.ajax({type:"get",dataType:"json",cache:!0,data:JSON.stringify(this.savedCartsFilter),url:"/Ordering/api/InvoiceEdit/FilterSavedCarts/"+this.savedCartsFilter,success:function(b){a.set("savedCarts",b)},error:function(){a.error=!0},beforeSend:function(){kendo.ui.progress($("#dgSavedCarts"),!0)},complete:function(){kendo.ui.progress($("#dgSavedCarts"),!1)}})},this.loadSavedCarts=function(){var a=this;$.ajax({type:"get",dataType:"json",cache:!0,url:"/Ordering/api/InvoiceEdit/LoadSavedCarts",success:function(b){b&&a.set("savedCarts",b)},error:function(){a.error=!0},beforeSend:function(){kendo.ui.progress($("#dgSavedCarts"),!0)},complete:function(){kendo.ui.progress($("#dgSavedCarts"),!1)}})},this.SearchContacts=function(){this.contactsDataSource.filter([{logic:"or",filters:[{field:"FirstName",operator:"startswith",value:this.contactsFilter},{field:"LastName",operator:"startswith",value:this.contactsFilter}]}])},this.SearchProducts=function(){var a=this,b={RootCategoryId:this.selectedRootCategoryItem.Id,Filter:this.productsFilter,Type:this.invoice.Type};$.ajax({url:"/Ordering/api/InvoiceBase/SearchCategories",type:"POST",data:JSON.stringify(b),contentType:"application/json; charset=utf-8",success:function(b){b&&b.length>0?a.set("productSearchErrorText",""):a.set("productSearchErrorText",a.errorMessages.productSearchError),a.set("categories",b)},error:function(a){},beforeSend:function(){kendo.ui.progress($("#lvProducts"),!0)},complete:function(){kendo.ui.progress($("#lvProducts"),!1)}})},this.loadShippingAddress=function(){var a=this;"Invoice_Edit"==this.edit_Invoice_Action&&$.ajax({type:"get",dataType:"json",cache:!0,url:"/Ordering/api/InvoiceEdit/LoadMemberAddress",success:function(b){b&&(a.invoice.set("MemberAddress",b),a.invoice.set("HasShippingAddress",!0)),null==b&&(a.invoice.set("InvoiceShipToAddress",!0),a.invoice.set("HasShippingAddress",!1))},error:function(){a.error=!0},beforeSend:function(){kendo.ui.progress($("#dvinvProduct"),!0)},complete:function(){kendo.ui.progress($("#dvinvProduct"),!1)}})},this.onProdcutsPageChange=function(a){var b=$("#lvProducts").data("kendoListView");b.dataSource.page(a.sender.page())},this.onShippingPercentageChange=function(){this.invoice&&this.invoice.InvoicePrice&&(this.invoice.InvoicePrice.set("ShippingAmount",0),this.invoice.InvoicePrice.set("TaxAmount",0),this.invoice.InvoicePrice.set("TaxPercentage",0),$("#shippingPercentage").prev().removeClass("k-state-disabled"),$("#shippingAmount").prev().addClass("k-state-disabled"),this.invoice.set("IsCustomerShippingHandlingEdited",!0))},this.onShippingAmountChange=function(){this.invoice&&this.invoice.InvoicePrice&&(this.invoice.InvoicePrice.set("ShippingPercentage",0),this.invoice.InvoicePrice.set("TaxAmount",0),this.invoice.InvoicePrice.set("TaxPercentage",0),$("#shippingAmount").prev().removeClass("k-state-disabled"),$("#shippingPercentage").prev().addClass("k-state-disabled"),this.invoice.set("IsCustomerShippingHandlingEdited",!0))},this.onDiscountPercentageChange=function(){this.invoice&&this.invoice.InvoicePrice&&(this.invoice.InvoicePrice.set("DiscountAmount",0),this.invoice.InvoicePrice.set("TaxAmount",0),this.invoice.InvoicePrice.set("TaxPercentage",0),$("#discountPercentage").prev().removeClass("k-state-disabled"),$("#discountAmount").prev().addClass("k-state-disabled"),this.calculateTotalDue())},this.onDiscountDropDownPercentageChange=function(){this.invoice&&this.invoice.InvoicePrice&&(this.invoice.InvoicePrice.set("DiscountAmount",0),this.invoice.InvoicePrice.set("TaxAmount",0),this.invoice.InvoicePrice.set("TaxPercentage",0),this.calculateTotalDue())},this.onStateChange=function(){this.invoice&&this.invoice.Address&&this.invoice.Address.State&&this.set("stateSelected",this.invoice.Address.State)},this.onDiscountAmountChange=function(){this.invoice&&this.invoice.InvoicePrice&&(this.invoice.InvoicePrice.set("DiscountPercentage",0),this.invoice.InvoicePrice.set("TaxAmount",0),this.invoice.InvoicePrice.set("TaxPercentage",0),$("#discountAmount").prev().removeClass("k-state-disabled"),$("#discountPercentage").prev().addClass("k-state-disabled"),this.calculateTotalDue())},this.onTaxPercentageChange=function(){this.invoice&&this.invoice.InvoicePrice&&(this.invoice.InvoicePrice.set("TaxAmount",0),$("#taxPercentage").prev().removeClass("k-state-disabled"),$("#taxAmount").prev().addClass("k-state-disabled"),this.invoice.set("IsCustomerTaxEdited",!0))},this.onTaxAmountChange=function(){this.invoice&&this.invoice.InvoicePrice&&(this.invoice.InvoicePrice.set("TaxPercentage",0),$("#taxAmount").prev().removeClass("k-state-disabled"),$("#taxPercentage").prev().addClass("k-state-disabled"),this.invoice.set("IsCustomerTaxEdited",!0))},this.resetToDefaultValueClicked=function(){this.invoice&&(this.invoice.set("ResetCustomerTaxValue",!0),this.calculateBasePrice())},this.launchShippingHandling=function(){var a=$("#dvPlg");if(a.data("kendoWindow"))a.data("kendoWindow").open().center();else{var b=$("<div />").attr({id:"dvPlg","class":"pnlEstimateSH"}).appendTo(document.body),c={content:"/Ordering/Invoice/HtmlFragment?path=lblShippingHandlingTable.html",actions:["Close"],modal:!0,draggable:!0,resizable:!0,visible:!1,height:685,width:591},d=b.kendoWindow(c);d.data("kendoWindow").open().center()}}},renderProductsTemplate:function(a){return kendo.Template.compile($("#invProductsTpl").html())(a)},InvoiceModel:function(){this.Id=null,this.MemberId=null,this.MemberInvoiceNumber=null,this.FirstName=null,this.LastName=null,this.InvoiceDate="",this.CreatedDate="",this.CustomerId=null,this.Address=new invEdit.InvoiceAddressModel,this.InvoiceLines=[],this.InvoicePrice=new invEdit.InvoicePriceModel,this.InvoiceContact=null,this.Email=null,this.Type="Customer",this.OrderId=null,this.Notes=null,this.Status=null,this.Phone=null,this.PaymentAddress=null,this.TotalVolumePoints=null,this.Total=null,this.DisplayTotal=null,this.ShippingMethod=null,this.InvoiceShipToAddress=!0,this.HasShippingAddress=!0,this.MemberAddress=new invEdit.InvoiceAddressModel,this.MemberEmailAddress=null,this.MemberFirstName="",this.MemberLastName="",this.OrderSource="",this.PricingType="",this.ShippingMethod="",this.Source="",this.IsFaceToFace=!1,this.IsGdoMemberPricing=!1,this.DisplayInvoiceStatus="",this.DisplayInvoiceType="",this.IsMemberTaxEdited=!1,this.IsMemberHandlingFeeEdited=!1,this.MakeMemberTaxZero=!1,this.MakeMemberHandlingFeeZero=!1,this.IsCustomerTaxEdited=!1,this.IsCustomerShippingHandlingEdited=!1,this.ResetCustomerTaxValue=!1},InvoiceAddressModel:function(){this.Address1=null,this.Address2=null,this.City=null,this.Country=null,this.County=null,this.PostalCode=null,this.State=null},InvoiceLineModel:function(){this.Sku=null,this.ProductName=null,this.Quantity=null,this.RetailPrice=null,this.TotalRetailPrice=null,this.EarnBase=null,this.StockingSku=null,this.ProductType=null,this.ProductCategory=null,this.VolumePoint=null,this.TotalEarnBase=null,this.TotalVolumePoint=null,this.YourPrice=null,this.DisplayRetailPrice=null,this.DisplayTotalRetailPrice=null,this.DisplayCurrencySymbol=null,this.DisplayTotalVp=null,this.DisplayYourPrice=null,this.FreightCharge=0,this.CalcDiscountedAmount=0},InvoicePriceModel:function(){this.DiscountPercentage=0,this.DiscountAmount=0,this.CalcDiscountAmount=0,this.TaxPercentage=0,this.TaxAmount=0,this.ShippingPercentage=0,this.ShippingAmount=0,this.TotalDue=0,this.SubTotal=0,this.TotalEarnBase=0,this.CalcShippingAmount=0,this.CalcTaxAmount=0,this.TotalDiscountedAmount=0,this.MemberTax=0,this.MemberFreight=0,this.MemberTotal=0,this.TotalYourPrice=0,this.Profit=0,this.ProfitPercentage=0,this.MemberStaticDiscount=0,this.MemberDiscount=0,this.DisplayDiscountedAmount=null,this.DisplayCurrencySymbol=null,this.DisplaySubtotal=null,this.DisplayDiscount=null,this.DisplayShipping=null,this.DisplayTax=null,this.DisplayTotalDue=null,this.DisplayCalculatedTax=null,this.DisplayProfit=null,this.DisplayMemberTax=null,this.DisplayMemberFreight=null,this.DisplayMemberTotal=null,this.DisplayTotalYourPrice=null,this.DisplayProfitPercentage=null},scrollTo:function(a){$("html, body").animate({scrollTop:$(a).offset().top-100},500)}};$(function(){invEdit.Init(),$(".collapse-member-information a").click(function(a){a.preventDefault(),toggleMemberInfo(this)}),$("#taxAmount").keypress(function(){var a=$("#taxAmount").prop("kendoBindingTarget").source;a&&a.invoice.set("IsCustomerTaxEdited",!0)}),$("#taxPercentage").keypress(function(){var a=$("#taxPercentage").prop("kendoBindingTarget").source;a&&a.invoice.set("IsCustomerTaxEdited",!0)}),$(document).on("click",".selectRate",function(){var a=$(this).parent().parent().children("td").eq(1).html();a.indexOf("span")>=0&&(a=$(this).parent().parent().children("td").eq(0).html());var b=$("#shippingPercentage").prop("kendoBindingTarget").source;if(a&&b){b.invoice.InvoicePrice.set("ShippingPercentage",a.substring(0,a.indexOf("%"))),b.invoice.InvoicePrice.set("ShippingAmount",0),b.invoice.InvoicePrice.set("TaxAmount",0),b.invoice.InvoicePrice.set("TaxPercentage",0),$("#shippingPercentage").prev().removeClass("k-state-disabled"),$("#shippingAmount").prev().addClass("k-state-disabled");var c=$("#dvPlg").data("kendoWindow");c.close()}return!1}),$("#dgProducts > table").length>0&&$(".collapse-member-information").css("margin-top",$("#dgProducts > table").offset().top-$("#dgTotals > table").offset().top)});var invDisplay={Init:function(){var a=kendo.observable(new invDisplay.invoiceDisplayViewModel);kendo.bind($("#dvInvDisplay"),a),a.loadInvoicedata()},productDescTemplate:function(){return kendo.template($("#productDescTpl").html());
},invoiceDisplayViewModel:function(){this.display_InvoiceId=window.display_InvoiceId,this.display_Invoice_Action=window.display_Invoice_Action,this.loadInvoicedata=function(){if("Invoice_Display"==this.display_Invoice_Action){var a=this;if(a.display_InvoiceId>0){var b=a.display_InvoiceId;kendo.ui.progress($("#dvinvProduct"),!0),$.ajax({type:"get",dataType:"json",cache:!0,data:JSON.stringify(b),url:"/Ordering/api/InvoiceSearch/Load/"+b,success:function(b){return b&&b.Id>0?void a.setInvoiceData(b):(window.location.href="/Ordering/Invoice",!1)},error:function(){a.error=!0},complete:function(){kendo.ui.progress($("#dvinvProduct"),!1)}})}}},this.setInvoiceData=function(a){a&&(this.set("invoice",a),this.set("invoiceDate",kendo.toString(new Date(moment(a.InvoiceDate)),"MM/dd/yyyy")))},this.sendEmailClick=function(){var a=this;a.invoice.Email&&a.viewConfirmationEmailPopUp()},this.confirmEmailClick=function(){var a=this;kendo.ui.progress($("#dvinvProduct"),!0),$.ajax({type:"POST",dataType:"json",cache:!0,data:JSON.stringify(a.invoice),contentType:"application/json; charset=utf-8",url:"/Ordering/api/InvoiceBase/SendInvoiceEmail",success:function(a){},error:function(){a.error=!0},complete:function(){kendo.ui.progress($("#dvinvProduct"),!1),a.cancelEmailClick()}})},this.cancelEmailClick=function(){var a=$("#emailSendedConfirmation").data("kendoWindow");a&&a.close()},this.viewConfirmationEmailPopUp=function(){var a=$("#emailSendedConfirmation").data("kendoWindow");a.center().open()},this.editInvoiceClick=function(){var a=this;return window.location.href="/Ordering/Invoice/Edit/"+a.display_InvoiceId,!1},this.deleteInvoiceClick=function(){var a=this;return window.location.href="/Ordering/Invoice/Delete/"+a.display_InvoiceId,a.closeDeleteInvoice(),!1},this.viewDeletePopUp=function(a){var b=$("#confirmDeleteInvoice").data("kendoWindow");b.center().open()},this.closeDeleteInvoice=function(){var a=$("#confirmDeleteInvoice").data("kendoWindow");a&&a.close()},this.printInvoiceClick=function(){var a=this;return window.open("/Ordering/Invoice/Print/"+a.display_InvoiceId,"_blank"),!1},this.copyInvoiceClick=function(){var a=this;return window.location.href="/Ordering/Invoice/Copy/"+a.display_InvoiceId,!1},this.createOrderClick=function(){var a=this;return window.location.href="/Ordering/ShoppingCart.aspx?memberInvoiceId="+a.display_InvoiceId+"&invoiceNum="+a.invoice.MemberInvoiceNumber,!1},this.onInvoiceLinesDataBinding=function(a){var b=a.sender;"Distributor"==this.invoice.Type?b.showColumn("EarnBase"):b.hideColumn("EarnBase")},this.createOrderRedirect=function(){var a=this;$.ajax({url:"/Ordering/Invoice/CreateOrderRedirect/",type:"POST",contentType:"application/json; charset=utf-8",success:function(){a.createOrderClick()},error:function(){},complete:function(){}})}},InvoiceModel:function(){this.Id=null,this.MemberId=null,this.MemberInvoiceNumber=null,this.FirstName=null,this.LastName=null,this.InvoiceDate="",this.CreatedDate="",this.CustomerId=null,this.Address=new invEdit.InvoiceAddressModel,this.InvoiceLines=[],this.InvoicePrice=new invEdit.InvoicePriceModel,this.InvoiceContact=null,this.Email=null,this.Type=null,this.OrderId=null,this.Notes=null,this.Status=null,this.Phone=null,this.PaymentAddress=null,this.TotalVolumePoints=null,this.Total=null,this.DisplayTotal=null,this.ShippingMethod=null,this.InvoiceShipToAddress=!1,this.MemberAddress=new invEdit.InvoiceAddressModel,this.MemberEmailAddress=null,this.MemberFirstName="",this.MemberLastName="",this.OrderSource="",this.PricingType="",this.ShippingMethod="",this.Source="",this.IsFaceToFace=!1,this.IsGdoMemberPricing=!0,this.DisplayInvoiceStatus="",this.IsDisplayFreeShipping=!1,this.HideTax=!1},InvoiceAddressModel:function(){this.Address1=null,this.Address2=null,this.City=null,this.Country=null,this.County=null,this.PostalCode=null,this.State=null},InvoiceLineModel:function(){this.Sku=null,this.ProductName=null,this.Quantity=null,this.RetailPrice=null,this.TotalRetailPrice=null,this.EarnBase=null,this.StockingSku=null,this.ProductType=null,this.ProductCategory=null,this.VolumePoint=null,this.TotalEarnBase=null,this.TotalVolumePoint=null,this.YourPrice=null,this.DisplayRetailPrice=null,this.DisplayTotalRetailPrice=null,this.DisplayCurrencySymbol=null,this.DisplayTotalVp=null,this.DisplayYourPrice=null,this.FreightCharge=0,this.CalcDiscountedAmount=0},InvoicePriceModel:function(){this.DiscountPercentage=0,this.DiscountAmount=0,this.CalcDiscountAmount=0,this.TaxPercentage=0,this.TaxAmount=0,this.ShippingPercentage=0,this.ShippingAmount=0,this.TotalDue=0,this.SubTotal=0,this.TotalEarnBase=0,this.CalcShippingAmount=0,this.CalcTaxAmount=0,this.TotalDiscountedAmount=0,this.MemberTax=0,this.MemberFreight=0,this.MemberTotal=0,this.TotalYourPrice=0,this.Profit=0,this.ProfitPercentage=0,this.DisplayDiscountedAmount=null,this.DisplayCurrencySymbol=null,this.DisplaySubtotal=null,this.DisplayDiscount="$0.00",this.DisplayShipping=null,this.DisplayTax=null,this.DisplayTotalDue=null,this.DisplayCalculatedTax=null,this.DisplayProfit=null,this.DisplayMemberTax=null,this.DisplayMemberFreight=null,this.DisplayMemberTotal=null,this.DisplayTotalYourPrice=null,this.DisplayProfitPercentage=null}};$(function(){invDisplay.Init()});var inventoryDetails={Init:function(){if($("#inventoryGrid").length>0){var a=kendo.observable(new inventoryDetails.DetailsviewModel);kendo.bind($("#inventoryGrid"),a),a.loadInventory()}},DetailsviewModel:function(){this.Location=null,this.ListEmpty=!1,this.details=[],this.isLoading=!1,this.isLoaded=!0,this.loadInventory=function(){var a=this;$("#principalContent").css("position","relative"),kendo.ui.progress($("#principalContent"),!0),$.ajax({type:"get",dataType:"json",cache:!0,url:"/Ordering/api/BackOrderDetail/GetInventoryDetails",success:function(b){a.dataHandler(b)},error:function(){a.error=!0},complete:function(){$("#principalContent").css("position","static"),kendo.ui.progress($("#principalContent"),!1)}})},this.dataHandler=function(a){a&&(drawShowData(a.WhDetails,a.HasShipping),drawTable(a),0==this.details.length?this.set("ListEmpty",!0):this.set("ListEmpty",!1))}}};$(function(){inventoryDetails.Init()}),$(document).ready(function(){$("input[name='dwhouse']").live("click",function(){1==$(this).prop("checked")?$('#inventoryGrid [reference="'+this.id+'"]').show():$('#inventoryGrid [reference="'+this.id+'"]').hide()}),$(function(){$(".ttip a").live("click",function(a){a.preventDefault();var b=$(this).attr("location"),c=$(this).attr("dateAvailability"),d=$(this).attr("type"),e=$(this).attr("tooltipcomments"),f=$(this).attr("comments"),g=$(this).attr("x"),h=$(this).attr("z");$("#inventoryGrid tr[rowRef] td[reference] div.ttip > div").hide();var i=$("<div />");$("#inventoryGrid tr[rowRef="+g+"] td[reference='dwhouse"+h+"'] div.ttip").append(i),i.append($("<div class='tooltipContent'>"+b+"<br /> "+d+" <br /> "+c+" <br /> "+f+" <br /> "+e+" </div>")),$("#inventoryGrid tr[rowRef] td[reference] div.ttip > div").hide(),$("#inventoryGrid tr[rowRef="+g+"] td[reference='dwhouse"+h+"'] div.ttip > div").show()})})}),$(document).mouseup(function(a){var b=$("#inventoryGrid tr[rowRef] td[reference] div.ttip > div");b.is(a.target)||0!==b.has(a.target).length||b.is(":visible")&&b.hide()});
//# sourceMappingURL=legacyvertical.js.map