{"version":3,"sources":["../ProductDetailControl.js","../ProductBySKU.js","../myhl2-ordering.js","../invoiceEdit.js","../InventoryDetails.js","../jquery.ajaxPost.js","../../../SharedUI/Scripts/jquery.cookie.js","../FileSaver.js","../moment.js","../invoiceSearch.js","../invoiceDisplay.js"],"names":["dynamicDividerLine_","tabsbox","findControl2","tab1col1","tab1divider","tab1col2","tab1_col1_height","offsetHeight","tab1_col2_height","tab1_tallest","style","height","adjustDividerLineTab2_","tab2col1","tab2divider","tab2col2","tab2_col1_height","tab2_col2_height","tab2_tallest","$","html","trim","css","adjustDividerLineTab3_","tab3col1","tab3divider","tab3col2","tab3_col1_height","tab3_col2_height","tab3_tallest","ShowWrap","id","elem","display","findControl","document","getElementById","controlFound","i","all","getElementsByTagName","l","length","switchingTab","hideAllWraps","addClass","removeClass","InitializeControls","setNumeric2","ajaxPost","SetAutoCompleteOptions","blur","this","value","isProduct","inArray","autoCompleteOptions","isSku","skuList","parent","prev","find","IsRowComplete","noSKUFoundText","format","toUpperCase","focus","each","result","d","ProductsList","SkuList","InitializeAutocompleteOptions","kendoAutoComplete","dataSource","filter","placeholder","autoPlaceHolderText","v","productSku","quantity","focusOnNext","sku","eq","val","qty","next","CheckNumeric","e","ctrl","keynum","window","event","keyCode","which","cancelBubble","preventDefault","stopPropagation","CheckAreaPlusPhone","ctrlArea","ctrlPhone","totalLength","elementAreaCode","elementPhone","PickupSelected","items","type","name","indexOf","checked","CheckChanges","textbox","selector","changed","oldTxtCP2","oldTxtCP1","__doPostBack","AllowOnlyNumbers2","control","replace","AllowOnlyNumbers","EnableMasterScrolling","DisableMasterScrolling","checkSKUChar","keychar","String","fromCharCode","test","cronometro","Date","help_date","Sys","WebForms","PageRequestManager","getInstance","add_endRequest","days","hours","minutes","seconds","timer","YearEOM","split","MonthEOM","DayEOM","HourEOM","MinEOM","SecEOM","target_date","counterlbl","countdown_min","countdown_hr","countdown_dy","timtest","YearServer","MonthServer","DayServer","HourServer","MinServer","SecServer","serverTime","clientNow","getTime","endTime","setInterval","seconds_left","parseInt","innerHTML","className","clearInterval","cookieEater","eraseCookie","cookie","ready","createCookie","date","setTime","expires","toGMTString","toggleCatalog","is_page","hide","show","remove","toggleClass","click","_this","_child","_opened","is","hasClass","slideUp","slideDown","RemovePopup","scroll_to_element","elementSelector","duration","animate","scrollTop","offset","top","hidePromoPopup","cookieLocal","setTimeout","freeze_header_cols","colProdW","outerWidth","$vp","$vpNext","vpW","vpH","outerHeight","vpOffset","vpNextOffset","distanceVP","distanceVPNext","width","background-color","$actions","$actionsNext","actionsW","actionsH","actionsOffset","actionsNextOffset","distanceActions","distanceActionsNext","children","first","$header","$headerNext","headerW","headerH","headerOffset","headerNextOffset","distanceH","distanceHNext","pageName","location","pathname","toLowerCase","visibleAreaHeight","jQuery","Math","round","resize","toggleMemberInfo","member_info","left","isNaN","start","showText","collapse","complete","RedirectToReceipts","locale","_AnalyticsFacts_","LanguageCode","CountryCode","_countries","logger","log","drawShowData","dataWareHouses","hasShipping","wareHouse","append","x","Option","Name","OptionText","drawTable","data","rowHeader","SkuColumnTitleText","DescriptionColumnText","WhDetails","HasShipping","rowsubHeader","FullCatalog","row","SKU","SKUDescription","skuStatus","skuInfo","Array","y","InventoryDetails","z","WHCode","DeliveryType","Location","img","link","Status","AvailabilityDate","Type","ToolTipComments","Comments","StatusText","method","success","error","ajax","url","href","contentType","dataType","xhr","status","exc","reload","undefined","raw","s","decoded","unRfc2068","decodeURIComponent","pluses","slice","fromJSON","config","json","JSON","parse","key","options","extend","defaults","t","setDate","getDate","stringify","encodeURIComponent","toUTCString","path","domain","secure","join","decode","cookies","parts","shift","removeCookie","keydown","element","target","nodeName","elementType","tabs","$HFFModal","message","init","modal","closeHTML","position","overlayId","containerId","onOpen","open","onShow","onClose","close","dialog","title","overlay","fadeIn","container","h","fadeOut","alert","statusText","showError","contact","kendoWindow","setOptions","live","bind","responsiveMode","text","ProdDetailVPCalculation","get_total_vp","get_total_ammount","_this_options","_parent","container_id","attr","fn","switchClasses","toAdd","toRemove","keyPressHandlerExist","handlerName","exist","keypress","handler","toString","prototype","f","arguments","RegExp","navigator","appName","charCode","valid","filteredValue","ch","charAt","substring","returnValue","setAsNumeric","nDecimals","hasPoint","hasComa","disableEnglish","Key","mouseup","has","opacity","background-image","VPCalculation","selected_skus","get_skus","products","prods","skus","psku","comma","totalVP","item","vp","format_totals","totalAmmount","price","total","neg","abs","parseFloat","toFixed","total_vp","total_ammount","qty_inputs","VPs","qty_input","prices","support","createElement","parents","submit","saveAs","msSaveOrOpenBlob","view","userAgent","doc","get_URL","URL","webkitURL","save_link","createElementNS","can_use_save_link","externalHost","node","createEvent","initMouseEvent","dispatchEvent","webkit_req_fs","webkitRequestFileSystem","req_fs","requestFileSystem","mozRequestFileSystem","throw_outside","ex","setImmediate","force_saveable_type","fs_min_size","arbitrary_revoke_timeout","revoke","file","revoker","revokeObjectURL","chrome","dispatch","filesaver","event_types","concat","listener","call","FileSaver","blob","object_url","target_view","blob_changed","dispatch_all","fs_error","createObjectURL","new_tab","safari","readyState","DONE","abortable","func","apply","create_if_not_found","create","exclusive","INIT","download","webkitSlice","size","TEMPORARY","fs","root","getDirectory","dir","save","getFile","createWriter","writer","onwriteend","toURL","onerror","code","ABORT_ERR","forEach","write","abort","WRITING","NOT_FOUND_ERR","FS_proto","onwritestart","onprogress","onwrite","onabort","self","content","module","exports","define","amd","dfl","a","b","c","Error","hasOwnProp","hasOwnProperty","defaultParsingFlags","empty","unusedTokens","unusedInput","overflow","charsLeftOver","nullInput","invalidMonth","invalidFormat","userInvalidated","iso","printMsg","msg","moment","suppressDeprecationWarnings","console","warn","deprecate","firstTime","deprecateSimple","deprecations","padToken","count","leftZeroFill","ordinalizeToken","period","localeData","ordinal","Locale","Moment","skipOverflow","checkOverflow","copyConfig","_d","Duration","normalizedInput","normalizeObjectUnits","years","year","quarters","quarter","months","month","weeks","week","day","hour","minute","second","milliseconds","millisecond","_milliseconds","_days","_months","_data","_locale","_bubble","valueOf","to","from","prop","_isAMomentObject","_i","_f","_l","_strict","_tzm","_isUTC","_offset","_pf","momentProperties","absRound","number","ceil","floor","targetLength","forceSign","output","sign","positiveMomentsDifference","base","other","res","clone","add","isAfter","momentsDifference","makeAs","isBefore","createAdder","direction","dur","tmp","addOrSubtractDurationFromMoment","mom","isAdding","updateOffset","rawSetter","rawGetter","rawMonthSetter","isArray","input","Object","isDate","compareArrays","array1","array2","dontConvert","len","min","lengthDiff","diffs","toInt","normalizeUnits","units","lowered","unitAliases","camelFunctions","inputObject","normalizedProp","makeList","field","setter","index","getter","results","m","utc","set","push","argumentForCoercion","coercedNumber","isFinite","daysInMonth","UTC","getUTCDate","weeksInYear","dow","doy","weekOfYear","daysInYear","isLeapYear","_a","MONTH","DATE","YEAR","HOUR","MINUTE","SECOND","MILLISECOND","_overflowDayOfYear","isValid","_isValid","bigHour","normalizeLocale","chooseLocale","names","j","loadLocale","oldLocale","locales","hasModule","require","model","diff","isMoment","local","removeFormattingTokens","match","makeFormatFunction","array","formattingTokens","formatTokenFunctions","Function","formatMoment","expandFormat","formatFunctions","invalidDate","replaceLongDateFormatTokens","longDateFormat","localFormattingTokens","lastIndex","getParseRegexForToken","token","strict","parseTokenOneDigit","parseTokenThreeDigits","parseTokenFourDigits","parseTokenOneToFourDigits","parseTokenSignedNumber","parseTokenSixDigits","parseTokenOneToSixDigits","parseTokenTwoDigits","parseTokenOneToThreeDigits","parseTokenWord","_meridiemParse","parseTokenOffsetMs","parseTokenTimestampMs","parseTokenTimezone","parseTokenT","parseTokenDigits","parseTokenOneOrTwoDigits","_ordinalParse","_ordinalParseLenient","regexpEscape","unescapeFormat","timezoneMinutesFromString","string","possibleTzMatches","tzChunk","parseTimezoneChunker","addTimeToArrayFromToken","datePartArray","monthsParse","_dayOfYear","parseTwoDigitYear","_isPm","isPM","_useUTC","weekdaysParse","_w","invalidWeekday","substr","dayOfYearFromWeekInfo","w","weekYear","weekday","temp","GG","W","E","_week","gg","dayOfYearFromWeeks","dayOfYear","dateFromConfig","currentDate","yearToUse","currentDateArray","makeUTCDate","getUTCMonth","_nextDay","makeDate","setUTCMinutes","getUTCMinutes","dateFromObject","now","getUTCFullYear","getFullYear","getMonth","makeDateFromStringAndFormat","ISO_8601","parseISO","parsedInput","tokens","skipped","stringLength","totalParsedInputLength","matched","p1","p2","p3","p4","makeDateFromStringAndArray","tempConfig","bestMoment","scoreToBeat","currentScore","NaN","score","isoRegex","exec","isoDates","isoTimes","makeDateFromString","createFromInputFallback","map","arr","makeDateFromInput","aspNetJsonRegex","obj","M","ms","setFullYear","setUTCFullYear","parseWeekday","substituteTimeAgo","withoutSuffix","isFuture","relativeTime","posNegDuration","as","args","relativeTimeThresholds","firstDayOfWeek","firstDayOfWeekOfYear","adjustedMoment","end","daysToDayOfWeek","daysToAdd","getUTCDay","makeMoment","invalid","preparse","pickBy","moments","dayOfMonth","unit","makeAccessor","keepTime","daysToYears","yearsToDays","makeDurationGetter","makeGlobal","shouldDeprecate","ender","oldGlobalMoment","globalScope","VERSION","global","aspNetTimeSpanJsonRegex","isoDurationRegex","isoFormat","unitMillisecondFactors","Milliseconds","Seconds","Minutes","Hours","Days","Months","Years","D","Q","DDD","dayofyear","isoweekday","isoweek","weekyear","isoweekyear","ordinalizeTokens","paddedTokens","MMM","monthsShort","MMMM","dd","weekdaysMin","ddd","weekdaysShort","dddd","weekdays","isoWeek","YY","YYYY","YYYYY","YYYYYY","gggg","ggggg","isoWeekYear","GGGG","GGGGG","isoWeekday","meridiem","A","H","S","SS","SSS","SSSS","Z","zone","ZZ","zoneAbbr","zz","zoneName","X","unix","lists","pop","DDDD","source","_monthsShort","monthName","regex","_monthsParse","_longMonthsParse","_shortMonthsParse","_weekdays","_weekdaysShort","_weekdaysMin","weekdayName","_weekdaysParse","_longDateFormat","LTS","LT","L","LL","LLL","LLLL","isLower","_calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","sameElse","calendar","_relativeTime","future","past","mm","hh","MM","yy","pastFuture","_ordinal","postformat","_invalidDate","max","ret","parseIso","diffRes","isDuration","inp","version","defaultFormat","relativeTimeThreshold","threshold","limit","lang","values","defineLocale","_abbr","abbr","langData","flags","parseZone","toDate","toISOString","toArray","isDSTShifted","parsingFlags","invalidAt","keepLocalTime","_dateTzOffset","inputString","subtract","asFloat","daysAdjust","that","zoneDiff","startOf","time","humanize","fromNow","sod","isDST","getDay","endOf","inputMs","isSame","localAdjust","_changeInProgress","hasAlignedHourOffset","isoWeeksInYear","weekInfo","get","newLocaleData","getTimezoneOffset","dates","isoWeeks","toJSON","withSuffix","toIsoString","asSeconds","asMilliseconds","asMinutes","asHours","asDays","asWeeks","asMonths","asYears","ordinalParse","noGlobal","invSearch","Init","searchModel","kendo","observable","SearchModel","loadInvoice","loadErrorMessages","deleteInv","template","createOrderInv","displayInv","selectMyOrdersTemplate","dateMyOrdersTemplate","statusTemplate","isLoading","isLoaded","filterBy","filterValue","invoices","ListEmpty","selectedFilterItem","filterByValue","currentInvoiceId","memberInvoiceNumber","myOrdersFilter","index_Invoice_Action","myOrdersErrorText","errorMessages","statusUpdateText","ui","progress","cache","dataHandler","filterCategoriesSource","DataSource","transport","read","statusDataSource","onStatusChange","Id","doSearch","invoiceFilterModel","From","To","SelectedFilterId","SelectedFilterValue","doClear","viewDeletePopUp","DisplayMemberInvoiceNumber","invoiceId","wnd","center","closeDeleteInvoice","enterCertWnd","DeleteInvoice","invtoDelete","createOrderRedirect","clickMyOrders","myOrdersDataSource","selectMyOrders","searchMyOrders","logic","filters","operator","contactsFilter","serverFiltering","serverPaging","pageSize","schema","Items","$values","TotalCount","requestStart","requestEnd","myOrdersDataBound","loadMyOrders","beforeSend","ExportToCSV","fileName","grid","csv","columns","fieldName","properties","Blob","invEdit","redirect","editModel","invoiceEditViewModel","loadInvoicedata","productquantityTemplate","productTotalPriceTemplate","deleteProductTemplate","selectContactTemplate","savedCartsTemplate","savedDateTemplate","productDescTemplate","validator","kendoValidator","rules","ProductValidation","invoice","InvoiceLines","messages","stateSelected","rootCategories","contacts","selectedRootCategoryItem","categories","productsFilter","savedCartsFilter","autocompleteData","savedCarts","selectedProduct","edit_InvoiceId","edit_OrderId","edit_CopyInvoiceId","statusSelected","memberAddressstateSelected","selectedAddress","selectedIdAddress","errorText","edit_Invoice_Action","productSearchErrorText","addProductErrorText","contactsErrorText","edit_Order_Source","edit_Invoice_Date","priceAlertText","memberTaxEdit","memberShippingEdit","IsEditTaxClickClicked","IsEditHandlingFeeClicked","validIndProducts","editHandlingFeeClick","editTaxClick","onMemberHandlingFeeChange","calculateMemberTotal","onMemberTaxChange","saveChanges","validate","invoiceModel","Value","Address","StateStatus","State","InvoiceDate","IsSuccess","setInvoiceData","InvoiceModel","ErrorCodeKey","validateInput","InvoiceShipToAddress","scrollTo","invoiceAddressClick","calculateBasePrice","invoiceTypeClick","InvoicePriceModel","showColumn","InvoicePrice","hideColumn","onInvoiceLinesDataBinding","sender","calculateTotalDue","DisplayShipping","DisplayCalculatedTax","DisplaySubtotal","cancel","ChangeClicked","memberAddressDataSource","onChangeAddress","AddressChanged","MemberAddress","onQuantityChange","autocompleteDataSource","parameterMap","startsWith","statesDataSource","contactsDataSource","discountsDataSource","createInvoiceFromOrderIdRequest","OrderId","Source","loadShippingAddress","onRootCategoryChange","loadCategories","pager","page","dataBound","expandRow","tbody","contactsDataBound","clickContacts","clickProducts","loadRootCategories","clickSavedCarts","loadSavedCarts","addProducts","skuAdded","Sku","Quantity","hideMessages","deleteProducts","onProductChange","when","then","selectCategory","addedProduct","async","selectContact","FirstName","LastName","PhoneNumber","PrimaryEmailAddress","StreetAddress1","City","PostalCode","Country","contactsWnd","selectSavedCarts","cartId","","savedCartsWnd","searchSavedCarts","SearchContacts","SearchProducts","invoiceCategoryFilter","RootCategoryId","Filter","onProdcutsPageChange","listview","onShippingPercentageChange","onShippingAmountChange","onDiscountPercentageChange","onDiscountDropDownPercentageChange","onStateChange","onDiscountAmountChange","onTaxPercentageChange","onTaxAmountChange","resetToDefaultValueClicked","launchShippingHandling","myWin","pUpCntr","class","appendTo","body","actions","draggable","resizable","visible","windCntr","renderProductsTemplate","Template","compile","MemberId","MemberInvoiceNumber","CreatedDate","CustomerId","InvoiceAddressModel","InvoiceContact","Email","Notes","Phone","PaymentAddress","TotalVolumePoints","Total","DisplayTotal","ShippingMethod","HasShippingAddress","MemberEmailAddress","MemberFirstName","MemberLastName","OrderSource","PricingType","IsFaceToFace","IsGdoMemberPricing","DisplayInvoiceStatus","DisplayInvoiceType","IsMemberTaxEdited","IsMemberHandlingFeeEdited","MakeMemberTaxZero","MakeMemberHandlingFeeZero","IsCustomerTaxEdited","IsCustomerShippingHandlingEdited","ResetCustomerTaxValue","Address1","Address2","County","InvoiceLineModel","ProductName","RetailPrice","TotalRetailPrice","EarnBase","StockingSku","ProductType","ProductCategory","VolumePoint","TotalEarnBase","TotalVolumePoint","YourPrice","DisplayRetailPrice","DisplayTotalRetailPrice","DisplayCurrencySymbol","DisplayTotalVp","DisplayYourPrice","FreightCharge","CalcDiscountedAmount","DiscountPercentage","DiscountAmount","CalcDiscountAmount","TaxPercentage","TaxAmount","ShippingPercentage","ShippingAmount","TotalDue","SubTotal","CalcShippingAmount","CalcTaxAmount","TotalDiscountedAmount","MemberTax","MemberFreight","MemberTotal","TotalYourPrice","Profit","ProfitPercentage","MemberStaticDiscount","MemberDiscount","DisplayDiscountedAmount","DisplayDiscount","DisplayTax","DisplayTotalDue","DisplayProfit","DisplayMemberTax","DisplayMemberFreight","DisplayMemberTotal","DisplayTotalYourPrice","DisplayProfitPercentage","on","invDisplay","displayModel","invoiceDisplayViewModel","display_InvoiceId","display_Invoice_Action","sendEmailClick","viewConfirmationEmailPopUp","confirmEmailClick","cancelEmailClick","editInvoiceClick","scope","deleteInvoiceClick","printInvoiceClick","copyInvoiceClick","createOrderClick","IsDisplayFreeShipping","HideTax","inventoryDetails","detailsModel","DetailsviewModel","loadInventory","details","dateAvailability","tooltipcomments","comments","cell","tooltipContent"],"mappings":"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","file":"legacyvertical.js","sourcesContent":["function dynamicDividerLine_() {\r\n    var tabsbox = findControl2('3tabsbox');\r\n    var tab1col1 = findControl2('tab1-col1');\r\n    var tab1divider = findControl2('tab1-divider');\r\n    var tab1col2 = findControl2('tab1-col2');\r\n    if (tabsbox != null && tab1col1 != null) {\r\n        var tab1_col1_height = tab1col1.offsetHeight;\r\n        var tab1_divider_height = tab1divider.offsetHeight;\r\n        var tab1_col2_height = tab1col2.offsetHeight;\r\n\r\n        if ((tab1_col1_height > 130) || (tab1_col2_height > 130)) {\r\n            var tab1_tallest;\r\n            if (tab1_col1_height > tab1_col2_height) {\r\n                tab1_tallest = tab1_col1_height;\r\n                tab1divider.style.height = tab1_tallest + 'px';\r\n            }\r\n            else if (tab1_col2_height > tab1_col1_height) {\r\n                tab1_tallest = tab1_col2_height;\r\n                tab1divider.style.height = tab1_tallest + 'px';\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction adjustDividerLineTab2_() {\r\n    var tabsbox = findControl2('3tabsbox');\r\n    var tab2col1 = findControl2('tab2-col1');\r\n    var tab2divider = findControl2('tab2-divider');\r\n    var tab2col2 = findControl2('tab2-col2');\r\n\r\n    if (tabsbox && tab2col1 && tab2col2) {\r\n        var tab2_col1_height = tab2col1.offsetHeight;\r\n        var tab2_divider_height = tab2divider.offsetHeight;\r\n        var tab2_col2_height = tab2col2.offsetHeight;\r\n\r\n        if ((tab2_col1_height > 130) || (tab2_col2_height > 130)) {\r\n            var tab2_tallest;\r\n            if (tab2_col1_height > tab2_col2_height) {\r\n                tab2_tallest = tab2_col1_height;\r\n                tab2divider.style.height = tab2_tallest + 'px';\r\n            }\r\n            else if (tab2_col2_height > tab2_col1_height) {\r\n                tab2_tallest = tab2_col2_height;\r\n                tab2divider.style.height = tab2_tallest + 'px';\r\n            }\r\n        }\r\n    }\r\n\r\n    //Fix per defect 208190\r\n    if ($('#tab2-col1 [id$=\"pDetails\"]').html().trim()) {\r\n        //Do nothing\r\n    } else {\r\n        $('#tab2-col1 [id$=\"lbDetails\"]').css(\"display\", \"none\");\r\n        $('#tab2-col2').css(\"width\", \"auto\");\r\n    }\r\n\r\n}\r\n\r\nfunction adjustDividerLineTab3_() {\r\n    var tabsbox = findControl2('3tabsbox');\r\n    var tab3col1 = findControl2('tab3-col1');\r\n    var tab3divider = findControl2('tab3-divider');\r\n    var tab3col2 = findControl2('tab3-col2');\r\n\r\n    if (tabsbox && tab3col1 && tab3col2) {\r\n        var tab3_col1_height = tab3col1.offsetHeight;\r\n        var tab3_divider_height = tab3divider.offsetHeight;\r\n        var tab3_col2_height = tab3col2.offsetHeight;\r\n\r\n        if ((tab3_col1_height > 130) || (tab3_col2_height > 130)) {\r\n            var tab3_tallest;\r\n            if (tab3_col1_height > tab3_col2_height) {\r\n                tab3_tallest = tab3_col1_height;\r\n                tab3divider.style.height = tab3_tallest + 'px';\r\n            }\r\n            else if (tab3_col2_height > tab3_col1_height) {\r\n                tab3_tallest = tab3_col2_height;\r\n                tab3divider.style.height = tab3_tallest + 'px';\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction ShowWrap(id) {\r\n    var elem = findControl2('dynamic_wrap1');\r\n    if (elem != null) {\r\n        if ('dynamic_wrap1' != id) {\r\n            elem.style.display = 'none';\r\n        }\r\n        else {\r\n            elem.style.display = 'inline';\r\n        }\r\n    }\r\n\r\n    elem = findControl2('dynamic_wrap2');\r\n    if (elem != null) {\r\n        if ('dynamic_wrap2' != id) {\r\n            elem.style.display = 'none';\r\n        }\r\n        else {\r\n            elem.style.display = 'inline';\r\n        }\r\n    }\r\n\r\n    elem = findControl2('dynamic_wrap3');\r\n    if (elem != null) {\r\n        if ('dynamic_wrap3' != id) {\r\n            elem.style.display = 'none';\r\n        }\r\n        else {\r\n            elem.style.display = 'inline';\r\n        }\r\n    }\r\n}\r\n\r\nfunction findControl(id) {\r\n    return document.getElementById(id);\r\n}\r\n\r\nvar controlFound = null;\r\nfunction findControl2(id) {\r\n    controlFound = null;\r\n    var all = document.getElementsByTagName(\"div\");\r\n    var l = all.length;\r\n    var i;\r\n    for (i = 0; i < l; i++) {\r\n        if (all[i].id == id) {\r\n            controlFound = all[i];\r\n        }\r\n    }\r\n    return controlFound;\r\n}\r\n\r\nfunction switchingTab(id) {\r\n    hideAllWraps();\r\n    ShowWrap('dynamic_wrap' + id);\r\n\r\n    if (id == '1') {\r\n        $('#vis2').addClass('unFocusTab');\r\n        $('#vis3').addClass('unFocusTab');\r\n        $('#vis1').addClass('focusTab');\r\n        $('#vis2').removeClass('focusTab');\r\n        $('#vis3').removeClass('focusTab');\r\n        $('#vis1').removeClass('unFocusTab');\r\n    }\r\n    else if (id == '2') {\r\n        $('#vis1').addClass('unFocusTab');\r\n        $('#vis3').addClass('unFocusTab');\r\n        $('#vis2').addClass('focusTab');\r\n        $('#vis1').removeClass('focusTab');\r\n        $('#vis3').removeClass('focusTab');\r\n        $('#vis2').removeClass('unFocusTab');\r\n    }\r\n    else if (id == '3') {\r\n        $('#vis1').addClass('unFocusTab');\r\n        $('#vis2').addClass('unFocusTab');\r\n        $('#vis3').addClass('focusTab');\r\n        $('#vis1').removeClass('focusTab');\r\n        $('#vis2').removeClass('focusTab');\r\n        $('#vis3').removeClass('unFocusTab');\r\n    }\r\n}","// --------------------------------------------------------------------------------------------------------------------\r\n// <copyright file=\"ProductBySKU.js\" company=\"Herbalife\">\r\n//   Herbalife 2012\r\n// </copyright>\r\n// <summary>\r\n//   Used provide the client side functionallity for order by sku page.\r\n// </summary>\r\n// --------------------------------------------------------------------------------------------------------------------\r\n\r\n// Store the auto complete options.\r\nvar autoCompleteOptions = null;\r\n\r\n// Store the sku's list.\r\nvar skuList = null;\r\n\r\n$(function () {\r\n    setTimeout(InitializeControls, 1000);\r\n});\r\n\r\n// Initialize all products and quantity controls.\r\nfunction InitializeControls() {\r\n    if ($('#OrderBySkuMain .productInput').length > 0) {\r\n        // Fix\r\n        $('.onlyNumbers').addClass('qtyInput');\r\n\r\n        // Set numeric inputs.\r\n        $('.qtyInput').setNumeric2();\r\n\r\n        // Get product information list.\r\n        $.ajaxPost(\"GetAutoCompleteOptions\", \"{ }\", SetAutoCompleteOptions);\r\n\r\n        // Set the functionality to replace the text with the sku.\r\n        $('.productInput').blur(function () {\r\n            // Validate if the sku result is in the options list.\r\n            if (this.value) {\r\n                var isProduct = $.inArray(this.value, autoCompleteOptions) >= 0;\r\n                var isSku = $.inArray(this.value, skuList) >= 0;\r\n                if (isProduct || isSku) {\r\n                    // Leave only the sku.\r\n                    if (isProduct) {\r\n                        // $(this).val(this.value.substring(0, this.value.indexOf(' ')));\r\n                    }\r\n\r\n                    // Removing error image.\r\n                    $(this).parent().prev().find('img').addClass('hide');\r\n\r\n                    // Adding complete class.\r\n                    $(this).addClass('completeSKUInput');\r\n\r\n                    // Send row for review.\r\n                    IsRowComplete($(this), $(this).parent().parent().find('.qtyInput'), false);\r\n                } else {\r\n                    // If any autocomplete box is showed for peding user selection.\r\n                    if ($('.ui-autocomplete:visible').length == 0) {\r\n\r\n                        // SKU/Product does not exist.\r\n                        $('.errorList').html(noSKUFoundText.format(this.value.toUpperCase()));\r\n                        $(this).parent().prev().find('.gdo-error-message-icon').removeClass('hide');\r\n\r\n                        // Removing complete class.\r\n                        $(this).removeClass('completeSKUInput');\r\n\r\n                        // Adding error image.\r\n                        $(this).parent().prev().find('img').removeClass('hide');\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        // Removing complete class if focus.\r\n        $('.productInput').focus(function () {\r\n            $(this).removeClass('completeSKUInput');\r\n        });\r\n\r\n        // Send row for review.\r\n        $('.qtyInput').blur(function () {\r\n            IsRowComplete($(this).parent().parent().find('.productInput'), $(this), true);\r\n        });\r\n\r\n        // Find all inputs with errors and show them.\r\n        $('.productInput').each(function () {\r\n            if (this.value) {\r\n                $(this).parent().parent().removeClass('hide');\r\n                $(this).parent().prev().find('img').removeClass('hide');\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n// Set auto complete options for the product inputs.\r\nfunction SetAutoCompleteOptions(result) {\r\n    if (result && result.d) {\r\n        autoCompleteOptions = result.d.ProductsList;\r\n        skuList = result.d.SkuList;\r\n        InitializeAutocompleteOptions();\r\n    }\r\n}\r\n\r\n// Initialize autocomplete options.\r\nfunction InitializeAutocompleteOptions() {\r\n    if (autoCompleteOptions) {\r\n        $('.productInput').kendoAutoComplete({\r\n            dataSource: autoCompleteOptions,\r\n            filter: \"contains\",\r\n            placeholder: autoPlaceHolderText\r\n        });\r\n    }\r\n\r\n    // Offset for the current sku's (errored)\r\n    var visibleIndex = 0;\r\n    $.each($('.productInput'), function (i, v) {\r\n        if (v.value) {\r\n            //$('.productInput').eq(visibleIndex).val(v.value);\r\n            //$('.productInput').eq(visibleIndex).parent().parent().removeClass('hide');\r\n            //visibleIndex++;\r\n            //v.value = '';\r\n        }\r\n    });\r\n}\r\n\r\n// Review if the row is complete.\r\nfunction IsRowComplete(productSku, quantity, focusOnNext) {\r\n    var sku = productSku.eq(2).val() ? productSku.eq(2).val() : productSku.eq(1).val();\r\n    var qty = quantity.val();\r\n\r\n    // Not empty.\r\n    if (sku && qty) {\r\n        productSku.parent().parent().next().removeClass('hide');\r\n\r\n        // Focus on the next product input.\r\n        if (focusOnNext) {\r\n            productSku.parent().parent().next().find('.productInput').focus();\r\n        }\r\n    }\r\n}","$(document).ready(function () {\r\n\r\n    var oldTxtCP1 = '';\r\n    var oldTxtCP2 = '';\r\n    var searchingText = '';\r\n\r\n    $(document).keydown(function (e) {\r\n        var element = (e != null) ? e.target.nodeName.toLowerCase() : 'null';\r\n        var elementType = (e != null) ? e.target.type : 'null';\r\n\r\n        if (element != 'input' && element != 'textarea' && elementType != 'text') {\r\n            if (e.keyCode === 8) {\r\n                return false;\r\n            }\r\n        }\r\n    });\r\n\r\n    if ($(\"ul.skin2\").length != 0) (\"ul.skin2\").tabs(\"div.skin2 > div\");\r\n\r\n    // HFF Modal =========================================\r\n    $HFFModal = {\r\n        message: null,\r\n        init: function () {\r\n\r\n            $(\"#modal-container\").modal({\r\n                closeHTML: \"<a href='#' title='Close' class='modal-close'>x</a>\",\r\n                position: [\"15%\", ],\r\n                overlayId: 'modal-overlay',\r\n                containerId: 'modal-container',\r\n                onOpen: $HFFModal.open,\r\n                onShow: $HFFModal.show,\r\n                onClose: $HFFModal.close\r\n            });\r\n\r\n        },\r\n        open: function (dialog) {\r\n\r\n            var title = $('#modal-container .modal-title').html();\r\n            $('#modal-container .modal-title').html('Loading...');\r\n\r\n            dialog.overlay.fadeIn(200, function () {\r\n                dialog.container.fadeIn(200, function () {\r\n                    dialog.data.fadeIn(200, function () {\r\n\r\n                        var h = $('#modal-container .modal-innerContent').height();\r\n                        ;\r\n\r\n                        $('#modal-container .modal-content').animate(\r\n                            {\r\n                                height: h\r\n                            }, function () {\r\n                                $('#modal-container .modal-title').html(title);\r\n                                $('#modal-container .modal-innerContent').fadeIn(200, function () {\r\n\r\n                                }); // $('#contact-container form').fadeIn(200, function () \r\n                            });\r\n                    });\r\n                });\r\n            });\r\n        },\r\n        show: function (dialog) {\r\n        },\r\n        close: function (dialog) {\r\n            $('#modal-container .modal-innerContent').fadeOut();\r\n            $('#modal-container .modal-title').html('Thank you...');\r\n            $('#modal-container .modal-content').animate(\r\n                {\r\n                    height: 40\r\n                }, function () {\r\n                    dialog.data.fadeOut(200, function () {\r\n                        dialog.container.fadeOut(200, function () {\r\n                            dialog.overlay.fadeOut(200, function () {\r\n                                $.modal.close();\r\n                            }); // dialog.overlay.fadeOut(200, function () \r\n                        }); // dialog.container.fadeOut(200, function () \r\n                    }); // dialog.data.fadeOut(200, function () \r\n                });\r\n        }, // Close =============\r\n        error: function (xhr) {\r\n            alert(xhr.statusText);\r\n        },\r\n        showError: function () {\r\n            $('#modal-container .error-message')\r\n                .html($('<div class=\"contact-error\"></div>').append(contact.message))\r\n                .fadeIn(200);\r\n        }\r\n    };\r\n    // End HFF Modal =========================================      \r\n\r\n    if ($(\"#zoomIntoProduct\").length > 0) {\r\n        $(\"#zoomIntoProduct\").kendoWindow();\r\n        var dialog = $(\"#zoomIntoProduct\").data(\"kendoWindow\");\r\n        dialog.setOptions({\r\n            width: 500,\r\n        });\r\n    }\r\n    if ($(\"#printThisPage\").length > 0) {\r\n        $(\"#printThisPage\").kendoWindow();\r\n        var dialog = $(\"#printThisPage\").data(\"kendoWindow\");\r\n        dialog.setOptions({\r\n            height: ($(window).outerHeight() - ($(\"#printThisPage\").prev().outerHeight() + 50)),\r\n            width: 700\r\n        });\r\n    }\r\n\r\n    $(\".btnPrintThisPage\").click(function (e) {\r\n        e.preventDefault();\r\n        if ($(\"#printThisPage\").length > 0) {\r\n            $(\"#printThisPage\").kendoWindow().data(\"kendoWindow\").close();\r\n        }\r\n    });\r\n\r\n    if ($.cookie(\"RENDERING_LOCALE\") == \"zh_CN\") {\r\n\r\n        // === China fix, Simulate Yes click if user clicks on overlay\r\n        $('[id$=\"UpdatePanelTermCondition\"] [id$=\"backgroundElement\"]').live(\"click\", function () {\r\n            $('div[id$=\"PnlTermCondition\"] a[id$=\"btnTermConditionYes\"]')[0].click();\r\n        });\r\n\r\n        // === Freeze Pricelist Header Cols\r\n        $(window).bind('scroll', function () {\r\n            if (is_page(\"pricelist\")) {\r\n                if (responsiveMode != true) {\r\n                    $(window).bind('scroll', function () {\r\n                        freeze_header_cols();\r\n                    });\r\n                }\r\n            }\r\n        });\r\n        // === /Freeze Pricelist Header Cols\r\n\r\n        if (responsiveMode != true) {\r\n\r\n            $(\".tabs-SKU input[id$='Quantity']\").live('keyup', function () {\r\n\r\n                if ($('[id$=\"lbVolumePoint\"].totalVP').length > 0) {\r\n                 $('[id$=\"lbVolumePoint\"].totalVP').text(ProdDetailVPCalculation.get_total_vp());\r\n                }\r\n                if ($('[id$=\"lbTotalAmount\"].totalAmount').length > 0) {\r\n                    $('[id$=\"lbTotalAmount\"].totalAmount').text(ProdDetailVPCalculation.get_total_ammount());\r\n                }\r\n\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n\r\n    /*Since all the tabs are hidden with css we are displaying the tab with class .active_tab using fadeIn()\r\n    function. If you just want it to show with no effect, just put show() instead of fadeIn() */\r\n    //$('.active_tab').fadeIn();\r\n\r\n    $('[name$=\"rblPaymentOptions\"]').live(\"change\", function () {\r\n\r\n        var _this_options = this;\r\n\r\n        //$('.tab_link').live('click', function (event) {\r\n        var _parent = $(_this_options).parent();\r\n\r\n        /* ...remove the tab_link_selected class from current active link... */\r\n        $('.tab_link_selected').removeClass('tab_link_selected');\r\n\r\n        /* ...and add it to the new active link */\r\n        $(_parent).addClass('tab_link_selected');\r\n\r\n        /*...get the title attribute (which corensponds to the id of the needed text container),\r\n        but you can use any attribute you want*/\r\n        var container_id = $(_parent).attr('href');\r\n\r\n        $('.active_tab').removeClass('active_tab').hide();\r\n\r\n        $('[id$=\"' + container_id + '\"]').addClass('active_tab').show();\r\n\r\n        //});\r\n\r\n    });\r\n\r\n\r\n\r\n});\r\n\r\nfunction CheckNumeric(e, ctrl) {\r\n    var keynum;\r\n    if (!e)\r\n        var e = window.event\r\n    if (e.keyCode) keynum = e.keyCode;\r\n    else if (e.which) keynum = e.which;\r\n\r\n    // take only numbers\r\n    if (keynum > 57 || keynum < 48) {\r\n        e.cancelBubble = true;\r\n        if (e.keyCode) // IE\r\n        {\r\n            e.keyCode = 2;\r\n        }\r\n        else if (e.which) {\r\n            if (e.preventDefault) e.preventDefault();\r\n            if (e.stopPropagation) e.stopPropagation();\r\n\r\n        }\r\n    }\r\n}\r\n\r\nfunction CheckAreaPlusPhone(e, ctrlArea, ctrlPhone, totalLength) {\r\n    var elementAreaCode = document.getElementById(ctrlArea);\r\n    var elementPhone = document.getElementById(ctrlPhone);\r\n    if (elementAreaCode != null && elementPhone != null) {\r\n        if (elementAreaCode.value.length + elementPhone.value.length >= totalLength) {\r\n            e.cancelBubble = true;\r\n            if (window.event) {\r\n                e.keyCode = 0;\r\n            }\r\n            else if (e.which) {\r\n                e.which = 0;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction PickupSelected(ctrl) {\r\n    var items = document.getElementsByTagName('input');\r\n    for (i = 0; i < items.length; i++) {\r\n        if (items[i].type == \"radio\") {\r\n            if (items[i].name.indexOf(\"rbSelected\") != -1) {\r\n                if (items[i] != ctrl) {\r\n                    items[i].checked = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nfunction CheckChanges(textbox, selector) {\r\n    var changed = false;\r\n\r\n    if (selector === '.txtPostCode2') {\r\n        oldTxtCP2 = $(selector).val();\r\n        if (oldTxtCP1 != $(textbox).val()) {\r\n            changed = true;\r\n        }\r\n        oldTxtCP1 = $(textbox).val();\r\n    }\r\n    else {\r\n        oldTxtCP1 = $(selector).val();\r\n        if (oldTxtCP2 != $(textbox).val()) {\r\n            changed = true;\r\n        }\r\n        oldTxtCP2 = $(textbox).val();\r\n    }\r\n\r\n\r\n    if (($(selector).val() && $(textbox).val() && changed) ||\r\n        (!$(selector).val() && !$(textbox).val())) {\r\n        javascript: __doPostBack(textbox.name, '');\r\n    }\r\n}\r\n\r\nfunction AllowOnlyNumbers2(control) {\r\n    $(control).val($(control).val().replace(/[^\\d]/g, ''));\r\n};\r\n\r\nfunction AllowOnlyNumbers(event) {\r\n    // Allow only backspace and delete\r\n    if (event.keyCode == 46 || event.keyCode == 8) {\r\n        // let it happen, don't do anything\r\n    }\r\n    else {\r\n        // Ensure that it is a number and stop the keypress\r\n        if (event.keyCode < 48 || event.keyCode > 57) {\r\n            event.preventDefault();\r\n        }\r\n    }\r\n};\r\n\r\nfunction EnableMasterScrolling() {\r\n    $(\"body\").css(\"overflow\", \"auto\");\r\n};\r\n\r\nfunction DisableMasterScrolling() {\r\n    $(\"body\").css(\"overflow\", \"hidden\");\r\n};\r\n\r\n$.fn.switchClasses = function (toAdd, toRemove) {\r\n    this.each(function () {\r\n        $(this).removeClass(toRemove).addClass(toAdd);\r\n    });\r\n},\r\n\r\n// If a handler exist on the keypress event.\r\n$.fn.keyPressHandlerExist = function (handlerName) {\r\n    var exist = false;\r\n    this.each(function () {\r\n        if (handlerName && $(this).data('events') && $(this).data('events').keypress) {\r\n            $.each($(this).data('events').keypress, function (i, handler) {\r\n                if (handler.handler.toString().indexOf(handlerName) >= 0) {\r\n                    exist = true;\r\n                }\r\n            });\r\n        }\r\n    });\r\n    return exist;\r\n}\r\n\r\n// String.Format equivalent from c#.\r\nString.prototype.format = String.prototype.f = function () {\r\n    var s = this,\r\n        i = arguments.length;\r\n\r\n    while (i--) {\r\n        s = s.replace(new RegExp('\\\\{' + i + '\\\\}', 'gm'), arguments[i]);\r\n    }\r\n    return s;\r\n}\r\n\r\n// Allow only numeric characters.\r\n$.fn.setNumeric2 = function (event) {\r\n    this.each(function () {\r\n        $(this).keypress(function (event) {\r\n            var key = '';\r\n            // If browser is FireFox.\r\n            if (navigator.appName == \"Netscape\") {\r\n                key = String.fromCharCode(event.charCode);\r\n            }\r\n            else {\r\n                key = String.fromCharCode(event.keyCode);\r\n            }\r\n\r\n            var valid = false;\r\n            var filter = /[0-9]+/;\r\n            if (filter.test(key)) {\r\n                valid = true;\r\n            }\r\n\r\n            var filteredValue = $(this).val();\r\n            for (var i = $(this).val().length - 1; i >= 0; i--) {\r\n                var ch = $(this).val().charAt(i);\r\n                if (!filter.test(ch)) {\r\n                    filteredValue = filteredValue.substring(0, i) + filteredValue.substring(i + 1);\r\n                }\r\n            }\r\n            $(this).val(filteredValue);\r\n\r\n            if (event && !valid) {\r\n                if (event.preventDefault) {\r\n                    event.preventDefault();\r\n                }\r\n                else {\r\n                    event.returnValue = false;\r\n                }\r\n            }\r\n        });\r\n        $(this).blur(function (event) {\r\n            var filter = /[0-9]+/;\r\n            var filteredValue = $(this).val();\r\n            for (var i = $(this).val().length - 1; i >= 0; i--) {\r\n                var ch = $(this).val().charAt(i);\r\n                if (!filter.test(ch)) {\r\n                    filteredValue = filteredValue.substring(0, i) + filteredValue.substring(i + 1);\r\n                }\r\n            }\r\n            $(this).val(filteredValue);\r\n        });\r\n    });\r\n},\r\n\r\n// Set numeric textbox.\r\n$.fn.setAsNumeric = function (nDecimals) {\r\n    this.each(function () {\r\n        $(this).keypress(function (event) {\r\n            var key = '';\r\n\r\n            // If browser is FireFox.\r\n            if (navigator.appName == \"Netscape\") {\r\n                key = String.fromCharCode(event.charCode);\r\n            } else {\r\n                key = String.fromCharCode(event.keyCode);\r\n            }\r\n            var valid = true;\r\n\r\n            var hasPoint = $(this).val().indexOf('.') >= 0;\r\n            var hasComa = $(this).val().indexOf(',') >= 0;\r\n\r\n            // If it has already a decimals separator.\r\n            if ((key === '.' || key === ',') && (hasPoint || hasComa)) {\r\n                valid = false;\r\n            }\r\n\r\n            if (event && !valid) {\r\n                if (event.preventDefault) {\r\n                    event.preventDefault();\r\n                } else {\r\n                    event.returnValue = false;\r\n                }\r\n            }\r\n\r\n        });\r\n    });\r\n},\r\n\r\n// Allow only hebrew characters.\r\n$.fn.disableEnglish = function (event) {\r\n    this.each(function () {\r\n        $(this).keypress(function (event) {\r\n            var Key = '';\r\n            // If browser is FireFox.\r\n            if (navigator.appName == \"Netscape\") {\r\n                Key = String.fromCharCode(event.charCode);\r\n            }\r\n            else {\r\n                Key = String.fromCharCode(event.keyCode);\r\n            }\r\n\r\n            var valid = true;\r\n            var filter = /[a-zA-Z]+/;\r\n            if (filter.test(Key)) {\r\n                valid = false;\r\n            }\r\n            $(control).val($(control).val().replace(/[a-zA-Z]+/, ''));\r\n            if (event && !valid) {\r\n                if (event.preventDefault) {\r\n                    event.preventDefault();\r\n                }\r\n                else {\r\n                    event.returnValue = false;\r\n                }\r\n            }\r\n        });\r\n        $(this).blur(function (event) {\r\n            var Key = '';\r\n            // If browser is FireFox.\r\n            if (navigator.appName == \"Netscape\") {\r\n                Key = String.fromCharCode(event.charCode);\r\n            }\r\n            else {\r\n                Key = String.fromCharCode(event.keyCode);\r\n            }\r\n\r\n            var valid = true;\r\n            var filter = /[a-zA-Z]+/;\r\n            if (filter.test(Key)) {\r\n                valid = false;\r\n            }\r\n            $(control).val($(control).val().replace(/[a-zA-Z]+/, ''));\r\n            if (event && !valid) {\r\n                if (event.preventDefault) {\r\n                    event.preventDefault();\r\n                }\r\n                else {\r\n                    event.returnValue = false;\r\n                }\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\n// Legacy javascript code.\r\nfunction checkSKUChar(e, ctrl) {\r\n    var keychar;\r\n\r\n    if (!e) {\r\n        e = window.event;\r\n    }\r\n\r\n    keychar = String.fromCharCode(e.keyCode || e.which);\r\n\r\n    if (!/^ *[0-9a-zA-Z]+ *$/.test(keychar)) {\r\n        e.cancelBubble = true;\r\n        if (e.keyCode) // IE\r\n        {\r\n            e.keyCode = 2;\r\n        }\r\n        else if (e.which) {\r\n            if (e.preventDefault) e.preventDefault();\r\n            if (e.stopPropagation) e.stopPropagation();\r\n\r\n        }\r\n    }\r\n}\r\n\r\n//Timer\r\nfunction cronometro() {\r\n    var today = new Date();\r\n    if ($(\"#ctl00_ctl00_PageHeaderArea_hTargetDate\").length > 0) {\r\n        var help_date = document.getElementById(\"ctl00_ctl00_PageHeaderArea_hTargetDate\").value;\r\n    } else {\r\n        var help_date = document.getElementById(\"PageHeaderArea_hTargetDate\").value;\r\n    }\r\n\r\n\r\n    if (help_date) {\r\n        Sys.WebForms.PageRequestManager.getInstance().add_endRequest(cronometro);\r\n        // Split help_date to obtain target_date parameters\r\n        var YearEOM = help_date.split(' ')[0];\r\n        var MonthEOM = help_date.split(' ')[1];\r\n        var DayEOM = help_date.split(' ')[2];\r\n        var HourEOM = help_date.split(' ')[3];\r\n        var MinEOM = help_date.split(' ')[4];\r\n        var SecEOM = help_date.split(' ')[5];\r\n\r\n        // get tag element\r\n        var target_date = new Date(YearEOM, MonthEOM - 1, DayEOM, HourEOM, MinEOM, SecEOM);\r\n        //var target_date = new Date(today.getFullYear(), today.getMonth() + 1, 0, 23, 59);\r\n\r\n        // variables for time units\r\n        var days, hours, minutes, seconds;\r\n        var timer;\r\n        var counterlbl = document.getElementById(\"ctl00_ctl00_PageHeaderArea_counter\");\r\n        var countdown_sec = document.getElementById(\"countdown_sec\");\r\n        var countdown_min = document.getElementById(\"countdown_min\");\r\n        var countdown_hr = document.getElementById(\"countdown_hr\");\r\n        var countdown_dy = document.getElementById(\"countdown_dy\");\r\n\r\n        // Split timtest to obtain serverTime parameters        \r\n        if ($(\"#ctl00_ctl00_PageHeaderArea_hcurrentDate\").length > 0) {\r\n            var timtest = document.getElementById(\"ctl00_ctl00_PageHeaderArea_hcurrentDate\").value;\r\n        } else {\r\n            var timtest = document.getElementById(\"PageHeaderArea_hcurrentDate\").value;\r\n        }\r\n        var YearServer = timtest.split(' ')[0];\r\n        var MonthServer = timtest.split(' ')[1];\r\n        var DayServer = timtest.split(' ')[2];\r\n        var HourServer = timtest.split(' ')[3];\r\n        var MinServer = timtest.split(' ')[4];\r\n        var SecServer = timtest.split(' ')[5];\r\n\r\n        var serverTime = new Date(YearServer, MonthServer - 1, DayServer, HourServer, MinServer, SecServer);\r\n        var clientNow = new Date().getTime();\r\n        var endTime = target_date - serverTime + clientNow;\r\n\r\n        // update the tags with id \"countdown_\" every 1 second\r\n        timer = setInterval(function () {\r\n\r\n            // find the amount of \"seconds\" between now and target\r\n            var current_date = new Date().getTime();\r\n            var seconds_left = (endTime - new Date()) / 1000;\r\n\r\n            // do some time calculations\r\n            days = parseInt(seconds_left / 86400);\r\n            seconds_left = seconds_left % 86400;\r\n\r\n            hours = parseInt(seconds_left / 3600);\r\n            seconds_left = seconds_left % 3600;\r\n\r\n            minutes = parseInt(seconds_left / 60);\r\n            seconds = parseInt(seconds_left % 60);\r\n\r\n            if (days <= 0 && hours <= 0 && minutes <= 0 && seconds <= 0) {\r\n                //countdown_sec.innerHTML = \"00\";\r\n                countdown_min.innerHTML = \"00\";\r\n                countdown_hr.innerHTML = \"00\";\r\n                countdown_dy.innerHTML = \"00\";\r\n                counterlbl.className = counterlbl.className + \" hide\";\r\n\r\n                clearInterval(timer);\r\n            }\r\n            else {\r\n                // format countdown string + set tag value\r\n\r\n                //if (seconds < 10) {\r\n                //    countdown_sec.innerHTML = \"0\" + seconds;\r\n                //}\r\n                //else {\r\n                //    countdown_sec.innerHTML = seconds;\r\n                //}\r\n                if (minutes < 10) {\r\n                    countdown_min.innerHTML = \"0\" + minutes;\r\n                }\r\n                else {\r\n                    countdown_min.innerHTML = minutes;\r\n                }\r\n                if (hours < 10) {\r\n                    countdown_hr.innerHTML = \"0\" + hours;\r\n                }\r\n                else {\r\n                    countdown_hr.innerHTML = hours;\r\n                }\r\n                if (days < 10) {\r\n                    countdown_dy.innerHTML = \"0\" + days;\r\n                }\r\n                else {\r\n                    countdown_dy.innerHTML = days;\r\n                }\r\n            }\r\n        }, 1000);\r\n    }\r\n\r\n}\r\n\r\n/* Fix per defect 117491 */\r\nfunction cookieEater() {\r\n    eraseCookie('DUPCHECKWITHREFID_STATUS');\r\n\r\n    if (document.cookie.indexOf(\"DUPCHECKWITHREFID_STATUS\") >= 0) {\r\n        // Cookie still exist    \r\n        $(document).ready(function () {\r\n            $.cookie('DUPCHECKWITHREFID_STATUS', null);\r\n        });\r\n    }\r\n\r\n}\r\n\r\nfunction createCookie(name, value, days) {\r\n    if (days) {\r\n        var date = new Date();\r\n        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\r\n        var expires = \"; expires=\" + date.toGMTString();\r\n    }\r\n    else var expires = \"\";\r\n    document.cookie = name + \"=\" + value + expires + \"; path=/\";\r\n}\r\n\r\nfunction eraseCookie(name) {\r\n    createCookie(name, \"\", -1);\r\n}\r\n\r\n/* Hide Product Catalog*/\r\nfunction toggleCatalog() {\r\n\r\n    if (is_page(\"productdetail\") || is_page(\"catalog\")) {\r\n\r\n        $('.toggle-child').hide();\r\n        $('.toggle-child:not(.grandson)').show();\r\n        $('li.toggle-parent:not(.grandpa) i').remove();\r\n\r\n        $('.grandpa')\r\n            .addClass('toggle-parent')\r\n            .find('.arrow')\r\n            .removeClass('hide');\r\n\r\n        if (document.cookie.indexOf(\"showcat\") >= 0) {\r\n\r\n            $('[id$=\"toggleMe\"]')\r\n                .show()\r\n                .addClass('opened');\r\n\r\n            $('[id$=\"toggleMe\"]')\r\n                .prev()\r\n                .find(\".arrow\")\r\n                .toggleClass(\"up icon-minus-ln-1\");\r\n\r\n        }\r\n\r\n        $('.toggle-parent.grandpa').click(function (e) {\r\n            e.preventDefault();\r\n            var _this = $(this);\r\n            var _child = $(_this).next('.toggle-child');\r\n            var _opened = _this.parent().find('.opened');\r\n\r\n            // Close opened list\r\n            if (_opened.length && !_child.is(_opened) && !_this.hasClass('grandpa')) {\r\n\r\n                _opened.prev().find('.arrow').toggleClass('up icon-minus-ln-1');\r\n                _opened.removeClass('opened').slideUp();\r\n\r\n            }\r\n\r\n            if (_child.hasClass('opened')) {\r\n\r\n                _this.find('.arrow').toggleClass('up icon-minus-ln-1');\r\n                _child.slideUp().removeClass('opened');\r\n\r\n                if (_this.hasClass('grandpa') && _this.hasClass('catalog')) { eraseCookie('showcat'); }\r\n                else if (_this.hasClass('grandpa') && _this.hasClass('apparel')) { eraseCookie('showapp'); }\r\n\r\n            } else {\r\n\r\n                _this.find('.arrow').toggleClass('up icon-minus-ln-1');\r\n                _child.slideDown().addClass('opened');\r\n\r\n                if (_this.hasClass('grandpa') && _this.hasClass('catalog')) { createCookie('showcat', 'true', 7); }\r\n                else if (_this.hasClass('grandpa') && _this.hasClass('apparel')) { createCookie('showapp', 'true', 7); }\r\n            }\r\n\r\n        });\r\n    }\r\n}\r\n\r\nfunction RemovePopup(event) {\r\n    $('#ctl00_ctl00_ContentArea_uchrblMessageBoxControl2_popup_MessageBox_backgroundElement').hide();\r\n    $('#ctl00_ctl00_ContentArea_uchrblMessageBoxControl2_pnlMessageBox').hide();\r\n}\r\n\r\n$(document).mouseup(function (e) {\r\n    var container = $('#ctl00_ctl00_ContentArea_uchrblMessageBoxControl2_pnlMessageBox');\r\n\r\n    if (!container.is(e.target) // if the target of the click isn't the container...\r\n        && container.has(e.target).length === 0) // ... nor a descendant of the container\r\n    {\r\n        container.hide();\r\n        $('#ctl00_ctl00_ContentArea_uchrblMessageBoxControl2_popup_MessageBox_backgroundElement').hide();\r\n    }\r\n});\r\nfunction scroll_to_element(elementSelector, duration) {\r\n    $('html, body').animate({\r\n        scrollTop: $(elementSelector).offset().top\r\n    }, duration);\r\n}\r\n\r\n$(document).ready(function () {\r\n    var cookieLocal = $.cookie(\"RENDERING_LOCALE\");\r\n    if (cookieLocal == \"zh_CN\") {\r\n        $(\"a[name='checkoutButton']\").live('click', function () {\r\n            $(\"div[id$='updateProgressDiv']\").css({ \"background-color\": \"white\", \"opacity\": \"0.75\", \"background-image\": \"url('/Ordering/Images/China/hrblpreloader.gif')\" });\r\n        });\r\n    } else if ((cookieLocal == \"ru_BY\") || (cookieLocal == \"ru_KZ\")) {\r\n        $('input[type=radio]').live('click', function () {\r\n            if ($(this).val() == 3) {\r\n                $(\"div.checkout-logos\").css({ \"display\": \"none\" });\r\n            }\r\n            else {\r\n                $(\"div.checkout-logos\").css({ \"display\": \"inherit\" });\r\n            }\r\n        });\r\n    }\r\n});\r\n\r\n/* Fix per defect 117926 */\r\nfunction hidePromoPopup() {\r\n    $(document).ready(function () {\r\n        var cookieLocal = $.cookie(\"RENDERING_LOCALE\");\r\n\r\n        if ((cookieLocal == \"en_CA\") || (cookieLocal == \"fr_CA\")) {\r\n            if (document.cookie.indexOf(\"valPopup\") >= 0) {\r\n                // Cookie still exist    \r\n                $(\"div[id$='MessageBoxControl2_pnlMessageBox']\").css({ \"display\": \"none\" });\r\n                $(\"div[id$='uchrblMessageBoxControl2_popup_MessageBox_backgroundElement']\").css({ \"display\": \"none\" });\r\n\r\n                setTimeout(function () {\r\n                    $(\"div[id$='uchrblMessageBoxControl2_popup_MessageBox_backgroundElement']\").hide();\r\n                    $(\"div[id$='MessageBoxControl2_pnlMessageBox']\").hide();\r\n                }, 1);\r\n\r\n                eraseCookie('valPopup');\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nfunction freeze_header_cols() {\r\n    var scrollTop = $(window).scrollTop();\r\n    // === Freeze Pricelist Header Cols\r\n    var colProdW = $('.freeze-header').next().next().find('.col-Product').outerWidth();\r\n    $('.freeze-header .col-Product').css('width', colProdW);\r\n\r\n    /* === VP === */\r\n    var $vp = $('.freeze-vp'),\r\n        $vpNext = $('.freeze-vp + tr'),\r\n        vpW = $vp.next().outerWidth(),\r\n        vpH = $vp.next().outerHeight(),\r\n        vpOffset = $vp.offset().top,\r\n        vpNextOffset = $vpNext.offset().top,\r\n        distanceVP = (vpOffset - scrollTop),\r\n        distanceVPNext = (vpNextOffset - scrollTop);\r\n\r\n    if (distanceVP < 0) {\r\n\r\n        $vp.addClass('topSticky').css({ 'width': vpW, 'background-color': '#FFF' });\r\n\r\n    } else if (distanceVPNext > vpH) {\r\n\r\n        $vp.removeClass('topSticky');\r\n\r\n    }\r\n\r\n    /* === Actions === */\r\n    var $actions = $('.freeze-actions'),\r\n        $actionsNext = $('.freeze-actions + tr'),\r\n        actionsW = $actions.next().outerWidth(),\r\n        actionsH = $actions.next().outerHeight(),\r\n        actionsOffset = $actions.offset().top,\r\n        actionsNextOffset = $actionsNext.offset().top,\r\n        distanceActions = (actionsOffset - scrollTop),\r\n        distanceActionsNext = (actionsNextOffset - scrollTop);\r\n\r\n    if (distanceActions < 0) {\r\n\r\n        $actions\r\n            .addClass('topSticky')\r\n            .css({ 'width': actionsW });\r\n        $actions\r\n            .children()\r\n            .first()\r\n            .css('width', actionsW);\r\n\r\n    } else if (distanceActionsNext > actionsH) {\r\n\r\n        $actions.removeClass('topSticky');\r\n\r\n    }\r\n\r\n    /*=== Pricelist Table */\r\n    var $header = $('.freeze-header'),\r\n        $headerNext = $('.freeze-header + tr');\r\n    var headerW = $header.next().outerWidth(),\r\n        headerH = $header.next().outerHeight(),\r\n        headerOffset = $header.offset().top,\r\n        headerNextOffset = $headerNext.offset().top,\r\n        distanceH = (headerOffset - scrollTop),\r\n        distanceHNext = (headerNextOffset - scrollTop);\r\n\r\n    if (distanceH < 0) {\r\n\r\n        $header\r\n            .addClass('topSticky')\r\n            .css({ 'width': headerW, 'top': $vp.outerHeight() });\r\n\r\n    } else if (distanceHNext > headerH) {\r\n\r\n        $header.removeClass('topSticky');\r\n\r\n    }\r\n}\r\n\r\nvar VPCalculation = {\r\n    selected_skus: [],\r\n    get_skus: function () {\r\n\r\n        var products = $('[id$=\"pricelistGridInfo\"]').val();\r\n\r\n        if (products == \"\") { return false; }\r\n\r\n        var prods = '{';\r\n        products = products.split(\",\");\r\n\r\n        $.each(products, function (key, value) {\r\n\r\n            if (value != \"\") {\r\n\r\n                skus = value.split(\"|\");\r\n                sku = skus[0].replace(\"txt_\", \"\"); // SKU Id\r\n                qty = (skus[1] != \"\") ? parseInt(skus[1], 10) : 0; // QTY\r\n\r\n                if (isNaN(qty)) { qty = 0; }\r\n\r\n                psku = ($(\"tr[product-sku='\" + sku + \"'] .col-VolumePoint\").attr('item-vp') != undefined) ?\r\n                    '\"vp\" : ' + $(\"tr[product-sku='\" + sku + \"'] .col-VolumePoint\").attr('item-vp') + '' :\r\n                    \"\";\r\n                comma = (psku == \"\") ? \"\" : \",\";\r\n\r\n                prods +=\r\n\r\n                  '\"' + sku + '\"' + ': {' +\r\n\r\n                    '\"price\" : ' + $(\"tr[product-sku='\" + sku + \"'] .col-RetailPrice\").attr('list-price') + ',' +\r\n                    '\"qty\" : ' + qty + comma +\r\n                    psku +\r\n\r\n                  '},';\r\n\r\n            }\r\n\r\n        });\r\n        prods = prods.substring(0, prods.length - 1);\r\n        prods += '}';\r\n        this.selected_skus = JSON.parse(prods);\r\n    },\r\n    get_total_vp: function () {\r\n        var totalVP = 0;\r\n        $.each(VPCalculation.selected_skus, function (sku, item) {\r\n\r\n            totalVP += item.vp * item.qty;\r\n\r\n        });\r\n\r\n        return this.format_totals(totalVP);\r\n    },\r\n    get_total_ammount: function () {\r\n        var totalAmmount = 0;\r\n        $.each(VPCalculation.selected_skus, function (sku, item) {\r\n\r\n            totalAmmount += item.price * item.qty;\r\n\r\n        });\r\n\r\n        return this.format_totals(totalAmmount);\r\n    },\r\n    format_totals: function (total) {\r\n        var neg = false;\r\n        if (total < 0) {\r\n            neg = true;\r\n            total = Math.abs(total);\r\n        }\r\n        return parseFloat(total, 10).toFixed(2).replace(/(\\d)(?=(\\d{3})+\\.)/g, \"$1,\").toString();\r\n    }\r\n\r\n};\r\n\r\nvar ProdDetailVPCalculation = {\r\n    total_vp: 0,\r\n    total_ammount: 0,\r\n\r\n    get_total_vp: function () {\r\n        var qty_inputs = $(\".tabs-SKU input[id$='Quantity']\");\r\n        var VPs = $(\".tabs-SKU span[id$='VolumePoints']\");\r\n        var qty = 0, vp = 0, totalVP = 0;\r\n\r\n        $.each(qty_inputs, function (key, qty_input) {\r\n\r\n            qty = ($(qty_input).val() != \"\") ? parseInt($(qty_input).val(), 10) : 0; // QTY\r\n            \r\n            if (isNaN(qty)) { qty = 0; }\r\n\r\n            if (qty > 0) {\r\n                vp = $(VPs[key]).text();\r\n                totalVP += qty * vp;\r\n            }\r\n\r\n        });\r\n\r\n        return this.format_totals(totalVP);\r\n    },\r\n    get_total_ammount: function () {\r\n        var qty_inputs = $(\".tabs-SKU input[id$='Quantity']\");\r\n        var prices = $(\".tabs-SKU span[id$='Retail']\");\r\n        var qty = 0, price = 0, totalAmmount = 0;\r\n\r\n        $.each(qty_inputs, function (key, qty_input) {\r\n\r\n            qty = ($(qty_input).val() != \"\") ? parseInt($(qty_input).val(), 10) : 0; // QTY\r\n\r\n            if (isNaN(qty)) { qty = 0; }\r\n\r\n            if (qty > 0) {\r\n\r\n                price = $(prices[key]).parent().attr('list-price');\r\n                totalAmmount += qty * price;\r\n\r\n            }\r\n\r\n        });\r\n\r\n        return this.format_totals(totalAmmount);\r\n    },\r\n    format_totals: function (total) {\r\n        var neg = false;\r\n        if (total < 0) {\r\n            neg = true;\r\n            total = Math.abs(total);\r\n        }\r\n        return parseFloat(total, 10).toFixed(2).replace(/(\\d)(?=(\\d{3})+\\.)/g, \"$1,\").toString();\r\n    }\r\n\r\n};\r\n\r\nfunction is_page(pageName) {\r\n    return (window.location.pathname.toLowerCase().indexOf(pageName) > -1) ? true : false;\r\n}\r\n\r\n(function ($) {\r\n    $.support.placeholder = ('placeholder' in document.createElement('input'));\r\n})(jQuery);\r\n\r\n\r\n//fix for IE7 and IE8 for Placeholders\r\n$(function () {\r\n    if (!$.support.placeholder) {\r\n        $(\"[placeholder]\").focus(function () {\r\n            if ($(this).val() == $(this).attr(\"placeholder\")) $(this).val(\"\");\r\n        }).blur(function () {\r\n            if ($(this).val() == \"\") $(this).val($(this).attr(\"placeholder\"));\r\n        }).blur();\r\n\r\n        $(\"[placeholder]\").parents(\"form\").submit(function () {\r\n            $(this).find('[placeholder]').each(function () {\r\n                if ($(this).val() == $(this).attr(\"placeholder\")) {\r\n                    $(this).val(\"\");\r\n                }\r\n            });\r\n        });\r\n    }\r\n});\r\n\r\nfunction visibleAreaHeight() {\r\n    jQuery('#TB_ajaxContent .gdo-popup').css(\r\n                'max-height',\r\n                $(window).outerHeight() - (Math.round($(window).outerHeight() * 0.20))\r\n            );\r\n\r\n    jQuery(window).resize(function () {\r\n        jQuery('#TB_ajaxContent .gdo-popup').css(\r\n          'max-height',\r\n          $(window).outerHeight() - (Math.round($(window).outerHeight() * 0.20))\r\n        );\r\n    });\r\n\r\n}","\r\nvar invEdit = {\r\n    Init: function () {\r\n        var redirect = RedirectToReceipts();\r\n\r\n        if (redirect) {\r\n            window.location = redirect;\r\n            return false;\r\n        }\r\n\r\n        var editModel = kendo.observable(new invEdit.invoiceEditViewModel());\r\n        kendo.bind($('#dvInvEdit'), editModel);\r\n        editModel.loadInvoicedata();\r\n        editModel.loadErrorMessages();\r\n    },\r\n\r\n    productquantityTemplate: function () {\r\n        return kendo.template($('#ProductQuantityInvTpl').html());\r\n    },\r\n    productTotalPriceTemplate: function () { return kendo.template($('#ProductTotalPriceInvTpl').html()); },\r\n\r\n    deleteProductTemplate: function () { return kendo.template($('#deleteProductTpl').html()); },\r\n    selectContactTemplate: function () {\r\n        return kendo.template($('#selectContactTpl').html());\r\n    },\r\n    savedCartsTemplate: function () { return kendo.template($('#savedCartsTpl').html()); },\r\n\r\n    savedDateTemplate: function () { return kendo.template($('#savedDateTpl').html()); },\r\n\r\n    productDescTemplate: function () {\r\n        return kendo.template($('#productDescTpl').html());\r\n    },\r\n    validator: function () {\r\n        return $(\"#dvInvEdit\").kendoValidator({\r\n            rules: {\r\n                ProductValidation: function (input) {\r\n                    if (input[0].id == \"individual-products\") {\r\n                        var model = input.prop(\"kendoBindingTarget\").source;\r\n                        if (!model.invoice.InvoiceLines || model.invoice.InvoiceLines.length == 0) {\r\n                            return false;\r\n                        }\r\n                        model.set('validIndProducts', true);\r\n                        return true;\r\n                    } else {\r\n                        return true;\r\n                    }\r\n                }\r\n            },\r\n            messages: {\r\n                ProductValidation: function (input) {\r\n                    var model = input.prop(\"kendoBindingTarget\").source;\r\n                    return model.errorMessages['reqProducts'];\r\n                },\r\n            }\r\n        }).data(\"kendoValidator\");\r\n    },\r\n\r\n    invoiceEditViewModel: function () {\r\n        this.isLoading = true;\r\n        this.isLoaded = false;\r\n        this.invoice = null;\r\n        this.stateSelected = null;\r\n        this.rootCategories = [];\r\n        this.contacts = [];\r\n        this.selectedRootCategoryItem = null;\r\n        this.categories = [];\r\n        this.contactsFilter = \"\";\r\n        this.productsFilter = \"\";\r\n        this.savedCartsFilter = \"\";\r\n        this.autocompleteData = [];\r\n        this.savedCarts = [];\r\n        this.selectedProduct = null;\r\n        this.edit_InvoiceId = window.edit_InvoiceId;\r\n        this.edit_OrderId = window.edit_OrderId;\r\n        this.edit_CopyInvoiceId = window.edit_CopyInvoiceId;\r\n        this.statusSelected = \"Unpaid\";\r\n        this.memberAddressstateSelected = null;\r\n        this.errorMessages = [];\r\n        this.selectedAddress = null;\r\n        this.selectedIdAddress = null;\r\n        this.errorText = \"\";\r\n        this.edit_Invoice_Action = window.edit_Invoice_Action;\r\n        this.productSearchErrorText = \"\";\r\n        this.addProductErrorText = \"\";\r\n        this.contactsErrorText = \"\";\r\n        this.edit_Order_Source = window.edit_Order_Source;\r\n        this.edit_Invoice_Date = window.edit_Invoice_Date;\r\n        this.priceAlertText = \"\";\r\n        this.memberTaxEdit = false;\r\n        this.memberShippingEdit = false;\r\n        this.IsEditTaxClickClicked = false;\r\n        this.IsEditHandlingFeeClicked = false;\r\n        this.validIndProducts = false;\r\n\r\n        this.editHandlingFeeClick = function () {\r\n            this.set('IsEditHandlingFeeClicked', true);\r\n        };\r\n\r\n        this.editTaxClick = function () {\r\n            this.set('IsEditTaxClickClicked', true);\r\n        };\r\n\r\n        this.onMemberHandlingFeeChange = function () {\r\n            this.invoice.set('IsMemberHandlingFeeEdited', true);\r\n            this.calculateMemberTotal();\r\n        };\r\n\r\n        this.onMemberTaxChange = function () {\r\n            this.invoice.set('IsMemberTaxEdited', true);\r\n            this.calculateMemberTotal();\r\n        };\r\n\r\n\r\n        this.saveChanges = function () {\r\n\r\n            if (invEdit.validator().validate()) {\r\n                var self = this;\r\n                var invoiceModel = this.invoice;\r\n                if (this.statusSelected) {\r\n                    if (this.statusSelected.Value) {\r\n                        invoiceModel.Status = this.statusSelected.Value;\r\n                    } else {\r\n                        invoiceModel.Status = this.statusSelected;\r\n                    }\r\n                }\r\n\r\n                if (this.stateSelected) {\r\n                    if (this.stateSelected.Value) {\r\n                        invoiceModel.Address.StateStatus = this.stateSelected.Value;\r\n                    } else {\r\n                        if (typeof (this.stateSelected) === 'object') {\r\n                            invoiceModel.Address.State = \"\";\r\n                        }\r\n                        else {\r\n                            invoiceModel.Address.State = this.stateSelected;\r\n                        }                            \r\n                    }\r\n                }\r\n                if (invoiceModel.InvoiceDate) {\r\n                    invoiceModel.InvoiceDate = new Date(moment(invoiceModel.InvoiceDate));\r\n                }\r\n\r\n                $.ajax({\r\n                    url: '/Ordering/api/InvoiceEdit/Post',\r\n                    type: 'POST',\r\n                    contentType: \"application/json; charset=utf-8\",\r\n                    data: JSON.stringify(invoiceModel),\r\n\r\n                    success: function (data) {\r\n                        if (data) {\r\n\r\n                            if (!data.IsSuccess) {\r\n                                self.set('errorText', self.errorMessages[data.ErrorCodeKey]);\r\n                            } else {\r\n                                self.set('errorText', \"\");\r\n                                self.setInvoiceData(data.InvoiceModel);\r\n                                window.location.href = \"/Ordering/Invoice/Display/\" + self.invoice.Id;\r\n                            }\r\n                        }\r\n                    },\r\n                    error: function (data) {\r\n\r\n                    },\r\n                    beforeSend: function () {\r\n                        kendo.ui.progress($(\"#dvCustomerPricingInfo\"), true);\r\n                        kendo.ui.progress($(\"#dvinvPricing\"), true);\r\n                    },\r\n                    complete: function () {\r\n                        kendo.ui.progress($(\"#dvCustomerPricingInfo\"), false);\r\n                        kendo.ui.progress($(\"#dvinvPricing\"), false);\r\n                    }\r\n                });\r\n            } else {\r\n\r\n                var input = $('#individual-products');\r\n                var model = input.prop(\"kendoBindingTarget\").source;\r\n\r\n                if (!invEdit.validator().validateInput('#status')) {\r\n\r\n                    invEdit.scrollTo('[for=\"status\"]');\r\n\r\n                } else if (!invEdit.validator().validateInput('#first-name')) {\r\n\r\n                    invEdit.scrollTo('#first-name');\r\n\r\n                } else if (!model.get('validIndProducts')) {\r\n\r\n                    invEdit.scrollTo(\"#individual-products\");\r\n\r\n                } else if (this.invoice.InvoiceShipToAddress) {\r\n                    $.ajax({\r\n                        url: '/Ordering/api/InvoiceEdit/Post',\r\n                        type: 'POST',\r\n                        contentType: \"application/json; charset=utf-8\",\r\n                        data: JSON.stringify(invoiceModel),\r\n\r\n                        success: function (data) {\r\n                            if (data) {\r\n\r\n                                if (!data.IsSuccess) {\r\n                                    self.set('errorText', self.errorMessages[data.ErrorCodeKey]);\r\n                                } else {\r\n                                    self.set('errorText', \"\");\r\n                                    self.setInvoiceData(data.InvoiceModel);\r\n                                    window.location.href = \"/Ordering/Invoice/Display/\" + self.invoice.Id;\r\n                                }\r\n                            }\r\n                        },\r\n                        error: function (data) {\r\n\r\n                        },\r\n                        beforeSend: function () {\r\n                            kendo.ui.progress($(\"#dvCustomerPricingInfo\"), true);\r\n                            kendo.ui.progress($(\"#dvinvPricing\"), true);\r\n                        },\r\n                        complete: function () {\r\n                            kendo.ui.progress($(\"#dvCustomerPricingInfo\"), false);\r\n                            kendo.ui.progress($(\"#dvinvPricing\"), false);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        };\r\n\r\n        this.invoiceAddressClick = function (e) {\r\n            e.preventDefault();\r\n            this.invoice.set(\"InvoiceShipToAddress\", this.invoice.InvoiceShipToAddress);\r\n            this.calculateBasePrice();\r\n        };\r\n\r\n        this.invoiceTypeClick = function (e) {\r\n\r\n            var grid = $('#dgProducts').data('kendoGrid');\r\n\r\n            \r\n            this.invoice.set('InvoicePrice', new invEdit.InvoicePriceModel());\r\n            \r\n            if (this.invoice.Type == \"Distributor\") {\r\n                grid.showColumn(\"EarnBase\");\r\n                this.invoice.set('IsGdoMemberPricing', true);\r\n                this.invoice.InvoicePrice.set(\"DiscountAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"DiscountPercentage\", 25);\r\n                this.invoice.InvoicePrice.set(\"TaxAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxPercentage\", 0);\r\n                this.invoice.InvoicePrice.set(\"ShippingAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"ShippingPercentage\", 0);\r\n            } else {\r\n                grid.hideColumn(\"EarnBase\");\r\n                this.invoice.set('IsGdoMemberPricing', false);\r\n                this.invoice.InvoicePrice.set(\"DiscountAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxPercentage\", 0);\r\n                this.invoice.InvoicePrice.set(\"DiscountPercentage\", 0);\r\n                this.invoice.InvoicePrice.set(\"ShippingAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"ShippingPercentage\", 0);\r\n            }\r\n        };\r\n        this.onInvoiceLinesDataBinding = function (e) {\r\n            var grid = e.sender;\r\n\r\n            if (this.invoice.Type == \"Distributor\") {\r\n                grid.showColumn(\"EarnBase\");\r\n            } else {\r\n                grid.hideColumn(\"EarnBase\");\r\n            }\r\n        };\r\n\r\n        this.calculateMemberTotal = function () {\r\n            var self = this;\r\n\r\n            var invoiceModel = this.invoice;\r\n            $.ajax({\r\n                url: '/Ordering/api/InvoiceEdit/CalculateMemberTotal',\r\n                type: 'POST',\r\n                contentType: \"application/json; charset=utf-8\",\r\n                data: JSON.stringify(invoiceModel),\r\n\r\n                success: function (data) {\r\n                    if (data) {\r\n                        self.setInvoiceData(data);\r\n                    }\r\n                },\r\n                error: function (data) {\r\n\r\n                },\r\n                beforeSend: function () {\r\n                    kendo.ui.progress($(\"#dvCustomerPricingInfo\"), true);\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#dvCustomerPricingInfo\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n        this.calculateBasePrice = function () {\r\n            var self = this;\r\n            $(\"#priceInfoText\").removeClass(\"red\");\r\n            $(\"#priceInfoText\").addClass(\"red\");\r\n            var invoiceModel = this.invoice;\r\n            $.ajax({\r\n                url: '/Ordering/api/InvoiceEdit/CalculateBasicPrice',\r\n                type: 'POST',\r\n                contentType: \"application/json; charset=utf-8\",\r\n                data: JSON.stringify(invoiceModel),\r\n\r\n                success: function (data) {\r\n                    if (data) {\r\n                        self.setInvoiceData(data);\r\n                    }\r\n                },\r\n                error: function (data) {\r\n\r\n                },\r\n                beforeSend: function () {\r\n                    kendo.ui.progress($(\"#dvCustomerPricingInfo\"), true);\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#dvCustomerPricingInfo\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n        this.calculateTotalDue = function () {\r\n            var self = this;\r\n            $(\"#priceInfoText\").removeClass(\"red\");\r\n            $(\"#priceInfoText\").addClass(\"red\");\r\n            var invoiceModel = this.invoice;\r\n            $.ajax({\r\n                url: '/Ordering/api/InvoiceEdit/CalculateTotalDue',\r\n                type: 'POST',\r\n                contentType: \"application/json; charset=utf-8\",\r\n                data: JSON.stringify(invoiceModel),\r\n\r\n                success: function (data) {\r\n                    if (data) {\r\n                        self.setInvoiceData(data);\r\n                    }\r\n                },\r\n                error: function (data) {\r\n\r\n                },\r\n                beforeSend: function () {\r\n                    kendo.ui.progress($(\"#dvCustomerPricingInfo\"), true);\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#dvCustomerPricingInfo\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n\r\n        this.price = function () {\r\n            $(\"#priceInfoText\").removeClass(\"red\");\r\n            \r\n            if (invEdit.validator().validate()) {\r\n                var self = this;\r\n                var invoiceModel = this.invoice;\r\n\r\n                if (this.stateSelected) {\r\n                    if (this.stateSelected.Value) {\r\n                        invoiceModel.Address.StateStatus = this.stateSelected.Value;\r\n                    } else {\r\n                        if (typeof (this.stateSelected) === 'object') {\r\n                            invoiceModel.Address.State = \"\";\r\n                        }\r\n                        else {\r\n                            invoiceModel.Address.State = this.stateSelected;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                $.ajax({\r\n                    url: '/Ordering/api/InvoiceEdit/Price',\r\n                    type: 'POST',\r\n                    contentType: \"application/json; charset=utf-8\",\r\n                    data: JSON.stringify(invoiceModel),\r\n\r\n                    success: function (data) {\r\n                        if (data) {\r\n                            \r\n                            if (!data.IsSuccess) {\r\n                                self.set('errorText', self.errorMessages[data.ErrorCodeKey]);\r\n                                self.invoice.InvoicePrice.set('ShippingAmount', 0);\r\n                                self.invoice.InvoicePrice.set('TaxAmount', 0);\r\n                                self.invoice.InvoicePrice.set('DisplayShipping', data.InvoiceModel.InvoicePrice.DisplayShipping);\r\n                                self.invoice.InvoicePrice.set('DisplayCalculatedTax', data.InvoiceModel.InvoicePrice.DisplayCalculatedTax);\r\n                                self.invoice.InvoicePrice.set('DisplayTotalDue', data.InvoiceModel.InvoicePrice.DisplaySubtotal);\r\n                            } else {\r\n                                self.set('errorText', \"\");\r\n                                self.setInvoiceData(data.InvoiceModel);\r\n                                if (data.InvoiceModel) {\r\n                                    self.invoice.set('ResetCustomerTaxValue', false);\r\n                                }\r\n                                if (data.InvoiceModel.Address && data.InvoiceModel.Address.State) {\r\n                                    self.set('stateSelected', { Value: data.InvoiceModel.Address.State });\r\n                                }\r\n                            }\r\n                        }\r\n                    },\r\n                    error: function (data) {\r\n\r\n                    },\r\n                    beforeSend: function () {\r\n                        kendo.ui.progress($(\"#dvCustomerPricingInfo\"), true);\r\n                        kendo.ui.progress($(\"#dvinvPricing\"), true);\r\n                    },\r\n                    complete: function () {\r\n                        kendo.ui.progress($(\"#dvCustomerPricingInfo\"), false);\r\n                        kendo.ui.progress($(\"#dvinvPricing\"), false);\r\n                    }\r\n                });\r\n            } else {\r\n                var input = $('#individual-products');\r\n                var model = input.prop(\"kendoBindingTarget\").source;\r\n\r\n                if (!invEdit.validator().validateInput('#status')) {\r\n\r\n                    invEdit.scrollTo('[for=\"status\"]');\r\n\r\n                } else if (!invEdit.validator().validateInput('#first-name')) {\r\n\r\n                    invEdit.scrollTo('#first-name');\r\n\r\n                } else if (!invEdit.validator().validateInput('#street-address')) {\r\n\r\n                    invEdit.scrollTo(\"#street-address\");\r\n\r\n                } else if (!invEdit.validator().validateInput('#city')) {\r\n\r\n                    invEdit.scrollTo(\"[for='city']\");\r\n\r\n                } else if (!invEdit.validator().validateInput('#zip-code')) {\r\n\r\n                    invEdit.scrollTo(\"[for='zip-code']\");\r\n\r\n                } else if (!model.get('validIndProducts')) {\r\n\r\n                    invEdit.scrollTo(\"#individual-products\");\r\n\r\n                }\r\n            }\r\n\r\n        };\r\n\r\n        this.cancel = function () {\r\n            window.location.href = \"/Ordering/Invoice\";\r\n            return false;\r\n        };\r\n\r\n        this.ChangeClicked = function () {\r\n            kendo.ui.progress($(\"#loading\"), true);\r\n            var wnd = $('#dvMemberAddress').data('kendoWindow');\r\n            wnd.center().open();\r\n            this.memberAddressDataSource.read();\r\n            kendo.ui.progress($(\"#loading\"), false);\r\n        };\r\n\r\n        this.onChangeAddress = function () {\r\n            var self = this;\r\n            $.ajax({\r\n                type: 'get',\r\n                dataType: 'json',\r\n                cache: true,\r\n                data: JSON.stringify(self.selectedAddress),\r\n                url: '/Ordering/api/InvoiceEdit/FilterShippingAddress/' + self.selectedIdAddress,\r\n                success: function (data) {\r\n                    self.set(\"selectedAddress\", data);\r\n                },\r\n                error: function () {\r\n                    self.error = true;\r\n                },\r\n                beforeSend: function () {\r\n                    kendo.ui.progress($(\"#changeAddressDetails\"), true);\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#changeAddressDetails\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n        this.AddressChanged = function () {\r\n            var self = this;\r\n            if (self.invoice) {\r\n                self.invoice.MemberAddress = self.selectedAddress;\r\n            }\r\n            var wnd = $('#dvMemberAddress').data('kendoWindow');\r\n            wnd.center().close();\r\n            self.calculateBasePrice();\r\n        };\r\n\r\n        this.onQuantityChange = function () {\r\n            this.calculateBasePrice();\r\n        };\r\n\r\n        this.autocompleteDataSource = new kendo.data.DataSource({\r\n            type: \"json\",\r\n            serverFiltering: true,\r\n            serverPaging: true,\r\n            pageSize: 20,\r\n            transport: {\r\n                read:\r\n                {\r\n                    url: \"/Ordering/api/InvoiceBase/LoadProductsForAutocomplete\"\r\n                },\r\n                parameterMap: function () {\r\n                    return {\r\n                        startsWith: $(\"#individual-products\").data(\"kendoAutoComplete\").value(),\r\n                        type: $('#taxAmount').prop(\"kendoBindingTarget\").source.invoice.Type\r\n                    };\r\n                }\r\n            }\r\n        });\r\n\r\n        this.statusDataSource = new kendo.data.DataSource({\r\n            type: \"json\",\r\n            transport: {\r\n                read:\r\n                {\r\n                    url: \"/Ordering/api/InvoiceBase/LoadStatus\"\r\n                }\r\n            }\r\n        });\r\n\r\n        this.statesDataSource = new kendo.data.DataSource({\r\n            type: \"json\",\r\n            transport: {\r\n                read:\r\n                {\r\n                    url: \"/Ordering/api/InvoiceBase/LoadStates\"\r\n                }\r\n            }\r\n        });\r\n\r\n        this.memberAddressDataSource = new kendo.data.DataSource({\r\n            type: \"json\",\r\n            transport: {\r\n                read:\r\n                {\r\n                    url: \"/Ordering/api/InvoiceEdit/GetShippingAddress\"\r\n                }\r\n            }\r\n        });\r\n\r\n        this.contactsDataSource = new kendo.data.DataSource({\r\n            type: \"json\",\r\n            serverFiltering: true,\r\n            serverPaging: true,\r\n            pageSize: 10,\r\n            transport: {\r\n                read: {\r\n                    url: '/Bizworks/api/Contacts',\r\n                    type: \"POST\"\r\n                }\r\n            },\r\n            schema: {\r\n                data: function (data) {\r\n                    if (data && data.Items) {\r\n                        return data.Items;\r\n                    } else {\r\n                        return null;\r\n                    }\r\n                },\r\n                total: function (data) {\r\n                    if (data) {\r\n                        return data.TotalCount;\r\n                    } else {\r\n                        return 0;\r\n                    }\r\n                }\r\n            },\r\n            requestStart: function (e) {\r\n                kendo.ui.progress($(\"#dgContacts\"), true);\r\n            },\r\n            requestEnd: function (e) {\r\n                kendo.ui.progress($(\"#dgContacts\"), false);\r\n            }\r\n        });\r\n\r\n        this.discountsDataSource = new kendo.data.DataSource({\r\n            type: \"json\",\r\n            transport: {\r\n                read:\r\n                {\r\n                    url: \"/Ordering/api/InvoiceEdit/GetMemberDiscounts\"\r\n                }\r\n            }\r\n        });\r\n\r\n        this.loadErrorMessages = function () {\r\n            if (this.edit_Invoice_Action == \"Invoice_Edit\") {\r\n                var self = this;\r\n                $.ajax({\r\n                    type: 'get',\r\n                    dataType: 'json',\r\n                    cache: true,\r\n                    url: '/Ordering/api/InvoiceEdit/LoadErrorMessage',\r\n                    success: function (data) {\r\n                        if (data) {\r\n                            self.set(\"errorMessages\", data);\r\n                        }\r\n                    },\r\n                    error: function () {\r\n                        self.error = true;\r\n                    },\r\n                    complete: function () {\r\n                    }\r\n                });\r\n            }\r\n        };\r\n\r\n        this.loadInvoicedata = function () {\r\n            var self = this;\r\n            if (this.edit_Invoice_Action == \"Invoice_Edit\") {\r\n                if (self.edit_InvoiceId == 0 && self.edit_OrderId != \"\" && self.edit_CopyInvoiceId == 0) {\r\n                    //Came from MyOrders\r\n                    var createInvoiceFromOrderIdRequest = {\r\n                        OrderId: self.edit_OrderId,\r\n                        Source: self.edit_Order_Source\r\n                    };\r\n                    $.ajax({\r\n                        url: \"/Ordering/api/InvoiceEdit/GetInvoiceFromOrderId\",\r\n                        type: 'POST',\r\n                        data: JSON.stringify(createInvoiceFromOrderIdRequest),\r\n                        contentType: \"application/json; charset=utf-8\",\r\n                        success: function (data) {\r\n                            self.setInvoiceData(data);\r\n                            self.set('statusSelected', { Value: data.Status });\r\n                            self.set('stateSelected', { Value: data.Address.State });\r\n                            self.loadShippingAddress();\r\n                        },\r\n                        error: function (data) {\r\n                        },\r\n                        beforeSend: function () {\r\n                            kendo.ui.progress($(\"#loading\"), true);\r\n                        },\r\n                        complete: function () {\r\n                            kendo.ui.progress($(\"#loading\"), false);\r\n                        }\r\n                    });\r\n                    // get the id from edit_InvoiceId and load the invoice for the id\r\n\r\n                } else if (self.edit_InvoiceId > 0 && self.edit_OrderId == \"\" && self.edit_CopyInvoiceId == 0) {\r\n                    var invoiceId = self.edit_InvoiceId;\r\n                    $.ajax({\r\n                        type: 'get',\r\n                        dataType: 'json',\r\n                        cache: true,\r\n                        data: JSON.stringify(invoiceId),\r\n                        url: '/Ordering/api/InvoiceSearch/Load/' + invoiceId,\r\n                        success: function (data) {\r\n                            if (data && data.Id > 0) {\r\n                                self.setInvoiceData(data);\r\n                                self.set('statusSelected', { Value: data.Status });\r\n                                self.set('stateSelected', { Value: data.Address.State });\r\n                            }\r\n                            else {\r\n                                window.location.href = \"/Ordering/Invoice\";\r\n                                return false;\r\n                            }\r\n                        },\r\n                        error: function () {\r\n                            self.error = true;\r\n                        },\r\n                        beforeSend: function () {\r\n                            kendo.ui.progress($(\"#loading\"), true);\r\n                        },\r\n                        complete: function () {\r\n                            kendo.ui.progress($(\"#loading\"), false);\r\n                        }\r\n                    });\r\n                    // get the id from edit_InvoiceId and load the invoice for the id\r\n                } else if (self.edit_InvoiceId == 0 && self.edit_OrderId == \"\" && self.edit_CopyInvoiceId > 0) {\r\n                    //Copy Invoice\r\n                    var invoiceId = self.edit_CopyInvoiceId;\r\n                    $.ajax({\r\n                        type: 'get',\r\n                        dataType: 'json',\r\n                        cache: true,\r\n                        data: JSON.stringify(invoiceId),\r\n                        url: '/Ordering/api/InvoiceEdit/Copy/' + invoiceId,\r\n                        success: function (data) {\r\n                            if (data) {\r\n                                self.setInvoiceData(data);\r\n                                self.set('statusSelected', { Value: data.Status });\r\n                                self.set('stateSelected', { Value: data.Address.State });\r\n                            }\r\n                        },\r\n                        error: function () {\r\n                            self.error = true;\r\n                        },\r\n                        beforeSend: function () {\r\n                            kendo.ui.progress($(\"#loading\"), true);\r\n                        },\r\n                        complete: function () {\r\n                            kendo.ui.progress($(\"#loading\"), false);\r\n                        }\r\n                    });\r\n                } else {\r\n\r\n                    self.set('invoice', new invEdit.InvoiceModel());\r\n                    self.invoice.set('InvoiceDate', new Date(moment(self.edit_Invoice_Date)));\r\n                    $.ajax({\r\n                        type: 'get',\r\n                        dataType: 'json',\r\n                        cache: true,\r\n                        url: '/Ordering/api/InvoiceEdit/LoadMemberAddress',\r\n                        success: function (data) {\r\n                            if (data) {\r\n                                self.invoice.set('MemberAddress', data);\r\n                                self.invoice.set('HasShippingAddress', true);\r\n                                \r\n                            }\r\n                            if (data == null) {\r\n                                self.invoice.set('InvoiceShipToAddress', true);\r\n                                self.invoice.set('HasShippingAddress', false);\r\n                            }\r\n                        },\r\n                        error: function () {\r\n                            self.error = true;\r\n                        },\r\n                        beforeSend: function () {\r\n                            kendo.ui.progress($(\"#dvinvProduct\"), true);\r\n                        },\r\n                        complete: function () {\r\n                            kendo.ui.progress($(\"#dvinvProduct\"), false);\r\n                        }\r\n                    });\r\n                }\r\n            };\r\n        };\r\n\r\n        this.setInvoiceData = function (data) {\r\n            if (data) {\r\n                this.set('invoice', data);\r\n                this.invoice.set('InvoiceDate', new Date(moment(data.InvoiceDate)));\r\n                this.set('stateSelected', { Value: data.Address.State });\r\n            }\r\n        };\r\n\r\n        this.onRootCategoryChange = function () {\r\n            if (this.selectedRootCategoryItem) {\r\n                this.loadCategories(this.selectedRootCategoryItem.Id);\r\n                var pager = $(\"#pager\").data(\"kendoPager\");\r\n                pager.page(1);\r\n            }\r\n        };\r\n\r\n        this.dataBound = function (e) {\r\n            e.sender.expandRow(e.sender.tbody.find(\"tr.k-master-row\").first());\r\n        };\r\n\r\n        this.contactsDataBound = function (e) {\r\n            kendo.ui.progress($(\"#dgContacts\"), false);\r\n            if (this.contactsDataSource && this.contactsDataSource.total() == 0) {\r\n                this.set('contactsErrorText', this.errorMessages['contactsError']);\r\n            } else {\r\n                this.set('contactsErrorText', '');\r\n            }\r\n        };\r\n\r\n        this.clickContacts = function () {\r\n            kendo.ui.progress($(\"#loading\"), true);\r\n            var wnd = $('#dvInvContacts').data('kendoWindow');\r\n            wnd.center().open();\r\n            this.contactsDataSource.read();\r\n            kendo.ui.progress($(\"#loading\"), false);\r\n        };\r\n\r\n        this.clickProducts = function () {\r\n            kendo.ui.progress($(\"#loading\"), true);\r\n            this.loadRootCategories();\r\n            var wnd = $('#dvInvProducts').data('kendoWindow');\r\n            wnd.center().open();\r\n            kendo.ui.progress($(\"#loading\"), false);\r\n        };\r\n\r\n        this.clickSavedCarts = function () {\r\n            kendo.ui.progress($(\"#loading\"), true);\r\n            this.loadSavedCarts();\r\n            var wnd = $('#dvSavedCarts').data('kendoWindow');\r\n            wnd.center().open();\r\n            kendo.ui.progress($(\"#loading\"), false);\r\n        };\r\n\r\n        this.addProducts = function () {\r\n            kendo.ui.progress($(\"#loading\"), true);\r\n            var self = this;\r\n            var selectedProduct = this.get(\"selectedProduct\");\r\n\r\n            var skuAdded = false;\r\n            if (null != selectedProduct && null != selectedProduct.Sku) {\r\n                for (var i = 0; i < self.invoice.InvoiceLines.length; i++) {\r\n                    if (self.invoice.InvoiceLines[i].Sku == selectedProduct.Sku) {\r\n                        self.invoice.InvoiceLines[i].set(\"Quantity\", self.invoice.InvoiceLines[i].Quantity + selectedProduct.Quantity);\r\n                        skuAdded = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (!skuAdded && selectedProduct != null && null != selectedProduct.Sku) {\r\n                    self.invoice.InvoiceLines.push(selectedProduct);\r\n                }\r\n\r\n                if (selectedProduct != null && null != selectedProduct.Sku) {\r\n                    self.set(\"selectedProduct\", null);\r\n                    self.calculateBasePrice();\r\n                    invEdit.validator().hideMessages();\r\n                    $(\"#individual-products\").removeClass(\"k-invalid\");\r\n                }\r\n                self.set('addProductErrorText', '');\r\n            } else {\r\n                self.set('addProductErrorText', self.errorMessages['productSearchError']);\r\n            }\r\n            kendo.ui.progress($(\"#loading\"), false);\r\n        };\r\n\r\n\r\n        this.deleteProducts = function (e) {\r\n            var self = this;\r\n            self.invoice.InvoiceLines.remove(e.data);\r\n            self.calculateBasePrice();\r\n        };\r\n\r\n\r\n        this.onProductChange = function () {\r\n\r\n            var selectedProduct = this.get(\"selectedProduct\");\r\n            alert(selectedProduct.Sku);\r\n            alert(kendo.stringify(selectedProduct));\r\n        };\r\n\r\n        this.loadRootCategories = function () {\r\n            var self = this;\r\n\r\n            $.when(\r\n                $.ajax({\r\n                    type: 'get',\r\n                    dataType: 'json',\r\n                    cache: true,\r\n                    url: '/Ordering/api/InvoiceBase/LoadRootCategories',\r\n                    success: function (data) {\r\n                        self.set(\"rootCategories\", data);\r\n                        if (data) {\r\n                            self.set(\"selectedRootCategoryItem\", data[0]);\r\n                        }\r\n                    },\r\n                    error: function () {\r\n                        self.error = true;\r\n                    },\r\n                    beforeSend: function () {\r\n                        kendo.ui.progress($(\"#products-search\"), true);\r\n                    },\r\n                    complete: function () {\r\n                        kendo.ui.progress($(\"#products-search\"), false);\r\n                    }\r\n                })).then(function () {\r\n                    if (self.selectedRootCategoryItem) {\r\n                        self.loadCategories(self.selectedRootCategoryItem.Id);\r\n                    }\r\n                    kendo.ui.progress($(\"#products-search\"), false);\r\n                }\r\n            );\r\n        };\r\n\r\n        this.loadCategories = function (id) {\r\n            var self = this;\r\n            $.ajax({\r\n                type: 'get',\r\n                dataType: 'json',\r\n                cache: true,\r\n                url: '/Ordering/api/InvoiceBase/LoadCategories/' + id +'/'+self.invoice.Type,\r\n                success: function (data) {\r\n                    self.set(\"categories\", data);\r\n                },\r\n                error: function () {\r\n                    self.error = true;\r\n                },\r\n                beforeSend: function () {\r\n                    kendo.ui.progress($(\"#lvProducts\"), true);\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#lvProducts\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n        this.selectCategory = function (e) {\r\n            e.preventDefault();\r\n            var self = this;\r\n            var sku = $(e.target).data('parameter');\r\n\r\n            var addedProduct = null;\r\n            $.ajax({\r\n                type: 'get',\r\n                dataType: 'json',\r\n                cache: true,\r\n                async: true,\r\n                url: '/Ordering/api/InvoiceBase/GetInvoiceLineModel/' + sku + '/' + self.invoice.Type,\r\n                success: function (data) {\r\n                    if (data) {\r\n                        addedProduct = data;\r\n                        var skuAdded = false;\r\n                        if (null != addedProduct) {\r\n\r\n                            if (null == self.invoice) {\r\n                                self.set('invoice', new invEdit.InvoiceModel());\r\n                            }\r\n\r\n                            for (var i = 0; i < self.invoice.InvoiceLines.length; i++) {\r\n                                if (self.invoice.InvoiceLines[i].Sku == sku) {\r\n                                    self.invoice.InvoiceLines[i].set(\"Quantity\", self.invoice.InvoiceLines[i].Quantity + addedProduct.Quantity);\r\n                                    skuAdded = true;\r\n                                    break;\r\n                                }\r\n                            }\r\n\r\n                            if (!skuAdded) {\r\n                                self.invoice.InvoiceLines.push(addedProduct);\r\n                            }\r\n                            //var productsWnd = $('#dvInvProducts').data('kendoWindow');\r\n                            //if (productsWnd) {\r\n                            //productsWnd.close();\r\n                            //}\r\n                            self.calculateBasePrice();\r\n                            invEdit.validator().hideMessages();\r\n                            $(\"#individual-products\").removeClass(\"k-invalid\");\r\n                        }\r\n                    }\r\n                },\r\n                error: function () {\r\n\r\n                },\r\n                beforeSend: function () {\r\n                    kendo.ui.progress($(\"#lvProducts\"), true);\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#lvProducts\"), false);\r\n                }\r\n            });\r\n\r\n        };\r\n\r\n        this.selectContact = function (e) {\r\n            e.preventDefault();\r\n            if (this.invoice) {\r\n                this.invoice.set(\"FirstName\", e.data.FirstName);\r\n                this.invoice.set(\"LastName\", e.data.LastName);\r\n                this.invoice.set(\"Phone\", e.data.PhoneNumber);\r\n                this.invoice.set(\"Email\", e.data.PrimaryEmailAddress);\r\n                if (this.invoice.Address) {\r\n                    this.invoice.Address.set(\"Address1\", e.data.StreetAddress1);\r\n                    this.invoice.Address.set(\"City\", e.data.City);\r\n                    this.invoice.Address.set(\"State\", e.data.State);\r\n                    this.set('stateSelected', e.data.State);\r\n                    this.invoice.Address.set(\"PostalCode\", e.data.PostalCode);\r\n                    this.invoice.Address.set(\"Country\", e.data.Country);\r\n                }\r\n            }\r\n\r\n            var contactsWnd = $('#dvInvContacts').data('kendoWindow');\r\n            if (contactsWnd) {\r\n                contactsWnd.close();\r\n            }\r\n        };\r\n\r\n        this.selectSavedCarts = function (e) {\r\n            e.preventDefault();\r\n            var self = this;\r\n            var cartId = e.data.Id;\r\n            $.ajax({\r\n                url: \"/Ordering/api/InvoiceEdit/GetInvoiceFromCartId\",\r\n                type: 'POST',\r\n                data: { \"\": cartId },\r\n\r\n                success: function (data) {\r\n                    self.setInvoiceData(data);\r\n\r\n                    var savedCartsWnd = $('#dvSavedCarts').data('kendoWindow');\r\n                    if (savedCartsWnd) {\r\n                        savedCartsWnd.close();\r\n                    }\r\n                },\r\n                error: function (data) {\r\n                },\r\n                beforeSend: function () {\r\n                    kendo.ui.progress($(\"#loading\"), true);\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#loading\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n        this.searchSavedCarts = function () {\r\n            var self = this;\r\n            $.ajax({\r\n                type: 'get',\r\n                dataType: 'json',\r\n                cache: true,\r\n                data: JSON.stringify(this.savedCartsFilter),\r\n                url: '/Ordering/api/InvoiceEdit/FilterSavedCarts/' + this.savedCartsFilter,\r\n                success: function (data) {\r\n                    self.set(\"savedCarts\", data);\r\n                },\r\n                error: function () {\r\n                    self.error = true;\r\n                },\r\n                beforeSend: function () {\r\n                    kendo.ui.progress($(\"#dgSavedCarts\"), true);\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#dgSavedCarts\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n        this.loadSavedCarts = function () {\r\n            var self = this;\r\n            $.ajax({\r\n                type: 'get',\r\n                dataType: 'json',\r\n                cache: true,\r\n                url: '/Ordering/api/InvoiceEdit/LoadSavedCarts',\r\n                success: function (data) {\r\n                    if (data) {\r\n                        self.set(\"savedCarts\", data);\r\n                    }\r\n                },\r\n                error: function () {\r\n                    self.error = true;\r\n                },\r\n                beforeSend: function () {\r\n                    kendo.ui.progress($(\"#dgSavedCarts\"), true);\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#dgSavedCarts\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n        this.SearchContacts = function () {\r\n\r\n            this.contactsDataSource.filter([\r\n                {\r\n                    \"logic\": \"or\",\r\n                    \"filters\": [\r\n                        {\r\n                            \"field\": \"FirstName\",\r\n                            \"operator\": \"startswith\",\r\n                            \"value\": this.contactsFilter\r\n                        },\r\n                        {\r\n                            \"field\": \"LastName\",\r\n                            \"operator\": \"startswith\",\r\n                            \"value\": this.contactsFilter\r\n                        }\r\n                    ]\r\n                }\r\n            ]);\r\n        };\r\n\r\n\r\n        this.SearchProducts = function () {\r\n            var self = this;\r\n\r\n            var invoiceCategoryFilter = {\r\n                RootCategoryId: this.selectedRootCategoryItem.Id,\r\n                Filter: this.productsFilter,\r\n                Type: this.invoice.Type\r\n            };\r\n            $.ajax({\r\n                url: '/Ordering/api/InvoiceBase/SearchCategories',\r\n                type: 'POST',\r\n                data: JSON.stringify(invoiceCategoryFilter),\r\n                contentType: \"application/json; charset=utf-8\",\r\n                success: function (data) {\r\n                    if (data && data.length > 0) {\r\n                        self.set('productSearchErrorText', '');\r\n                    } else {\r\n                        self.set('productSearchErrorText', self.errorMessages['productSearchError']);\r\n                    }\r\n                    self.set(\"categories\", data);\r\n                },\r\n                error: function (data) {\r\n                },\r\n                beforeSend: function () {\r\n                    kendo.ui.progress($(\"#lvProducts\"), true);\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#lvProducts\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n        this.loadShippingAddress = function () {\r\n            var self = this;\r\n            if (this.edit_Invoice_Action == \"Invoice_Edit\") {\r\n                $.ajax({\r\n                    type: 'get',\r\n                    dataType: 'json',\r\n                    cache: true,\r\n                    url: '/Ordering/api/InvoiceEdit/LoadMemberAddress',\r\n                    success: function (data) {\r\n                        if (data) {\r\n                            self.invoice.set('MemberAddress', data);\r\n                            self.invoice.set('HasShippingAddress', true);\r\n\r\n                        }\r\n                        if (data == null) {\r\n                            self.invoice.set('InvoiceShipToAddress', true);\r\n                            self.invoice.set('HasShippingAddress', false);\r\n                        }\r\n                    },\r\n                    error: function () {\r\n                        self.error = true;\r\n                    },\r\n                    beforeSend: function () {\r\n                        kendo.ui.progress($(\"#dvinvProduct\"), true);\r\n                    },\r\n                    complete: function () {\r\n                        kendo.ui.progress($(\"#dvinvProduct\"), false);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n\r\n        this.onProdcutsPageChange = function (e) {\r\n            var listview = $(\"#lvProducts\").data(\"kendoListView\");\r\n            listview.dataSource.page(e.sender.page());\r\n        };\r\n\r\n        this.onShippingPercentageChange = function () {\r\n\r\n            if (this.invoice && this.invoice.InvoicePrice) {\r\n                this.invoice.InvoicePrice.set(\"ShippingAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxPercentage\", 0);\r\n                $(\"#shippingPercentage\").prev().removeClass(\"k-state-disabled\");\r\n                $(\"#shippingAmount\").prev().addClass(\"k-state-disabled\");\r\n                this.invoice.set(\"IsCustomerShippingHandlingEdited\", true);\r\n            }\r\n        };\r\n\r\n        this.onShippingAmountChange = function () {\r\n\r\n            if (this.invoice && this.invoice.InvoicePrice) {\r\n                this.invoice.InvoicePrice.set(\"ShippingPercentage\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxPercentage\", 0);\r\n                $(\"#shippingAmount\").prev().removeClass(\"k-state-disabled\");\r\n                $(\"#shippingPercentage\").prev().addClass(\"k-state-disabled\");\r\n                this.invoice.set(\"IsCustomerShippingHandlingEdited\", true);\r\n            }\r\n        };\r\n\r\n        this.onDiscountPercentageChange = function () {\r\n\r\n            if (this.invoice && this.invoice.InvoicePrice) {\r\n                this.invoice.InvoicePrice.set(\"DiscountAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxPercentage\", 0);\r\n                $(\"#discountPercentage\").prev().removeClass(\"k-state-disabled\");\r\n                $(\"#discountAmount\").prev().addClass(\"k-state-disabled\");\r\n\r\n                this.calculateTotalDue();\r\n            }\r\n        };\r\n\r\n        this.onDiscountDropDownPercentageChange = function () {\r\n\r\n            if (this.invoice && this.invoice.InvoicePrice) {\r\n                this.invoice.InvoicePrice.set(\"DiscountAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxPercentage\", 0);\r\n\r\n                this.calculateTotalDue();\r\n            }\r\n        };\r\n\r\n        this.onStateChange = function () {\r\n            if (this.invoice && this.invoice.Address && this.invoice.Address.State) {\r\n                this.set('stateSelected', this.invoice.Address.State);\r\n            }\r\n        };\r\n\r\n        this.onDiscountAmountChange = function () {\r\n\r\n            if (this.invoice && this.invoice.InvoicePrice) {\r\n                this.invoice.InvoicePrice.set(\"DiscountPercentage\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxPercentage\", 0);\r\n                $(\"#discountAmount\").prev().removeClass(\"k-state-disabled\");\r\n                $(\"#discountPercentage\").prev().addClass(\"k-state-disabled\");\r\n\r\n                this.calculateTotalDue();\r\n            }\r\n        };\r\n\r\n        this.onTaxPercentageChange = function () {\r\n\r\n            if (this.invoice && this.invoice.InvoicePrice) {\r\n                this.invoice.InvoicePrice.set(\"TaxAmount\", 0);\r\n                $(\"#taxPercentage\").prev().removeClass(\"k-state-disabled\");\r\n                $(\"#taxAmount\").prev().addClass(\"k-state-disabled\");\r\n                this.invoice.set(\"IsCustomerTaxEdited\", true);\r\n            }\r\n        };\r\n\r\n        this.onTaxAmountChange = function () {\r\n\r\n            if (this.invoice && this.invoice.InvoicePrice) {\r\n                this.invoice.InvoicePrice.set(\"TaxPercentage\", 0);\r\n                $(\"#taxAmount\").prev().removeClass(\"k-state-disabled\");\r\n                $(\"#taxPercentage\").prev().addClass(\"k-state-disabled\");\r\n                this.invoice.set(\"IsCustomerTaxEdited\", true);\r\n            }\r\n        };\r\n\r\n        this.resetToDefaultValueClicked = function () {\r\n\r\n            if (this.invoice) {\r\n                this.invoice.set(\"ResetCustomerTaxValue\", true);\r\n                this.calculateBasePrice();\r\n            }\r\n        };\r\n\r\n        this.launchShippingHandling = function () {\r\n            var myWin = $(\"#dvPlg\");\r\n            if (!myWin.data(\"kendoWindow\")) {\r\n                var pUpCntr = $('<div />').attr({ 'id': 'dvPlg', 'class': 'pnlEstimateSH' }).appendTo(document.body);\r\n                var options = {\r\n                    content: '/Ordering/Invoice/HtmlFragment?path=lblShippingHandlingTable.html',\r\n                    actions: [\"Close\"],\r\n                    modal: true,\r\n                    draggable: true,\r\n                    resizable: true,\r\n                    visible: false,\r\n                    height: 685,\r\n                    width: 591\r\n                };\r\n                var windCntr = pUpCntr.kendoWindow(options);\r\n                windCntr.data(\"kendoWindow\").open().center();\r\n            } else {\r\n                myWin.data(\"kendoWindow\").open().center();\r\n            }\r\n\r\n        };\r\n    },\r\n\r\n    renderProductsTemplate: function (data) {\r\n        return kendo.Template.compile($('#invProductsTpl').html())(data);\r\n    },\r\n    InvoiceModel: function () {\r\n        this.Id = null;\r\n        this.MemberId = null;\r\n        this.MemberInvoiceNumber = null;\r\n        this.FirstName = null;\r\n        this.LastName = null;\r\n        this.InvoiceDate = \"\";\r\n        this.CreatedDate = \"\";\r\n        this.CustomerId = null;\r\n        this.Address = new invEdit.InvoiceAddressModel();\r\n        this.InvoiceLines = [];\r\n        this.InvoicePrice = new invEdit.InvoicePriceModel();\r\n        this.InvoiceContact = null;\r\n        this.Email = null;\r\n        this.Type = \"Customer\";\r\n        this.OrderId = null;\r\n        this.Notes = null;\r\n        this.Status = null;\r\n        this.Phone = null;\r\n        this.PaymentAddress = null;\r\n        this.TotalVolumePoints = null;\r\n        this.Total = null;\r\n        this.DisplayTotal = null;\r\n        this.ShippingMethod = null;\r\n        this.InvoiceShipToAddress = true;\r\n        this.HasShippingAddress = true;\r\n        this.MemberAddress = new invEdit.InvoiceAddressModel();\r\n        this.MemberEmailAddress = null;\r\n        this.MemberFirstName = \"\";\r\n        this.MemberLastName = \"\";\r\n        this.OrderSource = \"\";\r\n        this.PricingType = \"\";\r\n        this.ShippingMethod = \"\";\r\n        this.Source = \"\";\r\n        this.IsFaceToFace = false;\r\n        this.IsGdoMemberPricing = false;\r\n        this.DisplayInvoiceStatus = \"\";\r\n        this.DisplayInvoiceType = \"\";\r\n        this.IsMemberTaxEdited = false;\r\n        this.IsMemberHandlingFeeEdited = false;\r\n        this.MakeMemberTaxZero = false;\r\n        this.MakeMemberHandlingFeeZero = false;\r\n        this.IsCustomerTaxEdited = false;\r\n        this.IsCustomerShippingHandlingEdited = false;\r\n        this.ResetCustomerTaxValue = false;\r\n    },\r\n\r\n    InvoiceAddressModel: function () {\r\n        this.Address1 = null;\r\n        this.Address2 = null;\r\n        this.City = null;\r\n        this.Country = null;\r\n        this.County = null;\r\n        this.PostalCode = null;\r\n        this.State = null;\r\n    },\r\n    InvoiceLineModel: function () {\r\n        this.Sku = null;\r\n        this.ProductName = null;\r\n        this.Quantity = null;\r\n        this.RetailPrice = null;\r\n        this.TotalRetailPrice = null;\r\n        this.EarnBase = null;\r\n        this.StockingSku = null;\r\n        this.ProductType = null;\r\n        this.ProductCategory = null;\r\n        this.VolumePoint = null;\r\n        //Will get calculated/Populated by a PriceFactory\r\n        this.TotalEarnBase = null;\r\n        this.TotalVolumePoint = null;\r\n        this.YourPrice = null;\r\n        this.DisplayRetailPrice = null;\r\n        this.DisplayTotalRetailPrice = null;\r\n        this.DisplayCurrencySymbol = null;\r\n        this.DisplayTotalVp = null;\r\n        this.DisplayYourPrice = null;\r\n        this.FreightCharge = 0;\r\n        this.CalcDiscountedAmount = 0;\r\n    },\r\n    InvoicePriceModel: function () {\r\n        this.DiscountPercentage = 0;\r\n        this.DiscountAmount = 0;\r\n        this.CalcDiscountAmount = 0;\r\n        this.TaxPercentage = 0;\r\n        this.TaxAmount = 0;\r\n        this.ShippingPercentage = 0;\r\n        this.ShippingAmount = 0;\r\n        this.TotalDue = 0;\r\n        this.SubTotal = 0;\r\n\r\n        this.TotalEarnBase = 0;\r\n\r\n        this.CalcShippingAmount = 0;\r\n        this.CalcTaxAmount = 0;\r\n        this.TotalDiscountedAmount = 0;\r\n\r\n\r\n        this.MemberTax = 0;\r\n        this.MemberFreight = 0;\r\n        this.MemberTotal = 0;\r\n        this.TotalYourPrice = 0;\r\n        this.Profit = 0;\r\n        this.ProfitPercentage = 0;\r\n        this.MemberStaticDiscount = 0;\r\n        this.MemberDiscount = 0;\r\n\r\n        //Will get calculated by a PriceFactory\r\n        this.DisplayDiscountedAmount = null;\r\n        this.DisplayCurrencySymbol = null;\r\n        this.DisplaySubtotal = null;\r\n        this.DisplayDiscount = null;\r\n        this.DisplayShipping = null;\r\n        this.DisplayTax = null;\r\n        this.DisplayTotalDue = null;\r\n        this.DisplayCalculatedTax = null;\r\n\r\n        this.DisplayProfit = null;\r\n        this.DisplayMemberTax = null;\r\n        this.DisplayMemberFreight = null;\r\n        this.DisplayMemberTotal = null;\r\n        this.DisplayTotalYourPrice = null;\r\n        this.DisplayProfitPercentage = null;\r\n    },\r\n\r\n    scrollTo: function (selector) {\r\n        $('html, body').animate({\r\n            scrollTop: ($(selector).offset().top - 100)\r\n        }, 500);\r\n    }\r\n};\r\n$(function () {\r\n    invEdit.Init();\r\n    $('.collapse-member-information a').click(function (e) {\r\n        e.preventDefault();\r\n        toggleMemberInfo(this);\r\n    });\r\n\r\n    $(\"#taxAmount\").keypress(function () {\r\n        \r\n        var model = $('#taxAmount').prop(\"kendoBindingTarget\").source;\r\n        if (model) {\r\n            model.invoice.set(\"IsCustomerTaxEdited\", true);\r\n        }\r\n    });\r\n\r\n    $(\"#taxPercentage\").keypress(function () {\r\n\r\n        var model = $('#taxPercentage').prop(\"kendoBindingTarget\").source;\r\n        if (model) {\r\n            model.invoice.set(\"IsCustomerTaxEdited\", true);\r\n        }\r\n    });\r\n\r\n    // Set functionality when clicking the arrow of the estimate S&H Fragment.\r\n    $(document).on('click', '.selectRate', function () {\r\n        var val = $(this).parent().parent().children('td').eq(1).html();\r\n\r\n        if (val.indexOf('span') >= 0) {\r\n            val = $(this).parent().parent().children('td').eq(0).html();\r\n        }\r\n\r\n        var model = $('#shippingPercentage').prop(\"kendoBindingTarget\").source;\r\n        if (val && model) {\r\n            model.invoice.InvoicePrice.set(\"ShippingPercentage\", val.substring(0, val.indexOf('%')));\r\n            model.invoice.InvoicePrice.set(\"ShippingAmount\", 0);\r\n            model.invoice.InvoicePrice.set(\"TaxAmount\", 0);\r\n            model.invoice.InvoicePrice.set(\"TaxPercentage\", 0);\r\n            $(\"#shippingPercentage\").prev().removeClass(\"k-state-disabled\");\r\n            $(\"#shippingAmount\").prev().addClass(\"k-state-disabled\");\r\n            var wnd = $(\"#dvPlg\").data(\"kendoWindow\");\r\n            wnd.close();\r\n\r\n\r\n        }\r\n        return false;\r\n    });\r\n    if ($('#dgProducts > table').length > 0) {\r\n        $('.collapse-member-information').css('margin-top', ($('#dgProducts > table').offset().top - $('#dgTotals > table').offset().top));\r\n    }\r\n    \r\n});\r\n\r\nfunction toggleMemberInfo(_this) {\r\n    var member_info = $('div.member-information');\r\n\r\n    member_info.animate({\r\n        left: (parseInt(member_info.css('left'), 10) == 0 || isNaN(parseInt(member_info.css('left'), 10)))\r\n            ? -member_info.outerWidth()\r\n            : 0\r\n    }, {\r\n        start: function () {\r\n            $(_this).toggleClass('icon-arrow-circle-fl-8');\r\n            if ($(_this).hasClass('icon-arrow-circle-fl-8')) {\r\n                member_info.css('z-index', -1);\r\n                $(_this).html(\"<span>\" + showText + \"</span>\");\r\n            } else {\r\n                $(_this).html(\"<span>\" + collapse + \"</span>\");\r\n            }\r\n        },\r\n        complete: function () {\r\n            if (!$(_this).hasClass('icon-arrow-circle-fl-8')) {\r\n                member_info.css('z-index', 'auto');\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nfunction RedirectToReceipts() {\r\n    var locale = _AnalyticsFacts_.LanguageCode + '-' + _AnalyticsFacts_.CountryCode;\r\n    var _countries = ['EN-US', 'ES-US', 'ES-PR'];\r\n\r\n    if (is_page('invoice') && (_countries.indexOf(locale.toUpperCase()) > -1)) {\r\n        logger.log('Page not longer available, please use Receipts page!');\r\n        return '/' + locale + '/Shop/Receipts/Invoice/Index/Ds';;\r\n    }\r\n    return false;\r\n}","var inventoryDetails = {\r\n    Init: function () {\r\n        if ($('#inventoryGrid').length > 0) {\r\n            var detailsModel = kendo.observable(new inventoryDetails.DetailsviewModel());\r\n            kendo.bind($('#inventoryGrid'), detailsModel);\r\n            detailsModel.loadInventory();\r\n        }\r\n        \r\n        //detailsModel.loadErrorMessages();\r\n    },\r\n    \r\n    DetailsviewModel: function () {\r\n        this.Location = null;\r\n        this.ListEmpty = false;\r\n        this.details = [];\r\n        this.isLoading = false;\r\n        this.isLoaded = true;\r\n        \r\n        this.loadInventory = function() {\r\n            var self = this;\r\n            $(\"#principalContent\").css('position', 'relative');\r\n            kendo.ui.progress($(\"#principalContent\"), true);\r\n            $.ajax({\r\n                type: 'get',\r\n                dataType: 'json',\r\n                cache: true,\r\n                url: '/Ordering/api/BackOrderDetail/GetInventoryDetails',\r\n                success: function(data) {\r\n                    self.dataHandler(data);\r\n                },\r\n                error: function() {\r\n                    self.error = true;\r\n                },\r\n                complete: function() {\r\n                    $(\"#principalContent\").css('position', 'static');\r\n                    kendo.ui.progress($(\"#principalContent\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n        this.dataHandler = function (data) {\r\n            if (data) {\r\n\r\n                //Let's generate the show data frame\r\n                drawShowData(data.WhDetails, data.HasShipping);\r\n\r\n                //Let's generate the table\r\n                drawTable(data);\r\n\r\n                if (this.details.length == 0)\r\n                    this.set(\"ListEmpty\", true);\r\n                else\r\n                    this.set(\"ListEmpty\", false);\r\n            }\r\n        };\r\n\r\n    }\r\n        \r\n};\r\n\r\n$(function () {\r\n    inventoryDetails.Init();\r\n});\r\n\r\nfunction drawShowData(dataWareHouses, hasShipping) {\r\n    var wareHouse = $(\"<tr />\");\r\n    \r\n    $(\"#showDataGrid\").append(wareHouse);\r\n\r\n    for (var x = 0; x < dataWareHouses.length; x++) {\r\n        if (hasShipping == true) {\r\n            if (dataWareHouses[x].Option == \"Shipping\") {\r\n                wareHouse.append($(\"<td><input id='dwhouse\" + x + \"' type='checkbox' name='dwhouse' checked='checked' /> \" + dataWareHouses[x].Name + \" (\" + dataWareHouses[x].OptionText + \")</input></td>\"));\r\n            } else {\r\n                wareHouse.append($(\"<td><input id='dwhouse\" + x + \"' type='checkbox' name='dwhouse'/> \" + dataWareHouses[x].Name + \" (\" + dataWareHouses[x].OptionText + \")</input></td>\"));\r\n            }\r\n        } else {\r\n            wareHouse.append($(\"<td><input id='dwhouse\" + x + \"' type='checkbox' name='dwhouse' checked='checked' /> \" + dataWareHouses[x].Name + \" (\" + dataWareHouses[x].OptionText + \")</input></td>\"));\r\n        }\r\n    }\r\n}\r\n\r\nfunction drawTable(data) {\r\n\r\n    //Let's draw the header\r\n    var rowHeader = $(\"<tr />\");\r\n    $(\"#inventoryGrid\").append(rowHeader);\r\n\r\n    rowHeader.append($(\"<th class='col-SKU'>\" + SkuColumnTitleText + \"</th>\"));\r\n    rowHeader.append($(\"<th class='col-Product'>\" + DescriptionColumnText + \"</th>\"));\r\n    \r\n    for (var x = 0; x < data.WhDetails.length; x++) {\r\n        if (data.HasShipping == true) {\r\n            if (data.WhDetails[x].Option == \"Shipping\") {\r\n                rowHeader.append($(\"<th reference=dwhouse\" + x + \">\" + data.WhDetails[x].Name + \"</th>\"));\r\n            } else {\r\n                rowHeader.append($(\"<th reference=dwhouse\" + x + \">\" + data.WhDetails[x].Name + \"</th>\").hide());\r\n            }\r\n        } else {\r\n            rowHeader.append($(\"<th reference=dwhouse\" + x + \">\" + data.WhDetails[x].Name + \"</th>\"));\r\n        }\r\n    }\r\n\r\n    //Let's draw the subheader\r\n    var rowsubHeader = $(\"<tr />\");\r\n    $(\"#inventoryGrid\").append(rowsubHeader);\r\n\r\n    rowsubHeader.append($(\"<th class='invSubHeader'></th>\"));\r\n    rowsubHeader.append($(\"<th class='invSubHeader'></th>\"));\r\n\r\n    for (var x = 0; x < data.WhDetails.length; x++) {\r\n        if (data.HasShipping == true) {\r\n            if (data.WhDetails[x].Option == \"Shipping\") {\r\n                rowsubHeader.append($(\"<th class='invSubHeader' reference=dwhouse\" + x + \">\" + data.WhDetails[x].OptionText + \"</th>\"));\r\n            } else {\r\n                rowsubHeader.append($(\"<th class='invSubHeader' reference=dwhouse\" + x + \">\" + data.WhDetails[x].OptionText + \"</th>\").hide());\r\n            }\r\n        //} else {\r\n        //    //rowsubHeader.append($(\"<th class='invSubHeader' reference=dwhouse\" + x + \">\" + data.WhDetails[x].OptionText + \"</th>\"));\r\n        }\r\n    }\r\n\r\n\r\n    //Let's draw the body\r\n    for (var x = 0; x < data.FullCatalog.length; x++) {\r\n        var row = $(\"<tr rowRef=\" + x + \" />\");\r\n        $(\"#inventoryGrid\").append(row);\r\n\r\n        row.append($(\"<td class='col-SKU'>\" + data.FullCatalog[x].SKU + \"</td>\"));\r\n        row.append($(\"<td class='col-Product'>\" + data.FullCatalog[x].SKUDescription + \"</td>\"));\r\n\r\n        //Let's compare the dataWareHouse position against the location on the Full Catalog array. If they match, we placed it in a new array with the corresponding position\r\n        var skuInfo = new Array(data.WhDetails.length);\r\n        var skuStatus;\r\n        \r\n        for (var y = 0; y < data.FullCatalog[x].InventoryDetails.length; y++) {    \r\n            for (var z = 0; z < data.WhDetails.length; z++) {\r\n                if ((data.FullCatalog[x].InventoryDetails[y].WHCode == data.WhDetails[z].WHCode) && (data.FullCatalog[x].InventoryDetails[y].DeliveryType == data.WhDetails[z].Option) && (data.FullCatalog[x].InventoryDetails[y].Location == data.WhDetails[z].Name)) {\r\n                    var img;\r\n                    var link = true;\r\n                    var skuStatus = false;\r\n\r\n                    if (((data.FullCatalog[x].InventoryDetails[y].Status == \"Unavailable\") || (data.FullCatalog[x].InventoryDetails[y].Status == null)) && (data.FullCatalog[x].InventoryDetails[y].DeliveryType == data.WhDetails[z].Option)) {\r\n                        img = \"<img src='/Content/Global/Products/Img/circle_red.gif' />\";\r\n                    } else if ((data.FullCatalog[x].InventoryDetails[y].Status == \"Available\") && (data.FullCatalog[x].InventoryDetails[y].DeliveryType == data.WhDetails[z].Option)) {\r\n                            img = \"<img src='/Content/Global/Products/Img/circle_green.gif' />\";\r\n                            link = false;\r\n                            skuStatus = true;\r\n                    } else if ((data.FullCatalog[x].InventoryDetails[y].Status == \"AllowBackOrder\") && (data.FullCatalog[x].InventoryDetails[y].DeliveryType == data.WhDetails[z].Option)) {\r\n                            img = \"<img src='/Content/Global/Products/Img/circle_orange.gif' />\";\r\n                            link = false;\r\n                            skuStatus = true;\r\n                    } else if ((data.FullCatalog[x].InventoryDetails[y].Status == \"UnavailableInPrimaryWh\") && (data.FullCatalog[x].InventoryDetails[y].DeliveryType == data.WhDetails[z].Option)) {\r\n                            img = \"<img src='/Content/Global/Products/Img/circle_blue.gif' />\";\r\n                            link = false;\r\n                            skuStatus = true;\r\n                    } else {\r\n                            img = data.FullCatalog[x].InventoryDetails[y].Status;\r\n                            link = false;\r\n                    }\r\n\r\n                    if (link) {\r\n                        skuInfo[z] = img + \"<div class='ttip'><a href='#' location='\" + data.FullCatalog[x].InventoryDetails[y].Location + \"' dateAvailability='\" + data.FullCatalog[x].InventoryDetails[y].AvailabilityDate + \"' type='\" + data.FullCatalog[x].InventoryDetails[y].Type + \"' tooltipcomments='\" + data.FullCatalog[x].InventoryDetails[y].ToolTipComments + \"' comments='\" + data.FullCatalog[x].InventoryDetails[y].Comments + \"' x='\" + x + \"' z='\" + z + \"'>\" + StatusText + \"</a></div>\";\r\n                    } else {\r\n                        skuInfo[z] = img;\r\n                    }\r\n                } \r\n                continue;\r\n            }\r\n        }\r\n\r\n        //Let's draw the row with the position values correct\r\n        for (var i = 0; i < skuInfo.length; i++) {\r\n            if (typeof skuInfo[i] !== \"undefined\") {\r\n                if (data.HasShipping == true) {\r\n                    if (data.WhDetails[i].Option == 'Shipping') {\r\n                        row.append($(\"<td reference=dwhouse\" + i + \">\" + skuInfo[i] + \"</td>\").css('background-color', '#f3f3f3'));\r\n                    } else {\r\n                        row.append($(\"<td reference=dwhouse\" + i + \">\" + skuInfo[i] + \"</td>\").hide());\r\n                    }\r\n                } else {\r\n                    row.append($(\"<td reference=dwhouse\" + i + \">\" + skuInfo[i] + \"</td>\").css('background-color', '#f3f3f3'));\r\n                }\r\n            } else {\r\n                row.append($(\"<td reference=dwhouse\" + i + \"><img src='/Content/Global/Products/Img/circle_red.gif' /></td>\"));\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n$(document).ready(function () {\r\n    \r\n    $(\"input[name='dwhouse']\").live('click', function () {\r\n        if ($(this).prop(\"checked\") == true) {\r\n            $('#inventoryGrid [reference=\"' + this.id + '\"]').show();\r\n        } else {\r\n            $('#inventoryGrid [reference=\"' + this.id + '\"]').hide();\r\n        }\r\n    });\r\n\r\n    $(function () {\r\n        $(\".ttip a\").live('click', function ( event ) {\r\n            event.preventDefault();\r\n            var location = $(this).attr('location');\r\n            var dateAvailability = $(this).attr('dateAvailability');\r\n            var type = $(this).attr('type');\r\n            var tooltipcomments = $(this).attr('tooltipcomments');\r\n            var comments = $(this).attr('comments');\r\n            var row = $(this).attr('x');\r\n            var cell = $(this).attr('z');\r\n\r\n            $(\"#inventoryGrid tr[rowRef] td[reference] div.ttip > div\").hide();\r\n                        \r\n            var tooltipContent = $(\"<div />\");\r\n            $(\"#inventoryGrid tr[rowRef=\" + row + \"] td[reference='dwhouse\" + cell + \"'] div.ttip\").append(tooltipContent);\r\n            tooltipContent.append($(\"<div class='tooltipContent'>\" + location + \"<br /> \" + type + \" <br /> \" + dateAvailability + \" <br /> \" + comments + \" <br /> \" + tooltipcomments + \" </div>\"));\r\n\r\n            $(\"#inventoryGrid tr[rowRef] td[reference] div.ttip > div\").hide();\r\n            $(\"#inventoryGrid tr[rowRef=\" + row + \"] td[reference='dwhouse\" + cell + \"'] div.ttip > div\").show();\r\n        });\r\n    });\r\n});\r\n\r\n\r\n$(document).mouseup(function (e) {\r\n    \r\n    var container = $(\"#inventoryGrid tr[rowRef] td[reference] div.ttip > div\");\r\n\r\n    if (!container.is(e.target) // if the target of the click isn't the container...\r\n        && container.has(e.target).length === 0) // ... nor a descendant of the container\r\n    {\r\n        if (container.is(':visible')) {\r\n            container.hide();\r\n        }\r\n    }\r\n});","// --------------------------------------------------------------------------------------------------------------------\r\n// <copyright file=\"jquery.ajaxPost.js\" company=\"Herbalife\">\r\n//   Herbalife 2012\r\n// </copyright>\r\n// <summary>\r\n//   Handle the json ajax posts.\r\n// </summary>\r\n// --------------------------------------------------------------------------------------------------------------------\r\n\r\n$.ajaxPost = function (method, data, success, error) {\r\n    $.ajax({\r\n        type: \"POST\",\r\n        url: window.location.href.replace('#', '') + \"/\" + method,\r\n        data: data,\r\n        contentType: \"application/json; charset=utf-8\",\r\n        dataType: \"json\",\r\n        success: success,\r\n        error: function showError(xhr, status, exc) { location.reload(true); }\r\n    });\r\n};","/*!\n * jQuery Cookie Plugin v1.3.1\n * https://github.com/carhartl/jquery-cookie\n *\n * Copyright 2013 Klaus Hartl\n * Released under the MIT license\n */\n(function ($, document, undefined) {\n\n\tvar pluses = /\\+/g;\n\n\tfunction raw(s) {\n\t\treturn s;\n\t}\n\n\tfunction decoded(s) {\n\t\treturn unRfc2068(decodeURIComponent(s.replace(pluses, ' ')));\n\t}\n\n\tfunction unRfc2068(value) {\n\t\tif (value.indexOf('\"') === 0) {\n\t\t\t// This is a quoted cookie as according to RFC2068, unescape\n\t\t\tvalue = value.slice(1, -1).replace(/\\\\\"/g, '\"').replace(/\\\\\\\\/g, '\\\\');\n\t\t}\n\t\treturn value;\n\t}\n\n\tfunction fromJSON(value) {\n\t\treturn config.json ? JSON.parse(value) : value;\n\t}\n\n\tvar config = $.cookie = function (key, value, options) {\n\n\t\t// write\n\t\tif (value !== undefined) {\n\t\t\toptions = $.extend({}, config.defaults, options);\n\n\t\t\tif (value === null) {\n\t\t\t\toptions.expires = -1;\n\t\t\t}\n\n\t\t\tif (typeof options.expires === 'number') {\n\t\t\t\tvar days = options.expires, t = options.expires = new Date();\n\t\t\t\tt.setDate(t.getDate() + days);\n\t\t\t}\n\n\t\t\tvalue = config.json ? JSON.stringify(value) : String(value);\n\n\t\t\treturn (document.cookie = [\n\t\t\t\tencodeURIComponent(key), '=', config.raw ? value : encodeURIComponent(value),\n\t\t\t\toptions.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\n\t\t\t\toptions.path    ? '; path=' + options.path : '',\n\t\t\t\toptions.domain  ? '; domain=' + options.domain : '',\n\t\t\t\toptions.secure  ? '; secure' : ''\n\t\t\t].join(''));\n\t\t}\n\n\t\t// read\n\t\tvar decode = config.raw ? raw : decoded;\n\t\tvar cookies = document.cookie.split('; ');\n\t\tvar result = key ? null : {};\n\t\tfor (var i = 0, l = cookies.length; i < l; i++) {\n\t\t\tvar parts = cookies[i].split('=');\n\t\t\tvar name = decode(parts.shift());\n\t\t\tvar cookie = decode(parts.join('='));\n\n\t\t\tif (key && key === name) {\n\t\t\t\tresult = fromJSON(cookie);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (!key) {\n\t\t\t\tresult[name] = fromJSON(cookie);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tconfig.defaults = {};\n\n\t$.removeCookie = function (key, options) {\n\t\tif ($.cookie(key) !== null) {\n\t\t\t$.cookie(key, null, options);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n})(jQuery, document);\n","/* FileSaver.js\r\n * A saveAs() FileSaver implementation.\r\n * 2014-07-25\r\n *\r\n * By Eli Grey, http://eligrey.com\r\n * License: X11/MIT\r\n *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\r\n */\r\n\r\n/*global self */\r\n/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\r\n\r\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\r\n\r\nvar saveAs = saveAs\r\n  // IE 10+ (native saveAs)\r\n  || (typeof navigator !== \"undefined\" &&\r\n      navigator.msSaveOrOpenBlob && navigator.msSaveOrOpenBlob.bind(navigator))\r\n  // Everyone else\r\n  || (function(view) {\r\n\t\"use strict\";\r\n\t// IE <10 is explicitly unsupported\r\n\tif (typeof navigator !== \"undefined\" &&\r\n\t    /MSIE [1-9]\\./.test(navigator.userAgent)) {\r\n\t\treturn;\r\n\t}\r\n\tvar\r\n\t\t  doc = view.document\r\n\t\t  // only get URL when necessary in case Blob.js hasn't overridden it yet\r\n\t\t, get_URL = function() {\r\n\t\t\treturn view.URL || view.webkitURL || view;\r\n\t\t}\r\n\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\r\n\t\t, can_use_save_link = !view.externalHost && \"download\" in save_link\r\n\t\t, click = function(node) {\r\n\t\t\tvar event = doc.createEvent(\"MouseEvents\");\r\n\t\t\tevent.initMouseEvent(\r\n\t\t\t\t\"click\", true, false, view, 0, 0, 0, 0, 0\r\n\t\t\t\t, false, false, false, false, 0, null\r\n\t\t\t);\r\n\t\t\tnode.dispatchEvent(event);\r\n\t\t}\r\n\t\t, webkit_req_fs = view.webkitRequestFileSystem\r\n\t\t, req_fs = view.requestFileSystem || webkit_req_fs || view.mozRequestFileSystem\r\n\t\t, throw_outside = function(ex) {\r\n\t\t\t(view.setImmediate || view.setTimeout)(function() {\r\n\t\t\t\tthrow ex;\r\n\t\t\t}, 0);\r\n\t\t}\r\n\t\t, force_saveable_type = \"application/octet-stream\"\r\n\t\t, fs_min_size = 0\r\n\t\t// See https://code.google.com/p/chromium/issues/detail?id=375297#c7 for\r\n\t\t// the reasoning behind the timeout and revocation flow\r\n\t\t, arbitrary_revoke_timeout = 10\r\n\t\t, revoke = function(file) {\r\n\t\t\tvar revoker = function() {\r\n\t\t\t\tif (typeof file === \"string\") { // file is an object URL\r\n\t\t\t\t\tget_URL().revokeObjectURL(file);\r\n\t\t\t\t} else { // file is a File\r\n\t\t\t\t\tfile.remove();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tif (view.chrome) {\r\n\t\t\t\trevoker();\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(revoker, arbitrary_revoke_timeout);\r\n\t\t\t}\r\n\t\t}\r\n\t\t, dispatch = function(filesaver, event_types, event) {\r\n\t\t\tevent_types = [].concat(event_types);\r\n\t\t\tvar i = event_types.length;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\r\n\t\t\t\tif (typeof listener === \"function\") {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\r\n\t\t\t\t\t} catch (ex) {\r\n\t\t\t\t\t\tthrow_outside(ex);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t, FileSaver = function(blob, name) {\r\n\t\t\t// First try a.download, then web filesystem, then object URLs\r\n\t\t\tvar\r\n\t\t\t\t  filesaver = this\r\n\t\t\t\t, type = blob.type\r\n\t\t\t\t, blob_changed = false\r\n\t\t\t\t, object_url\r\n\t\t\t\t, target_view\r\n\t\t\t\t, dispatch_all = function() {\r\n\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\r\n\t\t\t\t}\r\n\t\t\t\t// on any filesys errors revert to saving with object URLs\r\n\t\t\t\t, fs_error = function() {\r\n\t\t\t\t\t// don't create more object URLs than needed\r\n\t\t\t\t\tif (blob_changed || !object_url) {\r\n\t\t\t\t\t\tobject_url = get_URL().createObjectURL(blob);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (target_view) {\r\n\t\t\t\t\t\ttarget_view.location.href = object_url;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar new_tab = view.open(object_url, \"_blank\");\r\n\t\t\t\t\t\tif (new_tab == undefined && typeof safari !== \"undefined\") {\r\n\t\t\t\t\t\t\t//Apple do not allow window.open, see http://bit.ly/1kZffRI\r\n\t\t\t\t\t\t\tview.location.href = object_url\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\tdispatch_all();\r\n\t\t\t\t\trevoke(object_url);\r\n\t\t\t\t}\r\n\t\t\t\t, abortable = function(func) {\r\n\t\t\t\t\treturn function() {\r\n\t\t\t\t\t\tif (filesaver.readyState !== filesaver.DONE) {\r\n\t\t\t\t\t\t\treturn func.apply(this, arguments);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\t, create_if_not_found = {create: true, exclusive: false}\r\n\t\t\t\t, slice\r\n\t\t\t;\r\n\t\t\tfilesaver.readyState = filesaver.INIT;\r\n\t\t\tif (!name) {\r\n\t\t\t\tname = \"download\";\r\n\t\t\t}\r\n\t\t\tif (can_use_save_link) {\r\n\t\t\t\tobject_url = get_URL().createObjectURL(blob);\r\n\t\t\t\tsave_link.href = object_url;\r\n\t\t\t\tsave_link.download = name;\r\n\t\t\t\tclick(save_link);\r\n\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\tdispatch_all();\r\n\t\t\t\trevoke(object_url);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// Object and web filesystem URLs have a problem saving in Google Chrome when\r\n\t\t\t// viewed in a tab, so I force save with application/octet-stream\r\n\t\t\t// http://code.google.com/p/chromium/issues/detail?id=91158\r\n\t\t\t// Update: Google errantly closed 91158, I submitted it again:\r\n\t\t\t// https://code.google.com/p/chromium/issues/detail?id=389642\r\n\t\t\tif (view.chrome && type && type !== force_saveable_type) {\r\n\t\t\t\tslice = blob.slice || blob.webkitSlice;\r\n\t\t\t\tblob = slice.call(blob, 0, blob.size, force_saveable_type);\r\n\t\t\t\tblob_changed = true;\r\n\t\t\t}\r\n\t\t\t// Since I can't be sure that the guessed media type will trigger a download\r\n\t\t\t// in WebKit, I append .download to the filename.\r\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=65440\r\n\t\t\tif (webkit_req_fs && name !== \"download\") {\r\n\t\t\t\tname += \".download\";\r\n\t\t\t}\r\n\t\t\tif (type === force_saveable_type || webkit_req_fs) {\r\n\t\t\t\ttarget_view = view;\r\n\t\t\t}\r\n\t\t\tif (!req_fs) {\r\n\t\t\t\tfs_error();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tfs_min_size += blob.size;\r\n\t\t\treq_fs(view.TEMPORARY, fs_min_size, abortable(function(fs) {\r\n\t\t\t\tfs.root.getDirectory(\"saved\", create_if_not_found, abortable(function(dir) {\r\n\t\t\t\t\tvar save = function() {\r\n\t\t\t\t\t\tdir.getFile(name, create_if_not_found, abortable(function(file) {\r\n\t\t\t\t\t\t\tfile.createWriter(abortable(function(writer) {\r\n\t\t\t\t\t\t\t\twriter.onwriteend = function(event) {\r\n\t\t\t\t\t\t\t\t\ttarget_view.location.href = file.toURL();\r\n\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\t\t\t\t\tdispatch(filesaver, \"writeend\", event);\r\n\t\t\t\t\t\t\t\t\trevoke(file);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\twriter.onerror = function() {\r\n\t\t\t\t\t\t\t\t\tvar error = writer.error;\r\n\t\t\t\t\t\t\t\t\tif (error.code !== error.ABORT_ERR) {\r\n\t\t\t\t\t\t\t\t\t\tfs_error();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\"writestart progress write abort\".split(\" \").forEach(function(event) {\r\n\t\t\t\t\t\t\t\t\twriter[\"on\" + event] = filesaver[\"on\" + event];\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\twriter.write(blob);\r\n\t\t\t\t\t\t\t\tfilesaver.abort = function() {\r\n\t\t\t\t\t\t\t\t\twriter.abort();\r\n\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.WRITING;\r\n\t\t\t\t\t\t\t}), fs_error);\r\n\t\t\t\t\t\t}), fs_error);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tdir.getFile(name, {create: false}, abortable(function(file) {\r\n\t\t\t\t\t\t// delete file if it already exists\r\n\t\t\t\t\t\tfile.remove();\r\n\t\t\t\t\t\tsave();\r\n\t\t\t\t\t}), abortable(function(ex) {\r\n\t\t\t\t\t\tif (ex.code === ex.NOT_FOUND_ERR) {\r\n\t\t\t\t\t\t\tsave();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfs_error();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}));\r\n\t\t\t\t}), fs_error);\r\n\t\t\t}), fs_error);\r\n\t\t}\r\n\t\t, FS_proto = FileSaver.prototype\r\n\t\t, saveAs = function(blob, name) {\r\n\t\t\treturn new FileSaver(blob, name);\r\n\t\t}\r\n\t;\r\n\tFS_proto.abort = function() {\r\n\t\tvar filesaver = this;\r\n\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\tdispatch(filesaver, \"abort\");\r\n\t};\r\n\tFS_proto.readyState = FS_proto.INIT = 0;\r\n\tFS_proto.WRITING = 1;\r\n\tFS_proto.DONE = 2;\r\n\r\n\tFS_proto.error =\r\n\tFS_proto.onwritestart =\r\n\tFS_proto.onprogress =\r\n\tFS_proto.onwrite =\r\n\tFS_proto.onabort =\r\n\tFS_proto.onerror =\r\n\tFS_proto.onwriteend =\r\n\t\tnull;\r\n\r\n\treturn saveAs;\r\n}(\r\n\t   typeof self !== \"undefined\" && self\r\n\t|| typeof window !== \"undefined\" && window\r\n\t|| this.content\r\n));\r\n// `self` is undefined in Firefox for Android content script context\r\n// while `this` is nsIContentFrameMessageManager\r\n// with an attribute `content` that corresponds to the window\r\n\r\nif (typeof module !== \"undefined\" && module !== null) {\r\n  module.exports = saveAs;\r\n} else if ((typeof define !== \"undefined\" && define !== null) && (define.amd != null)) {\r\n  define([], function() {\r\n    return saveAs;\r\n  });\r\n}","//! moment.js\r\n//! version : 2.8.4\r\n//! authors : Tim Wood, Iskren Chernev, Moment.js contributors\r\n//! license : MIT\r\n//! momentjs.com\r\n\r\n(function (undefined) {\r\n    /************************************\r\n        Constants\r\n    ************************************/\r\n\r\n    var moment,\r\n        VERSION = '2.8.4',\r\n        // the global-scope this is NOT the global object in Node.js\r\n        globalScope = typeof global !== 'undefined' ? global : this,\r\n        oldGlobalMoment,\r\n        round = Math.round,\r\n        hasOwnProperty = Object.prototype.hasOwnProperty,\r\n        i,\r\n\r\n        YEAR = 0,\r\n        MONTH = 1,\r\n        DATE = 2,\r\n        HOUR = 3,\r\n        MINUTE = 4,\r\n        SECOND = 5,\r\n        MILLISECOND = 6,\r\n\r\n        // internal storage for locale config files\r\n        locales = {},\r\n\r\n        // extra moment internal properties (plugins register props here)\r\n        momentProperties = [],\r\n\r\n        // check for nodeJS\r\n        hasModule = (typeof module !== 'undefined' && module && module.exports),\r\n\r\n        // ASP.NET json date format regex\r\n        aspNetJsonRegex = /^\\/?Date\\((\\-?\\d+)/i,\r\n        aspNetTimeSpanJsonRegex = /(\\-)?(?:(\\d*)\\.)?(\\d+)\\:(\\d+)(?:\\:(\\d+)\\.?(\\d{3})?)?/,\r\n\r\n        // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html\r\n        // somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere\r\n        isoDurationRegex = /^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,\r\n\r\n        // format tokens\r\n        formattingTokens = /(\\[[^\\[]*\\])|(\\\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,\r\n        localFormattingTokens = /(\\[[^\\[]*\\])|(\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g,\r\n\r\n        // parsing token regexes\r\n        parseTokenOneOrTwoDigits = /\\d\\d?/, // 0 - 99\r\n        parseTokenOneToThreeDigits = /\\d{1,3}/, // 0 - 999\r\n        parseTokenOneToFourDigits = /\\d{1,4}/, // 0 - 9999\r\n        parseTokenOneToSixDigits = /[+\\-]?\\d{1,6}/, // -999,999 - 999,999\r\n        parseTokenDigits = /\\d+/, // nonzero number of digits\r\n        parseTokenWord = /[0-9]*['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+|[\\u0600-\\u06FF\\/]+(\\s*?[\\u0600-\\u06FF]+){1,2}/i, // any word (or two) characters or numbers including two/three word month in arabic.\r\n        parseTokenTimezone = /Z|[\\+\\-]\\d\\d:?\\d\\d/gi, // +00:00 -00:00 +0000 -0000 or Z\r\n        parseTokenT = /T/i, // T (ISO separator)\r\n        parseTokenOffsetMs = /[\\+\\-]?\\d+/, // 1234567890123\r\n        parseTokenTimestampMs = /[\\+\\-]?\\d+(\\.\\d{1,3})?/, // 123456789 123456789.123\r\n\r\n        //strict parsing regexes\r\n        parseTokenOneDigit = /\\d/, // 0 - 9\r\n        parseTokenTwoDigits = /\\d\\d/, // 00 - 99\r\n        parseTokenThreeDigits = /\\d{3}/, // 000 - 999\r\n        parseTokenFourDigits = /\\d{4}/, // 0000 - 9999\r\n        parseTokenSixDigits = /[+-]?\\d{6}/, // -999,999 - 999,999\r\n        parseTokenSignedNumber = /[+-]?\\d+/, // -inf - inf\r\n\r\n        // iso 8601 regex\r\n        // 0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)\r\n        isoRegex = /^\\s*(?:[+-]\\d{6}|\\d{4})-(?:(\\d\\d-\\d\\d)|(W\\d\\d$)|(W\\d\\d-\\d)|(\\d\\d\\d))((T| )(\\d\\d(:\\d\\d(:\\d\\d(\\.\\d+)?)?)?)?([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/,\r\n\r\n        isoFormat = 'YYYY-MM-DDTHH:mm:ssZ',\r\n\r\n        isoDates = [\r\n            ['YYYYYY-MM-DD', /[+-]\\d{6}-\\d{2}-\\d{2}/],\r\n            ['YYYY-MM-DD', /\\d{4}-\\d{2}-\\d{2}/],\r\n            ['GGGG-[W]WW-E', /\\d{4}-W\\d{2}-\\d/],\r\n            ['GGGG-[W]WW', /\\d{4}-W\\d{2}/],\r\n            ['YYYY-DDD', /\\d{4}-\\d{3}/]\r\n        ],\r\n\r\n        // iso time formats and regexes\r\n        isoTimes = [\r\n            ['HH:mm:ss.SSSS', /(T| )\\d\\d:\\d\\d:\\d\\d\\.\\d+/],\r\n            ['HH:mm:ss', /(T| )\\d\\d:\\d\\d:\\d\\d/],\r\n            ['HH:mm', /(T| )\\d\\d:\\d\\d/],\r\n            ['HH', /(T| )\\d\\d/]\r\n        ],\r\n\r\n        // timezone chunker '+10:00' > ['10', '00'] or '-1530' > ['-15', '30']\r\n        parseTimezoneChunker = /([\\+\\-]|\\d\\d)/gi,\r\n\r\n        // getter and setter names\r\n        proxyGettersAndSetters = 'Date|Hours|Minutes|Seconds|Milliseconds'.split('|'),\r\n        unitMillisecondFactors = {\r\n            'Milliseconds': 1,\r\n            'Seconds': 1e3,\r\n            'Minutes': 6e4,\r\n            'Hours': 36e5,\r\n            'Days': 864e5,\r\n            'Months': 2592e6,\r\n            'Years': 31536e6\r\n        },\r\n\r\n        unitAliases = {\r\n            ms: 'millisecond',\r\n            s: 'second',\r\n            m: 'minute',\r\n            h: 'hour',\r\n            d: 'day',\r\n            D: 'date',\r\n            w: 'week',\r\n            W: 'isoWeek',\r\n            M: 'month',\r\n            Q: 'quarter',\r\n            y: 'year',\r\n            DDD: 'dayOfYear',\r\n            e: 'weekday',\r\n            E: 'isoWeekday',\r\n            gg: 'weekYear',\r\n            GG: 'isoWeekYear'\r\n        },\r\n\r\n        camelFunctions = {\r\n            dayofyear: 'dayOfYear',\r\n            isoweekday: 'isoWeekday',\r\n            isoweek: 'isoWeek',\r\n            weekyear: 'weekYear',\r\n            isoweekyear: 'isoWeekYear'\r\n        },\r\n\r\n        // format function strings\r\n        formatFunctions = {},\r\n\r\n        // default relative time thresholds\r\n        relativeTimeThresholds = {\r\n            s: 45,  // seconds to minute\r\n            m: 45,  // minutes to hour\r\n            h: 22,  // hours to day\r\n            d: 26,  // days to month\r\n            M: 11   // months to year\r\n        },\r\n\r\n        // tokens to ordinalize and pad\r\n        ordinalizeTokens = 'DDD w W M D d'.split(' '),\r\n        paddedTokens = 'M D H h m s w W'.split(' '),\r\n\r\n        formatTokenFunctions = {\r\n            M: function () {\r\n                return this.month() + 1;\r\n            },\r\n            MMM: function (format) {\r\n                return this.localeData().monthsShort(this, format);\r\n            },\r\n            MMMM: function (format) {\r\n                return this.localeData().months(this, format);\r\n            },\r\n            D: function () {\r\n                return this.date();\r\n            },\r\n            DDD: function () {\r\n                return this.dayOfYear();\r\n            },\r\n            d: function () {\r\n                return this.day();\r\n            },\r\n            dd: function (format) {\r\n                return this.localeData().weekdaysMin(this, format);\r\n            },\r\n            ddd: function (format) {\r\n                return this.localeData().weekdaysShort(this, format);\r\n            },\r\n            dddd: function (format) {\r\n                return this.localeData().weekdays(this, format);\r\n            },\r\n            w: function () {\r\n                return this.week();\r\n            },\r\n            W: function () {\r\n                return this.isoWeek();\r\n            },\r\n            YY: function () {\r\n                return leftZeroFill(this.year() % 100, 2);\r\n            },\r\n            YYYY: function () {\r\n                return leftZeroFill(this.year(), 4);\r\n            },\r\n            YYYYY: function () {\r\n                return leftZeroFill(this.year(), 5);\r\n            },\r\n            YYYYYY: function () {\r\n                var y = this.year(), sign = y >= 0 ? '+' : '-';\r\n                return sign + leftZeroFill(Math.abs(y), 6);\r\n            },\r\n            gg: function () {\r\n                return leftZeroFill(this.weekYear() % 100, 2);\r\n            },\r\n            gggg: function () {\r\n                return leftZeroFill(this.weekYear(), 4);\r\n            },\r\n            ggggg: function () {\r\n                return leftZeroFill(this.weekYear(), 5);\r\n            },\r\n            GG: function () {\r\n                return leftZeroFill(this.isoWeekYear() % 100, 2);\r\n            },\r\n            GGGG: function () {\r\n                return leftZeroFill(this.isoWeekYear(), 4);\r\n            },\r\n            GGGGG: function () {\r\n                return leftZeroFill(this.isoWeekYear(), 5);\r\n            },\r\n            e: function () {\r\n                return this.weekday();\r\n            },\r\n            E: function () {\r\n                return this.isoWeekday();\r\n            },\r\n            a: function () {\r\n                return this.localeData().meridiem(this.hours(), this.minutes(), true);\r\n            },\r\n            A: function () {\r\n                return this.localeData().meridiem(this.hours(), this.minutes(), false);\r\n            },\r\n            H: function () {\r\n                return this.hours();\r\n            },\r\n            h: function () {\r\n                return this.hours() % 12 || 12;\r\n            },\r\n            m: function () {\r\n                return this.minutes();\r\n            },\r\n            s: function () {\r\n                return this.seconds();\r\n            },\r\n            S: function () {\r\n                return toInt(this.milliseconds() / 100);\r\n            },\r\n            SS: function () {\r\n                return leftZeroFill(toInt(this.milliseconds() / 10), 2);\r\n            },\r\n            SSS: function () {\r\n                return leftZeroFill(this.milliseconds(), 3);\r\n            },\r\n            SSSS: function () {\r\n                return leftZeroFill(this.milliseconds(), 3);\r\n            },\r\n            Z: function () {\r\n                var a = -this.zone(),\r\n                    b = '+';\r\n                if (a < 0) {\r\n                    a = -a;\r\n                    b = '-';\r\n                }\r\n                return b + leftZeroFill(toInt(a / 60), 2) + ':' + leftZeroFill(toInt(a) % 60, 2);\r\n            },\r\n            ZZ: function () {\r\n                var a = -this.zone(),\r\n                    b = '+';\r\n                if (a < 0) {\r\n                    a = -a;\r\n                    b = '-';\r\n                }\r\n                return b + leftZeroFill(toInt(a / 60), 2) + leftZeroFill(toInt(a) % 60, 2);\r\n            },\r\n            z: function () {\r\n                return this.zoneAbbr();\r\n            },\r\n            zz: function () {\r\n                return this.zoneName();\r\n            },\r\n            x: function () {\r\n                return this.valueOf();\r\n            },\r\n            X: function () {\r\n                return this.unix();\r\n            },\r\n            Q: function () {\r\n                return this.quarter();\r\n            }\r\n        },\r\n\r\n        deprecations = {},\r\n\r\n        lists = ['months', 'monthsShort', 'weekdays', 'weekdaysShort', 'weekdaysMin'];\r\n\r\n    // Pick the first defined of two or three arguments. dfl comes from\r\n    // default.\r\n    function dfl(a, b, c) {\r\n        switch (arguments.length) {\r\n            case 2: return a != null ? a : b;\r\n            case 3: return a != null ? a : b != null ? b : c;\r\n            default: throw new Error('Implement me');\r\n        }\r\n    }\r\n\r\n    function hasOwnProp(a, b) {\r\n        return hasOwnProperty.call(a, b);\r\n    }\r\n\r\n    function defaultParsingFlags() {\r\n        // We need to deep clone this object, and es5 standard is not very\r\n        // helpful.\r\n        return {\r\n            empty: false,\r\n            unusedTokens: [],\r\n            unusedInput: [],\r\n            overflow: -2,\r\n            charsLeftOver: 0,\r\n            nullInput: false,\r\n            invalidMonth: null,\r\n            invalidFormat: false,\r\n            userInvalidated: false,\r\n            iso: false\r\n        };\r\n    }\r\n\r\n    function printMsg(msg) {\r\n        if (moment.suppressDeprecationWarnings === false &&\r\n                typeof console !== 'undefined' && console.warn) {\r\n            console.warn('Deprecation warning: ' + msg);\r\n        }\r\n    }\r\n\r\n    function deprecate(msg, fn) {\r\n        var firstTime = true;\r\n        return extend(function () {\r\n            if (firstTime) {\r\n                printMsg(msg);\r\n                firstTime = false;\r\n            }\r\n            return fn.apply(this, arguments);\r\n        }, fn);\r\n    }\r\n\r\n    function deprecateSimple(name, msg) {\r\n        if (!deprecations[name]) {\r\n            printMsg(msg);\r\n            deprecations[name] = true;\r\n        }\r\n    }\r\n\r\n    function padToken(func, count) {\r\n        return function (a) {\r\n            return leftZeroFill(func.call(this, a), count);\r\n        };\r\n    }\r\n    function ordinalizeToken(func, period) {\r\n        return function (a) {\r\n            return this.localeData().ordinal(func.call(this, a), period);\r\n        };\r\n    }\r\n\r\n    while (ordinalizeTokens.length) {\r\n        i = ordinalizeTokens.pop();\r\n        formatTokenFunctions[i + 'o'] = ordinalizeToken(formatTokenFunctions[i], i);\r\n    }\r\n    while (paddedTokens.length) {\r\n        i = paddedTokens.pop();\r\n        formatTokenFunctions[i + i] = padToken(formatTokenFunctions[i], 2);\r\n    }\r\n    formatTokenFunctions.DDDD = padToken(formatTokenFunctions.DDD, 3);\r\n\r\n\r\n    /************************************\r\n        Constructors\r\n    ************************************/\r\n\r\n    function Locale() {\r\n    }\r\n\r\n    // Moment prototype object\r\n    function Moment(config, skipOverflow) {\r\n        if (skipOverflow !== false) {\r\n            checkOverflow(config);\r\n        }\r\n        copyConfig(this, config);\r\n        this._d = new Date(+config._d);\r\n    }\r\n\r\n    // Duration Constructor\r\n    function Duration(duration) {\r\n        var normalizedInput = normalizeObjectUnits(duration),\r\n            years = normalizedInput.year || 0,\r\n            quarters = normalizedInput.quarter || 0,\r\n            months = normalizedInput.month || 0,\r\n            weeks = normalizedInput.week || 0,\r\n            days = normalizedInput.day || 0,\r\n            hours = normalizedInput.hour || 0,\r\n            minutes = normalizedInput.minute || 0,\r\n            seconds = normalizedInput.second || 0,\r\n            milliseconds = normalizedInput.millisecond || 0;\r\n\r\n        // representation for dateAddRemove\r\n        this._milliseconds = +milliseconds +\r\n            seconds * 1e3 + // 1000\r\n            minutes * 6e4 + // 1000 * 60\r\n            hours * 36e5; // 1000 * 60 * 60\r\n        // Because of dateAddRemove treats 24 hours as different from a\r\n        // day when working around DST, we need to store them separately\r\n        this._days = +days +\r\n            weeks * 7;\r\n        // It is impossible translate months into days without knowing\r\n        // which months you are are talking about, so we have to store\r\n        // it separately.\r\n        this._months = +months +\r\n            quarters * 3 +\r\n            years * 12;\r\n\r\n        this._data = {};\r\n\r\n        this._locale = moment.localeData();\r\n\r\n        this._bubble();\r\n    }\r\n\r\n    /************************************\r\n        Helpers\r\n    ************************************/\r\n\r\n\r\n    function extend(a, b) {\r\n        for (var i in b) {\r\n            if (hasOwnProp(b, i)) {\r\n                a[i] = b[i];\r\n            }\r\n        }\r\n\r\n        if (hasOwnProp(b, 'toString')) {\r\n            a.toString = b.toString;\r\n        }\r\n\r\n        if (hasOwnProp(b, 'valueOf')) {\r\n            a.valueOf = b.valueOf;\r\n        }\r\n\r\n        return a;\r\n    }\r\n\r\n    function copyConfig(to, from) {\r\n        var i, prop, val;\r\n\r\n        if (typeof from._isAMomentObject !== 'undefined') {\r\n            to._isAMomentObject = from._isAMomentObject;\r\n        }\r\n        if (typeof from._i !== 'undefined') {\r\n            to._i = from._i;\r\n        }\r\n        if (typeof from._f !== 'undefined') {\r\n            to._f = from._f;\r\n        }\r\n        if (typeof from._l !== 'undefined') {\r\n            to._l = from._l;\r\n        }\r\n        if (typeof from._strict !== 'undefined') {\r\n            to._strict = from._strict;\r\n        }\r\n        if (typeof from._tzm !== 'undefined') {\r\n            to._tzm = from._tzm;\r\n        }\r\n        if (typeof from._isUTC !== 'undefined') {\r\n            to._isUTC = from._isUTC;\r\n        }\r\n        if (typeof from._offset !== 'undefined') {\r\n            to._offset = from._offset;\r\n        }\r\n        if (typeof from._pf !== 'undefined') {\r\n            to._pf = from._pf;\r\n        }\r\n        if (typeof from._locale !== 'undefined') {\r\n            to._locale = from._locale;\r\n        }\r\n\r\n        if (momentProperties.length > 0) {\r\n            for (i in momentProperties) {\r\n                prop = momentProperties[i];\r\n                val = from[prop];\r\n                if (typeof val !== 'undefined') {\r\n                    to[prop] = val;\r\n                }\r\n            }\r\n        }\r\n\r\n        return to;\r\n    }\r\n\r\n    function absRound(number) {\r\n        if (number < 0) {\r\n            return Math.ceil(number);\r\n        } else {\r\n            return Math.floor(number);\r\n        }\r\n    }\r\n\r\n    // left zero fill a number\r\n    // see http://jsperf.com/left-zero-filling for performance comparison\r\n    function leftZeroFill(number, targetLength, forceSign) {\r\n        var output = '' + Math.abs(number),\r\n            sign = number >= 0;\r\n\r\n        while (output.length < targetLength) {\r\n            output = '0' + output;\r\n        }\r\n        return (sign ? (forceSign ? '+' : '') : '-') + output;\r\n    }\r\n\r\n    function positiveMomentsDifference(base, other) {\r\n        var res = { milliseconds: 0, months: 0 };\r\n\r\n        res.months = other.month() - base.month() +\r\n            (other.year() - base.year()) * 12;\r\n        if (base.clone().add(res.months, 'M').isAfter(other)) {\r\n            --res.months;\r\n        }\r\n\r\n        res.milliseconds = +other - +(base.clone().add(res.months, 'M'));\r\n\r\n        return res;\r\n    }\r\n\r\n    function momentsDifference(base, other) {\r\n        var res;\r\n        other = makeAs(other, base);\r\n        if (base.isBefore(other)) {\r\n            res = positiveMomentsDifference(base, other);\r\n        } else {\r\n            res = positiveMomentsDifference(other, base);\r\n            res.milliseconds = -res.milliseconds;\r\n            res.months = -res.months;\r\n        }\r\n\r\n        return res;\r\n    }\r\n\r\n    // TODO: remove 'name' arg after deprecation is removed\r\n    function createAdder(direction, name) {\r\n        return function (val, period) {\r\n            var dur, tmp;\r\n            //invert the arguments, but complain about it\r\n            if (period !== null && !isNaN(+period)) {\r\n                deprecateSimple(name, 'moment().' + name + '(period, number) is deprecated. Please use moment().' + name + '(number, period).');\r\n                tmp = val; val = period; period = tmp;\r\n            }\r\n\r\n            val = typeof val === 'string' ? +val : val;\r\n            dur = moment.duration(val, period);\r\n            addOrSubtractDurationFromMoment(this, dur, direction);\r\n            return this;\r\n        };\r\n    }\r\n\r\n    function addOrSubtractDurationFromMoment(mom, duration, isAdding, updateOffset) {\r\n        var milliseconds = duration._milliseconds,\r\n            days = duration._days,\r\n            months = duration._months;\r\n        updateOffset = updateOffset == null ? true : updateOffset;\r\n\r\n        if (milliseconds) {\r\n            mom._d.setTime(+mom._d + milliseconds * isAdding);\r\n        }\r\n        if (days) {\r\n            rawSetter(mom, 'Date', rawGetter(mom, 'Date') + days * isAdding);\r\n        }\r\n        if (months) {\r\n            rawMonthSetter(mom, rawGetter(mom, 'Month') + months * isAdding);\r\n        }\r\n        if (updateOffset) {\r\n            moment.updateOffset(mom, days || months);\r\n        }\r\n    }\r\n\r\n    // check if is an array\r\n    function isArray(input) {\r\n        return Object.prototype.toString.call(input) === '[object Array]';\r\n    }\r\n\r\n    function isDate(input) {\r\n        return Object.prototype.toString.call(input) === '[object Date]' ||\r\n            input instanceof Date;\r\n    }\r\n\r\n    // compare two arrays, return the number of differences\r\n    function compareArrays(array1, array2, dontConvert) {\r\n        var len = Math.min(array1.length, array2.length),\r\n            lengthDiff = Math.abs(array1.length - array2.length),\r\n            diffs = 0,\r\n            i;\r\n        for (i = 0; i < len; i++) {\r\n            if ((dontConvert && array1[i] !== array2[i]) ||\r\n                (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))) {\r\n                diffs++;\r\n            }\r\n        }\r\n        return diffs + lengthDiff;\r\n    }\r\n\r\n    function normalizeUnits(units) {\r\n        if (units) {\r\n            var lowered = units.toLowerCase().replace(/(.)s$/, '$1');\r\n            units = unitAliases[units] || camelFunctions[lowered] || lowered;\r\n        }\r\n        return units;\r\n    }\r\n\r\n    function normalizeObjectUnits(inputObject) {\r\n        var normalizedInput = {},\r\n            normalizedProp,\r\n            prop;\r\n\r\n        for (prop in inputObject) {\r\n            if (hasOwnProp(inputObject, prop)) {\r\n                normalizedProp = normalizeUnits(prop);\r\n                if (normalizedProp) {\r\n                    normalizedInput[normalizedProp] = inputObject[prop];\r\n                }\r\n            }\r\n        }\r\n\r\n        return normalizedInput;\r\n    }\r\n\r\n    function makeList(field) {\r\n        var count, setter;\r\n\r\n        if (field.indexOf('week') === 0) {\r\n            count = 7;\r\n            setter = 'day';\r\n        }\r\n        else if (field.indexOf('month') === 0) {\r\n            count = 12;\r\n            setter = 'month';\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n\r\n        moment[field] = function (format, index) {\r\n            var i, getter,\r\n                method = moment._locale[field],\r\n                results = [];\r\n\r\n            if (typeof format === 'number') {\r\n                index = format;\r\n                format = undefined;\r\n            }\r\n\r\n            getter = function (i) {\r\n                var m = moment().utc().set(setter, i);\r\n                return method.call(moment._locale, m, format || '');\r\n            };\r\n\r\n            if (index != null) {\r\n                return getter(index);\r\n            }\r\n            else {\r\n                for (i = 0; i < count; i++) {\r\n                    results.push(getter(i));\r\n                }\r\n                return results;\r\n            }\r\n        };\r\n    }\r\n\r\n    function toInt(argumentForCoercion) {\r\n        var coercedNumber = +argumentForCoercion,\r\n            value = 0;\r\n\r\n        if (coercedNumber !== 0 && isFinite(coercedNumber)) {\r\n            if (coercedNumber >= 0) {\r\n                value = Math.floor(coercedNumber);\r\n            } else {\r\n                value = Math.ceil(coercedNumber);\r\n            }\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    function daysInMonth(year, month) {\r\n        return new Date(Date.UTC(year, month + 1, 0)).getUTCDate();\r\n    }\r\n\r\n    function weeksInYear(year, dow, doy) {\r\n        return weekOfYear(moment([year, 11, 31 + dow - doy]), dow, doy).week;\r\n    }\r\n\r\n    function daysInYear(year) {\r\n        return isLeapYear(year) ? 366 : 365;\r\n    }\r\n\r\n    function isLeapYear(year) {\r\n        return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\r\n    }\r\n\r\n    function checkOverflow(m) {\r\n        var overflow;\r\n        if (m._a && m._pf.overflow === -2) {\r\n            overflow =\r\n                m._a[MONTH] < 0 || m._a[MONTH] > 11 ? MONTH :\r\n                m._a[DATE] < 1 || m._a[DATE] > daysInMonth(m._a[YEAR], m._a[MONTH]) ? DATE :\r\n                m._a[HOUR] < 0 || m._a[HOUR] > 24 ||\r\n                    (m._a[HOUR] === 24 && (m._a[MINUTE] !== 0 ||\r\n                                           m._a[SECOND] !== 0 ||\r\n                                           m._a[MILLISECOND] !== 0)) ? HOUR :\r\n                m._a[MINUTE] < 0 || m._a[MINUTE] > 59 ? MINUTE :\r\n                m._a[SECOND] < 0 || m._a[SECOND] > 59 ? SECOND :\r\n                m._a[MILLISECOND] < 0 || m._a[MILLISECOND] > 999 ? MILLISECOND :\r\n                -1;\r\n\r\n            if (m._pf._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {\r\n                overflow = DATE;\r\n            }\r\n\r\n            m._pf.overflow = overflow;\r\n        }\r\n    }\r\n\r\n    function isValid(m) {\r\n        if (m._isValid == null) {\r\n            m._isValid = !isNaN(m._d.getTime()) &&\r\n                m._pf.overflow < 0 &&\r\n                !m._pf.empty &&\r\n                !m._pf.invalidMonth &&\r\n                !m._pf.nullInput &&\r\n                !m._pf.invalidFormat &&\r\n                !m._pf.userInvalidated;\r\n\r\n            if (m._strict) {\r\n                m._isValid = m._isValid &&\r\n                    m._pf.charsLeftOver === 0 &&\r\n                    m._pf.unusedTokens.length === 0 &&\r\n                    m._pf.bigHour === undefined;\r\n            }\r\n        }\r\n        return m._isValid;\r\n    }\r\n\r\n    function normalizeLocale(key) {\r\n        return key ? key.toLowerCase().replace('_', '-') : key;\r\n    }\r\n\r\n    // pick the locale from the array\r\n    // try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each\r\n    // substring from most specific to least, but move to the next array item if it's a more specific variant than the current root\r\n    function chooseLocale(names) {\r\n        var i = 0, j, next, locale, split;\r\n\r\n        while (i < names.length) {\r\n            split = normalizeLocale(names[i]).split('-');\r\n            j = split.length;\r\n            next = normalizeLocale(names[i + 1]);\r\n            next = next ? next.split('-') : null;\r\n            while (j > 0) {\r\n                locale = loadLocale(split.slice(0, j).join('-'));\r\n                if (locale) {\r\n                    return locale;\r\n                }\r\n                if (next && next.length >= j && compareArrays(split, next, true) >= j - 1) {\r\n                    //the next array item is better than a shallower substring of this one\r\n                    break;\r\n                }\r\n                j--;\r\n            }\r\n            i++;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    function loadLocale(name) {\r\n        var oldLocale = null;\r\n        if (!locales[name] && hasModule) {\r\n            try {\r\n                oldLocale = moment.locale();\r\n                require('./locale/' + name);\r\n                // because defineLocale currently also sets the global locale, we want to undo that for lazy loaded locales\r\n                moment.locale(oldLocale);\r\n            } catch (e) { }\r\n        }\r\n        return locales[name];\r\n    }\r\n\r\n    // Return a moment from input, that is local/utc/zone equivalent to model.\r\n    function makeAs(input, model) {\r\n        var res, diff;\r\n        if (model._isUTC) {\r\n            res = model.clone();\r\n            diff = (moment.isMoment(input) || isDate(input) ?\r\n                    +input : +moment(input)) - (+res);\r\n            // Use low-level api, because this fn is low-level api.\r\n            res._d.setTime(+res._d + diff);\r\n            moment.updateOffset(res, false);\r\n            return res;\r\n        } else {\r\n            return moment(input).local();\r\n        }\r\n    }\r\n\r\n    /************************************\r\n        Locale\r\n    ************************************/\r\n\r\n\r\n    extend(Locale.prototype, {\r\n\r\n        set: function (config) {\r\n            var prop, i;\r\n            for (i in config) {\r\n                prop = config[i];\r\n                if (typeof prop === 'function') {\r\n                    this[i] = prop;\r\n                } else {\r\n                    this['_' + i] = prop;\r\n                }\r\n            }\r\n            // Lenient ordinal parsing accepts just a number in addition to\r\n            // number + (possibly) stuff coming from _ordinalParseLenient.\r\n            this._ordinalParseLenient = new RegExp(this._ordinalParse.source + '|' + /\\d{1,2}/.source);\r\n        },\r\n\r\n        _months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),\r\n        months: function (m) {\r\n            return this._months[m.month()];\r\n        },\r\n\r\n        _monthsShort: 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),\r\n        monthsShort: function (m) {\r\n            return this._monthsShort[m.month()];\r\n        },\r\n\r\n        monthsParse: function (monthName, format, strict) {\r\n            var i, mom, regex;\r\n\r\n            if (!this._monthsParse) {\r\n                this._monthsParse = [];\r\n                this._longMonthsParse = [];\r\n                this._shortMonthsParse = [];\r\n            }\r\n\r\n            for (i = 0; i < 12; i++) {\r\n                // make the regex if we don't have it already\r\n                mom = moment.utc([2000, i]);\r\n                if (strict && !this._longMonthsParse[i]) {\r\n                    this._longMonthsParse[i] = new RegExp('^' + this.months(mom, '').replace('.', '') + '$', 'i');\r\n                    this._shortMonthsParse[i] = new RegExp('^' + this.monthsShort(mom, '').replace('.', '') + '$', 'i');\r\n                }\r\n                if (!strict && !this._monthsParse[i]) {\r\n                    regex = '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');\r\n                    this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');\r\n                }\r\n                // test the regex\r\n                if (strict && format === 'MMMM' && this._longMonthsParse[i].test(monthName)) {\r\n                    return i;\r\n                } else if (strict && format === 'MMM' && this._shortMonthsParse[i].test(monthName)) {\r\n                    return i;\r\n                } else if (!strict && this._monthsParse[i].test(monthName)) {\r\n                    return i;\r\n                }\r\n            }\r\n        },\r\n\r\n        _weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),\r\n        weekdays: function (m) {\r\n            return this._weekdays[m.day()];\r\n        },\r\n\r\n        _weekdaysShort: 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),\r\n        weekdaysShort: function (m) {\r\n            return this._weekdaysShort[m.day()];\r\n        },\r\n\r\n        _weekdaysMin: 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),\r\n        weekdaysMin: function (m) {\r\n            return this._weekdaysMin[m.day()];\r\n        },\r\n\r\n        weekdaysParse: function (weekdayName) {\r\n            var i, mom, regex;\r\n\r\n            if (!this._weekdaysParse) {\r\n                this._weekdaysParse = [];\r\n            }\r\n\r\n            for (i = 0; i < 7; i++) {\r\n                // make the regex if we don't have it already\r\n                if (!this._weekdaysParse[i]) {\r\n                    mom = moment([2000, 1]).day(i);\r\n                    regex = '^' + this.weekdays(mom, '') + '|^' + this.weekdaysShort(mom, '') + '|^' + this.weekdaysMin(mom, '');\r\n                    this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');\r\n                }\r\n                // test the regex\r\n                if (this._weekdaysParse[i].test(weekdayName)) {\r\n                    return i;\r\n                }\r\n            }\r\n        },\r\n\r\n        _longDateFormat: {\r\n            LTS: 'h:mm:ss A',\r\n            LT: 'h:mm A',\r\n            L: 'MM/DD/YYYY',\r\n            LL: 'MMMM D, YYYY',\r\n            LLL: 'MMMM D, YYYY LT',\r\n            LLLL: 'dddd, MMMM D, YYYY LT'\r\n        },\r\n        longDateFormat: function (key) {\r\n            var output = this._longDateFormat[key];\r\n            if (!output && this._longDateFormat[key.toUpperCase()]) {\r\n                output = this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g, function (val) {\r\n                    return val.slice(1);\r\n                });\r\n                this._longDateFormat[key] = output;\r\n            }\r\n            return output;\r\n        },\r\n\r\n        isPM: function (input) {\r\n            // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays\r\n            // Using charAt should be more compatible.\r\n            return ((input + '').toLowerCase().charAt(0) === 'p');\r\n        },\r\n\r\n        _meridiemParse: /[ap]\\.?m?\\.?/i,\r\n        meridiem: function (hours, minutes, isLower) {\r\n            if (hours > 11) {\r\n                return isLower ? 'pm' : 'PM';\r\n            } else {\r\n                return isLower ? 'am' : 'AM';\r\n            }\r\n        },\r\n\r\n        _calendar: {\r\n            sameDay: '[Today at] LT',\r\n            nextDay: '[Tomorrow at] LT',\r\n            nextWeek: 'dddd [at] LT',\r\n            lastDay: '[Yesterday at] LT',\r\n            lastWeek: '[Last] dddd [at] LT',\r\n            sameElse: 'L'\r\n        },\r\n        calendar: function (key, mom, now) {\r\n            var output = this._calendar[key];\r\n            return typeof output === 'function' ? output.apply(mom, [now]) : output;\r\n        },\r\n\r\n        _relativeTime: {\r\n            future: 'in %s',\r\n            past: '%s ago',\r\n            s: 'a few seconds',\r\n            m: 'a minute',\r\n            mm: '%d minutes',\r\n            h: 'an hour',\r\n            hh: '%d hours',\r\n            d: 'a day',\r\n            dd: '%d days',\r\n            M: 'a month',\r\n            MM: '%d months',\r\n            y: 'a year',\r\n            yy: '%d years'\r\n        },\r\n\r\n        relativeTime: function (number, withoutSuffix, string, isFuture) {\r\n            var output = this._relativeTime[string];\r\n            return (typeof output === 'function') ?\r\n                output(number, withoutSuffix, string, isFuture) :\r\n                output.replace(/%d/i, number);\r\n        },\r\n\r\n        pastFuture: function (diff, output) {\r\n            var format = this._relativeTime[diff > 0 ? 'future' : 'past'];\r\n            return typeof format === 'function' ? format(output) : format.replace(/%s/i, output);\r\n        },\r\n\r\n        ordinal: function (number) {\r\n            return this._ordinal.replace('%d', number);\r\n        },\r\n        _ordinal: '%d',\r\n        _ordinalParse: /\\d{1,2}/,\r\n\r\n        preparse: function (string) {\r\n            return string;\r\n        },\r\n\r\n        postformat: function (string) {\r\n            return string;\r\n        },\r\n\r\n        week: function (mom) {\r\n            return weekOfYear(mom, this._week.dow, this._week.doy).week;\r\n        },\r\n\r\n        _week: {\r\n            dow: 0, // Sunday is the first day of the week.\r\n            doy: 6  // The week that contains Jan 1st is the first week of the year.\r\n        },\r\n\r\n        _invalidDate: 'Invalid date',\r\n        invalidDate: function () {\r\n            return this._invalidDate;\r\n        }\r\n    });\r\n\r\n    /************************************\r\n        Formatting\r\n    ************************************/\r\n\r\n\r\n    function removeFormattingTokens(input) {\r\n        if (input.match(/\\[[\\s\\S]/)) {\r\n            return input.replace(/^\\[|\\]$/g, '');\r\n        }\r\n        return input.replace(/\\\\/g, '');\r\n    }\r\n\r\n    function makeFormatFunction(format) {\r\n        var array = format.match(formattingTokens), i, length;\r\n\r\n        for (i = 0, length = array.length; i < length; i++) {\r\n            if (formatTokenFunctions[array[i]]) {\r\n                array[i] = formatTokenFunctions[array[i]];\r\n            } else {\r\n                array[i] = removeFormattingTokens(array[i]);\r\n            }\r\n        }\r\n\r\n        return function (mom) {\r\n            var output = '';\r\n            for (i = 0; i < length; i++) {\r\n                output += array[i] instanceof Function ? array[i].call(mom, format) : array[i];\r\n            }\r\n            return output;\r\n        };\r\n    }\r\n\r\n    // format date using native date object\r\n    function formatMoment(m, format) {\r\n        if (!m.isValid()) {\r\n            return m.localeData().invalidDate();\r\n        }\r\n\r\n        format = expandFormat(format, m.localeData());\r\n\r\n        if (!formatFunctions[format]) {\r\n            formatFunctions[format] = makeFormatFunction(format);\r\n        }\r\n\r\n        return formatFunctions[format](m);\r\n    }\r\n\r\n    function expandFormat(format, locale) {\r\n        var i = 5;\r\n\r\n        function replaceLongDateFormatTokens(input) {\r\n            return locale.longDateFormat(input) || input;\r\n        }\r\n\r\n        localFormattingTokens.lastIndex = 0;\r\n        while (i >= 0 && localFormattingTokens.test(format)) {\r\n            format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);\r\n            localFormattingTokens.lastIndex = 0;\r\n            i -= 1;\r\n        }\r\n\r\n        return format;\r\n    }\r\n\r\n\r\n    /************************************\r\n        Parsing\r\n    ************************************/\r\n\r\n\r\n    // get the regex to find the next token\r\n    function getParseRegexForToken(token, config) {\r\n        var a, strict = config._strict;\r\n        switch (token) {\r\n            case 'Q':\r\n                return parseTokenOneDigit;\r\n            case 'DDDD':\r\n                return parseTokenThreeDigits;\r\n            case 'YYYY':\r\n            case 'GGGG':\r\n            case 'gggg':\r\n                return strict ? parseTokenFourDigits : parseTokenOneToFourDigits;\r\n            case 'Y':\r\n            case 'G':\r\n            case 'g':\r\n                return parseTokenSignedNumber;\r\n            case 'YYYYYY':\r\n            case 'YYYYY':\r\n            case 'GGGGG':\r\n            case 'ggggg':\r\n                return strict ? parseTokenSixDigits : parseTokenOneToSixDigits;\r\n            case 'S':\r\n                if (strict) {\r\n                    return parseTokenOneDigit;\r\n                }\r\n                /* falls through */\r\n            case 'SS':\r\n                if (strict) {\r\n                    return parseTokenTwoDigits;\r\n                }\r\n                /* falls through */\r\n            case 'SSS':\r\n                if (strict) {\r\n                    return parseTokenThreeDigits;\r\n                }\r\n                /* falls through */\r\n            case 'DDD':\r\n                return parseTokenOneToThreeDigits;\r\n            case 'MMM':\r\n            case 'MMMM':\r\n            case 'dd':\r\n            case 'ddd':\r\n            case 'dddd':\r\n                return parseTokenWord;\r\n            case 'a':\r\n            case 'A':\r\n                return config._locale._meridiemParse;\r\n            case 'x':\r\n                return parseTokenOffsetMs;\r\n            case 'X':\r\n                return parseTokenTimestampMs;\r\n            case 'Z':\r\n            case 'ZZ':\r\n                return parseTokenTimezone;\r\n            case 'T':\r\n                return parseTokenT;\r\n            case 'SSSS':\r\n                return parseTokenDigits;\r\n            case 'MM':\r\n            case 'DD':\r\n            case 'YY':\r\n            case 'GG':\r\n            case 'gg':\r\n            case 'HH':\r\n            case 'hh':\r\n            case 'mm':\r\n            case 'ss':\r\n            case 'ww':\r\n            case 'WW':\r\n                return strict ? parseTokenTwoDigits : parseTokenOneOrTwoDigits;\r\n            case 'M':\r\n            case 'D':\r\n            case 'd':\r\n            case 'H':\r\n            case 'h':\r\n            case 'm':\r\n            case 's':\r\n            case 'w':\r\n            case 'W':\r\n            case 'e':\r\n            case 'E':\r\n                return parseTokenOneOrTwoDigits;\r\n            case 'Do':\r\n                return strict ? config._locale._ordinalParse : config._locale._ordinalParseLenient;\r\n            default:\r\n                a = new RegExp(regexpEscape(unescapeFormat(token.replace('\\\\', '')), 'i'));\r\n                return a;\r\n        }\r\n    }\r\n\r\n    function timezoneMinutesFromString(string) {\r\n        string = string || '';\r\n        var possibleTzMatches = (string.match(parseTokenTimezone) || []),\r\n            tzChunk = possibleTzMatches[possibleTzMatches.length - 1] || [],\r\n            parts = (tzChunk + '').match(parseTimezoneChunker) || ['-', 0, 0],\r\n            minutes = +(parts[1] * 60) + toInt(parts[2]);\r\n\r\n        return parts[0] === '+' ? -minutes : minutes;\r\n    }\r\n\r\n    // function to convert string input to date\r\n    function addTimeToArrayFromToken(token, input, config) {\r\n        var a, datePartArray = config._a;\r\n\r\n        switch (token) {\r\n            // QUARTER\r\n            case 'Q':\r\n                if (input != null) {\r\n                    datePartArray[MONTH] = (toInt(input) - 1) * 3;\r\n                }\r\n                break;\r\n                // MONTH\r\n            case 'M': // fall through to MM\r\n            case 'MM':\r\n                if (input != null) {\r\n                    datePartArray[MONTH] = toInt(input) - 1;\r\n                }\r\n                break;\r\n            case 'MMM': // fall through to MMMM\r\n            case 'MMMM':\r\n                a = config._locale.monthsParse(input, token, config._strict);\r\n                // if we didn't find a month name, mark the date as invalid.\r\n                if (a != null) {\r\n                    datePartArray[MONTH] = a;\r\n                } else {\r\n                    config._pf.invalidMonth = input;\r\n                }\r\n                break;\r\n                // DAY OF MONTH\r\n            case 'D': // fall through to DD\r\n            case 'DD':\r\n                if (input != null) {\r\n                    datePartArray[DATE] = toInt(input);\r\n                }\r\n                break;\r\n            case 'Do':\r\n                if (input != null) {\r\n                    datePartArray[DATE] = toInt(parseInt(\r\n                                input.match(/\\d{1,2}/)[0], 10));\r\n                }\r\n                break;\r\n                // DAY OF YEAR\r\n            case 'DDD': // fall through to DDDD\r\n            case 'DDDD':\r\n                if (input != null) {\r\n                    config._dayOfYear = toInt(input);\r\n                }\r\n\r\n                break;\r\n                // YEAR\r\n            case 'YY':\r\n                datePartArray[YEAR] = moment.parseTwoDigitYear(input);\r\n                break;\r\n            case 'YYYY':\r\n            case 'YYYYY':\r\n            case 'YYYYYY':\r\n                datePartArray[YEAR] = toInt(input);\r\n                break;\r\n                // AM / PM\r\n            case 'a': // fall through to A\r\n            case 'A':\r\n                config._isPm = config._locale.isPM(input);\r\n                break;\r\n                // HOUR\r\n            case 'h': // fall through to hh\r\n            case 'hh':\r\n                config._pf.bigHour = true;\r\n                /* falls through */\r\n            case 'H': // fall through to HH\r\n            case 'HH':\r\n                datePartArray[HOUR] = toInt(input);\r\n                break;\r\n                // MINUTE\r\n            case 'm': // fall through to mm\r\n            case 'mm':\r\n                datePartArray[MINUTE] = toInt(input);\r\n                break;\r\n                // SECOND\r\n            case 's': // fall through to ss\r\n            case 'ss':\r\n                datePartArray[SECOND] = toInt(input);\r\n                break;\r\n                // MILLISECOND\r\n            case 'S':\r\n            case 'SS':\r\n            case 'SSS':\r\n            case 'SSSS':\r\n                datePartArray[MILLISECOND] = toInt(('0.' + input) * 1000);\r\n                break;\r\n                // UNIX OFFSET (MILLISECONDS)\r\n            case 'x':\r\n                config._d = new Date(toInt(input));\r\n                break;\r\n                // UNIX TIMESTAMP WITH MS\r\n            case 'X':\r\n                config._d = new Date(parseFloat(input) * 1000);\r\n                break;\r\n                // TIMEZONE\r\n            case 'Z': // fall through to ZZ\r\n            case 'ZZ':\r\n                config._useUTC = true;\r\n                config._tzm = timezoneMinutesFromString(input);\r\n                break;\r\n                // WEEKDAY - human\r\n            case 'dd':\r\n            case 'ddd':\r\n            case 'dddd':\r\n                a = config._locale.weekdaysParse(input);\r\n                // if we didn't get a weekday name, mark the date as invalid\r\n                if (a != null) {\r\n                    config._w = config._w || {};\r\n                    config._w['d'] = a;\r\n                } else {\r\n                    config._pf.invalidWeekday = input;\r\n                }\r\n                break;\r\n                // WEEK, WEEK DAY - numeric\r\n            case 'w':\r\n            case 'ww':\r\n            case 'W':\r\n            case 'WW':\r\n            case 'd':\r\n            case 'e':\r\n            case 'E':\r\n                token = token.substr(0, 1);\r\n                /* falls through */\r\n            case 'gggg':\r\n            case 'GGGG':\r\n            case 'GGGGG':\r\n                token = token.substr(0, 2);\r\n                if (input) {\r\n                    config._w = config._w || {};\r\n                    config._w[token] = toInt(input);\r\n                }\r\n                break;\r\n            case 'gg':\r\n            case 'GG':\r\n                config._w = config._w || {};\r\n                config._w[token] = moment.parseTwoDigitYear(input);\r\n        }\r\n    }\r\n\r\n    function dayOfYearFromWeekInfo(config) {\r\n        var w, weekYear, week, weekday, dow, doy, temp;\r\n\r\n        w = config._w;\r\n        if (w.GG != null || w.W != null || w.E != null) {\r\n            dow = 1;\r\n            doy = 4;\r\n\r\n            // TODO: We need to take the current isoWeekYear, but that depends on\r\n            // how we interpret now (local, utc, fixed offset). So create\r\n            // a now version of current config (take local/utc/offset flags, and\r\n            // create now).\r\n            weekYear = dfl(w.GG, config._a[YEAR], weekOfYear(moment(), 1, 4).year);\r\n            week = dfl(w.W, 1);\r\n            weekday = dfl(w.E, 1);\r\n        } else {\r\n            dow = config._locale._week.dow;\r\n            doy = config._locale._week.doy;\r\n\r\n            weekYear = dfl(w.gg, config._a[YEAR], weekOfYear(moment(), dow, doy).year);\r\n            week = dfl(w.w, 1);\r\n\r\n            if (w.d != null) {\r\n                // weekday -- low day numbers are considered next week\r\n                weekday = w.d;\r\n                if (weekday < dow) {\r\n                    ++week;\r\n                }\r\n            } else if (w.e != null) {\r\n                // local weekday -- counting starts from begining of week\r\n                weekday = w.e + dow;\r\n            } else {\r\n                // default to begining of week\r\n                weekday = dow;\r\n            }\r\n        }\r\n        temp = dayOfYearFromWeeks(weekYear, week, weekday, doy, dow);\r\n\r\n        config._a[YEAR] = temp.year;\r\n        config._dayOfYear = temp.dayOfYear;\r\n    }\r\n\r\n    // convert an array to a date.\r\n    // the array should mirror the parameters below\r\n    // note: all values past the year are optional and will default to the lowest possible value.\r\n    // [year, month, day , hour, minute, second, millisecond]\r\n    function dateFromConfig(config) {\r\n        var i, date, input = [], currentDate, yearToUse;\r\n\r\n        if (config._d) {\r\n            return;\r\n        }\r\n\r\n        currentDate = currentDateArray(config);\r\n\r\n        //compute day of the year from weeks and weekdays\r\n        if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {\r\n            dayOfYearFromWeekInfo(config);\r\n        }\r\n\r\n        //if the day of the year is set, figure out what it is\r\n        if (config._dayOfYear) {\r\n            yearToUse = dfl(config._a[YEAR], currentDate[YEAR]);\r\n\r\n            if (config._dayOfYear > daysInYear(yearToUse)) {\r\n                config._pf._overflowDayOfYear = true;\r\n            }\r\n\r\n            date = makeUTCDate(yearToUse, 0, config._dayOfYear);\r\n            config._a[MONTH] = date.getUTCMonth();\r\n            config._a[DATE] = date.getUTCDate();\r\n        }\r\n\r\n        // Default to current date.\r\n        // * if no year, month, day of month are given, default to today\r\n        // * if day of month is given, default month and year\r\n        // * if month is given, default only year\r\n        // * if year is given, don't default anything\r\n        for (i = 0; i < 3 && config._a[i] == null; ++i) {\r\n            config._a[i] = input[i] = currentDate[i];\r\n        }\r\n\r\n        // Zero out whatever was not defaulted, including time\r\n        for (; i < 7; i++) {\r\n            config._a[i] = input[i] = (config._a[i] == null) ? (i === 2 ? 1 : 0) : config._a[i];\r\n        }\r\n\r\n        // Check for 24:00:00.000\r\n        if (config._a[HOUR] === 24 &&\r\n                config._a[MINUTE] === 0 &&\r\n                config._a[SECOND] === 0 &&\r\n                config._a[MILLISECOND] === 0) {\r\n            config._nextDay = true;\r\n            config._a[HOUR] = 0;\r\n        }\r\n\r\n        config._d = (config._useUTC ? makeUTCDate : makeDate).apply(null, input);\r\n        // Apply timezone offset from input. The actual zone can be changed\r\n        // with parseZone.\r\n        if (config._tzm != null) {\r\n            config._d.setUTCMinutes(config._d.getUTCMinutes() + config._tzm);\r\n        }\r\n\r\n        if (config._nextDay) {\r\n            config._a[HOUR] = 24;\r\n        }\r\n    }\r\n\r\n    function dateFromObject(config) {\r\n        var normalizedInput;\r\n\r\n        if (config._d) {\r\n            return;\r\n        }\r\n\r\n        normalizedInput = normalizeObjectUnits(config._i);\r\n        config._a = [\r\n            normalizedInput.year,\r\n            normalizedInput.month,\r\n            normalizedInput.day || normalizedInput.date,\r\n            normalizedInput.hour,\r\n            normalizedInput.minute,\r\n            normalizedInput.second,\r\n            normalizedInput.millisecond\r\n        ];\r\n\r\n        dateFromConfig(config);\r\n    }\r\n\r\n    function currentDateArray(config) {\r\n        var now = new Date();\r\n        if (config._useUTC) {\r\n            return [\r\n                now.getUTCFullYear(),\r\n                now.getUTCMonth(),\r\n                now.getUTCDate()\r\n            ];\r\n        } else {\r\n            return [now.getFullYear(), now.getMonth(), now.getDate()];\r\n        }\r\n    }\r\n\r\n    // date from string and format string\r\n    function makeDateFromStringAndFormat(config) {\r\n        if (config._f === moment.ISO_8601) {\r\n            parseISO(config);\r\n            return;\r\n        }\r\n\r\n        config._a = [];\r\n        config._pf.empty = true;\r\n\r\n        // This array is used to make a Date, either with `new Date` or `Date.UTC`\r\n        var string = '' + config._i,\r\n            i, parsedInput, tokens, token, skipped,\r\n            stringLength = string.length,\r\n            totalParsedInputLength = 0;\r\n\r\n        tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];\r\n\r\n        for (i = 0; i < tokens.length; i++) {\r\n            token = tokens[i];\r\n            parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[0];\r\n            if (parsedInput) {\r\n                skipped = string.substr(0, string.indexOf(parsedInput));\r\n                if (skipped.length > 0) {\r\n                    config._pf.unusedInput.push(skipped);\r\n                }\r\n                string = string.slice(string.indexOf(parsedInput) + parsedInput.length);\r\n                totalParsedInputLength += parsedInput.length;\r\n            }\r\n            // don't parse if it's not a known token\r\n            if (formatTokenFunctions[token]) {\r\n                if (parsedInput) {\r\n                    config._pf.empty = false;\r\n                }\r\n                else {\r\n                    config._pf.unusedTokens.push(token);\r\n                }\r\n                addTimeToArrayFromToken(token, parsedInput, config);\r\n            }\r\n            else if (config._strict && !parsedInput) {\r\n                config._pf.unusedTokens.push(token);\r\n            }\r\n        }\r\n\r\n        // add remaining unparsed input length to the string\r\n        config._pf.charsLeftOver = stringLength - totalParsedInputLength;\r\n        if (string.length > 0) {\r\n            config._pf.unusedInput.push(string);\r\n        }\r\n\r\n        // clear _12h flag if hour is <= 12\r\n        if (config._pf.bigHour === true && config._a[HOUR] <= 12) {\r\n            config._pf.bigHour = undefined;\r\n        }\r\n        // handle am pm\r\n        if (config._isPm && config._a[HOUR] < 12) {\r\n            config._a[HOUR] += 12;\r\n        }\r\n        // if is 12 am, change hours to 0\r\n        if (config._isPm === false && config._a[HOUR] === 12) {\r\n            config._a[HOUR] = 0;\r\n        }\r\n        dateFromConfig(config);\r\n        checkOverflow(config);\r\n    }\r\n\r\n    function unescapeFormat(s) {\r\n        return s.replace(/\\\\(\\[)|\\\\(\\])|\\[([^\\]\\[]*)\\]|\\\\(.)/g, function (matched, p1, p2, p3, p4) {\r\n            return p1 || p2 || p3 || p4;\r\n        });\r\n    }\r\n\r\n    // Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript\r\n    function regexpEscape(s) {\r\n        return s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\r\n    }\r\n\r\n    // date from string and array of format strings\r\n    function makeDateFromStringAndArray(config) {\r\n        var tempConfig,\r\n            bestMoment,\r\n\r\n            scoreToBeat,\r\n            i,\r\n            currentScore;\r\n\r\n        if (config._f.length === 0) {\r\n            config._pf.invalidFormat = true;\r\n            config._d = new Date(NaN);\r\n            return;\r\n        }\r\n\r\n        for (i = 0; i < config._f.length; i++) {\r\n            currentScore = 0;\r\n            tempConfig = copyConfig({}, config);\r\n            if (config._useUTC != null) {\r\n                tempConfig._useUTC = config._useUTC;\r\n            }\r\n            tempConfig._pf = defaultParsingFlags();\r\n            tempConfig._f = config._f[i];\r\n            makeDateFromStringAndFormat(tempConfig);\r\n\r\n            if (!isValid(tempConfig)) {\r\n                continue;\r\n            }\r\n\r\n            // if there is any input that was not parsed add a penalty for that format\r\n            currentScore += tempConfig._pf.charsLeftOver;\r\n\r\n            //or tokens\r\n            currentScore += tempConfig._pf.unusedTokens.length * 10;\r\n\r\n            tempConfig._pf.score = currentScore;\r\n\r\n            if (scoreToBeat == null || currentScore < scoreToBeat) {\r\n                scoreToBeat = currentScore;\r\n                bestMoment = tempConfig;\r\n            }\r\n        }\r\n\r\n        extend(config, bestMoment || tempConfig);\r\n    }\r\n\r\n    // date from iso format\r\n    function parseISO(config) {\r\n        var i, l,\r\n            string = config._i,\r\n            match = isoRegex.exec(string);\r\n\r\n        if (match) {\r\n            config._pf.iso = true;\r\n            for (i = 0, l = isoDates.length; i < l; i++) {\r\n                if (isoDates[i][1].exec(string)) {\r\n                    // match[5] should be 'T' or undefined\r\n                    config._f = isoDates[i][0] + (match[6] || ' ');\r\n                    break;\r\n                }\r\n            }\r\n            for (i = 0, l = isoTimes.length; i < l; i++) {\r\n                if (isoTimes[i][1].exec(string)) {\r\n                    config._f += isoTimes[i][0];\r\n                    break;\r\n                }\r\n            }\r\n            if (string.match(parseTokenTimezone)) {\r\n                config._f += 'Z';\r\n            }\r\n            makeDateFromStringAndFormat(config);\r\n        } else {\r\n            config._isValid = false;\r\n        }\r\n    }\r\n\r\n    // date from iso format or fallback\r\n    function makeDateFromString(config) {\r\n        parseISO(config);\r\n        if (config._isValid === false) {\r\n            delete config._isValid;\r\n            moment.createFromInputFallback(config);\r\n        }\r\n    }\r\n\r\n    function map(arr, fn) {\r\n        var res = [], i;\r\n        for (i = 0; i < arr.length; ++i) {\r\n            res.push(fn(arr[i], i));\r\n        }\r\n        return res;\r\n    }\r\n\r\n    function makeDateFromInput(config) {\r\n        var input = config._i, matched;\r\n        if (input === undefined) {\r\n            config._d = new Date();\r\n        } else if (isDate(input)) {\r\n            config._d = new Date(+input);\r\n        } else if ((matched = aspNetJsonRegex.exec(input)) !== null) {\r\n            config._d = new Date(+matched[1]);\r\n        } else if (typeof input === 'string') {\r\n            makeDateFromString(config);\r\n        } else if (isArray(input)) {\r\n            config._a = map(input.slice(0), function (obj) {\r\n                return parseInt(obj, 10);\r\n            });\r\n            dateFromConfig(config);\r\n        } else if (typeof (input) === 'object') {\r\n            dateFromObject(config);\r\n        } else if (typeof (input) === 'number') {\r\n            // from milliseconds\r\n            config._d = new Date(input);\r\n        } else {\r\n            moment.createFromInputFallback(config);\r\n        }\r\n    }\r\n\r\n    function makeDate(y, m, d, h, M, s, ms) {\r\n        //can't just apply() to create a date:\r\n        //http://stackoverflow.com/questions/181348/instantiating-a-javascript-object-by-calling-prototype-constructor-apply\r\n        var date = new Date(y, m, d, h, M, s, ms);\r\n\r\n        //the date constructor doesn't accept years < 1970\r\n        if (y < 1970) {\r\n            date.setFullYear(y);\r\n        }\r\n        return date;\r\n    }\r\n\r\n    function makeUTCDate(y) {\r\n        var date = new Date(Date.UTC.apply(null, arguments));\r\n        if (y < 1970) {\r\n            date.setUTCFullYear(y);\r\n        }\r\n        return date;\r\n    }\r\n\r\n    function parseWeekday(input, locale) {\r\n        if (typeof input === 'string') {\r\n            if (!isNaN(input)) {\r\n                input = parseInt(input, 10);\r\n            }\r\n            else {\r\n                input = locale.weekdaysParse(input);\r\n                if (typeof input !== 'number') {\r\n                    return null;\r\n                }\r\n            }\r\n        }\r\n        return input;\r\n    }\r\n\r\n    /************************************\r\n        Relative Time\r\n    ************************************/\r\n\r\n\r\n    // helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize\r\n    function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {\r\n        return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);\r\n    }\r\n\r\n    function relativeTime(posNegDuration, withoutSuffix, locale) {\r\n        var duration = moment.duration(posNegDuration).abs(),\r\n            seconds = round(duration.as('s')),\r\n            minutes = round(duration.as('m')),\r\n            hours = round(duration.as('h')),\r\n            days = round(duration.as('d')),\r\n            months = round(duration.as('M')),\r\n            years = round(duration.as('y')),\r\n\r\n            args = seconds < relativeTimeThresholds.s && ['s', seconds] ||\r\n                minutes === 1 && ['m'] ||\r\n                minutes < relativeTimeThresholds.m && ['mm', minutes] ||\r\n                hours === 1 && ['h'] ||\r\n                hours < relativeTimeThresholds.h && ['hh', hours] ||\r\n                days === 1 && ['d'] ||\r\n                days < relativeTimeThresholds.d && ['dd', days] ||\r\n                months === 1 && ['M'] ||\r\n                months < relativeTimeThresholds.M && ['MM', months] ||\r\n                years === 1 && ['y'] || ['yy', years];\r\n\r\n        args[2] = withoutSuffix;\r\n        args[3] = +posNegDuration > 0;\r\n        args[4] = locale;\r\n        return substituteTimeAgo.apply({}, args);\r\n    }\r\n\r\n\r\n    /************************************\r\n        Week of Year\r\n    ************************************/\r\n\r\n\r\n    // firstDayOfWeek       0 = sun, 6 = sat\r\n    //                      the day of the week that starts the week\r\n    //                      (usually sunday or monday)\r\n    // firstDayOfWeekOfYear 0 = sun, 6 = sat\r\n    //                      the first week is the week that contains the first\r\n    //                      of this day of the week\r\n    //                      (eg. ISO weeks use thursday (4))\r\n    function weekOfYear(mom, firstDayOfWeek, firstDayOfWeekOfYear) {\r\n        var end = firstDayOfWeekOfYear - firstDayOfWeek,\r\n            daysToDayOfWeek = firstDayOfWeekOfYear - mom.day(),\r\n            adjustedMoment;\r\n\r\n\r\n        if (daysToDayOfWeek > end) {\r\n            daysToDayOfWeek -= 7;\r\n        }\r\n\r\n        if (daysToDayOfWeek < end - 7) {\r\n            daysToDayOfWeek += 7;\r\n        }\r\n\r\n        adjustedMoment = moment(mom).add(daysToDayOfWeek, 'd');\r\n        return {\r\n            week: Math.ceil(adjustedMoment.dayOfYear() / 7),\r\n            year: adjustedMoment.year()\r\n        };\r\n    }\r\n\r\n    //http://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday\r\n    function dayOfYearFromWeeks(year, week, weekday, firstDayOfWeekOfYear, firstDayOfWeek) {\r\n        var d = makeUTCDate(year, 0, 1).getUTCDay(), daysToAdd, dayOfYear;\r\n\r\n        d = d === 0 ? 7 : d;\r\n        weekday = weekday != null ? weekday : firstDayOfWeek;\r\n        daysToAdd = firstDayOfWeek - d + (d > firstDayOfWeekOfYear ? 7 : 0) - (d < firstDayOfWeek ? 7 : 0);\r\n        dayOfYear = 7 * (week - 1) + (weekday - firstDayOfWeek) + daysToAdd + 1;\r\n\r\n        return {\r\n            year: dayOfYear > 0 ? year : year - 1,\r\n            dayOfYear: dayOfYear > 0 ? dayOfYear : daysInYear(year - 1) + dayOfYear\r\n        };\r\n    }\r\n\r\n    /************************************\r\n        Top Level Functions\r\n    ************************************/\r\n\r\n    function makeMoment(config) {\r\n        var input = config._i,\r\n            format = config._f,\r\n            res;\r\n\r\n        config._locale = config._locale || moment.localeData(config._l);\r\n\r\n        if (input === null || (format === undefined && input === '')) {\r\n            return moment.invalid({ nullInput: true });\r\n        }\r\n\r\n        if (typeof input === 'string') {\r\n            config._i = input = config._locale.preparse(input);\r\n        }\r\n\r\n        if (moment.isMoment(input)) {\r\n            return new Moment(input, true);\r\n        } else if (format) {\r\n            if (isArray(format)) {\r\n                makeDateFromStringAndArray(config);\r\n            } else {\r\n                makeDateFromStringAndFormat(config);\r\n            }\r\n        } else {\r\n            makeDateFromInput(config);\r\n        }\r\n\r\n        res = new Moment(config);\r\n        if (res._nextDay) {\r\n            // Adding is smart enough around DST\r\n            res.add(1, 'd');\r\n            res._nextDay = undefined;\r\n        }\r\n\r\n        return res;\r\n    }\r\n\r\n    moment = function (input, format, locale, strict) {\r\n        var c;\r\n\r\n        if (typeof (locale) === 'boolean') {\r\n            strict = locale;\r\n            locale = undefined;\r\n        }\r\n        // object construction must be done this way.\r\n        // https://github.com/moment/moment/issues/1423\r\n        c = {};\r\n        c._isAMomentObject = true;\r\n        c._i = input;\r\n        c._f = format;\r\n        c._l = locale;\r\n        c._strict = strict;\r\n        c._isUTC = false;\r\n        c._pf = defaultParsingFlags();\r\n\r\n        return makeMoment(c);\r\n    };\r\n\r\n    moment.suppressDeprecationWarnings = false;\r\n\r\n    moment.createFromInputFallback = deprecate(\r\n        'moment construction falls back to js Date. This is ' +\r\n        'discouraged and will be removed in upcoming major ' +\r\n        'release. Please refer to ' +\r\n        'https://github.com/moment/moment/issues/1407 for more info.',\r\n        function (config) {\r\n            config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));\r\n        }\r\n    );\r\n\r\n    // Pick a moment m from moments so that m[fn](other) is true for all\r\n    // other. This relies on the function fn to be transitive.\r\n    //\r\n    // moments should either be an array of moment objects or an array, whose\r\n    // first element is an array of moment objects.\r\n    function pickBy(fn, moments) {\r\n        var res, i;\r\n        if (moments.length === 1 && isArray(moments[0])) {\r\n            moments = moments[0];\r\n        }\r\n        if (!moments.length) {\r\n            return moment();\r\n        }\r\n        res = moments[0];\r\n        for (i = 1; i < moments.length; ++i) {\r\n            if (moments[i][fn](res)) {\r\n                res = moments[i];\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n\r\n    moment.min = function () {\r\n        var args = [].slice.call(arguments, 0);\r\n\r\n        return pickBy('isBefore', args);\r\n    };\r\n\r\n    moment.max = function () {\r\n        var args = [].slice.call(arguments, 0);\r\n\r\n        return pickBy('isAfter', args);\r\n    };\r\n\r\n    // creating with utc\r\n    moment.utc = function (input, format, locale, strict) {\r\n        var c;\r\n\r\n        if (typeof (locale) === 'boolean') {\r\n            strict = locale;\r\n            locale = undefined;\r\n        }\r\n        // object construction must be done this way.\r\n        // https://github.com/moment/moment/issues/1423\r\n        c = {};\r\n        c._isAMomentObject = true;\r\n        c._useUTC = true;\r\n        c._isUTC = true;\r\n        c._l = locale;\r\n        c._i = input;\r\n        c._f = format;\r\n        c._strict = strict;\r\n        c._pf = defaultParsingFlags();\r\n\r\n        return makeMoment(c).utc();\r\n    };\r\n\r\n    // creating with unix timestamp (in seconds)\r\n    moment.unix = function (input) {\r\n        return moment(input * 1000);\r\n    };\r\n\r\n    // duration\r\n    moment.duration = function (input, key) {\r\n        var duration = input,\r\n            // matching against regexp is expensive, do it on demand\r\n            match = null,\r\n            sign,\r\n            ret,\r\n            parseIso,\r\n            diffRes;\r\n\r\n        if (moment.isDuration(input)) {\r\n            duration = {\r\n                ms: input._milliseconds,\r\n                d: input._days,\r\n                M: input._months\r\n            };\r\n        } else if (typeof input === 'number') {\r\n            duration = {};\r\n            if (key) {\r\n                duration[key] = input;\r\n            } else {\r\n                duration.milliseconds = input;\r\n            }\r\n        } else if (!!(match = aspNetTimeSpanJsonRegex.exec(input))) {\r\n            sign = (match[1] === '-') ? -1 : 1;\r\n            duration = {\r\n                y: 0,\r\n                d: toInt(match[DATE]) * sign,\r\n                h: toInt(match[HOUR]) * sign,\r\n                m: toInt(match[MINUTE]) * sign,\r\n                s: toInt(match[SECOND]) * sign,\r\n                ms: toInt(match[MILLISECOND]) * sign\r\n            };\r\n        } else if (!!(match = isoDurationRegex.exec(input))) {\r\n            sign = (match[1] === '-') ? -1 : 1;\r\n            parseIso = function (inp) {\r\n                // We'd normally use ~~inp for this, but unfortunately it also\r\n                // converts floats to ints.\r\n                // inp may be undefined, so careful calling replace on it.\r\n                var res = inp && parseFloat(inp.replace(',', '.'));\r\n                // apply sign while we're at it\r\n                return (isNaN(res) ? 0 : res) * sign;\r\n            };\r\n            duration = {\r\n                y: parseIso(match[2]),\r\n                M: parseIso(match[3]),\r\n                d: parseIso(match[4]),\r\n                h: parseIso(match[5]),\r\n                m: parseIso(match[6]),\r\n                s: parseIso(match[7]),\r\n                w: parseIso(match[8])\r\n            };\r\n        } else if (typeof duration === 'object' &&\r\n                ('from' in duration || 'to' in duration)) {\r\n            diffRes = momentsDifference(moment(duration.from), moment(duration.to));\r\n\r\n            duration = {};\r\n            duration.ms = diffRes.milliseconds;\r\n            duration.M = diffRes.months;\r\n        }\r\n\r\n        ret = new Duration(duration);\r\n\r\n        if (moment.isDuration(input) && hasOwnProp(input, '_locale')) {\r\n            ret._locale = input._locale;\r\n        }\r\n\r\n        return ret;\r\n    };\r\n\r\n    // version number\r\n    moment.version = VERSION;\r\n\r\n    // default format\r\n    moment.defaultFormat = isoFormat;\r\n\r\n    // constant that refers to the ISO standard\r\n    moment.ISO_8601 = function () { };\r\n\r\n    // Plugins that add properties should also add the key here (null value),\r\n    // so we can properly clone ourselves.\r\n    moment.momentProperties = momentProperties;\r\n\r\n    // This function will be called whenever a moment is mutated.\r\n    // It is intended to keep the offset in sync with the timezone.\r\n    moment.updateOffset = function () { };\r\n\r\n    // This function allows you to set a threshold for relative time strings\r\n    moment.relativeTimeThreshold = function (threshold, limit) {\r\n        if (relativeTimeThresholds[threshold] === undefined) {\r\n            return false;\r\n        }\r\n        if (limit === undefined) {\r\n            return relativeTimeThresholds[threshold];\r\n        }\r\n        relativeTimeThresholds[threshold] = limit;\r\n        return true;\r\n    };\r\n\r\n    moment.lang = deprecate(\r\n        'moment.lang is deprecated. Use moment.locale instead.',\r\n        function (key, value) {\r\n            return moment.locale(key, value);\r\n        }\r\n    );\r\n\r\n    // This function will load locale and then set the global locale.  If\r\n    // no arguments are passed in, it will simply return the current global\r\n    // locale key.\r\n    moment.locale = function (key, values) {\r\n        var data;\r\n        if (key) {\r\n            if (typeof (values) !== 'undefined') {\r\n                data = moment.defineLocale(key, values);\r\n            }\r\n            else {\r\n                data = moment.localeData(key);\r\n            }\r\n\r\n            if (data) {\r\n                moment.duration._locale = moment._locale = data;\r\n            }\r\n        }\r\n\r\n        return moment._locale._abbr;\r\n    };\r\n\r\n    moment.defineLocale = function (name, values) {\r\n        if (values !== null) {\r\n            values.abbr = name;\r\n            if (!locales[name]) {\r\n                locales[name] = new Locale();\r\n            }\r\n            locales[name].set(values);\r\n\r\n            // backwards compat for now: also set the locale\r\n            moment.locale(name);\r\n\r\n            return locales[name];\r\n        } else {\r\n            // useful for testing\r\n            delete locales[name];\r\n            return null;\r\n        }\r\n    };\r\n\r\n    moment.langData = deprecate(\r\n        'moment.langData is deprecated. Use moment.localeData instead.',\r\n        function (key) {\r\n            return moment.localeData(key);\r\n        }\r\n    );\r\n\r\n    // returns locale data\r\n    moment.localeData = function (key) {\r\n        var locale;\r\n\r\n        if (key && key._locale && key._locale._abbr) {\r\n            key = key._locale._abbr;\r\n        }\r\n\r\n        if (!key) {\r\n            return moment._locale;\r\n        }\r\n\r\n        if (!isArray(key)) {\r\n            //short-circuit everything else\r\n            locale = loadLocale(key);\r\n            if (locale) {\r\n                return locale;\r\n            }\r\n            key = [key];\r\n        }\r\n\r\n        return chooseLocale(key);\r\n    };\r\n\r\n    // compare moment object\r\n    moment.isMoment = function (obj) {\r\n        return obj instanceof Moment ||\r\n            (obj != null && hasOwnProp(obj, '_isAMomentObject'));\r\n    };\r\n\r\n    // for typechecking Duration objects\r\n    moment.isDuration = function (obj) {\r\n        return obj instanceof Duration;\r\n    };\r\n\r\n    for (i = lists.length - 1; i >= 0; --i) {\r\n        makeList(lists[i]);\r\n    }\r\n\r\n    moment.normalizeUnits = function (units) {\r\n        return normalizeUnits(units);\r\n    };\r\n\r\n    moment.invalid = function (flags) {\r\n        var m = moment.utc(NaN);\r\n        if (flags != null) {\r\n            extend(m._pf, flags);\r\n        }\r\n        else {\r\n            m._pf.userInvalidated = true;\r\n        }\r\n\r\n        return m;\r\n    };\r\n\r\n    moment.parseZone = function () {\r\n        return moment.apply(null, arguments).parseZone();\r\n    };\r\n\r\n    moment.parseTwoDigitYear = function (input) {\r\n        return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);\r\n    };\r\n\r\n    /************************************\r\n        Moment Prototype\r\n    ************************************/\r\n\r\n\r\n    extend(moment.fn = Moment.prototype, {\r\n\r\n        clone: function () {\r\n            return moment(this);\r\n        },\r\n\r\n        valueOf: function () {\r\n            return +this._d + ((this._offset || 0) * 60000);\r\n        },\r\n\r\n        unix: function () {\r\n            return Math.floor(+this / 1000);\r\n        },\r\n\r\n        toString: function () {\r\n            return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');\r\n        },\r\n\r\n        toDate: function () {\r\n            return this._offset ? new Date(+this) : this._d;\r\n        },\r\n\r\n        toISOString: function () {\r\n            var m = moment(this).utc();\r\n            if (0 < m.year() && m.year() <= 9999) {\r\n                if ('function' === typeof Date.prototype.toISOString) {\r\n                    // native implementation is ~50x faster, use it when we can\r\n                    return this.toDate().toISOString();\r\n                } else {\r\n                    return formatMoment(m, 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]');\r\n                }\r\n            } else {\r\n                return formatMoment(m, 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]');\r\n            }\r\n        },\r\n\r\n        toArray: function () {\r\n            var m = this;\r\n            return [\r\n                m.year(),\r\n                m.month(),\r\n                m.date(),\r\n                m.hours(),\r\n                m.minutes(),\r\n                m.seconds(),\r\n                m.milliseconds()\r\n            ];\r\n        },\r\n\r\n        isValid: function () {\r\n            return isValid(this);\r\n        },\r\n\r\n        isDSTShifted: function () {\r\n            if (this._a) {\r\n                return this.isValid() && compareArrays(this._a, (this._isUTC ? moment.utc(this._a) : moment(this._a)).toArray()) > 0;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        parsingFlags: function () {\r\n            return extend({}, this._pf);\r\n        },\r\n\r\n        invalidAt: function () {\r\n            return this._pf.overflow;\r\n        },\r\n\r\n        utc: function (keepLocalTime) {\r\n            return this.zone(0, keepLocalTime);\r\n        },\r\n\r\n        local: function (keepLocalTime) {\r\n            if (this._isUTC) {\r\n                this.zone(0, keepLocalTime);\r\n                this._isUTC = false;\r\n\r\n                if (keepLocalTime) {\r\n                    this.add(this._dateTzOffset(), 'm');\r\n                }\r\n            }\r\n            return this;\r\n        },\r\n\r\n        format: function (inputString) {\r\n            var output = formatMoment(this, inputString || moment.defaultFormat);\r\n            return this.localeData().postformat(output);\r\n        },\r\n\r\n        add: createAdder(1, 'add'),\r\n\r\n        subtract: createAdder(-1, 'subtract'),\r\n\r\n        diff: function (input, units, asFloat) {\r\n            var that = makeAs(input, this),\r\n                zoneDiff = (this.zone() - that.zone()) * 6e4,\r\n                diff, output, daysAdjust;\r\n\r\n            units = normalizeUnits(units);\r\n\r\n            if (units === 'year' || units === 'month') {\r\n                // average number of days in the months in the given dates\r\n                diff = (this.daysInMonth() + that.daysInMonth()) * 432e5; // 24 * 60 * 60 * 1000 / 2\r\n                // difference in months\r\n                output = ((this.year() - that.year()) * 12) + (this.month() - that.month());\r\n                // adjust by taking difference in days, average number of days\r\n                // and dst in the given months.\r\n                daysAdjust = (this - moment(this).startOf('month')) -\r\n                    (that - moment(that).startOf('month'));\r\n                // same as above but with zones, to negate all dst\r\n                daysAdjust -= ((this.zone() - moment(this).startOf('month').zone()) -\r\n                        (that.zone() - moment(that).startOf('month').zone())) * 6e4;\r\n                output += daysAdjust / diff;\r\n                if (units === 'year') {\r\n                    output = output / 12;\r\n                }\r\n            } else {\r\n                diff = (this - that);\r\n                output = units === 'second' ? diff / 1e3 : // 1000\r\n                    units === 'minute' ? diff / 6e4 : // 1000 * 60\r\n                    units === 'hour' ? diff / 36e5 : // 1000 * 60 * 60\r\n                    units === 'day' ? (diff - zoneDiff) / 864e5 : // 1000 * 60 * 60 * 24, negate dst\r\n                    units === 'week' ? (diff - zoneDiff) / 6048e5 : // 1000 * 60 * 60 * 24 * 7, negate dst\r\n                    diff;\r\n            }\r\n            return asFloat ? output : absRound(output);\r\n        },\r\n\r\n        from: function (time, withoutSuffix) {\r\n            return moment.duration({ to: this, from: time }).locale(this.locale()).humanize(!withoutSuffix);\r\n        },\r\n\r\n        fromNow: function (withoutSuffix) {\r\n            return this.from(moment(), withoutSuffix);\r\n        },\r\n\r\n        calendar: function (time) {\r\n            // We want to compare the start of today, vs this.\r\n            // Getting start-of-today depends on whether we're zone'd or not.\r\n            var now = time || moment(),\r\n                sod = makeAs(now, this).startOf('day'),\r\n                diff = this.diff(sod, 'days', true),\r\n                format = diff < -6 ? 'sameElse' :\r\n                    diff < -1 ? 'lastWeek' :\r\n                    diff < 0 ? 'lastDay' :\r\n                    diff < 1 ? 'sameDay' :\r\n                    diff < 2 ? 'nextDay' :\r\n                    diff < 7 ? 'nextWeek' : 'sameElse';\r\n            return this.format(this.localeData().calendar(format, this, moment(now)));\r\n        },\r\n\r\n        isLeapYear: function () {\r\n            return isLeapYear(this.year());\r\n        },\r\n\r\n        isDST: function () {\r\n            return (this.zone() < this.clone().month(0).zone() ||\r\n                this.zone() < this.clone().month(5).zone());\r\n        },\r\n\r\n        day: function (input) {\r\n            var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();\r\n            if (input != null) {\r\n                input = parseWeekday(input, this.localeData());\r\n                return this.add(input - day, 'd');\r\n            } else {\r\n                return day;\r\n            }\r\n        },\r\n\r\n        month: makeAccessor('Month', true),\r\n\r\n        startOf: function (units) {\r\n            units = normalizeUnits(units);\r\n            // the following switch intentionally omits break keywords\r\n            // to utilize falling through the cases.\r\n            switch (units) {\r\n                case 'year':\r\n                    this.month(0);\r\n                    /* falls through */\r\n                case 'quarter':\r\n                case 'month':\r\n                    this.date(1);\r\n                    /* falls through */\r\n                case 'week':\r\n                case 'isoWeek':\r\n                case 'day':\r\n                    this.hours(0);\r\n                    /* falls through */\r\n                case 'hour':\r\n                    this.minutes(0);\r\n                    /* falls through */\r\n                case 'minute':\r\n                    this.seconds(0);\r\n                    /* falls through */\r\n                case 'second':\r\n                    this.milliseconds(0);\r\n                    /* falls through */\r\n            }\r\n\r\n            // weeks are a special case\r\n            if (units === 'week') {\r\n                this.weekday(0);\r\n            } else if (units === 'isoWeek') {\r\n                this.isoWeekday(1);\r\n            }\r\n\r\n            // quarters are also special\r\n            if (units === 'quarter') {\r\n                this.month(Math.floor(this.month() / 3) * 3);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        endOf: function (units) {\r\n            units = normalizeUnits(units);\r\n            if (units === undefined || units === 'millisecond') {\r\n                return this;\r\n            }\r\n            return this.startOf(units).add(1, (units === 'isoWeek' ? 'week' : units)).subtract(1, 'ms');\r\n        },\r\n\r\n        isAfter: function (input, units) {\r\n            var inputMs;\r\n            units = normalizeUnits(typeof units !== 'undefined' ? units : 'millisecond');\r\n            if (units === 'millisecond') {\r\n                input = moment.isMoment(input) ? input : moment(input);\r\n                return +this > +input;\r\n            } else {\r\n                inputMs = moment.isMoment(input) ? +input : +moment(input);\r\n                return inputMs < +this.clone().startOf(units);\r\n            }\r\n        },\r\n\r\n        isBefore: function (input, units) {\r\n            var inputMs;\r\n            units = normalizeUnits(typeof units !== 'undefined' ? units : 'millisecond');\r\n            if (units === 'millisecond') {\r\n                input = moment.isMoment(input) ? input : moment(input);\r\n                return +this < +input;\r\n            } else {\r\n                inputMs = moment.isMoment(input) ? +input : +moment(input);\r\n                return +this.clone().endOf(units) < inputMs;\r\n            }\r\n        },\r\n\r\n        isSame: function (input, units) {\r\n            var inputMs;\r\n            units = normalizeUnits(units || 'millisecond');\r\n            if (units === 'millisecond') {\r\n                input = moment.isMoment(input) ? input : moment(input);\r\n                return +this === +input;\r\n            } else {\r\n                inputMs = +moment(input);\r\n                return +(this.clone().startOf(units)) <= inputMs && inputMs <= +(this.clone().endOf(units));\r\n            }\r\n        },\r\n\r\n        min: deprecate(\r\n                 'moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548',\r\n                 function (other) {\r\n                     other = moment.apply(null, arguments);\r\n                     return other < this ? this : other;\r\n                 }\r\n         ),\r\n\r\n        max: deprecate(\r\n                'moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548',\r\n                function (other) {\r\n                    other = moment.apply(null, arguments);\r\n                    return other > this ? this : other;\r\n                }\r\n        ),\r\n\r\n        // keepLocalTime = true means only change the timezone, without\r\n        // affecting the local hour. So 5:31:26 +0300 --[zone(2, true)]-->\r\n        // 5:31:26 +0200 It is possible that 5:31:26 doesn't exist int zone\r\n        // +0200, so we adjust the time as needed, to be valid.\r\n        //\r\n        // Keeping the time actually adds/subtracts (one hour)\r\n        // from the actual represented time. That is why we call updateOffset\r\n        // a second time. In case it wants us to change the offset again\r\n        // _changeInProgress == true case, then we have to adjust, because\r\n        // there is no such time in the given timezone.\r\n        zone: function (input, keepLocalTime) {\r\n            var offset = this._offset || 0,\r\n                localAdjust;\r\n            if (input != null) {\r\n                if (typeof input === 'string') {\r\n                    input = timezoneMinutesFromString(input);\r\n                }\r\n                if (Math.abs(input) < 16) {\r\n                    input = input * 60;\r\n                }\r\n                if (!this._isUTC && keepLocalTime) {\r\n                    localAdjust = this._dateTzOffset();\r\n                }\r\n                this._offset = input;\r\n                this._isUTC = true;\r\n                if (localAdjust != null) {\r\n                    this.subtract(localAdjust, 'm');\r\n                }\r\n                if (offset !== input) {\r\n                    if (!keepLocalTime || this._changeInProgress) {\r\n                        addOrSubtractDurationFromMoment(this,\r\n                                moment.duration(offset - input, 'm'), 1, false);\r\n                    } else if (!this._changeInProgress) {\r\n                        this._changeInProgress = true;\r\n                        moment.updateOffset(this, true);\r\n                        this._changeInProgress = null;\r\n                    }\r\n                }\r\n            } else {\r\n                return this._isUTC ? offset : this._dateTzOffset();\r\n            }\r\n            return this;\r\n        },\r\n\r\n        zoneAbbr: function () {\r\n            return this._isUTC ? 'UTC' : '';\r\n        },\r\n\r\n        zoneName: function () {\r\n            return this._isUTC ? 'Coordinated Universal Time' : '';\r\n        },\r\n\r\n        parseZone: function () {\r\n            if (this._tzm) {\r\n                this.zone(this._tzm);\r\n            } else if (typeof this._i === 'string') {\r\n                this.zone(this._i);\r\n            }\r\n            return this;\r\n        },\r\n\r\n        hasAlignedHourOffset: function (input) {\r\n            if (!input) {\r\n                input = 0;\r\n            }\r\n            else {\r\n                input = moment(input).zone();\r\n            }\r\n\r\n            return (this.zone() - input) % 60 === 0;\r\n        },\r\n\r\n        daysInMonth: function () {\r\n            return daysInMonth(this.year(), this.month());\r\n        },\r\n\r\n        dayOfYear: function (input) {\r\n            var dayOfYear = round((moment(this).startOf('day') - moment(this).startOf('year')) / 864e5) + 1;\r\n            return input == null ? dayOfYear : this.add((input - dayOfYear), 'd');\r\n        },\r\n\r\n        quarter: function (input) {\r\n            return input == null ? Math.ceil((this.month() + 1) / 3) : this.month((input - 1) * 3 + this.month() % 3);\r\n        },\r\n\r\n        weekYear: function (input) {\r\n            var year = weekOfYear(this, this.localeData()._week.dow, this.localeData()._week.doy).year;\r\n            return input == null ? year : this.add((input - year), 'y');\r\n        },\r\n\r\n        isoWeekYear: function (input) {\r\n            var year = weekOfYear(this, 1, 4).year;\r\n            return input == null ? year : this.add((input - year), 'y');\r\n        },\r\n\r\n        week: function (input) {\r\n            var week = this.localeData().week(this);\r\n            return input == null ? week : this.add((input - week) * 7, 'd');\r\n        },\r\n\r\n        isoWeek: function (input) {\r\n            var week = weekOfYear(this, 1, 4).week;\r\n            return input == null ? week : this.add((input - week) * 7, 'd');\r\n        },\r\n\r\n        weekday: function (input) {\r\n            var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;\r\n            return input == null ? weekday : this.add(input - weekday, 'd');\r\n        },\r\n\r\n        isoWeekday: function (input) {\r\n            // behaves the same as moment#day except\r\n            // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)\r\n            // as a setter, sunday should belong to the previous week.\r\n            return input == null ? this.day() || 7 : this.day(this.day() % 7 ? input : input - 7);\r\n        },\r\n\r\n        isoWeeksInYear: function () {\r\n            return weeksInYear(this.year(), 1, 4);\r\n        },\r\n\r\n        weeksInYear: function () {\r\n            var weekInfo = this.localeData()._week;\r\n            return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);\r\n        },\r\n\r\n        get: function (units) {\r\n            units = normalizeUnits(units);\r\n            return this[units]();\r\n        },\r\n\r\n        set: function (units, value) {\r\n            units = normalizeUnits(units);\r\n            if (typeof this[units] === 'function') {\r\n                this[units](value);\r\n            }\r\n            return this;\r\n        },\r\n\r\n        // If passed a locale key, it will set the locale for this\r\n        // instance.  Otherwise, it will return the locale configuration\r\n        // variables for this instance.\r\n        locale: function (key) {\r\n            var newLocaleData;\r\n\r\n            if (key === undefined) {\r\n                return this._locale._abbr;\r\n            } else {\r\n                newLocaleData = moment.localeData(key);\r\n                if (newLocaleData != null) {\r\n                    this._locale = newLocaleData;\r\n                }\r\n                return this;\r\n            }\r\n        },\r\n\r\n        lang: deprecate(\r\n            'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',\r\n            function (key) {\r\n                if (key === undefined) {\r\n                    return this.localeData();\r\n                } else {\r\n                    return this.locale(key);\r\n                }\r\n            }\r\n        ),\r\n\r\n        localeData: function () {\r\n            return this._locale;\r\n        },\r\n\r\n        _dateTzOffset: function () {\r\n            // On Firefox.24 Date#getTimezoneOffset returns a floating point.\r\n            // https://github.com/moment/moment/pull/1871\r\n            return Math.round(this._d.getTimezoneOffset() / 15) * 15;\r\n        }\r\n    });\r\n\r\n    function rawMonthSetter(mom, value) {\r\n        var dayOfMonth;\r\n\r\n        // TODO: Move this out of here!\r\n        if (typeof value === 'string') {\r\n            value = mom.localeData().monthsParse(value);\r\n            // TODO: Another silent failure?\r\n            if (typeof value !== 'number') {\r\n                return mom;\r\n            }\r\n        }\r\n\r\n        dayOfMonth = Math.min(mom.date(),\r\n                daysInMonth(mom.year(), value));\r\n        mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);\r\n        return mom;\r\n    }\r\n\r\n    function rawGetter(mom, unit) {\r\n        return mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]();\r\n    }\r\n\r\n    function rawSetter(mom, unit, value) {\r\n        if (unit === 'Month') {\r\n            return rawMonthSetter(mom, value);\r\n        } else {\r\n            return mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);\r\n        }\r\n    }\r\n\r\n    function makeAccessor(unit, keepTime) {\r\n        return function (value) {\r\n            if (value != null) {\r\n                rawSetter(this, unit, value);\r\n                moment.updateOffset(this, keepTime);\r\n                return this;\r\n            } else {\r\n                return rawGetter(this, unit);\r\n            }\r\n        };\r\n    }\r\n\r\n    moment.fn.millisecond = moment.fn.milliseconds = makeAccessor('Milliseconds', false);\r\n    moment.fn.second = moment.fn.seconds = makeAccessor('Seconds', false);\r\n    moment.fn.minute = moment.fn.minutes = makeAccessor('Minutes', false);\r\n    // Setting the hour should keep the time, because the user explicitly\r\n    // specified which hour he wants. So trying to maintain the same hour (in\r\n    // a new timezone) makes sense. Adding/subtracting hours does not follow\r\n    // this rule.\r\n    moment.fn.hour = moment.fn.hours = makeAccessor('Hours', true);\r\n    // moment.fn.month is defined separately\r\n    moment.fn.date = makeAccessor('Date', true);\r\n    moment.fn.dates = deprecate('dates accessor is deprecated. Use date instead.', makeAccessor('Date', true));\r\n    moment.fn.year = makeAccessor('FullYear', true);\r\n    moment.fn.years = deprecate('years accessor is deprecated. Use year instead.', makeAccessor('FullYear', true));\r\n\r\n    // add plural methods\r\n    moment.fn.days = moment.fn.day;\r\n    moment.fn.months = moment.fn.month;\r\n    moment.fn.weeks = moment.fn.week;\r\n    moment.fn.isoWeeks = moment.fn.isoWeek;\r\n    moment.fn.quarters = moment.fn.quarter;\r\n\r\n    // add aliased format methods\r\n    moment.fn.toJSON = moment.fn.toISOString;\r\n\r\n    /************************************\r\n        Duration Prototype\r\n    ************************************/\r\n\r\n\r\n    function daysToYears(days) {\r\n        // 400 years have 146097 days (taking into account leap year rules)\r\n        return days * 400 / 146097;\r\n    }\r\n\r\n    function yearsToDays(years) {\r\n        // years * 365 + absRound(years / 4) -\r\n        //     absRound(years / 100) + absRound(years / 400);\r\n        return years * 146097 / 400;\r\n    }\r\n\r\n    extend(moment.duration.fn = Duration.prototype, {\r\n\r\n        _bubble: function () {\r\n            var milliseconds = this._milliseconds,\r\n                days = this._days,\r\n                months = this._months,\r\n                data = this._data,\r\n                seconds, minutes, hours, years = 0;\r\n\r\n            // The following code bubbles up values, see the tests for\r\n            // examples of what that means.\r\n            data.milliseconds = milliseconds % 1000;\r\n\r\n            seconds = absRound(milliseconds / 1000);\r\n            data.seconds = seconds % 60;\r\n\r\n            minutes = absRound(seconds / 60);\r\n            data.minutes = minutes % 60;\r\n\r\n            hours = absRound(minutes / 60);\r\n            data.hours = hours % 24;\r\n\r\n            days += absRound(hours / 24);\r\n\r\n            // Accurately convert days to years, assume start from year 0.\r\n            years = absRound(daysToYears(days));\r\n            days -= absRound(yearsToDays(years));\r\n\r\n            // 30 days to a month\r\n            // TODO (iskren): Use anchor date (like 1st Jan) to compute this.\r\n            months += absRound(days / 30);\r\n            days %= 30;\r\n\r\n            // 12 months -> 1 year\r\n            years += absRound(months / 12);\r\n            months %= 12;\r\n\r\n            data.days = days;\r\n            data.months = months;\r\n            data.years = years;\r\n        },\r\n\r\n        abs: function () {\r\n            this._milliseconds = Math.abs(this._milliseconds);\r\n            this._days = Math.abs(this._days);\r\n            this._months = Math.abs(this._months);\r\n\r\n            this._data.milliseconds = Math.abs(this._data.milliseconds);\r\n            this._data.seconds = Math.abs(this._data.seconds);\r\n            this._data.minutes = Math.abs(this._data.minutes);\r\n            this._data.hours = Math.abs(this._data.hours);\r\n            this._data.months = Math.abs(this._data.months);\r\n            this._data.years = Math.abs(this._data.years);\r\n\r\n            return this;\r\n        },\r\n\r\n        weeks: function () {\r\n            return absRound(this.days() / 7);\r\n        },\r\n\r\n        valueOf: function () {\r\n            return this._milliseconds +\r\n              this._days * 864e5 +\r\n              (this._months % 12) * 2592e6 +\r\n              toInt(this._months / 12) * 31536e6;\r\n        },\r\n\r\n        humanize: function (withSuffix) {\r\n            var output = relativeTime(this, !withSuffix, this.localeData());\r\n\r\n            if (withSuffix) {\r\n                output = this.localeData().pastFuture(+this, output);\r\n            }\r\n\r\n            return this.localeData().postformat(output);\r\n        },\r\n\r\n        add: function (input, val) {\r\n            // supports only 2.0-style add(1, 's') or add(moment)\r\n            var dur = moment.duration(input, val);\r\n\r\n            this._milliseconds += dur._milliseconds;\r\n            this._days += dur._days;\r\n            this._months += dur._months;\r\n\r\n            this._bubble();\r\n\r\n            return this;\r\n        },\r\n\r\n        subtract: function (input, val) {\r\n            var dur = moment.duration(input, val);\r\n\r\n            this._milliseconds -= dur._milliseconds;\r\n            this._days -= dur._days;\r\n            this._months -= dur._months;\r\n\r\n            this._bubble();\r\n\r\n            return this;\r\n        },\r\n\r\n        get: function (units) {\r\n            units = normalizeUnits(units);\r\n            return this[units.toLowerCase() + 's']();\r\n        },\r\n\r\n        as: function (units) {\r\n            var days, months;\r\n            units = normalizeUnits(units);\r\n\r\n            if (units === 'month' || units === 'year') {\r\n                days = this._days + this._milliseconds / 864e5;\r\n                months = this._months + daysToYears(days) * 12;\r\n                return units === 'month' ? months : months / 12;\r\n            } else {\r\n                // handle milliseconds separately because of floating point math errors (issue #1867)\r\n                days = this._days + Math.round(yearsToDays(this._months / 12));\r\n                switch (units) {\r\n                    case 'week': return days / 7 + this._milliseconds / 6048e5;\r\n                    case 'day': return days + this._milliseconds / 864e5;\r\n                    case 'hour': return days * 24 + this._milliseconds / 36e5;\r\n                    case 'minute': return days * 24 * 60 + this._milliseconds / 6e4;\r\n                    case 'second': return days * 24 * 60 * 60 + this._milliseconds / 1000;\r\n                        // Math.floor prevents floating point math errors here\r\n                    case 'millisecond': return Math.floor(days * 24 * 60 * 60 * 1000) + this._milliseconds;\r\n                    default: throw new Error('Unknown unit ' + units);\r\n                }\r\n            }\r\n        },\r\n\r\n        lang: moment.fn.lang,\r\n        locale: moment.fn.locale,\r\n\r\n        toIsoString: deprecate(\r\n            'toIsoString() is deprecated. Please use toISOString() instead ' +\r\n            '(notice the capitals)',\r\n            function () {\r\n                return this.toISOString();\r\n            }\r\n        ),\r\n\r\n        toISOString: function () {\r\n            // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js\r\n            var years = Math.abs(this.years()),\r\n                months = Math.abs(this.months()),\r\n                days = Math.abs(this.days()),\r\n                hours = Math.abs(this.hours()),\r\n                minutes = Math.abs(this.minutes()),\r\n                seconds = Math.abs(this.seconds() + this.milliseconds() / 1000);\r\n\r\n            if (!this.asSeconds()) {\r\n                // this is the same as C#'s (Noda) and python (isodate)...\r\n                // but not other JS (goog.date)\r\n                return 'P0D';\r\n            }\r\n\r\n            return (this.asSeconds() < 0 ? '-' : '') +\r\n                'P' +\r\n                (years ? years + 'Y' : '') +\r\n                (months ? months + 'M' : '') +\r\n                (days ? days + 'D' : '') +\r\n                ((hours || minutes || seconds) ? 'T' : '') +\r\n                (hours ? hours + 'H' : '') +\r\n                (minutes ? minutes + 'M' : '') +\r\n                (seconds ? seconds + 'S' : '');\r\n        },\r\n\r\n        localeData: function () {\r\n            return this._locale;\r\n        }\r\n    });\r\n\r\n    moment.duration.fn.toString = moment.duration.fn.toISOString;\r\n\r\n    function makeDurationGetter(name) {\r\n        moment.duration.fn[name] = function () {\r\n            return this._data[name];\r\n        };\r\n    }\r\n\r\n    for (i in unitMillisecondFactors) {\r\n        if (hasOwnProp(unitMillisecondFactors, i)) {\r\n            makeDurationGetter(i.toLowerCase());\r\n        }\r\n    }\r\n\r\n    moment.duration.fn.asMilliseconds = function () {\r\n        return this.as('ms');\r\n    };\r\n    moment.duration.fn.asSeconds = function () {\r\n        return this.as('s');\r\n    };\r\n    moment.duration.fn.asMinutes = function () {\r\n        return this.as('m');\r\n    };\r\n    moment.duration.fn.asHours = function () {\r\n        return this.as('h');\r\n    };\r\n    moment.duration.fn.asDays = function () {\r\n        return this.as('d');\r\n    };\r\n    moment.duration.fn.asWeeks = function () {\r\n        return this.as('weeks');\r\n    };\r\n    moment.duration.fn.asMonths = function () {\r\n        return this.as('M');\r\n    };\r\n    moment.duration.fn.asYears = function () {\r\n        return this.as('y');\r\n    };\r\n\r\n    /************************************\r\n        Default Locale\r\n    ************************************/\r\n\r\n\r\n    // Set default locale, other locale will inherit from English.\r\n    moment.locale('en', {\r\n        ordinalParse: /\\d{1,2}(th|st|nd|rd)/,\r\n        ordinal: function (number) {\r\n            var b = number % 10,\r\n                output = (toInt(number % 100 / 10) === 1) ? 'th' :\r\n                (b === 1) ? 'st' :\r\n                (b === 2) ? 'nd' :\r\n                (b === 3) ? 'rd' : 'th';\r\n            return number + output;\r\n        }\r\n    });\r\n\r\n    /* EMBED_LOCALES */\r\n\r\n    /************************************\r\n        Exposing Moment\r\n    ************************************/\r\n\r\n    function makeGlobal(shouldDeprecate) {\r\n        /*global ender:false */\r\n        if (typeof ender !== 'undefined') {\r\n            return;\r\n        }\r\n        oldGlobalMoment = globalScope.moment;\r\n        if (shouldDeprecate) {\r\n            globalScope.moment = deprecate(\r\n                    'Accessing Moment through the global scope is ' +\r\n                    'deprecated, and will be removed in an upcoming ' +\r\n                    'release.',\r\n                    moment);\r\n        } else {\r\n            globalScope.moment = moment;\r\n        }\r\n    }\r\n\r\n    // CommonJS module is defined\r\n    if (hasModule) {\r\n        module.exports = moment;\r\n    } else if (typeof define === 'function' && define.amd) {\r\n        define('moment', function (require, exports, module) {\r\n            if (module.config && module.config() && module.config().noGlobal === true) {\r\n                // release the global variable\r\n                globalScope.moment = oldGlobalMoment;\r\n            }\r\n\r\n            return moment;\r\n        });\r\n        makeGlobal(true);\r\n    } else {\r\n        makeGlobal();\r\n    }\r\n}).call(this);\r\n","\r\nvar invSearch = {\r\n    Init: function () {\r\n        var searchModel = kendo.observable(new invSearch.SearchModel());\r\n        kendo.bind($('#dvInvSearch'), searchModel);\r\n        searchModel.loadInvoice();\r\n        searchModel.loadErrorMessages();\r\n    },\r\n\r\n    deleteInv: function () { return kendo.template($('#deleteInvTpl').html()); },\r\n    createOrderInv: function () { return kendo.template($('#createOrderInvTpl').html()); },\r\n    displayInv: function () { return kendo.template($('#displayInvTpl').html()); },\r\n    selectMyOrdersTemplate: function () { return kendo.template($('#selectMyOrdersTpl').html()); },\r\n    dateMyOrdersTemplate: function () { return kendo.template($('#dateMyOrdersTpl').html()); },\r\n    statusTemplate: function () { return kendo.template($('#statusInvTpl').html()); },\r\n\r\n\r\n\r\n    SearchModel: function () {\r\n        this.isLoading = true;\r\n        this.isLoaded = false;\r\n        this.from = \"\";\r\n        this.to = \"\";\r\n        this.filterBy = \"\";\r\n        this.filterValue = \"\";\r\n        this.invoices = [];\r\n        this.ListEmpty = false;\r\n        this.selectedFilterItem = null;\r\n        this.filterByValue = \"\";\r\n        this.currentInvoiceId = 0;\r\n        this.memberInvoiceNumber = 0;\r\n        this.myOrdersFilter = \"\";\r\n        this.index_Invoice_Action = window.index_Invoice_Action;\r\n        this.myOrdersErrorText = \"\";\r\n        this.errorMessages = [];\r\n        this.statusUpdateText = \"\";\r\n\r\n        this.loadInvoice = function () {\r\n            var self = this;\r\n            if (this.index_Invoice_Action == \"Invoice_Search\") {\r\n                kendo.ui.progress($(\"#loading\"), true);\r\n                $.ajax({\r\n                    type: 'get',\r\n                    dataType: 'json',\r\n                    cache: true,\r\n                    url: '/Ordering/api/InvoiceSearch/LoadAll',\r\n                    success: function (data) {\r\n                        self.dataHandler(data);\r\n                    },\r\n                    error: function () {\r\n                        self.error = true;\r\n                    },\r\n                    complete: function () {\r\n                        kendo.ui.progress($(\"#loading\"), false);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n\r\n        this.filterCategoriesSource = new kendo.data.DataSource({\r\n            type: \"json\",\r\n            transport: {\r\n                read:\r\n                {\r\n                    url: \"/Ordering/api/InvoiceSearch/LoadFilterCategory\"\r\n                }\r\n            }\r\n        });\r\n\r\n        this.statusDataSource = new kendo.data.DataSource({\r\n            type: \"json\",\r\n            transport: {\r\n                read:\r\n                {\r\n                    url: \"/Ordering/api/InvoiceBase/LoadStatus\"\r\n                }\r\n            }\r\n        });\r\n\r\n        this.onStatusChange = function (e) {\r\n            var self = this;\r\n            var model = {\r\n                Id: e.data.Id,\r\n                Status: e.data.Status\r\n            };\r\n\r\n            kendo.ui.progress($(\"#loading\"), true);\r\n            $.ajax({\r\n                url: \"/Ordering/api/InvoiceBase/UpdateStatus\",\r\n                type: 'POST',\r\n                data: JSON.stringify(model),\r\n                contentType: \"application/json; charset=utf-8\",\r\n                success: function (data) {\r\n                    if (data) {\r\n                        self.set('statusUpdateText', self.errorMessages['statusUpdateText']);\r\n                    } else {\r\n                        self.set('statusUpdateText', '');\r\n                    }\r\n                },\r\n                error: function (data) {\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#loading\"), false);\r\n                    self.loadInvoice();\r\n                }\r\n            });\r\n        };\r\n\r\n        this.loadErrorMessages = function () {\r\n            if (this.index_Invoice_Action == \"Invoice_Search\") {\r\n                var self = this;\r\n                $.ajax({\r\n                    type: 'get',\r\n                    dataType: 'json',\r\n                    cache: true,\r\n                    url: '/Ordering/api/InvoiceEdit/LoadErrorMessage',\r\n                    success: function (data) {\r\n                        if (data) {\r\n                            self.set(\"errorMessages\", data);\r\n                        }\r\n                    },\r\n                    error: function () {\r\n                        self.error = true;\r\n                    },\r\n                    complete: function () {\r\n                    }\r\n                });\r\n            }\r\n        };\r\n\r\n        this.doSearch = function () {\r\n            var self = this;\r\n\r\n            var invoiceFilterModel = {\r\n                From: this.from,\r\n                To: this.to\r\n            };\r\n\r\n            if (null != this.selectedFilterItem) {\r\n                invoiceFilterModel.SelectedFilterId = this.selectedFilterItem;\r\n                invoiceFilterModel.SelectedFilterValue = this.filterByValue;\r\n            }\r\n            kendo.ui.progress($(\"#loading\"), true);\r\n            $.ajax({\r\n                url: \"/Ordering/api/InvoiceSearch/Filter\",\r\n                type: 'POST',\r\n                data: JSON.stringify(invoiceFilterModel),\r\n                contentType: \"application/json; charset=utf-8\",\r\n                success: function (data) {\r\n                    self.dataHandler(data);\r\n                },\r\n                error: function (data) {\r\n                },\r\n                complete: function () {\r\n                    self.set('statusUpdateText', '');\r\n                    kendo.ui.progress($(\"#loading\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n\r\n        this.doClear = function () {\r\n            this.set(\"from\", \"\");\r\n            this.set(\"to\", \"\");\r\n            this.set(\"filterByValue\", \"\");\r\n            this.set(\"selectedFilterItem\", null);\r\n            this.set('statusUpdateText', '');\r\n            this.loadInvoice();\r\n        },\r\n            this.dataHandler = function (data) {\r\n                if (data) {\r\n                    this.set(\"invoices\", data);\r\n                    this.set(\"isLoading \", false);\r\n                    this.set(\"isLoaded \", true);\r\n                    if (this.invoices.length == 0)\r\n                        this.set(\"ListEmpty\", true);\r\n                    else\r\n                        this.set(\"ListEmpty\", false);\r\n                }\r\n            };\r\n\r\n        this.viewDeletePopUp = function (e) {\r\n            var self = this;\r\n            var memberInvoiceNumber = e.data.DisplayMemberInvoiceNumber;\r\n            var invoiceId = e.data.Id;\r\n            self.set('currentInvoiceId', invoiceId);\r\n            self.set('memberInvoiceNumber', memberInvoiceNumber);\r\n            if (invoiceId != 0) {\r\n                var wnd = $('#confirmDeleteInvoice').data('kendoWindow');\r\n                wnd.center().open();\r\n            }\r\n        };\r\n\r\n        this.closeDeleteInvoice = function () {\r\n            var enterCertWnd = $('#confirmDeleteInvoice').data('kendoWindow');\r\n            if (enterCertWnd) {\r\n                enterCertWnd.close();\r\n            }\r\n        };\r\n\r\n        this.DeleteInvoice = function () {\r\n            var self = this;\r\n            var invtoDelete = this.currentInvoiceId;\r\n            $.ajax({\r\n                url: \"/Ordering/api/InvoiceSearch/Delete/\" + invtoDelete,\r\n                type: 'POST',\r\n                contentType: \"application/json; charset=utf-8\",\r\n                success: function () {\r\n                },\r\n                error: function () {\r\n\r\n                },\r\n                complete: function () {\r\n                    self.loadInvoice();\r\n                    self.closeDeleteInvoice();\r\n                }\r\n            });\r\n        };\r\n\r\n        this.createOrderRedirect = function () {\r\n            var self = this;\r\n            $.ajax({\r\n                url: \"/Ordering/Invoice/CreateOrderRedirect/\",\r\n                type: 'POST',\r\n                contentType: \"application/json; charset=utf-8\",\r\n                success: function () {\r\n                },\r\n                error: function () {\r\n                },\r\n                complete: function () {\r\n                }\r\n            });\r\n        };\r\n\r\n        this.clickMyOrders = function () {\r\n            kendo.ui.progress($(\"#loading\"), true);\r\n            var wnd = $('#dvInvMyOrders').data('kendoWindow');\r\n            wnd.center().open();\r\n            this.myOrdersDataSource.read();\r\n            kendo.ui.progress($(\"#loading\"), false);\r\n        };\r\n\r\n        this.selectMyOrders = function (e) {\r\n            window.location.href = \"/Ordering/Invoice/EditByOrderId/\" + e.data.Id;\r\n            return false;\r\n        };\r\n\r\n        this.searchMyOrders = function () {\r\n            this.myOrdersDataSource.filter([\r\n                {\r\n                    \"logic\": \"or\",\r\n                    \"filters\": [\r\n                        {\r\n                            \"field\": \"Id\",\r\n                            \"operator\": \"startswith\",\r\n                            \"value\": this.myOrdersFilter\r\n                        },\r\n                        {\r\n                            \"field\": \"Name\",\r\n                            \"operator\": \"startswith\",\r\n                            \"value\": this.contactsFilter\r\n                        }\r\n                    ]\r\n                }\r\n            ]);\r\n        };\r\n\r\n        this.myOrdersDataSource = new kendo.data.DataSource({\r\n            type: \"json\",\r\n            serverFiltering: true,\r\n            serverPaging: true,\r\n            pageSize: 10,\r\n            transport: {\r\n                read: {\r\n                    url: '/Ordering/api/MyOrders',\r\n                    type: \"POST\"\r\n                }\r\n            },\r\n            schema: {\r\n                data: function (data) {\r\n                    if (data && data.Items && data.Items.$values) {\r\n                        return data.Items.$values;\r\n                    } else if (data && data.Items) {\r\n                        return data.Items;\r\n                    } else {\r\n                        return null;\r\n                    }\r\n                },\r\n                total: function (data) {\r\n                    if (data) {\r\n                        return data.TotalCount;\r\n                    } else {\r\n                        return 0;\r\n                    }\r\n                }\r\n            },\r\n            requestStart: function (e) {\r\n                kendo.ui.progress($(\"#dgMyOrders\"), true);\r\n            },\r\n            requestEnd: function (e) {\r\n                kendo.ui.progress($(\"#dgMyOrders\"), false);\r\n            }\r\n        });\r\n\r\n        this.myOrdersDataBound = function (e) {\r\n            kendo.ui.progress($(\"#dgMyOrders\"), false);\r\n            if (this.myOrdersDataSource && this.myOrdersDataSource.total() == 0) {\r\n                this.set('myOrdersErrorText', this.errorMessages['myOrdersError']);\r\n            } else {\r\n                this.set('myOrdersErrorText', '');\r\n            }\r\n        };\r\n\r\n        this.loadMyOrders = function () {\r\n            var self = this;\r\n            $.ajax({\r\n                type: 'get',\r\n                dataType: 'json',\r\n                cache: true,\r\n                url: '/Ordering/api/MyOrders',\r\n                success: function (data) {\r\n                    self.set(\"myOrders\", data);\r\n                },\r\n                error: function () {\r\n                    self.error = true;\r\n                },\r\n                beforeSend: function () {\r\n                    kendo.ui.progress($(\"#dgMyOrders\"), true);\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#dgMyOrders\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n        this.ExportToCSV = function () {\r\n            kendo.ui.progress($(\"#loading\"), true);\r\n            var fileName = 'Invoices.csv';\r\n            var grid = $(\"#dgInvoices\").data(\"kendoGrid\");\r\n            var csv = '';\r\n\r\n            var data = grid.dataSource.view();\r\n\r\n            //add the header row\r\n            for (var i = 0; i < grid.columns.length; i++) {\r\n                var field = grid.columns[i].field;\r\n                var title = grid.columns[i].title || field;\r\n\r\n                //NO DATA\r\n                if (!field || field == \"Delete\" || field == \"CreateOrder\") {\r\n                    continue;\r\n                }\r\n\r\n                title = title.replace(/\"/g, '\"\"');\r\n                csv += '\"' + title + '\"';\r\n                if (i < grid.columns.length - 1) {\r\n                    csv += ',';\r\n                }\r\n            }\r\n            csv += '\\n';\r\n\r\n            //add each row of data\r\n            for (var row in data) {\r\n                for (var i = 0; i < grid.columns.length; i++) {\r\n                    var fieldName = grid.columns[i].field;\r\n\r\n                    //VALIDATE COLUMN\r\n                    if (!fieldName || fieldName == \"Delete\" || fieldName == \"CreateOrder\") continue;\r\n                    var value = '';\r\n                    if (fieldName.indexOf('.') >= 0) {\r\n                        var properties = fieldName.split('.');\r\n                        var value = data[row] || '';\r\n                        for (var j = 0; j < properties.length; j++) {\r\n                            var prop = properties[j];\r\n                            value = value[prop] || '';\r\n                        }\r\n                    } else {\r\n\r\n                        value = data[row][fieldName] || '';\r\n                    }\r\n\r\n                    value = value.toString().replace(/\"/g, '\"\"');\r\n                    csv += '\"' + value + '\"';\r\n                    if (i < grid.columns.length - 1) {\r\n                        csv += ',';\r\n                    }\r\n                }\r\n                csv += '\\n';\r\n            }\r\n\r\n            //EXPORT TO BROWSER\r\n            var blob = new Blob([csv], { type: 'text/csv;charset=utf-8' }); //Blob.js\r\n            saveAs(blob, fileName); //FileSaver.js\r\n            kendo.ui.progress($(\"#loading\"), false);\r\n        };\r\n    }\r\n};\r\n\r\n$(function () {\r\n    invSearch.Init();\r\n});","\r\nvar invDisplay = {\r\n    Init: function() {\r\n        var displayModel = kendo.observable(new invDisplay.invoiceDisplayViewModel());\r\n        kendo.bind($('#dvInvDisplay'), displayModel);\r\n        displayModel.loadInvoicedata();\r\n    },\r\n\r\n    productDescTemplate: function () { return kendo.template($('#productDescTpl').html()); },\r\n\r\n    invoiceDisplayViewModel: function () {\r\n        this.display_InvoiceId = window.display_InvoiceId;\r\n        this.display_Invoice_Action = window.display_Invoice_Action;\r\n\r\n        this.loadInvoicedata = function () {\r\n            if (this.display_Invoice_Action == \"Invoice_Display\") {\r\n                var self = this;\r\n                if (self.display_InvoiceId > 0) {\r\n                    var invoiceId = self.display_InvoiceId;\r\n                    kendo.ui.progress($(\"#dvinvProduct\"), true);\r\n                    $.ajax({\r\n                        type: 'get',\r\n                        dataType: 'json',\r\n                        cache: true,\r\n                        data: JSON.stringify(invoiceId),\r\n                        url: '/Ordering/api/InvoiceSearch/Load/' + invoiceId,\r\n                        success: function(data) {\r\n                            if (data && data.Id >0) {\r\n                                self.setInvoiceData(data);\r\n                            } else {\r\n                                window.location.href = \"/Ordering/Invoice\";\r\n                                return false;\r\n                            }\r\n                        },\r\n                        error: function() {\r\n                            self.error = true;\r\n                        },\r\n                        complete: function() {\r\n                            kendo.ui.progress($(\"#dvinvProduct\"), false);\r\n                        }\r\n                    });\r\n                    // get the id from edit_InvoiceId and load the invoice for the id\r\n                }\r\n            }\r\n        };\r\n\r\n        this.setInvoiceData = function(data) {\r\n            if (data) {\r\n                this.set('invoice', data);\r\n                this.set('invoiceDate', kendo.toString(new Date(moment(data.InvoiceDate)), \"MM/dd/yyyy\"));\r\n            }\r\n        };\r\n                     \r\n        this.sendEmailClick = function () {\r\n            var self = this;\r\n            if (self.invoice.Email){\r\n                self.viewConfirmationEmailPopUp();\r\n            }\r\n        };\r\n\r\n        this.confirmEmailClick = function() {\r\n            var self = this;\r\n            kendo.ui.progress($(\"#dvinvProduct\"), true);\r\n\r\n            $.ajax({\r\n                type: 'POST',\r\n                dataType: 'json',\r\n                cache: true,\r\n                data: JSON.stringify(self.invoice),\r\n                contentType: \"application/json; charset=utf-8\",\r\n                url: '/Ordering/api/InvoiceBase/SendInvoiceEmail',\r\n                success: function (data) {\r\n                },\r\n                error: function () {\r\n                    self.error = true;\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#dvinvProduct\"), false);\r\n                    self.cancelEmailClick();\r\n                }\r\n            });\r\n        };\r\n\r\n        this.cancelEmailClick = function () {\r\n            var wnd = $('#emailSendedConfirmation').data('kendoWindow');\r\n            if (wnd) {\r\n                wnd.close();\r\n            }\r\n        };\r\n\r\n        this.viewConfirmationEmailPopUp = function () {\r\n            var wnd = $('#emailSendedConfirmation').data('kendoWindow');\r\n            wnd.center().open();\r\n        };\r\n\r\n        this.editInvoiceClick = function () {\r\n            var scope = this;\r\n            window.location.href = \"/Ordering/Invoice/Edit/\" + scope.display_InvoiceId;\r\n            return false;\r\n        };\r\n\r\n        this.deleteInvoiceClick = function() {\r\n            var scope = this;\r\n            window.location.href = \"/Ordering/Invoice/Delete/\" + scope.display_InvoiceId;\r\n            scope.closeDeleteInvoice();\r\n            return false;\r\n        };\r\n\r\n        this.viewDeletePopUp = function (e) {\r\n                var wnd = $('#confirmDeleteInvoice').data('kendoWindow');\r\n                wnd.center().open();\r\n        };\r\n\r\n        this.closeDeleteInvoice = function () {\r\n            var enterCertWnd = $('#confirmDeleteInvoice').data('kendoWindow');\r\n            if (enterCertWnd) {\r\n                enterCertWnd.close();\r\n            }\r\n        };\r\n\r\n        this.printInvoiceClick = function () {\r\n            var scope = this;\r\n            window.open(\"/Ordering/Invoice/Print/\" + scope.display_InvoiceId, '_blank');\r\n            return false;\r\n        };\r\n\r\n        this.copyInvoiceClick = function () {\r\n            var scope = this;\r\n            window.location.href = \"/Ordering/Invoice/Copy/\" + scope.display_InvoiceId;\r\n            return false;\r\n        };\r\n\r\n        this.createOrderClick = function () {\r\n            var scope = this;\r\n            window.location.href = \"/Ordering/ShoppingCart.aspx?memberInvoiceId=\" + scope.display_InvoiceId + \"&invoiceNum=\" + scope.invoice.MemberInvoiceNumber;\r\n            return false;\r\n        };\r\n\r\n        this.onInvoiceLinesDataBinding = function (e) {\r\n            var grid = e.sender;\r\n\r\n            if (this.invoice.Type == \"Distributor\") {\r\n                grid.showColumn(\"EarnBase\");\r\n            } else {\r\n                grid.hideColumn(\"EarnBase\");\r\n            }\r\n        };\r\n        \r\n        this.createOrderRedirect = function () {\r\n            var self = this;\r\n            $.ajax({\r\n                url: \"/Ordering/Invoice/CreateOrderRedirect/\",\r\n                type: 'POST',\r\n                contentType: \"application/json; charset=utf-8\",\r\n                success: function () {\r\n                    self.createOrderClick();\r\n                },\r\n                error: function () {\r\n                },\r\n                complete: function () {\r\n                }\r\n            });\r\n        };\r\n\r\n    },\r\n\r\n\r\n    InvoiceModel: function() {\r\n        this.Id = null;\r\n        this.MemberId = null;\r\n        this.MemberInvoiceNumber = null;\r\n        this.FirstName = null;\r\n        this.LastName = null;\r\n        this.InvoiceDate = \"\";\r\n        this.CreatedDate = \"\";\r\n        this.CustomerId = null;\r\n        this.Address = new invEdit.InvoiceAddressModel();\r\n        this.InvoiceLines = [];\r\n        this.InvoicePrice = new invEdit.InvoicePriceModel();\r\n        this.InvoiceContact = null;\r\n        this.Email = null;\r\n        this.Type = null;\r\n        this.OrderId = null;\r\n        this.Notes = null;\r\n        this.Status = null;\r\n        this.Phone = null;\r\n        this.PaymentAddress = null;\r\n        this.TotalVolumePoints = null;\r\n        this.Total = null;\r\n        this.DisplayTotal = null;\r\n        this.ShippingMethod = null;\r\n        this.InvoiceShipToAddress = false;\r\n        this.MemberAddress = new invEdit.InvoiceAddressModel();\r\n        this.MemberEmailAddress = null;\r\n        this.MemberFirstName = \"\";\r\n        this.MemberLastName = \"\";\r\n        this.OrderSource = \"\";\r\n        this.PricingType = \"\";\r\n        this.ShippingMethod = \"\";\r\n        this.Source = \"\";\r\n        this.IsFaceToFace = false;\r\n        this.IsGdoMemberPricing = true;\r\n        this.DisplayInvoiceStatus = \"\";\r\n        this.IsDisplayFreeShipping = false;\r\n        this.HideTax = false;\r\n    },\r\n\r\n    InvoiceAddressModel: function() {\r\n        this.Address1 = null;\r\n        this.Address2 = null;\r\n        this.City = null;\r\n        this.Country = null;\r\n        this.County = null;\r\n        this.PostalCode = null;\r\n        this.State = null;\r\n    },\r\n    InvoiceLineModel: function() {\r\n        this.Sku = null;\r\n        this.ProductName = null;\r\n        this.Quantity = null;\r\n        this.RetailPrice = null;\r\n        this.TotalRetailPrice = null;\r\n        this.EarnBase = null;\r\n        this.StockingSku = null;\r\n        this.ProductType = null;\r\n        this.ProductCategory = null;\r\n        this.VolumePoint = null;\r\n        //Will get calculated/Populated by a PriceFactory\r\n        this.TotalEarnBase = null;\r\n        this.TotalVolumePoint = null;\r\n        this.YourPrice = null;\r\n        this.DisplayRetailPrice = null;\r\n        this.DisplayTotalRetailPrice = null;\r\n        this.DisplayCurrencySymbol = null;\r\n        this.DisplayTotalVp = null;\r\n        this.DisplayYourPrice = null;\r\n        this.FreightCharge = 0;\r\n        this.CalcDiscountedAmount = 0;\r\n    },\r\n    InvoicePriceModel: function() {\r\n        this.DiscountPercentage = 0;\r\n        this.DiscountAmount = 0;\r\n        this.CalcDiscountAmount = 0;\r\n        this.TaxPercentage = 0;\r\n        this.TaxAmount = 0;\r\n        this.ShippingPercentage = 0;\r\n        this.ShippingAmount = 0;\r\n        this.TotalDue = 0;\r\n        this.SubTotal = 0;\r\n\r\n        this.TotalEarnBase = 0;\r\n\r\n        this.CalcShippingAmount = 0;\r\n        this.CalcTaxAmount = 0;\r\n        this.TotalDiscountedAmount = 0;\r\n\r\n\r\n        this.MemberTax = 0;\r\n        this.MemberFreight = 0;\r\n        this.MemberTotal = 0;\r\n        this.TotalYourPrice = 0;\r\n        this.Profit = 0;\r\n        this.ProfitPercentage = 0;\r\n\r\n        //Will get calculated by a PriceFactory\r\n        this.DisplayDiscountedAmount = null;\r\n        this.DisplayCurrencySymbol = null;\r\n        this.DisplaySubtotal = null;\r\n        this.DisplayDiscount = \"$0.00\";\r\n        this.DisplayShipping = null;\r\n        this.DisplayTax = null;\r\n        this.DisplayTotalDue = null;\r\n        this.DisplayCalculatedTax = null;\r\n\r\n        this.DisplayProfit = null;\r\n        this.DisplayMemberTax = null;\r\n        this.DisplayMemberFreight = null;\r\n        this.DisplayMemberTotal = null;\r\n        this.DisplayTotalYourPrice = null;\r\n        this.DisplayProfitPercentage = null;\r\n    },\r\n\r\n};\r\n$(function() {\r\n    invDisplay.Init();\r\n});"]}