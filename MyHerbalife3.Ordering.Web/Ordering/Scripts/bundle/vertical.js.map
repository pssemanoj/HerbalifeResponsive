{"version":3,"sources":["../ProductDetailControl.js","../ProductBySKU.js","../ordering.js","../invoiceEdit.js","../InventoryDetails.js","../jquery.ajaxPost.js","../../../SharedUI/Scripts/jquery.cookie.js","../FileSaver.js","../moment.js","../invoiceSearch.js","../invoiceDisplay.js"],"names":["dynamicDividerLine_","tabsbox","findControl2","tab1col1","tab1divider","tab1col2","tab1_col1_height","offsetHeight","tab1_col2_height","tab1_tallest","style","height","adjustDividerLineTab2_","tab2col1","tab2divider","tab2col2","tab2_col1_height","tab2_col2_height","tab2_tallest","$","html","trim","css","adjustDividerLineTab3_","tab3col1","tab3divider","tab3col2","tab3_col1_height","tab3_col2_height","tab3_tallest","ShowWrap","id","elem","display","findControl","document","getElementById","controlFound","i","all","getElementsByTagName","l","length","switchingTab","hideAllWraps","addClass","removeClass","InitializeControls","setNumeric2","ajaxPost","SetAutoCompleteOptions","blur","this","value","isProduct","inArray","autoCompleteOptions","isSku","skuList","parent","prev","find","IsRowComplete","noSKUFoundText","format","toUpperCase","focus","each","result","d","ProductsList","SkuList","InitializeAutocompleteOptions","kendoAutoComplete","dataSource","filter","placeholder","autoPlaceHolderText","v","productSku","quantity","focusOnNext","sku","eq","val","qty","next","CheckNumeric","e","ctrl","keynum","window","event","keyCode","which","cancelBubble","preventDefault","stopPropagation","CheckAreaPlusPhone","ctrlArea","ctrlPhone","totalLength","elementAreaCode","elementPhone","PickupSelected","items","type","name","indexOf","checked","CheckChanges","textbox","selector","changed","oldTxtCP2","oldTxtCP1","__doPostBack","AllowOnlyNumbers2","control","replace","AllowOnlyNumbers","EnableMasterScrolling","DisableMasterScrolling","checkSKUChar","keychar","String","fromCharCode","test","cronometro","help_date","Date","Sys","WebForms","PageRequestManager","getInstance","add_endRequest","days","hours","minutes","seconds","timer","YearEOM","split","MonthEOM","DayEOM","HourEOM","MinEOM","SecEOM","target_date","counterlbl","countdown_min","countdown_hr","countdown_dy","timtest","YearServer","MonthServer","DayServer","HourServer","MinServer","SecServer","serverTime","clientNow","getTime","endTime","setInterval","seconds_left","parseInt","innerHTML","className","clearInterval","cookieEater","eraseCookie","cookie","ready","createCookie","date","setTime","expires","toGMTString","toggleCatalog","location","pathname","is_page","hide","show","toggleClass","setTimeout","keepSubcatOpened","click","_this","_child","_opened","is","hasClass","slideUp","slideDown","RemovePopup","cleaningTable","browser","msie","version","tableHtml","expr","RegExp","hidePromoPopup","cookieLocal","visibleAreaHeight","jQuery","outerHeight","Math","round","resize","freeze_header_cols","scrollTop","colProdW","outerWidth","responsiveMode","$vp","$vpNext","vpW","vpH","vpOffset","offset","top","vpNextOffset","distanceVP","distanceVPNext","width","background-color","$actions","$actionsNext","actionsW","actionsH","actionsOffset","actionsNextOffset","distanceActions","distanceActionsNext","children","first","padding","$header","$headerNext","headerW","headerH","headerOffset","headerNextOffset","distanceH","distanceHNext","pageName","toLowerCase","repositionModal","element","atTop","left","scrollLeft","repositionProductDetailModal","getSKUBackOrder","linkClicked","attr","UID","skuCategory","ajax","url","data","cache","contentType","dataType","success","onSuccess","error","console","log","text","hideAvailabilityText","showAvailabilityText","skuBackOrder","JSON","parse","remove","InventoryDetails","drawRow","footer","append","rowData","row","Location","Type","Status","AvailabilityDate","Comments","hideMe","linkInstructionsText","anchorText","scroll_to_element","elementSelector","duration","animate","targetPageParams","AdobeTarget","foldDaumPostcode","kendo","execDaumPostcode","currentScroll","max","body","documentElement","element_wrap","daum","Postcode","oncomplete","fullAddr","extraAddr","userSelectedType","roadAddress","jibunAddress","bname","buildingName","sido","sigungu","zonecode","onresize","size","embed","formatPostalCode","postcode","MaxPostCodeLength","FirstPartLength","zeroPreseed","postCode","currentPostCodeLength","toString","diff","substring","toggleMemberInfo","member_info","isNaN","start","showText","collapse","complete","RedirectToReceipts","locale","_AnalyticsFacts_","LanguageCode","CountryCode","_countries","logger","drawShowData","dataWareHouses","hasShipping","wareHouse","x","Option","Name","OptionText","drawTable","rowHeader","SkuColumnTitleText","DescriptionColumnText","WhDetails","HasShipping","rowsubHeader","FullCatalog","SKU","SKUDescription","skuStatus","skuInfo","Array","y","z","WHCode","DeliveryType","img","link","ToolTipComments","StatusText","method","href","xhr","status","exc","reload","undefined","raw","s","decoded","unRfc2068","decodeURIComponent","pluses","slice","fromJSON","config","json","key","options","extend","defaults","t","setDate","getDate","stringify","encodeURIComponent","toUTCString","path","domain","secure","join","decode","cookies","parts","shift","removeCookie","keydown","target","nodeName","elementType","tabs","$HFFModal","message","init","modal","closeHTML","position","overlayId","containerId","onOpen","open","onShow","onClose","close","dialog","title","overlay","fadeIn","container","h","fadeOut","alert","statusText","showError","contact","live","onkeydown","evt","kendoWindow","setOptions","bind","src","_chartTable","ck","testElement","createElement","before","focusin","fn","switchClasses","toAdd","toRemove","keyPressHandlerExist","handlerName","exist","keypress","handler","prototype","f","arguments","navigator","appName","charCode","valid","filteredValue","ch","charAt","returnValue","setAsNumeric","nDecimals","hasPoint","hasComa","disableEnglish","Key","mouseup","has","on","regex","match","opacity","VPCalculation","selected_skus","get_skus","products","prods","skus","psku","comma","get_total_vp","totalVP","item","vp","format_totals","get_total_ammount","totalAmmount","price","total","neg","abs","parseFloat","toFixed","saveAs","msSaveOrOpenBlob","view","userAgent","doc","get_URL","URL","webkitURL","save_link","createElementNS","can_use_save_link","externalHost","node","createEvent","initMouseEvent","dispatchEvent","webkit_req_fs","webkitRequestFileSystem","req_fs","requestFileSystem","mozRequestFileSystem","throw_outside","ex","setImmediate","force_saveable_type","fs_min_size","arbitrary_revoke_timeout","revoke","file","revoker","revokeObjectURL","chrome","dispatch","filesaver","event_types","concat","listener","call","FileSaver","blob","object_url","target_view","blob_changed","dispatch_all","fs_error","createObjectURL","new_tab","safari","readyState","DONE","abortable","func","apply","create_if_not_found","create","exclusive","INIT","download","webkitSlice","TEMPORARY","fs","root","getDirectory","dir","save","getFile","createWriter","writer","onwriteend","toURL","onerror","code","ABORT_ERR","forEach","write","abort","WRITING","NOT_FOUND_ERR","FS_proto","onwritestart","onprogress","onwrite","onabort","self","content","module","exports","define","amd","dfl","a","b","c","Error","hasOwnProp","hasOwnProperty","defaultParsingFlags","empty","unusedTokens","unusedInput","overflow","charsLeftOver","nullInput","invalidMonth","invalidFormat","userInvalidated","iso","printMsg","msg","moment","suppressDeprecationWarnings","warn","deprecate","firstTime","deprecateSimple","deprecations","padToken","count","leftZeroFill","ordinalizeToken","period","localeData","ordinal","Locale","Moment","skipOverflow","checkOverflow","copyConfig","_d","Duration","normalizedInput","normalizeObjectUnits","years","year","quarters","quarter","months","month","weeks","week","day","hour","minute","second","milliseconds","millisecond","_milliseconds","_days","_months","_data","_locale","_bubble","valueOf","to","from","prop","_isAMomentObject","_i","_f","_l","_strict","_tzm","_isUTC","_offset","_pf","momentProperties","absRound","number","ceil","floor","targetLength","forceSign","output","sign","positiveMomentsDifference","base","other","res","clone","add","isAfter","momentsDifference","makeAs","isBefore","createAdder","direction","dur","tmp","addOrSubtractDurationFromMoment","mom","isAdding","updateOffset","rawSetter","rawGetter","rawMonthSetter","isArray","input","Object","isDate","compareArrays","array1","array2","dontConvert","len","min","lengthDiff","diffs","toInt","normalizeUnits","units","lowered","unitAliases","camelFunctions","inputObject","normalizedProp","makeList","field","setter","index","getter","results","m","utc","set","push","argumentForCoercion","coercedNumber","isFinite","daysInMonth","UTC","getUTCDate","weeksInYear","dow","doy","weekOfYear","daysInYear","isLeapYear","_a","MONTH","DATE","YEAR","HOUR","MINUTE","SECOND","MILLISECOND","_overflowDayOfYear","isValid","_isValid","bigHour","normalizeLocale","chooseLocale","names","j","loadLocale","oldLocale","locales","hasModule","require","model","isMoment","local","removeFormattingTokens","makeFormatFunction","array","formattingTokens","formatTokenFunctions","Function","formatMoment","expandFormat","formatFunctions","invalidDate","replaceLongDateFormatTokens","longDateFormat","localFormattingTokens","lastIndex","getParseRegexForToken","token","strict","parseTokenOneDigit","parseTokenThreeDigits","parseTokenFourDigits","parseTokenOneToFourDigits","parseTokenSignedNumber","parseTokenSixDigits","parseTokenOneToSixDigits","parseTokenTwoDigits","parseTokenOneToThreeDigits","parseTokenWord","_meridiemParse","parseTokenOffsetMs","parseTokenTimestampMs","parseTokenTimezone","parseTokenT","parseTokenDigits","parseTokenOneOrTwoDigits","_ordinalParse","_ordinalParseLenient","regexpEscape","unescapeFormat","timezoneMinutesFromString","string","possibleTzMatches","tzChunk","parseTimezoneChunker","addTimeToArrayFromToken","datePartArray","monthsParse","_dayOfYear","parseTwoDigitYear","_isPm","isPM","_useUTC","weekdaysParse","_w","invalidWeekday","substr","dayOfYearFromWeekInfo","w","weekYear","weekday","temp","GG","W","E","_week","gg","dayOfYearFromWeeks","dayOfYear","dateFromConfig","currentDate","yearToUse","currentDateArray","makeUTCDate","getUTCMonth","_nextDay","makeDate","setUTCMinutes","getUTCMinutes","dateFromObject","now","getUTCFullYear","getFullYear","getMonth","makeDateFromStringAndFormat","ISO_8601","parseISO","parsedInput","tokens","skipped","stringLength","totalParsedInputLength","matched","p1","p2","p3","p4","makeDateFromStringAndArray","tempConfig","bestMoment","scoreToBeat","currentScore","NaN","score","isoRegex","exec","isoDates","isoTimes","makeDateFromString","createFromInputFallback","map","arr","makeDateFromInput","aspNetJsonRegex","obj","M","ms","setFullYear","setUTCFullYear","parseWeekday","substituteTimeAgo","withoutSuffix","isFuture","relativeTime","posNegDuration","as","args","relativeTimeThresholds","firstDayOfWeek","firstDayOfWeekOfYear","adjustedMoment","end","daysToDayOfWeek","daysToAdd","getUTCDay","makeMoment","invalid","preparse","pickBy","moments","dayOfMonth","unit","makeAccessor","keepTime","daysToYears","yearsToDays","makeDurationGetter","makeGlobal","shouldDeprecate","ender","oldGlobalMoment","globalScope","VERSION","global","aspNetTimeSpanJsonRegex","isoDurationRegex","isoFormat","unitMillisecondFactors","Milliseconds","Seconds","Minutes","Hours","Days","Months","Years","D","Q","DDD","dayofyear","isoweekday","isoweek","weekyear","isoweekyear","ordinalizeTokens","paddedTokens","MMM","monthsShort","MMMM","dd","weekdaysMin","ddd","weekdaysShort","dddd","weekdays","isoWeek","YY","YYYY","YYYYY","YYYYYY","gggg","ggggg","isoWeekYear","GGGG","GGGGG","isoWeekday","meridiem","A","H","S","SS","SSS","SSSS","Z","zone","ZZ","zoneAbbr","zz","zoneName","X","unix","lists","pop","DDDD","source","_monthsShort","monthName","_monthsParse","_longMonthsParse","_shortMonthsParse","_weekdays","_weekdaysShort","_weekdaysMin","weekdayName","_weekdaysParse","_longDateFormat","LTS","LT","L","LL","LLL","LLLL","isLower","_calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","sameElse","calendar","_relativeTime","future","past","mm","hh","MM","yy","pastFuture","_ordinal","postformat","_invalidDate","ret","parseIso","diffRes","isDuration","inp","defaultFormat","relativeTimeThreshold","threshold","limit","lang","values","defineLocale","_abbr","abbr","langData","flags","parseZone","toDate","toISOString","toArray","isDSTShifted","parsingFlags","invalidAt","keepLocalTime","_dateTzOffset","inputString","subtract","asFloat","daysAdjust","that","zoneDiff","startOf","time","humanize","fromNow","sod","isDST","getDay","endOf","inputMs","isSame","localAdjust","_changeInProgress","hasAlignedHourOffset","isoWeeksInYear","weekInfo","get","newLocaleData","getTimezoneOffset","dates","isoWeeks","toJSON","withSuffix","toIsoString","asSeconds","asMilliseconds","asMinutes","asHours","asDays","asWeeks","asMonths","asYears","ordinalParse","noGlobal","invSearch","Init","searchModel","observable","SearchModel","loadInvoice","loadErrorMessages","deleteInv","template","createOrderInv","displayInv","selectMyOrdersTemplate","dateMyOrdersTemplate","statusTemplate","isLoading","isLoaded","filterBy","filterValue","invoices","ListEmpty","selectedFilterItem","filterByValue","currentInvoiceId","memberInvoiceNumber","myOrdersFilter","index_Invoice_Action","myOrdersErrorText","errorMessages","statusUpdateText","ui","progress","dataHandler","filterCategoriesSource","DataSource","transport","read","statusDataSource","onStatusChange","Id","doSearch","invoiceFilterModel","From","To","SelectedFilterId","SelectedFilterValue","doClear","viewDeletePopUp","DisplayMemberInvoiceNumber","invoiceId","wnd","center","closeDeleteInvoice","enterCertWnd","DeleteInvoice","invtoDelete","createOrderRedirect","clickMyOrders","myOrdersDataSource","selectMyOrders","searchMyOrders","logic","filters","operator","contactsFilter","serverFiltering","serverPaging","pageSize","schema","Items","$values","TotalCount","requestStart","requestEnd","myOrdersDataBound","loadMyOrders","beforeSend","ExportToCSV","fileName","grid","csv","columns","fieldName","properties","Blob","invEdit","redirect","editModel","invoiceEditViewModel","loadInvoicedata","productquantityTemplate","productTotalPriceTemplate","deleteProductTemplate","selectContactTemplate","savedCartsTemplate","savedDateTemplate","productDescTemplate","validator","kendoValidator","rules","ProductValidation","invoice","InvoiceLines","messages","stateSelected","rootCategories","contacts","selectedRootCategoryItem","categories","productsFilter","savedCartsFilter","autocompleteData","savedCarts","selectedProduct","edit_InvoiceId","edit_OrderId","edit_CopyInvoiceId","statusSelected","memberAddressstateSelected","selectedAddress","selectedIdAddress","errorText","edit_Invoice_Action","productSearchErrorText","addProductErrorText","contactsErrorText","edit_Order_Source","edit_Invoice_Date","priceAlertText","memberTaxEdit","memberShippingEdit","IsEditTaxClickClicked","IsEditHandlingFeeClicked","validIndProducts","editHandlingFeeClick","editTaxClick","onMemberHandlingFeeChange","calculateMemberTotal","onMemberTaxChange","saveChanges","validate","invoiceModel","Value","Address","StateStatus","State","InvoiceDate","IsSuccess","setInvoiceData","InvoiceModel","ErrorCodeKey","validateInput","InvoiceShipToAddress","scrollTo","invoiceAddressClick","calculateBasePrice","invoiceTypeClick","InvoicePriceModel","showColumn","InvoicePrice","hideColumn","onInvoiceLinesDataBinding","sender","calculateTotalDue","DisplayShipping","DisplayCalculatedTax","DisplaySubtotal","cancel","ChangeClicked","memberAddressDataSource","onChangeAddress","AddressChanged","MemberAddress","onQuantityChange","autocompleteDataSource","parameterMap","startsWith","statesDataSource","contactsDataSource","discountsDataSource","createInvoiceFromOrderIdRequest","OrderId","Source","loadShippingAddress","onRootCategoryChange","loadCategories","pager","page","dataBound","expandRow","tbody","contactsDataBound","clickContacts","clickProducts","loadRootCategories","clickSavedCarts","loadSavedCarts","addProducts","skuAdded","Sku","Quantity","hideMessages","deleteProducts","onProductChange","when","then","selectCategory","addedProduct","async","selectContact","FirstName","LastName","PhoneNumber","PrimaryEmailAddress","StreetAddress1","City","PostalCode","Country","contactsWnd","selectSavedCarts","cartId","","savedCartsWnd","searchSavedCarts","SearchContacts","SearchProducts","invoiceCategoryFilter","RootCategoryId","Filter","onProdcutsPageChange","listview","onShippingPercentageChange","onShippingAmountChange","onDiscountPercentageChange","onDiscountDropDownPercentageChange","onStateChange","onDiscountAmountChange","onTaxPercentageChange","onTaxAmountChange","resetToDefaultValueClicked","launchShippingHandling","myWin","pUpCntr","class","appendTo","actions","draggable","resizable","visible","windCntr","renderProductsTemplate","Template","compile","MemberId","MemberInvoiceNumber","CreatedDate","CustomerId","InvoiceAddressModel","InvoiceContact","Email","Notes","Phone","PaymentAddress","TotalVolumePoints","Total","DisplayTotal","ShippingMethod","HasShippingAddress","MemberEmailAddress","MemberFirstName","MemberLastName","OrderSource","PricingType","IsFaceToFace","IsGdoMemberPricing","DisplayInvoiceStatus","DisplayInvoiceType","IsMemberTaxEdited","IsMemberHandlingFeeEdited","MakeMemberTaxZero","MakeMemberHandlingFeeZero","IsCustomerTaxEdited","IsCustomerShippingHandlingEdited","ResetCustomerTaxValue","Address1","Address2","County","InvoiceLineModel","ProductName","RetailPrice","TotalRetailPrice","EarnBase","StockingSku","ProductType","ProductCategory","VolumePoint","TotalEarnBase","TotalVolumePoint","YourPrice","DisplayRetailPrice","DisplayTotalRetailPrice","DisplayCurrencySymbol","DisplayTotalVp","DisplayYourPrice","FreightCharge","CalcDiscountedAmount","DiscountPercentage","DiscountAmount","CalcDiscountAmount","TaxPercentage","TaxAmount","ShippingPercentage","ShippingAmount","TotalDue","SubTotal","CalcShippingAmount","CalcTaxAmount","TotalDiscountedAmount","MemberTax","MemberFreight","MemberTotal","TotalYourPrice","Profit","ProfitPercentage","MemberStaticDiscount","MemberDiscount","DisplayDiscountedAmount","DisplayDiscount","DisplayTax","DisplayTotalDue","DisplayProfit","DisplayMemberTax","DisplayMemberFreight","DisplayMemberTotal","DisplayTotalYourPrice","DisplayProfitPercentage","invDisplay","displayModel","invoiceDisplayViewModel","display_InvoiceId","display_Invoice_Action","sendEmailClick","viewConfirmationEmailPopUp","confirmEmailClick","cancelEmailClick","editInvoiceClick","scope","deleteInvoiceClick","printInvoiceClick","copyInvoiceClick","createOrderClick","IsDisplayFreeShipping","HideTax","inventoryDetails","detailsModel","DetailsviewModel","loadInventory","details","dateAvailability","tooltipcomments","comments","cell","tooltipContent"],"mappings":"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","file":"vertical.js","sourcesContent":["function dynamicDividerLine_() {\r\n    var tabsbox = findControl2('3tabsbox');\r\n    var tab1col1 = findControl2('tab1-col1');\r\n    var tab1divider = findControl2('tab1-divider');\r\n    var tab1col2 = findControl2('tab1-col2');\r\n    if (tabsbox != null && tab1col1 != null) {\r\n        var tab1_col1_height = tab1col1.offsetHeight;\r\n        var tab1_divider_height = tab1divider.offsetHeight;\r\n        var tab1_col2_height = tab1col2.offsetHeight;\r\n\r\n        if ((tab1_col1_height > 130) || (tab1_col2_height > 130)) {\r\n            var tab1_tallest;\r\n            if (tab1_col1_height > tab1_col2_height) {\r\n                tab1_tallest = tab1_col1_height;\r\n                tab1divider.style.height = tab1_tallest + 'px';\r\n            }\r\n            else if (tab1_col2_height > tab1_col1_height) {\r\n                tab1_tallest = tab1_col2_height;\r\n                tab1divider.style.height = tab1_tallest + 'px';\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction adjustDividerLineTab2_() {\r\n    var tabsbox = findControl2('3tabsbox');\r\n    var tab2col1 = findControl2('tab2-col1');\r\n    var tab2divider = findControl2('tab2-divider');\r\n    var tab2col2 = findControl2('tab2-col2');\r\n\r\n    if (tabsbox && tab2col1 && tab2col2) {\r\n        var tab2_col1_height = tab2col1.offsetHeight;\r\n        var tab2_divider_height = tab2divider.offsetHeight;\r\n        var tab2_col2_height = tab2col2.offsetHeight;\r\n\r\n        if ((tab2_col1_height > 130) || (tab2_col2_height > 130)) {\r\n            var tab2_tallest;\r\n            if (tab2_col1_height > tab2_col2_height) {\r\n                tab2_tallest = tab2_col1_height;\r\n                tab2divider.style.height = tab2_tallest + 'px';\r\n            }\r\n            else if (tab2_col2_height > tab2_col1_height) {\r\n                tab2_tallest = tab2_col2_height;\r\n                tab2divider.style.height = tab2_tallest + 'px';\r\n            }\r\n        }\r\n    }\r\n\r\n    //Fix per defect 208190\r\n    if ($('#tab2-col1 [id$=\"pDetails\"]').html().trim()) {\r\n        //Do nothing\r\n    } else {\r\n        $('#tab2-col1 [id$=\"lbDetails\"]').css(\"display\", \"none\");\r\n        $('#tab2-col2').css(\"width\", \"auto\");\r\n    }\r\n\r\n}\r\n\r\nfunction adjustDividerLineTab3_() {\r\n    var tabsbox = findControl2('3tabsbox');\r\n    var tab3col1 = findControl2('tab3-col1');\r\n    var tab3divider = findControl2('tab3-divider');\r\n    var tab3col2 = findControl2('tab3-col2');\r\n\r\n    if (tabsbox && tab3col1 && tab3col2) {\r\n        var tab3_col1_height = tab3col1.offsetHeight;\r\n        var tab3_divider_height = tab3divider.offsetHeight;\r\n        var tab3_col2_height = tab3col2.offsetHeight;\r\n\r\n        if ((tab3_col1_height > 130) || (tab3_col2_height > 130)) {\r\n            var tab3_tallest;\r\n            if (tab3_col1_height > tab3_col2_height) {\r\n                tab3_tallest = tab3_col1_height;\r\n                tab3divider.style.height = tab3_tallest + 'px';\r\n            }\r\n            else if (tab3_col2_height > tab3_col1_height) {\r\n                tab3_tallest = tab3_col2_height;\r\n                tab3divider.style.height = tab3_tallest + 'px';\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction ShowWrap(id) {\r\n    var elem = findControl2('dynamic_wrap1');\r\n    if (elem != null) {\r\n        if ('dynamic_wrap1' != id) {\r\n            elem.style.display = 'none';\r\n        }\r\n        else {\r\n            elem.style.display = 'inline';\r\n        }\r\n    }\r\n\r\n    elem = findControl2('dynamic_wrap2');\r\n    if (elem != null) {\r\n        if ('dynamic_wrap2' != id) {\r\n            elem.style.display = 'none';\r\n        }\r\n        else {\r\n            elem.style.display = 'inline';\r\n        }\r\n    }\r\n\r\n    elem = findControl2('dynamic_wrap3');\r\n    if (elem != null) {\r\n        if ('dynamic_wrap3' != id) {\r\n            elem.style.display = 'none';\r\n        }\r\n        else {\r\n            elem.style.display = 'inline';\r\n        }\r\n    }\r\n}\r\n\r\nfunction findControl(id) {\r\n    return document.getElementById(id);\r\n}\r\n\r\nvar controlFound = null;\r\nfunction findControl2(id) {\r\n    controlFound = null;\r\n    var all = document.getElementsByTagName(\"div\");\r\n    var l = all.length;\r\n    var i;\r\n    for (i = 0; i < l; i++) {\r\n        if (all[i].id == id) {\r\n            controlFound = all[i];\r\n        }\r\n    }\r\n    return controlFound;\r\n}\r\n\r\nfunction switchingTab(id) {\r\n    hideAllWraps();\r\n    ShowWrap('dynamic_wrap' + id);\r\n\r\n    if (id == '1') {\r\n        $('#vis2').addClass('unFocusTab');\r\n        $('#vis3').addClass('unFocusTab');\r\n        $('#vis1').addClass('focusTab');\r\n        $('#vis2').removeClass('focusTab');\r\n        $('#vis3').removeClass('focusTab');\r\n        $('#vis1').removeClass('unFocusTab');\r\n    }\r\n    else if (id == '2') {\r\n        $('#vis1').addClass('unFocusTab');\r\n        $('#vis3').addClass('unFocusTab');\r\n        $('#vis2').addClass('focusTab');\r\n        $('#vis1').removeClass('focusTab');\r\n        $('#vis3').removeClass('focusTab');\r\n        $('#vis2').removeClass('unFocusTab');\r\n    }\r\n    else if (id == '3') {\r\n        $('#vis1').addClass('unFocusTab');\r\n        $('#vis2').addClass('unFocusTab');\r\n        $('#vis3').addClass('focusTab');\r\n        $('#vis1').removeClass('focusTab');\r\n        $('#vis2').removeClass('focusTab');\r\n        $('#vis3').removeClass('unFocusTab');\r\n    }\r\n}","// --------------------------------------------------------------------------------------------------------------------\r\n// <copyright file=\"ProductBySKU.js\" company=\"Herbalife\">\r\n//   Herbalife 2012\r\n// </copyright>\r\n// <summary>\r\n//   Used provide the client side functionallity for order by sku page.\r\n// </summary>\r\n// --------------------------------------------------------------------------------------------------------------------\r\n\r\n// Store the auto complete options.\r\nvar autoCompleteOptions = null;\r\n\r\n// Store the sku's list.\r\nvar skuList = null;\r\n\r\n$(function () {\r\n    setTimeout(InitializeControls, 1000);\r\n});\r\n\r\n// Initialize all products and quantity controls.\r\nfunction InitializeControls() {\r\n    if ($('#OrderBySkuMain .productInput').length > 0) {\r\n        // Fix\r\n        $('.onlyNumbers').addClass('qtyInput');\r\n\r\n        // Set numeric inputs.\r\n        $('.qtyInput').setNumeric2();\r\n\r\n        // Get product information list.\r\n        $.ajaxPost(\"GetAutoCompleteOptions\", \"{ }\", SetAutoCompleteOptions);\r\n\r\n        // Set the functionality to replace the text with the sku.\r\n        $('.productInput').blur(function () {\r\n            // Validate if the sku result is in the options list.\r\n            if (this.value) {\r\n                var isProduct = $.inArray(this.value, autoCompleteOptions) >= 0;\r\n                var isSku = $.inArray(this.value, skuList) >= 0;\r\n                if (isProduct || isSku) {\r\n                    // Leave only the sku.\r\n                    if (isProduct) {\r\n                        // $(this).val(this.value.substring(0, this.value.indexOf(' ')));\r\n                    }\r\n\r\n                    // Removing error image.\r\n                    $(this).parent().prev().find('img').addClass('hide');\r\n\r\n                    // Adding complete class.\r\n                    $(this).addClass('completeSKUInput');\r\n\r\n                    // Send row for review.\r\n                    IsRowComplete($(this), $(this).parent().parent().find('.qtyInput'), false);\r\n                } else {\r\n                    // If any autocomplete box is showed for peding user selection.\r\n                    if ($('.ui-autocomplete:visible').length == 0) {\r\n\r\n                        // SKU/Product does not exist.\r\n                        $('.errorList').html(noSKUFoundText.format(this.value.toUpperCase()));\r\n                        $(this).parent().prev().find('.gdo-error-message-icon').removeClass('hide');\r\n\r\n                        // Removing complete class.\r\n                        $(this).removeClass('completeSKUInput');\r\n\r\n                        // Adding error image.\r\n                        $(this).parent().prev().find('img').removeClass('hide');\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        // Removing complete class if focus.\r\n        $('.productInput').focus(function () {\r\n            $(this).removeClass('completeSKUInput');\r\n        });\r\n\r\n        // Send row for review.\r\n        $('.qtyInput').blur(function () {\r\n            IsRowComplete($(this).parent().parent().find('.productInput'), $(this), true);\r\n        });\r\n\r\n        // Find all inputs with errors and show them.\r\n        $('.productInput').each(function () {\r\n            if (this.value) {\r\n                $(this).parent().parent().removeClass('hide');\r\n                $(this).parent().prev().find('img').removeClass('hide');\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n// Set auto complete options for the product inputs.\r\nfunction SetAutoCompleteOptions(result) {\r\n    if (result && result.d) {\r\n        autoCompleteOptions = result.d.ProductsList;\r\n        skuList = result.d.SkuList;\r\n        InitializeAutocompleteOptions();\r\n    }\r\n}\r\n\r\n// Initialize autocomplete options.\r\nfunction InitializeAutocompleteOptions() {\r\n    if (autoCompleteOptions) {\r\n        $('.productInput').kendoAutoComplete({\r\n            dataSource: autoCompleteOptions,\r\n            filter: \"contains\",\r\n            placeholder: autoPlaceHolderText\r\n        });\r\n    }\r\n\r\n    // Offset for the current sku's (errored)\r\n    var visibleIndex = 0;\r\n    $.each($('.productInput'), function (i, v) {\r\n        if (v.value) {\r\n            //$('.productInput').eq(visibleIndex).val(v.value);\r\n            //$('.productInput').eq(visibleIndex).parent().parent().removeClass('hide');\r\n            //visibleIndex++;\r\n            //v.value = '';\r\n        }\r\n    });\r\n}\r\n\r\n// Review if the row is complete.\r\nfunction IsRowComplete(productSku, quantity, focusOnNext) {\r\n    var sku = productSku.eq(2).val() ? productSku.eq(2).val() : productSku.eq(1).val();\r\n    var qty = quantity.val();\r\n\r\n    // Not empty.\r\n    if (sku && qty) {\r\n        productSku.parent().parent().next().removeClass('hide');\r\n\r\n        // Focus on the next product input.\r\n        if (focusOnNext) {\r\n            productSku.parent().parent().next().find('.productInput').focus();\r\n        }\r\n    }\r\n}","$(document).ready(function (event) {\r\n    // Add viewport content tag, to fix Zoom in and Zoom out when click on button\r\n    $('meta[name=\"viewport\"]').attr('content', 'width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0');\r\n});\r\n\r\n$(document).ready(function () {\r\n\r\n    var oldTxtCP1 = '';\r\n    var oldTxtCP2 = '';\r\n    var searchingText = '';\r\n\r\n    $(document).keydown(function (e) {\r\n        var element = (e != null) ? e.target.nodeName.toLowerCase() : 'null';\r\n        var elementType = (e != null) ? e.target.type : 'null';\r\n\r\n        if (element != 'input' && element != 'textarea' && elementType != 'text') {\r\n            if (e.keyCode === 8) {\r\n                return false;\r\n            }\r\n        }\r\n    });\r\n\r\n    if ($(\"ul.skin2\").length != 0) (\"ul.skin2\").tabs(\"div.skin2 > div\");\r\n\r\n    // HFF Modal =========================================\r\n    $HFFModal = {\r\n        message: null,\r\n        init: function () {\r\n\r\n            $(\"#modal-container\").modal({\r\n                closeHTML: \"<a href='#' title='Close' class='modal-close'>x</a>\",\r\n                position: [\"15%\", ],\r\n                overlayId: 'modal-overlay',\r\n                containerId: 'modal-container',\r\n                onOpen: $HFFModal.open,\r\n                onShow: $HFFModal.show,\r\n                onClose: $HFFModal.close\r\n            });\r\n\r\n        },\r\n        open: function (dialog) {\r\n\r\n            var title = $('#modal-container .modal-title').html();\r\n            $('#modal-container .modal-title').html('Loading...');\r\n\r\n            dialog.overlay.fadeIn(200, function () {\r\n                dialog.container.fadeIn(200, function () {\r\n                    dialog.data.fadeIn(200, function () {\r\n\r\n                        var h = $('#modal-container .modal-innerContent').height();\r\n                        ;\r\n\r\n                        $('#modal-container .modal-content').animate(\r\n                            {\r\n                                height: h\r\n                            }, function () {\r\n                                $('#modal-container .modal-title').html(title);\r\n                                $('#modal-container .modal-innerContent').fadeIn(200, function () {\r\n\r\n                                }); // $('#contact-container form').fadeIn(200, function () \r\n                            });\r\n                    });\r\n                });\r\n            });\r\n        },\r\n        show: function (dialog) {\r\n        },\r\n        close: function (dialog) {\r\n            $('#modal-container .modal-innerContent').fadeOut();\r\n            $('#modal-container .modal-title').html('Thank you...');\r\n            $('#modal-container .modal-content').animate(\r\n                {\r\n                    height: 40\r\n                }, function () {\r\n                    dialog.data.fadeOut(200, function () {\r\n                        dialog.container.fadeOut(200, function () {\r\n                            dialog.overlay.fadeOut(200, function () {\r\n                                $.modal.close();\r\n                            }); // dialog.overlay.fadeOut(200, function () \r\n                        }); // dialog.container.fadeOut(200, function () \r\n                    }); // dialog.data.fadeOut(200, function () \r\n                });\r\n        }, // Close =============\r\n        error: function (xhr) {\r\n            alert(xhr.statusText);\r\n        },\r\n        showError: function () {\r\n            $('#modal-container .error-message')\r\n                .html($('<div class=\"contact-error\"></div>').append(contact.message))\r\n                .fadeIn(200);\r\n        }\r\n    };\r\n    // End HFF Modal =========================================      \r\n\r\n    // Trigger cancel behavior when click outside modal window\r\n    $('[id$=\"backgroundElement\"]').live('click', function () {\r\n        if ($('.gdo-popup [id$=\"btnCancel\"]:visible')[0] != undefined) {\r\n            $('.gdo-popup [id$=\"btnCancel\"]:visible')[0].click();\r\n        }\r\n    });\r\n    document.onkeydown = function (evt) {\r\n        evt = evt || window.event;\r\n        if (evt.keyCode == 27) { // ESC\r\n            if ($('.gdo-popup [id$=\"btnCancel\"]:visible')[0] != undefined) {\r\n                $('.gdo-popup [id$=\"btnCancel\"]:visible')[0].click();\r\n            }\r\n        }\r\n    };\r\n\r\n    if ($(\"#zoomIntoProduct\").length > 0) {\r\n        $(\"#zoomIntoProduct\").kendoWindow();\r\n        var dialog = $(\"#zoomIntoProduct\").data(\"kendoWindow\");\r\n        dialog.setOptions({\r\n            width: 500,\r\n        });   \r\n\r\n    }\r\n\r\n    if ($(\"#printThisPage\").length > 0) {\r\n        $(\"#printThisPage\").kendoWindow();\r\n        var dialog = $(\"#printThisPage\").data(\"kendoWindow\");\r\n        dialog.setOptions({\r\n            width: 560,\r\n        });\r\n    }\r\n    $(\".btnPrintThisPage\").click(function (e) {\r\n        e.preventDefault();\r\n        if ($(\"#printThisPage\").length > 0) {\r\n            $(\"#printThisPage\").kendoWindow().data(\"kendoWindow\").close();\r\n        }\r\n    });\r\n    if ($.cookie(\"RENDERING_LOCALE\") == \"zh_CN\") {\r\n\r\n        // === China fix, Simulate Yes click if user clicks on overlay\r\n        $('[id$=\"UpdatePanelTermCondition\"] [id$=\"backgroundElement\"]').live(\"click\", function () {\r\n            $('div[id$=\"PnlTermCondition\"] a[id$=\"btnTermConditionYes\"]')[0].click();\r\n        });\r\n\r\n        // === Freeze Pricelist Header Cols\r\n        $(window).bind('scroll', function () {\r\n            if (is_page(\"pricelist\")) {\r\n                //if (responsiveMode != true) {\r\n                $(window).bind('scroll', function () {\r\n                    freeze_header_cols();\r\n                });\r\n                //}\r\n            }\r\n        });\r\n        // === /Freeze Pricelist Header Cols\r\n\r\n\r\n    }\r\n\r\n    $('.br select[id$=\"ddlCardType\"]').live('change', function () {\r\n        var _this = this, src = \"\";\r\n        if ($(_this).val() == \"Selecione\") {\r\n            $(\"img[id$='ccBranding']\").hide();\r\n            return;\r\n        }\r\n        \r\n        src = \"Images/payment/\" + $(_this).val() + \".jpg\";\r\n        $(\"img[id$='ccBranding']\").attr(\"src\", src);\r\n        $(\"img[id$='ccBranding']\").show();\r\n    });\r\n\r\n    $('#showSizeChartLink').live(\"click\", function(e) {\r\n        e.preventDefault();\r\n\r\n        var _this = $(this);\r\n        var _chartTable = $('[id$=\"sizeChartTable\"]');\r\n\r\n        if (_chartTable.hasClass('opened')) {\r\n\r\n            _this.find('.arrow').toggleClass('up');\r\n            _chartTable.slideUp().removeClass('opened');\r\n            if (_this.hasClass('grandpa')) { eraseCookie('showcat'); }\r\n\r\n        } else {\r\n\r\n            _this.find('.arrow').toggleClass('up');\r\n            _chartTable.slideDown().addClass('opened');\r\n\r\n        }\r\n    });\r\n\r\n    // Workaround to add footer-links class\r\n    $('#hrblSiteWrapper > footer > nav').attr('class', 'footer-links');\r\n\r\n    $('.grandpa').click(function (e) {\r\n        \r\n        if (is_page(\"productdetail\") || is_page(\"catalog\")) { return false; }\r\n\r\n        var _this = this;\r\n        var ck = $(_this).attr('ck');\r\n\r\n        if (ck == \"showcat\")\r\n        {\r\n            eraseCookie('showapp');\r\n            createCookie(ck, 'true', 7)\r\n        }\r\n        else if (ck == \"showapp\")\r\n        {\r\n            eraseCookie('showcat');\r\n            createCookie(ck, 'true', 7)\r\n        }\r\n    });\r\n\r\n    // Dirty fix to hide top Menu on responsive mode\r\n    if ($.cookie(\"RENDERING_LOCALE\") == \"he_IL\") {\r\n        $(\"#mobile-main-nav\").remove();\r\n    }\r\n\r\n    $(\".toggler-abbr\").live(\"click\", function () {\r\n\r\n        if ($(\".togglable-abbr\").is(\":visible\")) {\r\n            $(\".togglable-abbr\").slideUp(400, \"swing\", function () {\r\n                $(\"[id$='txtStreet']\").focus();\r\n            });\r\n        } else {\r\n            $(\".togglable-abbr\").slideDown();\r\n        }\r\n        \r\n    });\r\n\r\n    //*** Placeholders for I8 and IE9\r\n    var testElement = document.createElement('input');\r\n    if (!('placeholder' in testElement)) {\r\n        $(\"input[placeholder], textarea[placeholder]\").each(function () {\r\n            if ($(this).attr(\"type\") == \"password\")\r\n                $(this).before('<label for=\"' + $(this).attr(\"id\") + '\" class=\"placeholder\">' + $(this).attr('placeholder') + '</label>');\r\n            else\r\n                $(this).val($(this).attr('placeholder'));\r\n        });\r\n\r\n        $(\"input[placeholder], textarea[placeholder]\").focusin(function () {\r\n            if ($(this).attr(\"type\") == \"password\") {\r\n                if ($(this).val() == \"\") $('label[for=\"' + $(this).attr(\"id\") + '\"]').hide();\r\n            }\r\n            else\r\n                if ($(this).val() == $(this).attr('placeholder')) $(this).val('');\r\n        });\r\n\r\n        $(\"input[placeholder], textarea[placeholder]\").blur(function () {\r\n            if ($(this).val() == '') {\r\n                if ($(this).attr(\"type\") == \"password\")\r\n                    $('label[for=\"' + $(this).attr(\"id\") + '\"]').show();\r\n                else\r\n                    $(this).val($(this).attr('placeholder'));\r\n            }\r\n        });\r\n\r\n        $(\"[type=password]\").bind('propertychange change', function () {\r\n            if ($(\"[type=password]\").val() == '')\r\n                $('label[for=\"pin\"]').show();\r\n            else\r\n                $('label[for=\"pin\"]').hide();\r\n        });\r\n    }\r\n\r\n});\r\n\r\nfunction CheckNumeric(e, ctrl) {\r\n    var keynum;\r\n    if (!e)\r\n        var e = window.event\r\n    if (e.keyCode) keynum = e.keyCode;\r\n    else if (e.which) keynum = e.which;\r\n\r\n    // take only numbers\r\n    if (keynum > 57 || keynum < 48) {\r\n        e.cancelBubble = true;\r\n        if (e.keyCode) // IE\r\n        {\r\n            e.keyCode = 2;\r\n        }\r\n        else if (e.which) {\r\n            if (e.preventDefault) e.preventDefault();\r\n            if (e.stopPropagation) e.stopPropagation();\r\n\r\n        }\r\n    }\r\n}\r\n\r\nfunction CheckAreaPlusPhone(e, ctrlArea, ctrlPhone, totalLength) {\r\n    var elementAreaCode = document.getElementById(ctrlArea);\r\n    var elementPhone = document.getElementById(ctrlPhone);\r\n    if (elementAreaCode != null && elementPhone != null) {\r\n        if (elementAreaCode.value.length + elementPhone.value.length >= totalLength) {\r\n            e.cancelBubble = true;\r\n            if (window.event) {\r\n                e.keyCode = 0;\r\n            }\r\n            else if (e.which) {\r\n                e.which = 0;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction PickupSelected(ctrl) {\r\n    var items = document.getElementsByTagName('input');\r\n    for (i = 0; i < items.length; i++) {\r\n        if (items[i].type == \"radio\") {\r\n            if (items[i].name.indexOf(\"rbSelected\") != -1) {\r\n                if (items[i] != ctrl) {\r\n                    items[i].checked = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nfunction CheckChanges(textbox, selector) {\r\n    var changed = false;\r\n\r\n    if (selector === '.txtPostCode2') {\r\n        oldTxtCP2 = $(selector).val();\r\n        if (oldTxtCP1 != $(textbox).val()) {\r\n            changed = true;\r\n        }\r\n        oldTxtCP1 = $(textbox).val();\r\n    }\r\n    else {\r\n        oldTxtCP1 = $(selector).val();\r\n        if (oldTxtCP2 != $(textbox).val()) {\r\n            changed = true;\r\n        }\r\n        oldTxtCP2 = $(textbox).val();\r\n    }\r\n\r\n\r\n    if (($(selector).val() && $(textbox).val() && changed) ||\r\n        (!$(selector).val() && !$(textbox).val())) {\r\n        javascript: __doPostBack(textbox.name, '');\r\n    }\r\n}\r\n\r\nfunction AllowOnlyNumbers2(control) {\r\n    $(control).val($(control).val().replace(/[^\\d]/g, ''));\r\n};\r\n\r\nfunction AllowOnlyNumbers(event) {\r\n    // Allow only backspace and delete\r\n    if (event.keyCode == 46 || event.keyCode == 8) {\r\n        // let it happen, don't do anything\r\n    }\r\n    else {\r\n        // Ensure that it is a number and stop the keypress\r\n        if (event.keyCode < 48 || event.keyCode > 57) {\r\n            event.preventDefault();\r\n        }\r\n    }\r\n};\r\n\r\nfunction EnableMasterScrolling() {\r\n    $(\"body\").css(\"overflow\", \"auto\");\r\n};\r\n\r\nfunction DisableMasterScrolling() {\r\n    $(\"body\").css(\"overflow\", \"hidden\");\r\n};\r\n\r\n$.fn.switchClasses = function (toAdd, toRemove) {\r\n    this.each(function () {\r\n        $(this).removeClass(toRemove).addClass(toAdd);\r\n    });\r\n},\r\n\r\n// If a handler exist on the keypress event.\r\n$.fn.keyPressHandlerExist = function (handlerName) {\r\n    var exist = false;\r\n    this.each(function () {\r\n        if (handlerName && $(this).data('events') && $(this).data('events').keypress) {\r\n            $.each($(this).data('events').keypress, function (i, handler) {\r\n                if (handler.handler.toString().indexOf(handlerName) >= 0) {\r\n                    exist = true;\r\n                }\r\n            });\r\n        }\r\n    });\r\n    return exist;\r\n}\r\n\r\n// String.Format equivalent from c#.\r\nString.prototype.format = String.prototype.f = function () {\r\n    var s = this,\r\n        i = arguments.length;\r\n\r\n    while (i--) {\r\n        s = s.replace(new RegExp('\\\\{' + i + '\\\\}', 'gm'), arguments[i]);\r\n    }\r\n    return s;\r\n}\r\n\r\n// Allow only numeric characters.\r\n$.fn.setNumeric2 = function (event) {\r\n    this.each(function () {\r\n        $(this).keypress(function (event) {\r\n            var key = '';\r\n            // If browser is FireFox.\r\n            if (navigator.appName == \"Netscape\") {\r\n                key = String.fromCharCode(event.charCode);\r\n            }\r\n            else {\r\n                key = String.fromCharCode(event.keyCode);\r\n            }\r\n\r\n            var valid = false;\r\n            var filter = /[0-9]+/;\r\n            if (filter.test(key)) {\r\n                valid = true;\r\n            }\r\n\r\n            var filteredValue = $(this).val();\r\n            for (var i = $(this).val().length - 1; i >= 0; i--) {\r\n                var ch = $(this).val().charAt(i);\r\n                if (!filter.test(ch)) {\r\n                    filteredValue = filteredValue.substring(0, i) + filteredValue.substring(i + 1);\r\n                }\r\n            }\r\n            $(this).val(filteredValue);\r\n\r\n            if (event && !valid) {\r\n                if (event.preventDefault) {\r\n                    event.preventDefault();\r\n                }\r\n                else {\r\n                    event.returnValue = false;\r\n                }\r\n            }\r\n        });\r\n        $(this).blur(function (event) {\r\n            var filter = /[0-9]+/;\r\n            var filteredValue = $(this).val();\r\n            for (var i = $(this).val().length - 1; i >= 0; i--) {\r\n                var ch = $(this).val().charAt(i);\r\n                if (!filter.test(ch)) {\r\n                    filteredValue = filteredValue.substring(0, i) + filteredValue.substring(i + 1);\r\n                }\r\n            }\r\n            $(this).val(filteredValue);\r\n        });\r\n    });\r\n},\r\n\r\n// Set numeric textbox.\r\n$.fn.setAsNumeric = function (nDecimals) {\r\n    this.each(function () {\r\n        $(this).keypress(function (event) {\r\n            var key = '';\r\n\r\n            // If browser is FireFox.\r\n            if (navigator.appName == \"Netscape\") {\r\n                key = String.fromCharCode(event.charCode);\r\n            } else {\r\n                key = String.fromCharCode(event.keyCode);\r\n            }\r\n            var valid = true;\r\n\r\n            var hasPoint = $(this).val().indexOf('.') >= 0;\r\n            var hasComa = $(this).val().indexOf(',') >= 0;\r\n\r\n            // If it has already a decimals separator.\r\n            if ((key === '.' || key === ',') && (hasPoint || hasComa)) {\r\n                valid = false;\r\n            }\r\n\r\n            if (event && !valid) {\r\n                if (event.preventDefault) {\r\n                    event.preventDefault();\r\n                } else {\r\n                    event.returnValue = false;\r\n                }\r\n            }\r\n\r\n        });\r\n    });\r\n},\r\n\r\n// Allow only hebrew characters.\r\n$.fn.disableEnglish = function (event) {\r\n    this.each(function () {\r\n        $(this).keypress(function (event) {\r\n            var Key = '';\r\n            // If browser is FireFox.\r\n            if (navigator.appName == \"Netscape\") {\r\n                Key = String.fromCharCode(event.charCode);\r\n            }\r\n            else {\r\n                Key = String.fromCharCode(event.keyCode);\r\n            }\r\n\r\n            var valid = true;\r\n            var filter = /[a-zA-Z]+/;\r\n            if (filter.test(Key)) {\r\n                valid = false;\r\n            }\r\n            $(control).val($(control).val().replace(/[a-zA-Z]+/, ''));\r\n            if (event && !valid) {\r\n                if (event.preventDefault) {\r\n                    event.preventDefault();\r\n                }\r\n                else {\r\n                    event.returnValue = false;\r\n                }\r\n            }\r\n        });\r\n        $(this).blur(function (event) {\r\n            var Key = '';\r\n            // If browser is FireFox.\r\n            if (navigator.appName == \"Netscape\") {\r\n                Key = String.fromCharCode(event.charCode);\r\n            }\r\n            else {\r\n                Key = String.fromCharCode(event.keyCode);\r\n            }\r\n\r\n            var valid = true;\r\n            var filter = /[a-zA-Z]+/;\r\n            if (filter.test(Key)) {\r\n                valid = false;\r\n            }\r\n            $(control).val($(control).val().replace(/[a-zA-Z]+/, ''));\r\n            if (event && !valid) {\r\n                if (event.preventDefault) {\r\n                    event.preventDefault();\r\n                }\r\n                else {\r\n                    event.returnValue = false;\r\n                }\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\n// Legacy javascript code.\r\nfunction checkSKUChar(e, ctrl) {\r\n    var keychar;\r\n\r\n    if (!e) {\r\n        e = window.event;\r\n    }\r\n\r\n    keychar = String.fromCharCode(e.keyCode || e.which);\r\n\r\n    if (!/^ *[0-9a-zA-Z]+ *$/.test(keychar)) {\r\n        e.cancelBubble = true;\r\n        if (e.keyCode) // IE\r\n        {\r\n            e.keyCode = 2;\r\n        }\r\n        else if (e.which) {\r\n            if (e.preventDefault) e.preventDefault();\r\n            if (e.stopPropagation) e.stopPropagation();\r\n\r\n        }\r\n    }\r\n}\r\n\r\n//Timer\r\nfunction cronometro() {\r\n    var today = new Date();\r\n    var help_date;\r\n\r\n    if ($(\"#ctl00_ctl00_PageHeaderArea_hTargetDate\").length > 0) {\r\n        help_date = document.getElementById(\"ctl00_ctl00_PageHeaderArea_hTargetDate\").value;\r\n    } else {\r\n\r\n        if ($(\"#PageHeaderArea_hTargetDate\").length > 0) {\r\n            help_date = document.getElementById(\"PageHeaderArea_hTargetDate\").value;\r\n        }\r\n\r\n    }\r\n       \r\n\r\n    if (help_date) {\r\n        Sys.WebForms.PageRequestManager.getInstance().add_endRequest(cronometro);\r\n        // Split help_date to obtain target_date parameters\r\n        var YearEOM = help_date.split(' ')[0];\r\n        var MonthEOM = help_date.split(' ')[1];\r\n        var DayEOM = help_date.split(' ')[2];\r\n        var HourEOM = help_date.split(' ')[3];\r\n        var MinEOM = help_date.split(' ')[4];\r\n        var SecEOM = help_date.split(' ')[5];\r\n\r\n        // get tag element\r\n        var target_date = new Date(YearEOM, MonthEOM - 1, DayEOM, HourEOM, MinEOM, SecEOM);\r\n        //var target_date = new Date(today.getFullYear(), today.getMonth() + 1, 0, 23, 59);\r\n\r\n        // variables for time units\r\n        var days, hours, minutes, seconds;\r\n        var timer;\r\n        var counterlbl = document.getElementById(\"ctl00_ctl00_PageHeaderArea_counter\");\r\n        var countdown_sec = document.getElementById(\"countdown_sec\");\r\n        var countdown_min = document.getElementById(\"countdown_min\");\r\n        var countdown_hr = document.getElementById(\"countdown_hr\");\r\n        var countdown_dy = document.getElementById(\"countdown_dy\");\r\n\r\n        // Split timtest to obtain serverTime parameters        \r\n        if ($(\"#ctl00_ctl00_PageHeaderArea_hcurrentDate\").length > 0) {\r\n            var timtest = document.getElementById(\"ctl00_ctl00_PageHeaderArea_hcurrentDate\").value;\r\n        } else {\r\n            var timtest = document.getElementById(\"PageHeaderArea_hcurrentDate\").value;\r\n        }\r\n        var YearServer = timtest.split(' ')[0];\r\n        var MonthServer = timtest.split(' ')[1];\r\n        var DayServer = timtest.split(' ')[2];\r\n        var HourServer = timtest.split(' ')[3];\r\n        var MinServer = timtest.split(' ')[4];\r\n        var SecServer = timtest.split(' ')[5];\r\n\r\n        var serverTime = new Date(YearServer, MonthServer - 1, DayServer, HourServer, MinServer, SecServer);\r\n        var clientNow = new Date().getTime();\r\n        var endTime = target_date - serverTime + clientNow;\r\n\r\n        // update the tags with id \"countdown_\" every 1 second\r\n        timer = setInterval(function () {\r\n\r\n            // find the amount of \"seconds\" between now and target\r\n            var current_date = new Date().getTime();\r\n            var seconds_left = (endTime - new Date()) / 1000;\r\n\r\n            // do some time calculations\r\n            days = parseInt(seconds_left / 86400);\r\n            seconds_left = seconds_left % 86400;\r\n\r\n            hours = parseInt(seconds_left / 3600);\r\n            seconds_left = seconds_left % 3600;\r\n\r\n            minutes = parseInt(seconds_left / 60);\r\n            seconds = parseInt(seconds_left % 60);\r\n\r\n            if (days <= 0 && hours <= 0 && minutes <= 0 && seconds <= 0) {\r\n                //countdown_sec.innerHTML = \"00\";\r\n                countdown_min.innerHTML = \"00\";\r\n                countdown_hr.innerHTML = \"00\";\r\n                countdown_dy.innerHTML = \"00\";\r\n                counterlbl.className = counterlbl.className + \" hide\";\r\n\r\n                clearInterval(timer);\r\n            }\r\n            else {\r\n                // format countdown string + set tag value\r\n\r\n                //if (seconds < 10) {\r\n                //    countdown_sec.innerHTML = \"0\" + seconds;\r\n                //}\r\n                //else {\r\n                //    countdown_sec.innerHTML = seconds;\r\n                //}\r\n                if (minutes < 10) {\r\n                    countdown_min.innerHTML = \"0\" + minutes;\r\n                }\r\n                else {\r\n                    countdown_min.innerHTML = minutes;\r\n                }\r\n                if (hours < 10) {\r\n                    countdown_hr.innerHTML = \"0\" + hours;\r\n                }\r\n                else {\r\n                    countdown_hr.innerHTML = hours;\r\n                }\r\n                if (days < 10) {\r\n                    countdown_dy.innerHTML = \"0\" + days;\r\n                }\r\n                else {\r\n                    countdown_dy.innerHTML = days;\r\n                }\r\n            }\r\n        }, 1000);\r\n    }\r\n\r\n}\r\n\r\n/* Fix per defect 117491 */\r\nfunction cookieEater() {\r\n    eraseCookie('DUPCHECKWITHREFID_STATUS');\r\n    eraseCookie('BNES_DUPCHECKWITHREFID_STATUS'); /* Fix per defects 175887, 175969 */\r\n\r\n    if (document.cookie.indexOf(\"DUPCHECKWITHREFID_STATUS\") >= 0) {\r\n        // Cookie still exist    \r\n        $(document).ready(function () {\r\n            $.cookie('DUPCHECKWITHREFID_STATUS', null);\r\n        });\r\n    }\r\n\r\n}\r\n\r\nfunction createCookie(name, value, days) {\r\n    if (days) {\r\n        var date = new Date();\r\n        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\r\n        var expires = \"; expires=\" + date.toGMTString();\r\n    }\r\n    else var expires = \"\";\r\n    document.cookie = name + \"=\" + value + expires + \"; path=/\";\r\n}\r\n\r\nfunction eraseCookie(name) {\r\n    createCookie(name, \"\", -1);\r\n}\r\n\r\n/* Hide Product Catalog*/\r\nfunction toggleCatalog() {\r\n    var pathname = window.location.pathname;\r\n\r\n    if (is_page(\"productdetail\") || is_page(\"catalog\")) {\r\n\r\n        $('.toggle-child').hide();\r\n        $('.grandpa')\r\n            .addClass('toggle-parent')\r\n            .find('.arrow')\r\n            .removeClass('hide');\r\n\r\n        if (document.cookie.indexOf(\"showcat\") >= 0) {\r\n\r\n            $('[id$=\"toggleMe\"]')\r\n                .show()\r\n                .addClass('opened');\r\n\r\n            $('[id$=\"toggleMe\"]')\r\n                .prev()\r\n                .find(\".arrow\")\r\n                .toggleClass(\"up icon-minus-ln-1\");\r\n\r\n        }\r\n        if (document.cookie.indexOf(\"showapp\") >= 0) {\r\n\r\n            $('[id$=\"toggleMeApparel\"]')\r\n                .show()\r\n                .addClass('opened');\r\n\r\n            $('[id$=\"toggleMeApparel\"]')\r\n                .prev()\r\n                .find(\".arrow\")\r\n                .toggleClass(\"up icon-minus-ln-1\");\r\n\r\n\r\n        }\r\n        // Keep sub cat opened\r\n        setTimeout(keepSubcatOpened, 250);\r\n\r\n        $('.toggle-parent.grandpa').click(function (e) {\r\n\r\n            var _this = $(this);\r\n            var _child = $(_this).next('.toggle-child');\r\n            var _opened = _this.parent().find('.opened');\r\n\r\n            // Close opened list\r\n            if (_opened.length && !_child.is(_opened) && !_this.hasClass('grandpa')) {\r\n\r\n                _opened.prev().find('.arrow').toggleClass('up icon-minus-ln-1');\r\n                _opened.removeClass('opened').slideUp();\r\n\r\n            }\r\n\r\n            if (_child.hasClass('opened')) {\r\n\r\n                _this.find('.arrow').toggleClass('up icon-minus-ln-1');\r\n                _child.slideUp().removeClass('opened');\r\n\r\n                if (_this.hasClass('grandpa') && _this.hasClass('catalog')) { eraseCookie('showcat'); }\r\n                else if (_this.hasClass('grandpa') && _this.hasClass('apparel')) { eraseCookie('showapp'); }\r\n\r\n            } else {\r\n\r\n                _this.find('.arrow').toggleClass('up icon-minus-ln-1');\r\n                _child.slideDown().addClass('opened');\r\n\r\n                if (_this.hasClass('grandpa') && _this.hasClass('catalog')) { createCookie('showcat', 'true', 7); }\r\n                else if (_this.hasClass('grandpa') && _this.hasClass('apparel')) { createCookie('showapp', 'true', 7); }\r\n            }\r\n\r\n        });\r\n        $('.toggle-parent .arrow').click(function (e) {\r\n\r\n            var _this = $(this);\r\n            var _child = $(_this).parent().next('.toggle-child');\r\n            var _opened = _this.parent().parent().find('.opened');\r\n\r\n            if (_this.parent().hasClass('grandpa')) { return; }\r\n\r\n            // Close opened list\r\n            if (_opened.length && !_child.is(_opened) && !_this.parent().hasClass('grandpa')) {\r\n\r\n                _opened.prev().find('.arrow').toggleClass('up icon-minus-ln-1');\r\n                _opened.removeClass('opened').slideUp();\r\n\r\n    }\r\n\r\n            if (_child.hasClass('opened')) {\r\n\r\n                _this.parent().find('.arrow').toggleClass('up icon-minus-ln-1');\r\n                _child.slideUp().removeClass('opened');\r\n\r\n                if (_this.parent().hasClass('grandpa') && _this.parent().hasClass('catalog')) { eraseCookie('showcat'); }\r\n                else if (_this.parent().hasClass('grandpa') && _this.parent().hasClass('apparel')) { eraseCookie('showapp'); }\r\n\r\n            } else {\r\n\r\n                _this.parent().find('.arrow').toggleClass('up icon-minus-ln-1');\r\n                _child.slideDown().addClass('opened');\r\n\r\n                if (_this.parent().hasClass('grandpa') && _this.parent().hasClass('catalog')) { createCookie('showcat', 'true', 7); }\r\n                else if (_this.parent().hasClass('grandpa') && _this.parent().hasClass('apparel')) { createCookie('showapp', 'true', 7); }\r\n}\r\n\r\n        });\r\n    }\r\n}\r\nfunction keepSubcatOpened() {\r\n    if ($('li.toggle-parent.active').find('.icon.arrow').length > 0) {\r\n        $('li.toggle-parent.active:not(.grandpa)').find('.icon.arrow').click();\r\n}\r\n    if ($('li.active:not(.toggle-parent)').length > 0 && $('li.active:not(.toggle-parent)').parent().hasClass(\"opened\") == false) {\r\n        $('li.active').parent().prev().find('.icon.arrow').click();\r\n    }\r\n}\r\nfunction RemovePopup(event) {\r\n    $('#ctl00_ctl00_ContentArea_uchrblMessageBoxControl2_popup_MessageBox_backgroundElement').hide();\r\n    $('#ctl00_ctl00_ContentArea_uchrblMessageBoxControl2_pnlMessageBox').hide();\r\n    $(\"div[id$='MessageBox_backgroundElement']\").hide();\r\n    $(\"div[id$='pnlMessageBox']\").hide();\r\n}\r\n\r\n$(document).mouseup(function (e) {\r\n    var container = $(\"div[id$='pnlMessageBox']\");\r\n\r\n    if (!container.is(e.target) // if the target of the click isn't the container...\r\n        && container.has(e.target).length === 0) // ... nor a descendant of the container\r\n    {\r\n        container.hide();\r\n        $(\"div[id$='_popup_MessageBox_backgroundElement']\").hide();\r\n    }\r\n});\r\n/* Fix per defect 129848 */\r\n$(document).ready(function () {\r\n    //only numbers for inputs use class \"onlyNumbers\"\r\n    $('body').on('input keydown keyup', '.onlyNumbers', function (e) {\r\n        regex = /[^0-9]/g;\r\n        if (this.value.match(regex)) {\r\n            this.value = this.value.replace(regex, '');\r\n        }\r\n    });\r\n});\r\n\r\n$(document).ready(function () {\r\n    cronometro();\r\n\r\n    var cookieLocal = $.cookie(\"RENDERING_LOCALE\");\r\n    if (cookieLocal == \"zh_CN\") {\r\n        $(\"a[name='checkoutButton']\").live('click', function () {\r\n            $(\"div[id$='updateProgressDiv']\").css({ \"background-color\": \"gray\", \"opacity\": \"0.75\" });\r\n        });\r\n    } else if ((cookieLocal == \"ru_BY\") || (cookieLocal == \"ru_KZ\")) {\r\n        $('input[type=radio]').live('click', function () {\r\n            if ($(this).val() == 2) {\r\n                $(\"div.checkout-logos\").css({ \"display\": \"inherit\" });\r\n            }\r\n            else {\r\n                $(\"div.checkout-logos\").css({ \"display\": \"none\" });\r\n            }\r\n        });\r\n\r\n        /* Task 205859 */\r\n        if (cookieLocal == \"ru_BY\") {\r\n            setInterval(function () {\r\n                $(\"input[id$='chkAcknowledgeTransaction']\").attr('disabled', true);\r\n                $(\"div[id$='pnlAcknowledCheckContent']\").css({ \"display\": \"none\" });\r\n            }, 100);\r\n\r\n        }\r\n\r\n    }\r\n});\r\n\r\n/* Fix per defect 170995 */\r\nfunction cleaningTable() {\r\n    if ($.browser.msie && $.browser.version == '9.0') {\r\n        tableHtml = $('.gdo-edit-summary table.gdo-order-tbl:not(.childSKUTable)').html();\r\n        var expr = new RegExp('>[ \\t\\r\\n\\v\\f]*<', 'g');\r\n        if (typeof (tableHtml) != 'undefined') {\r\n            tableHtml = tableHtml.replace(expr, '><');\r\n            $('.gdo-edit-summary table.gdo-order-tbl:not(.childSKUTable)').html(tableHtml);\r\n        }\r\n    }\r\n}\r\n\r\n/* Fix per defect 117926 */\r\nfunction hidePromoPopup() {\r\n    $(document).ready(function () {\r\n        var cookieLocal = $.cookie(\"RENDERING_LOCALE\");\r\n\r\n        if ((cookieLocal == \"en_US\") || (cookieLocal == \"es_US\") || (cookieLocal == \"es_PR\") || (cookieLocal == \"en_CA\") || (cookieLocal == \"fr_CA\")) {\r\n            if (document.cookie.indexOf(\"valPopup\") >= 0) {\r\n                // Cookie still exist    \r\n                $(\"div[id$='MessageBoxControl2_pnlMessageBox']\").css({ \"display\": \"none\" });\r\n                $(\"div[id$='uchrblMessageBoxControl2_popup_MessageBox_backgroundElement']\").css({ \"display\": \"none\" });\r\n                eraseCookie('valPopup');\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n\r\nfunction visibleAreaHeight() {\r\n\r\n    jQuery('#TB_ajaxContent .gdo-popup').css(\r\n                'max-height',\r\n                $(window).outerHeight() - (Math.round($(window).outerHeight() * 0.20))\r\n            );\r\n\r\n        jQuery(window).resize(function () {\r\n            jQuery('#TB_ajaxContent .gdo-popup').css(\r\n              'max-height',\r\n              $(window).outerHeight() - (Math.round($(window).outerHeight() * 0.20))\r\n            );\r\n        });\r\n\r\n}\r\nvar VPCalculation = {\r\n    selected_skus: [],\r\n    get_skus: function () {\r\n\r\n        var products = $('[id$=\"pricelistGridInfo\"]').val();\r\n\r\n        if (products == \"\") { return false; }\r\n\r\n        var prods = '{';\r\n        products = products.split(\",\");\r\n\r\n        $.each(products, function (key, value) {\r\n\r\n            if (value != \"\") {\r\n\r\n                skus = value.split(\"|\");\r\n                sku = skus[0].replace(\"txt_\", \"\"); // SKU Id\r\n                qty = (skus[1] != \"\") ? skus[1] : 0; // QTY\r\n\r\n                psku = ($(\"tr[product-sku='\" + sku + \"'] .col-VolumePoint\").attr('item-vp') != undefined) ?\r\n                    '\"vp\" : ' + $(\"tr[product-sku='\" + sku + \"'] .col-VolumePoint\").attr('item-vp') + '' :\r\n                    \"\";\r\n                comma = (psku == \"\") ? \"\" : \",\";\r\n\r\n                prods +=\r\n\r\n                  '\"' + sku + '\"' + ': {' +\r\n\r\n                    '\"price\" : ' + $(\"tr[product-sku='\" + sku + \"'] .col-RetailPrice\").attr('list-price') + ',' +\r\n                    '\"qty\" : ' + qty + comma +\r\n                    psku +\r\n\r\n                  '},';\r\n\r\n            }\r\n\r\n        });\r\n        prods = prods.substring(0, prods.length - 1);\r\n        prods += '}';\r\n        this.selected_skus = JSON.parse(prods);\r\n    },\r\n    get_total_vp: function () {\r\n        var totalVP = 0;\r\n        $.each(VPCalculation.selected_skus, function (sku, item) {\r\n\r\n            totalVP += item.vp * item.qty;\r\n\r\n        });\r\n\r\n        return this.format_totals(totalVP);\r\n    },\r\n    get_total_ammount: function () {\r\n        var totalAmmount = 0;\r\n        $.each(VPCalculation.selected_skus, function (sku, item) {\r\n\r\n            totalAmmount += item.price * item.qty;\r\n\r\n        });\r\n\r\n        return this.format_totals(totalAmmount);\r\n    },\r\n    format_totals: function (total) {\r\n        var neg = false;\r\n        if (total < 0) {\r\n            neg = true;\r\n            total = Math.abs(total);\r\n        }\r\n        return parseFloat(total, 10).toFixed(2).replace(/(\\d)(?=(\\d{3})+\\.)/g, \"$1,\").toString();\r\n    }\r\n\r\n};\r\nfunction freeze_header_cols() {\r\n    var scrollTop = $(window).scrollTop();\r\n    // === Freeze Pricelist Header Cols\r\n    var colProdW = $('.freeze-header').next().next().find('.col-Product').outerWidth();\r\n    $('.freeze-header .col-Product').css('width', colProdW);\r\n\r\n    /* === VP === */\r\n    if (responsiveMode != true) {\r\n        var $vp = $('.freeze-vp'),\r\n            $vpNext = $('.freeze-vp + tr'),\r\n            vpW = $vp.next().outerWidth(),\r\n            vpH = $vp.next().outerHeight(),\r\n            vpOffset = $vp.offset().top,\r\n            vpNextOffset = $vpNext.offset().top,\r\n            distanceVP = (vpOffset - scrollTop),\r\n            distanceVPNext = (vpNextOffset - scrollTop);\r\n\r\n        if (distanceVP < 0) {\r\n\r\n            $vp.addClass('topSticky').css({ 'width': vpW, 'background-color': '#FFF' });\r\n\r\n        } else if (distanceVPNext > vpH) {\r\n\r\n            $vp.removeClass('topSticky');\r\n\r\n        }\r\n    }\r\n\r\n    /* === Actions === */\r\n    var $actions = $('.freeze-actions'),\r\n        $actionsNext = $('.freeze-actions + tr'),\r\n        actionsW = $actions.next().outerWidth(),\r\n        actionsH = $actions.next().outerHeight(),\r\n        actionsOffset = $actions.offset().top,\r\n        actionsNextOffset = $actionsNext.offset().top,\r\n        distanceActions = (actionsOffset - scrollTop),\r\n        distanceActionsNext = (actionsNextOffset - scrollTop);\r\n\r\n    if (distanceActions < 0) {\r\n\r\n        $actions\r\n            .addClass('topSticky')\r\n            .css({ 'width': actionsW });\r\n        $actions\r\n            .children()\r\n            .first()\r\n            .css('width', actionsW);\r\n\r\n        if (responsiveMode == true) {\r\n            $actions\r\n                .addClass('topSticky')\r\n                .css({ 'top': 50 });\r\n\r\n            $actions\r\n                .children()\r\n                .first()\r\n                .css({ 'padding': 0, 'background-color': '#fff' });\r\n        }\r\n\r\n    } else if (distanceActionsNext > actionsH) {\r\n\r\n        $actions.removeClass('topSticky');\r\n\r\n    }\r\n\r\n    if (responsiveMode == true) { return; }\r\n\r\n    /*=== Pricelist Table */\r\n    var $header = $('.freeze-header'),\r\n        $headerNext = $('.freeze-header + tr');\r\n    var headerW = $header.next().outerWidth(),\r\n        headerH = $header.next().outerHeight(),\r\n        headerOffset = $header.offset().top,\r\n        headerNextOffset = $headerNext.offset().top,\r\n        distanceH = (headerOffset - scrollTop),\r\n        distanceHNext = (headerNextOffset - scrollTop);\r\n\r\n    if (distanceH < 0) {\r\n\r\n        $header\r\n            .addClass('topSticky')\r\n            .css({ 'width': headerW, 'top': $vp.outerHeight() });\r\n\r\n    } else if (distanceHNext > headerH) {\r\n\r\n        $header.removeClass('topSticky');\r\n\r\n    }\r\n}\r\nfunction is_page(pageName) {\r\n    return (window.location.pathname.toLowerCase().indexOf(pageName) > -1) ? true : false;\r\n}\r\nfunction repositionModal(element, atTop) {\r\n\r\n    atTop = typeof atTop !== 'undefined' && atTop != false ? true : false;\r\n\r\n    if (element.length < 0) { return false; }\r\n\r\n    // Set Top Position\r\n    if (atTop == true) {\r\n        element.css('top', $(window).scrollTop() + 20)\r\n    } else {\r\n        var top = (($(window).outerHeight() / 2) - (element.outerHeight() / 2) + $(window).scrollTop());\r\n\r\n        top = (top > 20) ? top: 20;\r\n        element.css('top', top);\r\n    }\r\n\r\n    //Set Center Position\r\n    var left = (($(window).outerWidth() - element.outerWidth()) / 2) + $(window).scrollLeft();\r\n    element.css('left', left);\r\n\r\n}\r\nfunction repositionProductDetailModal(element) {\r\n\r\n    if (element.length < 0) { return false; }\r\n\r\n    // Set Top Position\r\n    element.css('top', $(window).scrollTop() + 20);\r\n\r\n    //Set Center Position\r\n    var left = ((($(window).outerWidth() - element.outerWidth()) / 2) + $(window).scrollLeft());\r\n\r\n    // Check if element it's greater than main container\r\n    if (($(window).scrollLeft() + element.outerWidth()) > $(\".modalBackground:visible\").outerWidth()) {\r\n        left = $(\".modalBackground:visible\").outerWidth() -element.outerWidth();\r\n    }\r\n    // Avoid that modal has negative position, in order to be fully visible\r\n    if (left < 0 && responsiveMode != true) { left = 0; }\r\n    element.css('left', left);\r\n\r\n    element.parent().parent().css('position', 'static');\r\n\r\n}\r\nvar VPCalculation = {\r\n    selected_skus: [],\r\n    get_skus: function () {\r\n\r\n        var products = $('[id$=\"pricelistGridInfo\"]').val();\r\n\r\n        if (products == \"\") { return false; }\r\n\r\n        var prods = '{';\r\n        products = products.split(\",\");\r\n\r\n        $.each(products, function (key, value) {\r\n\r\n            if (value != \"\") {\r\n\r\n                skus = value.split(\"|\");\r\n                sku = skus[0].replace(\"txt_\", \"\"); // SKU Id\r\n                qty = (skus[1] != \"\") ? skus[1] : 0; // QTY\r\n\r\n                psku = ($(\"tr[product-sku='\" + sku + \"'] .col-VolumePoint\").attr('item-vp') != undefined) ?\r\n                    '\"vp\" : ' + $(\"tr[product-sku='\" + sku + \"'] .col-VolumePoint\").attr('item-vp') + '' :\r\n                    \"\";\r\n                comma = (psku == \"\") ? \"\" : \",\";\r\n\r\n                prods +=\r\n\r\n                  '\"' + sku + '\"' + ': {' +\r\n\r\n                    '\"price\" : ' + $(\"tr[product-sku='\" + sku + \"'] .col-RetailPrice\").attr('list-price') + ',' +\r\n                    '\"qty\" : ' + qty + comma +\r\n                    psku +\r\n\r\n                  '},';\r\n\r\n            }\r\n\r\n        });\r\n        prods = prods.substring(0, prods.length - 1);\r\n        prods += '}';\r\n        this.selected_skus = JSON.parse(prods);\r\n    },\r\n    get_total_vp: function () {\r\n        var totalVP = 0;\r\n        $.each(VPCalculation.selected_skus, function (sku, item) {\r\n\r\n            totalVP += item.vp * item.qty;\r\n\r\n        });\r\n\r\n        return this.format_totals(totalVP);\r\n    },\r\n    get_total_ammount: function () {\r\n        var totalAmmount = 0;\r\n        $.each(VPCalculation.selected_skus, function (sku, item) {\r\n\r\n            totalAmmount += item.price * item.qty;\r\n\r\n        });\r\n\r\n        return this.format_totals(totalAmmount);\r\n    },\r\n    format_totals: function (total) {\r\n        var neg = false;\r\n        if (total < 0) {\r\n            neg = true;\r\n            total = Math.abs(total);\r\n        }\r\n        return parseFloat(total, 10).toFixed(2).replace(/(\\d)(?=(\\d{3})+\\.)/g, \"$1,\").toString();\r\n    }\r\n\r\n};\r\nfunction freeze_header_cols() {\r\n    var scrollTop = $(window).scrollTop();\r\n    // === Freeze Pricelist Header Cols\r\n    var colProdW = $('.freeze-header').next().next().find('.col-Product').outerWidth();\r\n    $('.freeze-header .col-Product').css('width', colProdW);\r\n\r\n    /* === VP === */\r\n    if (responsiveMode != true) {\r\n        var $vp = $('.freeze-vp'),\r\n            $vpNext = $('.freeze-vp + tr'),\r\n            vpW = $vp.next().outerWidth(),\r\n            vpH = $vp.next().outerHeight(),\r\n            vpOffset = $vp.offset().top,\r\n            vpNextOffset = $vpNext.offset().top,\r\n            distanceVP = (vpOffset - scrollTop),\r\n            distanceVPNext = (vpNextOffset - scrollTop);\r\n\r\n        if (distanceVP < 0) {\r\n\r\n            $vp.addClass('topSticky').css({ 'width': vpW, 'background-color': '#FFF' });\r\n\r\n        } else if (distanceVPNext > vpH) {\r\n\r\n            $vp.removeClass('topSticky');\r\n\r\n        }\r\n    }\r\n\r\n    /* === Actions === */\r\n    var $actions = $('.freeze-actions'),\r\n        $actionsNext = $('.freeze-actions + tr'),\r\n        actionsW = $actions.next().outerWidth(),\r\n        actionsH = $actions.next().outerHeight(),\r\n        actionsOffset = $actions.offset().top,\r\n        actionsNextOffset = $actionsNext.offset().top,\r\n        distanceActions = (actionsOffset - scrollTop),\r\n        distanceActionsNext = (actionsNextOffset - scrollTop);\r\n\r\n    if (distanceActions < 0) {\r\n\r\n        $actions\r\n            .addClass('topSticky')\r\n            .css({ 'width': actionsW });\r\n        $actions\r\n            .children()\r\n            .first()\r\n            .css('width', actionsW);\r\n\r\n        if (responsiveMode == true) {\r\n            $actions\r\n                .addClass('topSticky')\r\n                .css({ 'top': 50 });\r\n\r\n            $actions\r\n                .children()\r\n                .first()\r\n                .css({ 'padding': 0, 'background-color': '#fff' });\r\n        }\r\n\r\n    } else if (distanceActionsNext > actionsH) {\r\n\r\n        $actions.removeClass('topSticky');\r\n\r\n    }\r\n\r\n    if (responsiveMode == true) { return; }\r\n\r\n    /*=== Pricelist Table */\r\n    var $header = $('.freeze-header'),\r\n        $headerNext = $('.freeze-header + tr');\r\n    var headerW = $header.next().outerWidth(),\r\n        headerH = $header.next().outerHeight(),\r\n        headerOffset = $header.offset().top,\r\n        headerNextOffset = $headerNext.offset().top,\r\n        distanceH = (headerOffset - scrollTop),\r\n        distanceHNext = (headerNextOffset - scrollTop);\r\n\r\n    if (distanceH < 0) {\r\n\r\n        $header\r\n            .addClass('topSticky')\r\n            .css({ 'width': headerW, 'top': $vp.outerHeight() });\r\n\r\n    } else if (distanceHNext > headerH) {\r\n\r\n        $header.removeClass('topSticky');\r\n\r\n    }\r\n}\r\nfunction is_page(pageName) {\r\n    return (window.location.pathname.toLowerCase().indexOf(pageName) > -1) ? true : false;\r\n}\r\n\r\n/* Task 206456 */\r\nfunction getSKUBackOrder(element, e) {\r\n    // Get the link id and the sku value\r\n    var linkClicked = element.id;\r\n    var sku = $(element).attr('sku');\r\n    var UID = $(element).attr('uid');\r\n    var skuCategory = $(element).attr('ctg');\r\n\r\n    if ($(\"#BackOrderTable\" + sku + \"[uid=\\\"\" + UID + \"\\\"][ctg=\\\"\" + skuCategory + \"\\\" ]\").hasClass('hide')) {\r\n        var cookieLocal = $.cookie(\"RENDERING_LOCALE\").replace(\"_\", \"-\");\r\n\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: \"PriceList.aspx/GetSKUBackOrderDetails\",\r\n            data: \"{'sku':'\" + sku + \"', 'locale':'\" + cookieLocal + \"'}\",\r\n            cache: true,\r\n            contentType: 'application/json; charset=utf-8',\r\n            dataType: 'json',\r\n            success: function (data) {\r\n                onSuccess(data, sku, UID, skuCategory, linkClicked);\r\n            },\r\n            error: function (data, success, error) {\r\n                console.log(\"Error : \" + error)\r\n            }\r\n        });\r\n\r\n        $(\"#BackOrderTable\" + sku + \"[uid=\\\"\" + UID + \"\\\"][ctg=\\\"\" + skuCategory + \"\\\" ]\").slideDown(\"fast\", function () {\r\n            $(\"#BackOrderTable\" + sku + \"[uid=\\\"\" + UID + \"\\\"][ctg=\\\"\" + skuCategory + \"\\\" ]\").removeClass(\"hide\");\r\n            $(\"#\" + linkClicked).text(hideAvailabilityText);\r\n        });\r\n    } else {\r\n\r\n        $(\"#BackOrderTable\" + sku + \"[uid=\\\"\" + UID + \"\\\"][ctg=\\\"\" + skuCategory + \"\\\" ]\").slideUp(\"fast\", function () {\r\n            $(\"#BackOrderTable\" + sku + \"[uid=\\\"\" + UID + \"\\\"][ctg=\\\"\" + skuCategory + \"\\\" ]\").addClass(\"hide\");\r\n            if (showAvailabilityText == \"\") showAvailabilityText = \"Show Availability\";\r\n            $(\"#\" + linkClicked).text(showAvailabilityText);\r\n        });\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfunction onSuccess(data, sku, UID, skuCategory, linkClicked) {\r\n\r\n    var skuBackOrder = JSON.parse(data.d);\r\n\r\n    // Draw the table\r\n    $(\"#BackOrderTable\" + sku + \"[uid=\\\"\" + UID + \"\\\"][ctg=\\\"\" + skuCategory + \"\\\"] tr:not('.tr-head')\").remove();\r\n\r\n    for (var i = 0; i < skuBackOrder.InventoryDetails.length; i++) {\r\n        drawRow(skuBackOrder.InventoryDetails[i], sku, skuCategory, UID);\r\n    }\r\n\r\n    //Footer\r\n    var footer = $(\"<tr class='inventLink' />\");\r\n    $(\"#BackOrderTable\" + sku + \"[uid=\\\"\" + UID + \"\\\"][ctg=\\\"\" + skuCategory + \"\\\" ]\").append(footer);\r\n    footer.append($(\"<td colspan='5'>For a full list of product availability, please <a href='/Ordering/inventory'>click here</a></td>\"));\r\n    footer.append($(\"<td><a onclick='javascrip:hideMe(\\\"\" + sku + \"\\\",\\\"\" + UID + \"\\\",\\\"\" + skuCategory + \"\\\",\\\"\" + linkClicked + \"\\\")'>\" + hideAvailabilityText + \"</a></td>\"));\r\n}\r\n\r\nfunction drawRow(rowData, sku, skuCategory, UID) {\r\n    var row = $(\"<tr />\");\r\n    $(\"#BackOrderTable\" + sku + \"[uid=\\\"\" + UID + \"\\\"][ctg=\\\"\" + skuCategory + \"\\\" ]\").append(row);\r\n\r\n    row.append($(\"<td colspan='2'>\" + rowData.Location + \" </td>\"));\r\n    row.append($(\"<td>\" + rowData.Type + \"</td>\"));\r\n    if (rowData.Status == \"Unavailable\") {\r\n        row.append($(\"<td><img src='/Content/Global/Products/Img/circle_red.gif' /></td>\"));\r\n    } else if (rowData.Status == \"Available\") {\r\n        row.append($(\"<td><img src='/Content/Global/Products/Img/circle_green.gif' /></td>\"));\r\n    } else if (rowData.Status == \"AllowBackOrder\") {\r\n        row.append($(\"<td><img src='/Content/Global/Products/Img/circle_yellow.gif' /></td>\"));\r\n    } else if (rowData.Status == \"UnavailableInPrimaryWh\") {\r\n        row.append($(\"<td><img src='/Content/Global/Products/Img/circle_blue.gif' /></td>\"));\r\n    } else {\r\n        row.append($(\"<td>\" + rowData.Status + \"</td>\"));\r\n    }\r\n    row.append($(\"<td>\" + rowData.AvailabilityDate + \"</td>\"));\r\n    row.append($(\"<td colspan='2'>\" + rowData.Comments + \"</td>\"));\r\n}\r\n\r\nfunction hideMe(sku, UID, skuCategory, linkClicked) {\r\n\r\n    /* === Actions === */\r\n    var $actions = $('.freeze-actions'),\r\n        $actionsNext = $('.freeze-actions + tr'),\r\n        actionsW = $actions.next().outerWidth(),\r\n        actionsH = $actions.next().outerHeight(),\r\n        actionsOffset = $actions.offset().top,\r\n        actionsNextOffset = $actionsNext.offset().top,\r\n        distanceActions = (actionsOffset - scrollTop),\r\n        distanceActionsNext = (actionsNextOffset - scrollTop);\r\n\r\n    if (distanceActions < 0) {\r\n\r\n        $actions\r\n            .addClass('topSticky')\r\n            .css({ 'width': actionsW });\r\n        $actions\r\n            .children()\r\n            .first()\r\n            .css('width', actionsW);\r\n\r\n        if (responsiveMode == true) {\r\n            $actions\r\n                .addClass('topSticky')\r\n                .css({ 'top': 50 });\r\n\r\n            $actions\r\n                .children()\r\n                .first()\r\n                .css({ 'padding': 0, 'background-color': '#fff' });\r\n        }\r\n\r\n    } else if (distanceActionsNext > actionsH) {\r\n\r\n        $actions.removeClass('topSticky');\r\n\r\n    }\r\n\r\n    if (responsiveMode == true) { return; }\r\n\r\n    /*=== Pricelist Table */\r\n    var $header = $('.freeze-header'),\r\n        $headerNext = $('.freeze-header + tr');\r\n    var headerW = $header.next().outerWidth(),\r\n        headerH = $header.next().outerHeight(),\r\n        headerOffset = $header.offset().top,\r\n        headerNextOffset = $headerNext.offset().top,\r\n        distanceH = (headerOffset - scrollTop),\r\n        distanceHNext = (headerNextOffset - scrollTop);\r\n\r\n    if (distanceH < 0) {\r\n\r\n        $header\r\n            .addClass('topSticky')\r\n            .css({ 'width': headerW, 'top': $vp.outerHeight() });\r\n\r\n    } else if (distanceHNext > headerH) {\r\n\r\n        $header.removeClass('topSticky');\r\n\r\n    }\r\n}\r\nfunction is_page(pageName) {\r\n    return (window.location.pathname.toLowerCase().indexOf(pageName) > -1) ? true : false;\r\n}\r\n\r\n/* Task 206456 */\r\nfunction getSKUBackOrder(element, e) {\r\n    // Get the link id and the sku value\r\n    var linkClicked = element.id;\r\n    var sku = $(element).attr('sku');\r\n    var UID = $(element).attr('uid');\r\n    var skuCategory = $(element).attr('ctg');\r\n\r\n    if ($(\"#BackOrderTable\" + sku + \"[uid=\\\"\" + UID + \"\\\"][ctg=\\\"\" + skuCategory + \"\\\" ]\").hasClass('hide')) {\r\n        var cookieLocal = $.cookie(\"RENDERING_LOCALE\").replace(\"_\", \"-\");\r\n\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: \"PriceList.aspx/GetSKUBackOrderDetails\",\r\n            data: \"{'sku':'\" + sku + \"', 'locale':'\" + cookieLocal + \"'}\",\r\n            cache: true,\r\n            contentType: 'application/json; charset=utf-8',\r\n            dataType: 'json',\r\n            success: function (data) {\r\n                onSuccess(data, sku, UID, skuCategory, linkClicked);\r\n            },\r\n            error: function (data, success, error) {\r\n                console.log(\"Error : \" + error)\r\n            }\r\n        });\r\n\r\n        $(\"#BackOrderTable\" + sku + \"[uid=\\\"\" + UID + \"\\\"][ctg=\\\"\" + skuCategory + \"\\\" ]\").slideDown(\"fast\", function () {\r\n            $(\"#BackOrderTable\" + sku + \"[uid=\\\"\" + UID + \"\\\"][ctg=\\\"\" + skuCategory + \"\\\" ]\").removeClass(\"hide\");\r\n            $(\"#\" + linkClicked).text(hideAvailabilityText);\r\n        });\r\n    } else {\r\n\r\n        $(\"#BackOrderTable\" + sku + \"[uid=\\\"\" + UID + \"\\\"][ctg=\\\"\" + skuCategory + \"\\\" ]\").slideUp(\"fast\", function () {\r\n            $(\"#BackOrderTable\" + sku + \"[uid=\\\"\" + UID + \"\\\"][ctg=\\\"\" + skuCategory + \"\\\" ]\").addClass(\"hide\");\r\n            $(\"#\" + linkClicked).text(showAvailabilityText);\r\n        });\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfunction onSuccess(data, sku, UID, skuCategory, linkClicked) {\r\n\r\n    var skuBackOrder = JSON.parse(data.d);\r\n\r\n    // Draw the table\r\n    $(\"#BackOrderTable\" + sku + \"[uid=\\\"\" + UID + \"\\\"][ctg=\\\"\" + skuCategory + \"\\\"] tr:not('.tr-head')\").remove();\r\n\r\n    for (var i = 0; i < skuBackOrder.InventoryDetails.length; i++) {\r\n        drawRow(skuBackOrder.InventoryDetails[i], sku, skuCategory, UID);\r\n    }\r\n\r\n    //Footer\r\n    var footer = $(\"<tr class='inventLink' />\");\r\n    $(\"#BackOrderTable\" + sku + \"[uid=\\\"\" + UID + \"\\\"][ctg=\\\"\" + skuCategory + \"\\\" ]\").append(footer);\r\n    footer.append($(\"<td colspan='5'>\" + linkInstructionsText + \" <a href='/Ordering/inventory' target='_blank'>\" + anchorText  + \"</a></td>\"));\r\n    footer.append($(\"<td><a onclick='javascrip:hideMe(\\\"\" + sku + \"\\\",\\\"\" + UID + \"\\\",\\\"\" + skuCategory + \"\\\",\\\"\" + linkClicked + \"\\\")'>\" + hideAvailabilityText + \"</a></td>\"));\r\n}\r\n\r\nfunction drawRow(rowData, sku, skuCategory, UID) {\r\n    var row = $(\"<tr />\");\r\n    $(\"#BackOrderTable\" + sku + \"[uid=\\\"\" + UID + \"\\\"][ctg=\\\"\" + skuCategory + \"\\\" ]\").append(row);\r\n\r\n    row.append($(\"<td colspan='2'>\" + rowData.Location + \" </td>\"));\r\n    row.append($(\"<td>\" + rowData.Type + \"</td>\"));\r\n    if (rowData.Status == \"Unavailable\") {\r\n        row.append($(\"<td><img src='/Content/Global/Products/Img/circle_red.gif' /></td>\"));\r\n    } else if (rowData.Status == \"Available\") {\r\n        row.append($(\"<td><img src='/Content/Global/Products/Img/circle_green.gif' /></td>\"));\r\n    } else if (rowData.Status == \"AllowBackOrder\") {\r\n        row.append($(\"<td><img src='/Content/Global/Products/Img/circle_orange.gif' /></td>\"));\r\n    } else if (rowData.Status == \"UnavailableInPrimaryWh\") {\r\n        row.append($(\"<td><img src='/Content/Global/Products/Img/circle_blue.gif' /></td>\"));\r\n    } else {\r\n        row.append($(\"<td>\" + rowData.Status + \"</td>\"));\r\n    }\r\n    row.append($(\"<td>\" + rowData.AvailabilityDate + \"</td>\"));\r\n    row.append($(\"<td colspan='2'>\" + rowData.Comments + \"</td>\"));\r\n}\r\n\r\nfunction hideMe(sku, UID, skuCategory, linkClicked) {\r\n\r\n    if (!$(\"#BackOrderTable\" + sku + \"[uid=\\\"\" + UID + \"\\\"][ctg=\\\"\" + skuCategory + \"\\\" ]\").hasClass('hide')) {\r\n        $(\"#BackOrderTable\" + sku + \"[uid=\\\"\" + UID + \"\\\"][ctg=\\\"\" + skuCategory + \"\\\" ]\").slideUp(\"fast\", function () {\r\n            $(\"#BackOrderTable\" + sku + \"[uid=\\\"\" + UID + \"\\\"][ctg=\\\"\" + skuCategory + \"\\\" ]\").addClass(\"hide\");\r\n            $(\"#\" + linkClicked).text(showAvailabilityText);\r\n        });\r\n    }\r\n}\r\nfunction scroll_to_element(elementSelector, duration) {\r\n    $('html, body').animate({\r\n        scrollTop: $(elementSelector).offset().top\r\n    }, duration);\r\n}\r\n\r\nfunction targetPageParams() {\r\n    return AdobeTarget;\r\n}\r\n\r\nfunction foldDaumPostcode() {\r\n    kendo.jQuery('#wrapDaum').css('display', 'none');\r\n}\r\n\r\nfunction execDaumPostcode() {\r\n    \r\n    var currentScroll = Math.max(document.body.scrollTop, document.documentElement.scrollTop);\r\n    var element_wrap = document.getElementById('wrapDaum');\r\n    new daum.Postcode({\r\n        oncomplete: function(data) {\r\n            // Popup in part to write code to execute when you click on a search result item.\r\n\r\n            // The combination of the address in accordance with the exposure rules for each address.\r\n            // If the variable is not coming down the value of yen because different spaces ( '') values, and branch to see it.\r\n            var fullAddr = ''; // Final address parameters\r\n            var extraAddr = ''; //Combination address variable\r\n\r\n            // User brings the address value according to the selected address type.\r\n            if (data.userSelectedType === 'R') { // If the user selects the street address\r\n                fullAddr = data.roadAddress;\r\n\r\n            } else { // If the user selects the address, parcel number (J)\r\n                fullAddr = data.jibunAddress;\r\n            }\r\n\r\n            // The address type when the user selects Street and combinations.\r\n            if(data.userSelectedType === 'R'){\r\n                // If you add beopjeongdong people.\r\n                if(data.bname !== ''){\r\n                    extraAddr += data.bname;\r\n                }\r\n                // If there is a building name is added.\r\n                if(data.buildingName !== ''){\r\n                    extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);\r\n                }\r\n                // Make a final address by adding the brackets on each side, depending on the presence or absence of a combined address.\r\n                fullAddr += (extraAddr !== '' ? ' ('+ extraAddr +')' : '');\r\n            }\r\n\r\n            // Put your zip code and address information into the appropriate fields.\r\n            kendo.jQuery(\"input[id$='txtAddress1']\").val(\"\" + data.sido); // try\r\n\r\n            kendo.jQuery(\"input[id$='txtAddress2']\").val(\"\" + data.sigungu + \" \" + data.roadAddress); // Ward County Town + hibernate\t\r\n               \r\n            kendo.jQuery(\"input[id$='txtPostalCode1']\").val(\"\" +data.zonecode); // Use new 5-digit ZIP Code\t\t\t\r\n\r\n            // Move the cursor to the address field detail.\r\n            kendo.jQuery(\"input[id$='txtAddress3']\").focus();\r\n\r\n            element_wrap.style.display = 'none';\r\n\r\n            document.body.scrollTop = currentScroll;\r\n\r\n        },\r\n        onresize: function (size) {\r\n            \r\n            element_wrap.style.height = size.height + 'px';\r\n        },\r\n        width: '100%',\r\n        height: '100%'\r\n    }).embed(element_wrap);\r\n    kendo.jQuery('#wrapDaum').css('display', 'block');\r\n    \r\n}\r\n\r\nfunction formatPostalCode(postcode) {\r\n    const MaxPostCodeLength = 7;\r\n    const FirstPartLength = 3;\r\n    var zeroPreseed;\r\n    var postCode = postcode.value;\r\n    var currentPostCodeLength = postCode.toString().length;\r\n    if (currentPostCodeLength < MaxPostCodeLength) {\r\n        var diff = MaxPostCodeLength - currentPostCodeLength;\r\n\r\n        for (var i = 0; i < diff - 1; i++) {\r\n            if (zeroPreseed == null) zeroPreseed = '0';\r\n            else zeroPreseed += '0';\r\n        }\r\n    }\r\n\r\n    if (zeroPreseed != null) zeroPreseed += postCode;\r\n    else zeroPreseed = postCode;\r\n\r\n    postCode = zeroPreseed;\r\n\r\n    if ((MaxPostCodeLength - postCode.toString().length) > 0) {\r\n        for (var i = 0; i < (MaxPostCodeLength - postCode.toString().length) ; i++) {\r\n            postCode = '0' + postCode.toString();\r\n        }\r\n    }\r\n    postcode.value = postCode.toString().substring(0, FirstPartLength) + '-' + postCode.toString().substring(FirstPartLength);\r\n}","\r\nvar invEdit = {\r\n    Init: function () {\r\n        var redirect = RedirectToReceipts();\r\n\r\n        if (redirect) {\r\n            window.location = redirect;\r\n            return false;\r\n        }\r\n\r\n        var editModel = kendo.observable(new invEdit.invoiceEditViewModel());\r\n        kendo.bind($('#dvInvEdit'), editModel);\r\n        editModel.loadInvoicedata();\r\n        editModel.loadErrorMessages();\r\n    },\r\n\r\n    productquantityTemplate: function () {\r\n        return kendo.template($('#ProductQuantityInvTpl').html());\r\n    },\r\n    productTotalPriceTemplate: function () { return kendo.template($('#ProductTotalPriceInvTpl').html()); },\r\n\r\n    deleteProductTemplate: function () { return kendo.template($('#deleteProductTpl').html()); },\r\n    selectContactTemplate: function () {\r\n        return kendo.template($('#selectContactTpl').html());\r\n    },\r\n    savedCartsTemplate: function () { return kendo.template($('#savedCartsTpl').html()); },\r\n\r\n    savedDateTemplate: function () { return kendo.template($('#savedDateTpl').html()); },\r\n\r\n    productDescTemplate: function () {\r\n        return kendo.template($('#productDescTpl').html());\r\n    },\r\n    validator: function () {\r\n        return $(\"#dvInvEdit\").kendoValidator({\r\n            rules: {\r\n                ProductValidation: function (input) {\r\n                    if (input[0].id == \"individual-products\") {\r\n                        var model = input.prop(\"kendoBindingTarget\").source;\r\n                        if (!model.invoice.InvoiceLines || model.invoice.InvoiceLines.length == 0) {\r\n                            return false;\r\n                        }\r\n                        model.set('validIndProducts', true);\r\n                        return true;\r\n                    } else {\r\n                        return true;\r\n                    }\r\n                }\r\n            },\r\n            messages: {\r\n                ProductValidation: function (input) {\r\n                    var model = input.prop(\"kendoBindingTarget\").source;\r\n                    return model.errorMessages['reqProducts'];\r\n                },\r\n            }\r\n        }).data(\"kendoValidator\");\r\n    },\r\n\r\n    invoiceEditViewModel: function () {\r\n        this.isLoading = true;\r\n        this.isLoaded = false;\r\n        this.invoice = null;\r\n        this.stateSelected = null;\r\n        this.rootCategories = [];\r\n        this.contacts = [];\r\n        this.selectedRootCategoryItem = null;\r\n        this.categories = [];\r\n        this.contactsFilter = \"\";\r\n        this.productsFilter = \"\";\r\n        this.savedCartsFilter = \"\";\r\n        this.autocompleteData = [];\r\n        this.savedCarts = [];\r\n        this.selectedProduct = null;\r\n        this.edit_InvoiceId = window.edit_InvoiceId;\r\n        this.edit_OrderId = window.edit_OrderId;\r\n        this.edit_CopyInvoiceId = window.edit_CopyInvoiceId;\r\n        this.statusSelected = \"Unpaid\";\r\n        this.memberAddressstateSelected = null;\r\n        this.errorMessages = [];\r\n        this.selectedAddress = null;\r\n        this.selectedIdAddress = null;\r\n        this.errorText = \"\";\r\n        this.edit_Invoice_Action = window.edit_Invoice_Action;\r\n        this.productSearchErrorText = \"\";\r\n        this.addProductErrorText = \"\";\r\n        this.contactsErrorText = \"\";\r\n        this.edit_Order_Source = window.edit_Order_Source;\r\n        this.edit_Invoice_Date = window.edit_Invoice_Date;\r\n        this.priceAlertText = \"\";\r\n        this.memberTaxEdit = false;\r\n        this.memberShippingEdit = false;\r\n        this.IsEditTaxClickClicked = false;\r\n        this.IsEditHandlingFeeClicked = false;\r\n        this.validIndProducts = false;\r\n\r\n        this.editHandlingFeeClick = function () {\r\n            this.set('IsEditHandlingFeeClicked', true);\r\n        };\r\n\r\n        this.editTaxClick = function () {\r\n            this.set('IsEditTaxClickClicked', true);\r\n        };\r\n\r\n        this.onMemberHandlingFeeChange = function () {\r\n            this.invoice.set('IsMemberHandlingFeeEdited', true);\r\n            this.calculateMemberTotal();\r\n        };\r\n\r\n        this.onMemberTaxChange = function () {\r\n            this.invoice.set('IsMemberTaxEdited', true);\r\n            this.calculateMemberTotal();\r\n        };\r\n\r\n\r\n        this.saveChanges = function () {\r\n\r\n            if (invEdit.validator().validate()) {\r\n                var self = this;\r\n                var invoiceModel = this.invoice;\r\n                if (this.statusSelected) {\r\n                    if (this.statusSelected.Value) {\r\n                        invoiceModel.Status = this.statusSelected.Value;\r\n                    } else {\r\n                        invoiceModel.Status = this.statusSelected;\r\n                    }\r\n                }\r\n\r\n                if (this.stateSelected) {\r\n                    if (this.stateSelected.Value) {\r\n                        invoiceModel.Address.StateStatus = this.stateSelected.Value;\r\n                    } else {\r\n                        if (typeof (this.stateSelected) === 'object') {\r\n                            invoiceModel.Address.State = \"\";\r\n                        }\r\n                        else {\r\n                            invoiceModel.Address.State = this.stateSelected;\r\n                        }                            \r\n                    }\r\n                }\r\n                if (invoiceModel.InvoiceDate) {\r\n                    invoiceModel.InvoiceDate = new Date(moment(invoiceModel.InvoiceDate));\r\n                }\r\n\r\n                $.ajax({\r\n                    url: '/Ordering/api/InvoiceEdit/Post',\r\n                    type: 'POST',\r\n                    contentType: \"application/json; charset=utf-8\",\r\n                    data: JSON.stringify(invoiceModel),\r\n\r\n                    success: function (data) {\r\n                        if (data) {\r\n\r\n                            if (!data.IsSuccess) {\r\n                                self.set('errorText', self.errorMessages[data.ErrorCodeKey]);\r\n                            } else {\r\n                                self.set('errorText', \"\");\r\n                                self.setInvoiceData(data.InvoiceModel);\r\n                                window.location.href = \"/Ordering/Invoice/Display/\" + self.invoice.Id;\r\n                            }\r\n                        }\r\n                    },\r\n                    error: function (data) {\r\n\r\n                    },\r\n                    beforeSend: function () {\r\n                        kendo.ui.progress($(\"#dvCustomerPricingInfo\"), true);\r\n                        kendo.ui.progress($(\"#dvinvPricing\"), true);\r\n                    },\r\n                    complete: function () {\r\n                        kendo.ui.progress($(\"#dvCustomerPricingInfo\"), false);\r\n                        kendo.ui.progress($(\"#dvinvPricing\"), false);\r\n                    }\r\n                });\r\n            } else {\r\n\r\n                var input = $('#individual-products');\r\n                var model = input.prop(\"kendoBindingTarget\").source;\r\n\r\n                if (!invEdit.validator().validateInput('#status')) {\r\n\r\n                    invEdit.scrollTo('[for=\"status\"]');\r\n\r\n                } else if (!invEdit.validator().validateInput('#first-name')) {\r\n\r\n                    invEdit.scrollTo('#first-name');\r\n\r\n                } else if (!model.get('validIndProducts')) {\r\n\r\n                    invEdit.scrollTo(\"#individual-products\");\r\n\r\n                } else if (this.invoice.InvoiceShipToAddress) {\r\n                    $.ajax({\r\n                        url: '/Ordering/api/InvoiceEdit/Post',\r\n                        type: 'POST',\r\n                        contentType: \"application/json; charset=utf-8\",\r\n                        data: JSON.stringify(invoiceModel),\r\n\r\n                        success: function (data) {\r\n                            if (data) {\r\n\r\n                                if (!data.IsSuccess) {\r\n                                    self.set('errorText', self.errorMessages[data.ErrorCodeKey]);\r\n                                } else {\r\n                                    self.set('errorText', \"\");\r\n                                    self.setInvoiceData(data.InvoiceModel);\r\n                                    window.location.href = \"/Ordering/Invoice/Display/\" + self.invoice.Id;\r\n                                }\r\n                            }\r\n                        },\r\n                        error: function (data) {\r\n\r\n                        },\r\n                        beforeSend: function () {\r\n                            kendo.ui.progress($(\"#dvCustomerPricingInfo\"), true);\r\n                            kendo.ui.progress($(\"#dvinvPricing\"), true);\r\n                        },\r\n                        complete: function () {\r\n                            kendo.ui.progress($(\"#dvCustomerPricingInfo\"), false);\r\n                            kendo.ui.progress($(\"#dvinvPricing\"), false);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        };\r\n\r\n        this.invoiceAddressClick = function (e) {\r\n            e.preventDefault();\r\n            this.invoice.set(\"InvoiceShipToAddress\", this.invoice.InvoiceShipToAddress);\r\n            this.calculateBasePrice();\r\n        };\r\n\r\n        this.invoiceTypeClick = function (e) {\r\n\r\n            var grid = $('#dgProducts').data('kendoGrid');\r\n\r\n            \r\n            this.invoice.set('InvoicePrice', new invEdit.InvoicePriceModel());\r\n            \r\n            if (this.invoice.Type == \"Distributor\") {\r\n                grid.showColumn(\"EarnBase\");\r\n                this.invoice.set('IsGdoMemberPricing', true);\r\n                this.invoice.InvoicePrice.set(\"DiscountAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"DiscountPercentage\", 25);\r\n                this.invoice.InvoicePrice.set(\"TaxAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxPercentage\", 0);\r\n                this.invoice.InvoicePrice.set(\"ShippingAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"ShippingPercentage\", 0);\r\n            } else {\r\n                grid.hideColumn(\"EarnBase\");\r\n                this.invoice.set('IsGdoMemberPricing', false);\r\n                this.invoice.InvoicePrice.set(\"DiscountAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxPercentage\", 0);\r\n                this.invoice.InvoicePrice.set(\"DiscountPercentage\", 0);\r\n                this.invoice.InvoicePrice.set(\"ShippingAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"ShippingPercentage\", 0);\r\n            }\r\n        };\r\n        this.onInvoiceLinesDataBinding = function (e) {\r\n            var grid = e.sender;\r\n\r\n            if (this.invoice.Type == \"Distributor\") {\r\n                grid.showColumn(\"EarnBase\");\r\n            } else {\r\n                grid.hideColumn(\"EarnBase\");\r\n            }\r\n        };\r\n\r\n        this.calculateMemberTotal = function () {\r\n            var self = this;\r\n\r\n            var invoiceModel = this.invoice;\r\n            $.ajax({\r\n                url: '/Ordering/api/InvoiceEdit/CalculateMemberTotal',\r\n                type: 'POST',\r\n                contentType: \"application/json; charset=utf-8\",\r\n                data: JSON.stringify(invoiceModel),\r\n\r\n                success: function (data) {\r\n                    if (data) {\r\n                        self.setInvoiceData(data);\r\n                    }\r\n                },\r\n                error: function (data) {\r\n\r\n                },\r\n                beforeSend: function () {\r\n                    kendo.ui.progress($(\"#dvCustomerPricingInfo\"), true);\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#dvCustomerPricingInfo\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n        this.calculateBasePrice = function () {\r\n            var self = this;\r\n            $(\"#priceInfoText\").removeClass(\"red\");\r\n            $(\"#priceInfoText\").addClass(\"red\");\r\n            var invoiceModel = this.invoice;\r\n            $.ajax({\r\n                url: '/Ordering/api/InvoiceEdit/CalculateBasicPrice',\r\n                type: 'POST',\r\n                contentType: \"application/json; charset=utf-8\",\r\n                data: JSON.stringify(invoiceModel),\r\n\r\n                success: function (data) {\r\n                    if (data) {\r\n                        self.setInvoiceData(data);\r\n                    }\r\n                },\r\n                error: function (data) {\r\n\r\n                },\r\n                beforeSend: function () {\r\n                    kendo.ui.progress($(\"#dvCustomerPricingInfo\"), true);\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#dvCustomerPricingInfo\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n        this.calculateTotalDue = function () {\r\n            var self = this;\r\n            $(\"#priceInfoText\").removeClass(\"red\");\r\n            $(\"#priceInfoText\").addClass(\"red\");\r\n            var invoiceModel = this.invoice;\r\n            $.ajax({\r\n                url: '/Ordering/api/InvoiceEdit/CalculateTotalDue',\r\n                type: 'POST',\r\n                contentType: \"application/json; charset=utf-8\",\r\n                data: JSON.stringify(invoiceModel),\r\n\r\n                success: function (data) {\r\n                    if (data) {\r\n                        self.setInvoiceData(data);\r\n                    }\r\n                },\r\n                error: function (data) {\r\n\r\n                },\r\n                beforeSend: function () {\r\n                    kendo.ui.progress($(\"#dvCustomerPricingInfo\"), true);\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#dvCustomerPricingInfo\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n\r\n        this.price = function () {\r\n            $(\"#priceInfoText\").removeClass(\"red\");\r\n            \r\n            if (invEdit.validator().validate()) {\r\n                var self = this;\r\n                var invoiceModel = this.invoice;\r\n\r\n                if (this.stateSelected) {\r\n                    if (this.stateSelected.Value) {\r\n                        invoiceModel.Address.StateStatus = this.stateSelected.Value;\r\n                    } else {\r\n                        if (typeof (this.stateSelected) === 'object') {\r\n                            invoiceModel.Address.State = \"\";\r\n                        }\r\n                        else {\r\n                            invoiceModel.Address.State = this.stateSelected;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                $.ajax({\r\n                    url: '/Ordering/api/InvoiceEdit/Price',\r\n                    type: 'POST',\r\n                    contentType: \"application/json; charset=utf-8\",\r\n                    data: JSON.stringify(invoiceModel),\r\n\r\n                    success: function (data) {\r\n                        if (data) {\r\n                            \r\n                            if (!data.IsSuccess) {\r\n                                self.set('errorText', self.errorMessages[data.ErrorCodeKey]);\r\n                                self.invoice.InvoicePrice.set('ShippingAmount', 0);\r\n                                self.invoice.InvoicePrice.set('TaxAmount', 0);\r\n                                self.invoice.InvoicePrice.set('DisplayShipping', data.InvoiceModel.InvoicePrice.DisplayShipping);\r\n                                self.invoice.InvoicePrice.set('DisplayCalculatedTax', data.InvoiceModel.InvoicePrice.DisplayCalculatedTax);\r\n                                self.invoice.InvoicePrice.set('DisplayTotalDue', data.InvoiceModel.InvoicePrice.DisplaySubtotal);\r\n                            } else {\r\n                                self.set('errorText', \"\");\r\n                                self.setInvoiceData(data.InvoiceModel);\r\n                                if (data.InvoiceModel) {\r\n                                    self.invoice.set('ResetCustomerTaxValue', false);\r\n                                }\r\n                                if (data.InvoiceModel.Address && data.InvoiceModel.Address.State) {\r\n                                    self.set('stateSelected', { Value: data.InvoiceModel.Address.State });\r\n                                }\r\n                            }\r\n                        }\r\n                    },\r\n                    error: function (data) {\r\n\r\n                    },\r\n                    beforeSend: function () {\r\n                        kendo.ui.progress($(\"#dvCustomerPricingInfo\"), true);\r\n                        kendo.ui.progress($(\"#dvinvPricing\"), true);\r\n                    },\r\n                    complete: function () {\r\n                        kendo.ui.progress($(\"#dvCustomerPricingInfo\"), false);\r\n                        kendo.ui.progress($(\"#dvinvPricing\"), false);\r\n                    }\r\n                });\r\n            } else {\r\n                var input = $('#individual-products');\r\n                var model = input.prop(\"kendoBindingTarget\").source;\r\n\r\n                if (!invEdit.validator().validateInput('#status')) {\r\n\r\n                    invEdit.scrollTo('[for=\"status\"]');\r\n\r\n                } else if (!invEdit.validator().validateInput('#first-name')) {\r\n\r\n                    invEdit.scrollTo('#first-name');\r\n\r\n                } else if (!invEdit.validator().validateInput('#street-address')) {\r\n\r\n                    invEdit.scrollTo(\"#street-address\");\r\n\r\n                } else if (!invEdit.validator().validateInput('#city')) {\r\n\r\n                    invEdit.scrollTo(\"[for='city']\");\r\n\r\n                } else if (!invEdit.validator().validateInput('#zip-code')) {\r\n\r\n                    invEdit.scrollTo(\"[for='zip-code']\");\r\n\r\n                } else if (!model.get('validIndProducts')) {\r\n\r\n                    invEdit.scrollTo(\"#individual-products\");\r\n\r\n                }\r\n            }\r\n\r\n        };\r\n\r\n        this.cancel = function () {\r\n            window.location.href = \"/Ordering/Invoice\";\r\n            return false;\r\n        };\r\n\r\n        this.ChangeClicked = function () {\r\n            kendo.ui.progress($(\"#loading\"), true);\r\n            var wnd = $('#dvMemberAddress').data('kendoWindow');\r\n            wnd.center().open();\r\n            this.memberAddressDataSource.read();\r\n            kendo.ui.progress($(\"#loading\"), false);\r\n        };\r\n\r\n        this.onChangeAddress = function () {\r\n            var self = this;\r\n            $.ajax({\r\n                type: 'get',\r\n                dataType: 'json',\r\n                cache: true,\r\n                data: JSON.stringify(self.selectedAddress),\r\n                url: '/Ordering/api/InvoiceEdit/FilterShippingAddress/' + self.selectedIdAddress,\r\n                success: function (data) {\r\n                    self.set(\"selectedAddress\", data);\r\n                },\r\n                error: function () {\r\n                    self.error = true;\r\n                },\r\n                beforeSend: function () {\r\n                    kendo.ui.progress($(\"#changeAddressDetails\"), true);\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#changeAddressDetails\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n        this.AddressChanged = function () {\r\n            var self = this;\r\n            if (self.invoice) {\r\n                self.invoice.MemberAddress = self.selectedAddress;\r\n            }\r\n            var wnd = $('#dvMemberAddress').data('kendoWindow');\r\n            wnd.center().close();\r\n            self.calculateBasePrice();\r\n        };\r\n\r\n        this.onQuantityChange = function () {\r\n            this.calculateBasePrice();\r\n        };\r\n\r\n        this.autocompleteDataSource = new kendo.data.DataSource({\r\n            type: \"json\",\r\n            serverFiltering: true,\r\n            serverPaging: true,\r\n            pageSize: 20,\r\n            transport: {\r\n                read:\r\n                {\r\n                    url: \"/Ordering/api/InvoiceBase/LoadProductsForAutocomplete\"\r\n                },\r\n                parameterMap: function () {\r\n                    return {\r\n                        startsWith: $(\"#individual-products\").data(\"kendoAutoComplete\").value(),\r\n                        type: $('#taxAmount').prop(\"kendoBindingTarget\").source.invoice.Type\r\n                    };\r\n                }\r\n            }\r\n        });\r\n\r\n        this.statusDataSource = new kendo.data.DataSource({\r\n            type: \"json\",\r\n            transport: {\r\n                read:\r\n                {\r\n                    url: \"/Ordering/api/InvoiceBase/LoadStatus\"\r\n                }\r\n            }\r\n        });\r\n\r\n        this.statesDataSource = new kendo.data.DataSource({\r\n            type: \"json\",\r\n            transport: {\r\n                read:\r\n                {\r\n                    url: \"/Ordering/api/InvoiceBase/LoadStates\"\r\n                }\r\n            }\r\n        });\r\n\r\n        this.memberAddressDataSource = new kendo.data.DataSource({\r\n            type: \"json\",\r\n            transport: {\r\n                read:\r\n                {\r\n                    url: \"/Ordering/api/InvoiceEdit/GetShippingAddress\"\r\n                }\r\n            }\r\n        });\r\n\r\n        this.contactsDataSource = new kendo.data.DataSource({\r\n            type: \"json\",\r\n            serverFiltering: true,\r\n            serverPaging: true,\r\n            pageSize: 10,\r\n            transport: {\r\n                read: {\r\n                    url: '/Bizworks/api/Contacts',\r\n                    type: \"POST\"\r\n                }\r\n            },\r\n            schema: {\r\n                data: function (data) {\r\n                    if (data && data.Items) {\r\n                        return data.Items;\r\n                    } else {\r\n                        return null;\r\n                    }\r\n                },\r\n                total: function (data) {\r\n                    if (data) {\r\n                        return data.TotalCount;\r\n                    } else {\r\n                        return 0;\r\n                    }\r\n                }\r\n            },\r\n            requestStart: function (e) {\r\n                kendo.ui.progress($(\"#dgContacts\"), true);\r\n            },\r\n            requestEnd: function (e) {\r\n                kendo.ui.progress($(\"#dgContacts\"), false);\r\n            }\r\n        });\r\n\r\n        this.discountsDataSource = new kendo.data.DataSource({\r\n            type: \"json\",\r\n            transport: {\r\n                read:\r\n                {\r\n                    url: \"/Ordering/api/InvoiceEdit/GetMemberDiscounts\"\r\n                }\r\n            }\r\n        });\r\n\r\n        this.loadErrorMessages = function () {\r\n            if (this.edit_Invoice_Action == \"Invoice_Edit\") {\r\n                var self = this;\r\n                $.ajax({\r\n                    type: 'get',\r\n                    dataType: 'json',\r\n                    cache: true,\r\n                    url: '/Ordering/api/InvoiceEdit/LoadErrorMessage',\r\n                    success: function (data) {\r\n                        if (data) {\r\n                            self.set(\"errorMessages\", data);\r\n                        }\r\n                    },\r\n                    error: function () {\r\n                        self.error = true;\r\n                    },\r\n                    complete: function () {\r\n                    }\r\n                });\r\n            }\r\n        };\r\n\r\n        this.loadInvoicedata = function () {\r\n            var self = this;\r\n            if (this.edit_Invoice_Action == \"Invoice_Edit\") {\r\n                if (self.edit_InvoiceId == 0 && self.edit_OrderId != \"\" && self.edit_CopyInvoiceId == 0) {\r\n                    //Came from MyOrders\r\n                    var createInvoiceFromOrderIdRequest = {\r\n                        OrderId: self.edit_OrderId,\r\n                        Source: self.edit_Order_Source\r\n                    };\r\n                    $.ajax({\r\n                        url: \"/Ordering/api/InvoiceEdit/GetInvoiceFromOrderId\",\r\n                        type: 'POST',\r\n                        data: JSON.stringify(createInvoiceFromOrderIdRequest),\r\n                        contentType: \"application/json; charset=utf-8\",\r\n                        success: function (data) {\r\n                            self.setInvoiceData(data);\r\n                            self.set('statusSelected', { Value: data.Status });\r\n                            self.set('stateSelected', { Value: data.Address.State });\r\n                            self.loadShippingAddress();\r\n                        },\r\n                        error: function (data) {\r\n                        },\r\n                        beforeSend: function () {\r\n                            kendo.ui.progress($(\"#loading\"), true);\r\n                        },\r\n                        complete: function () {\r\n                            kendo.ui.progress($(\"#loading\"), false);\r\n                        }\r\n                    });\r\n                    // get the id from edit_InvoiceId and load the invoice for the id\r\n\r\n                } else if (self.edit_InvoiceId > 0 && self.edit_OrderId == \"\" && self.edit_CopyInvoiceId == 0) {\r\n                    var invoiceId = self.edit_InvoiceId;\r\n                    $.ajax({\r\n                        type: 'get',\r\n                        dataType: 'json',\r\n                        cache: true,\r\n                        data: JSON.stringify(invoiceId),\r\n                        url: '/Ordering/api/InvoiceSearch/Load/' + invoiceId,\r\n                        success: function (data) {\r\n                            if (data && data.Id > 0) {\r\n                                self.setInvoiceData(data);\r\n                                self.set('statusSelected', { Value: data.Status });\r\n                                self.set('stateSelected', { Value: data.Address.State });\r\n                            }\r\n                            else {\r\n                                window.location.href = \"/Ordering/Invoice\";\r\n                                return false;\r\n                            }\r\n                        },\r\n                        error: function () {\r\n                            self.error = true;\r\n                        },\r\n                        beforeSend: function () {\r\n                            kendo.ui.progress($(\"#loading\"), true);\r\n                        },\r\n                        complete: function () {\r\n                            kendo.ui.progress($(\"#loading\"), false);\r\n                        }\r\n                    });\r\n                    // get the id from edit_InvoiceId and load the invoice for the id\r\n                } else if (self.edit_InvoiceId == 0 && self.edit_OrderId == \"\" && self.edit_CopyInvoiceId > 0) {\r\n                    //Copy Invoice\r\n                    var invoiceId = self.edit_CopyInvoiceId;\r\n                    $.ajax({\r\n                        type: 'get',\r\n                        dataType: 'json',\r\n                        cache: true,\r\n                        data: JSON.stringify(invoiceId),\r\n                        url: '/Ordering/api/InvoiceEdit/Copy/' + invoiceId,\r\n                        success: function (data) {\r\n                            if (data) {\r\n                                self.setInvoiceData(data);\r\n                                self.set('statusSelected', { Value: data.Status });\r\n                                self.set('stateSelected', { Value: data.Address.State });\r\n                            }\r\n                        },\r\n                        error: function () {\r\n                            self.error = true;\r\n                        },\r\n                        beforeSend: function () {\r\n                            kendo.ui.progress($(\"#loading\"), true);\r\n                        },\r\n                        complete: function () {\r\n                            kendo.ui.progress($(\"#loading\"), false);\r\n                        }\r\n                    });\r\n                } else {\r\n\r\n                    self.set('invoice', new invEdit.InvoiceModel());\r\n                    self.invoice.set('InvoiceDate', new Date(moment(self.edit_Invoice_Date)));\r\n                    $.ajax({\r\n                        type: 'get',\r\n                        dataType: 'json',\r\n                        cache: true,\r\n                        url: '/Ordering/api/InvoiceEdit/LoadMemberAddress',\r\n                        success: function (data) {\r\n                            if (data) {\r\n                                self.invoice.set('MemberAddress', data);\r\n                                self.invoice.set('HasShippingAddress', true);\r\n                                \r\n                            }\r\n                            if (data == null) {\r\n                                self.invoice.set('InvoiceShipToAddress', true);\r\n                                self.invoice.set('HasShippingAddress', false);\r\n                            }\r\n                        },\r\n                        error: function () {\r\n                            self.error = true;\r\n                        },\r\n                        beforeSend: function () {\r\n                            kendo.ui.progress($(\"#dvinvProduct\"), true);\r\n                        },\r\n                        complete: function () {\r\n                            kendo.ui.progress($(\"#dvinvProduct\"), false);\r\n                        }\r\n                    });\r\n                }\r\n            };\r\n        };\r\n\r\n        this.setInvoiceData = function (data) {\r\n            if (data) {\r\n                this.set('invoice', data);\r\n                this.invoice.set('InvoiceDate', new Date(moment(data.InvoiceDate)));\r\n                this.set('stateSelected', { Value: data.Address.State });\r\n            }\r\n        };\r\n\r\n        this.onRootCategoryChange = function () {\r\n            if (this.selectedRootCategoryItem) {\r\n                this.loadCategories(this.selectedRootCategoryItem.Id);\r\n                var pager = $(\"#pager\").data(\"kendoPager\");\r\n                pager.page(1);\r\n            }\r\n        };\r\n\r\n        this.dataBound = function (e) {\r\n            e.sender.expandRow(e.sender.tbody.find(\"tr.k-master-row\").first());\r\n        };\r\n\r\n        this.contactsDataBound = function (e) {\r\n            kendo.ui.progress($(\"#dgContacts\"), false);\r\n            if (this.contactsDataSource && this.contactsDataSource.total() == 0) {\r\n                this.set('contactsErrorText', this.errorMessages['contactsError']);\r\n            } else {\r\n                this.set('contactsErrorText', '');\r\n            }\r\n        };\r\n\r\n        this.clickContacts = function () {\r\n            kendo.ui.progress($(\"#loading\"), true);\r\n            var wnd = $('#dvInvContacts').data('kendoWindow');\r\n            wnd.center().open();\r\n            this.contactsDataSource.read();\r\n            kendo.ui.progress($(\"#loading\"), false);\r\n        };\r\n\r\n        this.clickProducts = function () {\r\n            kendo.ui.progress($(\"#loading\"), true);\r\n            this.loadRootCategories();\r\n            var wnd = $('#dvInvProducts').data('kendoWindow');\r\n            wnd.center().open();\r\n            kendo.ui.progress($(\"#loading\"), false);\r\n        };\r\n\r\n        this.clickSavedCarts = function () {\r\n            kendo.ui.progress($(\"#loading\"), true);\r\n            this.loadSavedCarts();\r\n            var wnd = $('#dvSavedCarts').data('kendoWindow');\r\n            wnd.center().open();\r\n            kendo.ui.progress($(\"#loading\"), false);\r\n        };\r\n\r\n        this.addProducts = function () {\r\n            kendo.ui.progress($(\"#loading\"), true);\r\n            var self = this;\r\n            var selectedProduct = this.get(\"selectedProduct\");\r\n\r\n            var skuAdded = false;\r\n            if (null != selectedProduct && null != selectedProduct.Sku) {\r\n                for (var i = 0; i < self.invoice.InvoiceLines.length; i++) {\r\n                    if (self.invoice.InvoiceLines[i].Sku == selectedProduct.Sku) {\r\n                        self.invoice.InvoiceLines[i].set(\"Quantity\", self.invoice.InvoiceLines[i].Quantity + selectedProduct.Quantity);\r\n                        skuAdded = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (!skuAdded && selectedProduct != null && null != selectedProduct.Sku) {\r\n                    self.invoice.InvoiceLines.push(selectedProduct);\r\n                }\r\n\r\n                if (selectedProduct != null && null != selectedProduct.Sku) {\r\n                    self.set(\"selectedProduct\", null);\r\n                    self.calculateBasePrice();\r\n                    invEdit.validator().hideMessages();\r\n                    $(\"#individual-products\").removeClass(\"k-invalid\");\r\n                }\r\n                self.set('addProductErrorText', '');\r\n            } else {\r\n                self.set('addProductErrorText', self.errorMessages['productSearchError']);\r\n            }\r\n            kendo.ui.progress($(\"#loading\"), false);\r\n        };\r\n\r\n\r\n        this.deleteProducts = function (e) {\r\n            var self = this;\r\n            self.invoice.InvoiceLines.remove(e.data);\r\n            self.calculateBasePrice();\r\n        };\r\n\r\n\r\n        this.onProductChange = function () {\r\n\r\n            var selectedProduct = this.get(\"selectedProduct\");\r\n            alert(selectedProduct.Sku);\r\n            alert(kendo.stringify(selectedProduct));\r\n        };\r\n\r\n        this.loadRootCategories = function () {\r\n            var self = this;\r\n\r\n            $.when(\r\n                $.ajax({\r\n                    type: 'get',\r\n                    dataType: 'json',\r\n                    cache: true,\r\n                    url: '/Ordering/api/InvoiceBase/LoadRootCategories',\r\n                    success: function (data) {\r\n                        self.set(\"rootCategories\", data);\r\n                        if (data) {\r\n                            self.set(\"selectedRootCategoryItem\", data[0]);\r\n                        }\r\n                    },\r\n                    error: function () {\r\n                        self.error = true;\r\n                    },\r\n                    beforeSend: function () {\r\n                        kendo.ui.progress($(\"#products-search\"), true);\r\n                    },\r\n                    complete: function () {\r\n                        kendo.ui.progress($(\"#products-search\"), false);\r\n                    }\r\n                })).then(function () {\r\n                    if (self.selectedRootCategoryItem) {\r\n                        self.loadCategories(self.selectedRootCategoryItem.Id);\r\n                    }\r\n                    kendo.ui.progress($(\"#products-search\"), false);\r\n                }\r\n            );\r\n        };\r\n\r\n        this.loadCategories = function (id) {\r\n            var self = this;\r\n            $.ajax({\r\n                type: 'get',\r\n                dataType: 'json',\r\n                cache: true,\r\n                url: '/Ordering/api/InvoiceBase/LoadCategories/' + id +'/'+self.invoice.Type,\r\n                success: function (data) {\r\n                    self.set(\"categories\", data);\r\n                },\r\n                error: function () {\r\n                    self.error = true;\r\n                },\r\n                beforeSend: function () {\r\n                    kendo.ui.progress($(\"#lvProducts\"), true);\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#lvProducts\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n        this.selectCategory = function (e) {\r\n            e.preventDefault();\r\n            var self = this;\r\n            var sku = $(e.target).data('parameter');\r\n\r\n            var addedProduct = null;\r\n            $.ajax({\r\n                type: 'get',\r\n                dataType: 'json',\r\n                cache: true,\r\n                async: true,\r\n                url: '/Ordering/api/InvoiceBase/GetInvoiceLineModel/' + sku + '/' + self.invoice.Type,\r\n                success: function (data) {\r\n                    if (data) {\r\n                        addedProduct = data;\r\n                        var skuAdded = false;\r\n                        if (null != addedProduct) {\r\n\r\n                            if (null == self.invoice) {\r\n                                self.set('invoice', new invEdit.InvoiceModel());\r\n                            }\r\n\r\n                            for (var i = 0; i < self.invoice.InvoiceLines.length; i++) {\r\n                                if (self.invoice.InvoiceLines[i].Sku == sku) {\r\n                                    self.invoice.InvoiceLines[i].set(\"Quantity\", self.invoice.InvoiceLines[i].Quantity + addedProduct.Quantity);\r\n                                    skuAdded = true;\r\n                                    break;\r\n                                }\r\n                            }\r\n\r\n                            if (!skuAdded) {\r\n                                self.invoice.InvoiceLines.push(addedProduct);\r\n                            }\r\n                            //var productsWnd = $('#dvInvProducts').data('kendoWindow');\r\n                            //if (productsWnd) {\r\n                            //productsWnd.close();\r\n                            //}\r\n                            self.calculateBasePrice();\r\n                            invEdit.validator().hideMessages();\r\n                            $(\"#individual-products\").removeClass(\"k-invalid\");\r\n                        }\r\n                    }\r\n                },\r\n                error: function () {\r\n\r\n                },\r\n                beforeSend: function () {\r\n                    kendo.ui.progress($(\"#lvProducts\"), true);\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#lvProducts\"), false);\r\n                }\r\n            });\r\n\r\n        };\r\n\r\n        this.selectContact = function (e) {\r\n            e.preventDefault();\r\n            if (this.invoice) {\r\n                this.invoice.set(\"FirstName\", e.data.FirstName);\r\n                this.invoice.set(\"LastName\", e.data.LastName);\r\n                this.invoice.set(\"Phone\", e.data.PhoneNumber);\r\n                this.invoice.set(\"Email\", e.data.PrimaryEmailAddress);\r\n                if (this.invoice.Address) {\r\n                    this.invoice.Address.set(\"Address1\", e.data.StreetAddress1);\r\n                    this.invoice.Address.set(\"City\", e.data.City);\r\n                    this.invoice.Address.set(\"State\", e.data.State);\r\n                    this.set('stateSelected', e.data.State);\r\n                    this.invoice.Address.set(\"PostalCode\", e.data.PostalCode);\r\n                    this.invoice.Address.set(\"Country\", e.data.Country);\r\n                }\r\n            }\r\n\r\n            var contactsWnd = $('#dvInvContacts').data('kendoWindow');\r\n            if (contactsWnd) {\r\n                contactsWnd.close();\r\n            }\r\n        };\r\n\r\n        this.selectSavedCarts = function (e) {\r\n            e.preventDefault();\r\n            var self = this;\r\n            var cartId = e.data.Id;\r\n            $.ajax({\r\n                url: \"/Ordering/api/InvoiceEdit/GetInvoiceFromCartId\",\r\n                type: 'POST',\r\n                data: { \"\": cartId },\r\n\r\n                success: function (data) {\r\n                    self.setInvoiceData(data);\r\n\r\n                    var savedCartsWnd = $('#dvSavedCarts').data('kendoWindow');\r\n                    if (savedCartsWnd) {\r\n                        savedCartsWnd.close();\r\n                    }\r\n                },\r\n                error: function (data) {\r\n                },\r\n                beforeSend: function () {\r\n                    kendo.ui.progress($(\"#loading\"), true);\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#loading\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n        this.searchSavedCarts = function () {\r\n            var self = this;\r\n            $.ajax({\r\n                type: 'get',\r\n                dataType: 'json',\r\n                cache: true,\r\n                data: JSON.stringify(this.savedCartsFilter),\r\n                url: '/Ordering/api/InvoiceEdit/FilterSavedCarts/' + this.savedCartsFilter,\r\n                success: function (data) {\r\n                    self.set(\"savedCarts\", data);\r\n                },\r\n                error: function () {\r\n                    self.error = true;\r\n                },\r\n                beforeSend: function () {\r\n                    kendo.ui.progress($(\"#dgSavedCarts\"), true);\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#dgSavedCarts\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n        this.loadSavedCarts = function () {\r\n            var self = this;\r\n            $.ajax({\r\n                type: 'get',\r\n                dataType: 'json',\r\n                cache: true,\r\n                url: '/Ordering/api/InvoiceEdit/LoadSavedCarts',\r\n                success: function (data) {\r\n                    if (data) {\r\n                        self.set(\"savedCarts\", data);\r\n                    }\r\n                },\r\n                error: function () {\r\n                    self.error = true;\r\n                },\r\n                beforeSend: function () {\r\n                    kendo.ui.progress($(\"#dgSavedCarts\"), true);\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#dgSavedCarts\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n        this.SearchContacts = function () {\r\n\r\n            this.contactsDataSource.filter([\r\n                {\r\n                    \"logic\": \"or\",\r\n                    \"filters\": [\r\n                        {\r\n                            \"field\": \"FirstName\",\r\n                            \"operator\": \"startswith\",\r\n                            \"value\": this.contactsFilter\r\n                        },\r\n                        {\r\n                            \"field\": \"LastName\",\r\n                            \"operator\": \"startswith\",\r\n                            \"value\": this.contactsFilter\r\n                        }\r\n                    ]\r\n                }\r\n            ]);\r\n        };\r\n\r\n\r\n        this.SearchProducts = function () {\r\n            var self = this;\r\n\r\n            var invoiceCategoryFilter = {\r\n                RootCategoryId: this.selectedRootCategoryItem.Id,\r\n                Filter: this.productsFilter,\r\n                Type: this.invoice.Type\r\n            };\r\n            $.ajax({\r\n                url: '/Ordering/api/InvoiceBase/SearchCategories',\r\n                type: 'POST',\r\n                data: JSON.stringify(invoiceCategoryFilter),\r\n                contentType: \"application/json; charset=utf-8\",\r\n                success: function (data) {\r\n                    if (data && data.length > 0) {\r\n                        self.set('productSearchErrorText', '');\r\n                    } else {\r\n                        self.set('productSearchErrorText', self.errorMessages['productSearchError']);\r\n                    }\r\n                    self.set(\"categories\", data);\r\n                },\r\n                error: function (data) {\r\n                },\r\n                beforeSend: function () {\r\n                    kendo.ui.progress($(\"#lvProducts\"), true);\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#lvProducts\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n        this.loadShippingAddress = function () {\r\n            var self = this;\r\n            if (this.edit_Invoice_Action == \"Invoice_Edit\") {\r\n                $.ajax({\r\n                    type: 'get',\r\n                    dataType: 'json',\r\n                    cache: true,\r\n                    url: '/Ordering/api/InvoiceEdit/LoadMemberAddress',\r\n                    success: function (data) {\r\n                        if (data) {\r\n                            self.invoice.set('MemberAddress', data);\r\n                            self.invoice.set('HasShippingAddress', true);\r\n\r\n                        }\r\n                        if (data == null) {\r\n                            self.invoice.set('InvoiceShipToAddress', true);\r\n                            self.invoice.set('HasShippingAddress', false);\r\n                        }\r\n                    },\r\n                    error: function () {\r\n                        self.error = true;\r\n                    },\r\n                    beforeSend: function () {\r\n                        kendo.ui.progress($(\"#dvinvProduct\"), true);\r\n                    },\r\n                    complete: function () {\r\n                        kendo.ui.progress($(\"#dvinvProduct\"), false);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n\r\n        this.onProdcutsPageChange = function (e) {\r\n            var listview = $(\"#lvProducts\").data(\"kendoListView\");\r\n            listview.dataSource.page(e.sender.page());\r\n        };\r\n\r\n        this.onShippingPercentageChange = function () {\r\n\r\n            if (this.invoice && this.invoice.InvoicePrice) {\r\n                this.invoice.InvoicePrice.set(\"ShippingAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxPercentage\", 0);\r\n                $(\"#shippingPercentage\").prev().removeClass(\"k-state-disabled\");\r\n                $(\"#shippingAmount\").prev().addClass(\"k-state-disabled\");\r\n                this.invoice.set(\"IsCustomerShippingHandlingEdited\", true);\r\n            }\r\n        };\r\n\r\n        this.onShippingAmountChange = function () {\r\n\r\n            if (this.invoice && this.invoice.InvoicePrice) {\r\n                this.invoice.InvoicePrice.set(\"ShippingPercentage\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxPercentage\", 0);\r\n                $(\"#shippingAmount\").prev().removeClass(\"k-state-disabled\");\r\n                $(\"#shippingPercentage\").prev().addClass(\"k-state-disabled\");\r\n                this.invoice.set(\"IsCustomerShippingHandlingEdited\", true);\r\n            }\r\n        };\r\n\r\n        this.onDiscountPercentageChange = function () {\r\n\r\n            if (this.invoice && this.invoice.InvoicePrice) {\r\n                this.invoice.InvoicePrice.set(\"DiscountAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxPercentage\", 0);\r\n                $(\"#discountPercentage\").prev().removeClass(\"k-state-disabled\");\r\n                $(\"#discountAmount\").prev().addClass(\"k-state-disabled\");\r\n\r\n                this.calculateTotalDue();\r\n            }\r\n        };\r\n\r\n        this.onDiscountDropDownPercentageChange = function () {\r\n\r\n            if (this.invoice && this.invoice.InvoicePrice) {\r\n                this.invoice.InvoicePrice.set(\"DiscountAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxPercentage\", 0);\r\n\r\n                this.calculateTotalDue();\r\n            }\r\n        };\r\n\r\n        this.onStateChange = function () {\r\n            if (this.invoice && this.invoice.Address && this.invoice.Address.State) {\r\n                this.set('stateSelected', this.invoice.Address.State);\r\n            }\r\n        };\r\n\r\n        this.onDiscountAmountChange = function () {\r\n\r\n            if (this.invoice && this.invoice.InvoicePrice) {\r\n                this.invoice.InvoicePrice.set(\"DiscountPercentage\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxAmount\", 0);\r\n                this.invoice.InvoicePrice.set(\"TaxPercentage\", 0);\r\n                $(\"#discountAmount\").prev().removeClass(\"k-state-disabled\");\r\n                $(\"#discountPercentage\").prev().addClass(\"k-state-disabled\");\r\n\r\n                this.calculateTotalDue();\r\n            }\r\n        };\r\n\r\n        this.onTaxPercentageChange = function () {\r\n\r\n            if (this.invoice && this.invoice.InvoicePrice) {\r\n                this.invoice.InvoicePrice.set(\"TaxAmount\", 0);\r\n                $(\"#taxPercentage\").prev().removeClass(\"k-state-disabled\");\r\n                $(\"#taxAmount\").prev().addClass(\"k-state-disabled\");\r\n                this.invoice.set(\"IsCustomerTaxEdited\", true);\r\n            }\r\n        };\r\n\r\n        this.onTaxAmountChange = function () {\r\n\r\n            if (this.invoice && this.invoice.InvoicePrice) {\r\n                this.invoice.InvoicePrice.set(\"TaxPercentage\", 0);\r\n                $(\"#taxAmount\").prev().removeClass(\"k-state-disabled\");\r\n                $(\"#taxPercentage\").prev().addClass(\"k-state-disabled\");\r\n                this.invoice.set(\"IsCustomerTaxEdited\", true);\r\n            }\r\n        };\r\n\r\n        this.resetToDefaultValueClicked = function () {\r\n\r\n            if (this.invoice) {\r\n                this.invoice.set(\"ResetCustomerTaxValue\", true);\r\n                this.calculateBasePrice();\r\n            }\r\n        };\r\n\r\n        this.launchShippingHandling = function () {\r\n            var myWin = $(\"#dvPlg\");\r\n            if (!myWin.data(\"kendoWindow\")) {\r\n                var pUpCntr = $('<div />').attr({ 'id': 'dvPlg', 'class': 'pnlEstimateSH' }).appendTo(document.body);\r\n                var options = {\r\n                    content: '/Ordering/Invoice/HtmlFragment?path=lblShippingHandlingTable.html',\r\n                    actions: [\"Close\"],\r\n                    modal: true,\r\n                    draggable: true,\r\n                    resizable: true,\r\n                    visible: false,\r\n                    height: 685,\r\n                    width: 591\r\n                };\r\n                var windCntr = pUpCntr.kendoWindow(options);\r\n                windCntr.data(\"kendoWindow\").open().center();\r\n            } else {\r\n                myWin.data(\"kendoWindow\").open().center();\r\n            }\r\n\r\n        };\r\n    },\r\n\r\n    renderProductsTemplate: function (data) {\r\n        return kendo.Template.compile($('#invProductsTpl').html())(data);\r\n    },\r\n    InvoiceModel: function () {\r\n        this.Id = null;\r\n        this.MemberId = null;\r\n        this.MemberInvoiceNumber = null;\r\n        this.FirstName = null;\r\n        this.LastName = null;\r\n        this.InvoiceDate = \"\";\r\n        this.CreatedDate = \"\";\r\n        this.CustomerId = null;\r\n        this.Address = new invEdit.InvoiceAddressModel();\r\n        this.InvoiceLines = [];\r\n        this.InvoicePrice = new invEdit.InvoicePriceModel();\r\n        this.InvoiceContact = null;\r\n        this.Email = null;\r\n        this.Type = \"Customer\";\r\n        this.OrderId = null;\r\n        this.Notes = null;\r\n        this.Status = null;\r\n        this.Phone = null;\r\n        this.PaymentAddress = null;\r\n        this.TotalVolumePoints = null;\r\n        this.Total = null;\r\n        this.DisplayTotal = null;\r\n        this.ShippingMethod = null;\r\n        this.InvoiceShipToAddress = true;\r\n        this.HasShippingAddress = true;\r\n        this.MemberAddress = new invEdit.InvoiceAddressModel();\r\n        this.MemberEmailAddress = null;\r\n        this.MemberFirstName = \"\";\r\n        this.MemberLastName = \"\";\r\n        this.OrderSource = \"\";\r\n        this.PricingType = \"\";\r\n        this.ShippingMethod = \"\";\r\n        this.Source = \"\";\r\n        this.IsFaceToFace = false;\r\n        this.IsGdoMemberPricing = false;\r\n        this.DisplayInvoiceStatus = \"\";\r\n        this.DisplayInvoiceType = \"\";\r\n        this.IsMemberTaxEdited = false;\r\n        this.IsMemberHandlingFeeEdited = false;\r\n        this.MakeMemberTaxZero = false;\r\n        this.MakeMemberHandlingFeeZero = false;\r\n        this.IsCustomerTaxEdited = false;\r\n        this.IsCustomerShippingHandlingEdited = false;\r\n        this.ResetCustomerTaxValue = false;\r\n    },\r\n\r\n    InvoiceAddressModel: function () {\r\n        this.Address1 = null;\r\n        this.Address2 = null;\r\n        this.City = null;\r\n        this.Country = null;\r\n        this.County = null;\r\n        this.PostalCode = null;\r\n        this.State = null;\r\n    },\r\n    InvoiceLineModel: function () {\r\n        this.Sku = null;\r\n        this.ProductName = null;\r\n        this.Quantity = null;\r\n        this.RetailPrice = null;\r\n        this.TotalRetailPrice = null;\r\n        this.EarnBase = null;\r\n        this.StockingSku = null;\r\n        this.ProductType = null;\r\n        this.ProductCategory = null;\r\n        this.VolumePoint = null;\r\n        //Will get calculated/Populated by a PriceFactory\r\n        this.TotalEarnBase = null;\r\n        this.TotalVolumePoint = null;\r\n        this.YourPrice = null;\r\n        this.DisplayRetailPrice = null;\r\n        this.DisplayTotalRetailPrice = null;\r\n        this.DisplayCurrencySymbol = null;\r\n        this.DisplayTotalVp = null;\r\n        this.DisplayYourPrice = null;\r\n        this.FreightCharge = 0;\r\n        this.CalcDiscountedAmount = 0;\r\n    },\r\n    InvoicePriceModel: function () {\r\n        this.DiscountPercentage = 0;\r\n        this.DiscountAmount = 0;\r\n        this.CalcDiscountAmount = 0;\r\n        this.TaxPercentage = 0;\r\n        this.TaxAmount = 0;\r\n        this.ShippingPercentage = 0;\r\n        this.ShippingAmount = 0;\r\n        this.TotalDue = 0;\r\n        this.SubTotal = 0;\r\n\r\n        this.TotalEarnBase = 0;\r\n\r\n        this.CalcShippingAmount = 0;\r\n        this.CalcTaxAmount = 0;\r\n        this.TotalDiscountedAmount = 0;\r\n\r\n\r\n        this.MemberTax = 0;\r\n        this.MemberFreight = 0;\r\n        this.MemberTotal = 0;\r\n        this.TotalYourPrice = 0;\r\n        this.Profit = 0;\r\n        this.ProfitPercentage = 0;\r\n        this.MemberStaticDiscount = 0;\r\n        this.MemberDiscount = 0;\r\n\r\n        //Will get calculated by a PriceFactory\r\n        this.DisplayDiscountedAmount = null;\r\n        this.DisplayCurrencySymbol = null;\r\n        this.DisplaySubtotal = null;\r\n        this.DisplayDiscount = null;\r\n        this.DisplayShipping = null;\r\n        this.DisplayTax = null;\r\n        this.DisplayTotalDue = null;\r\n        this.DisplayCalculatedTax = null;\r\n\r\n        this.DisplayProfit = null;\r\n        this.DisplayMemberTax = null;\r\n        this.DisplayMemberFreight = null;\r\n        this.DisplayMemberTotal = null;\r\n        this.DisplayTotalYourPrice = null;\r\n        this.DisplayProfitPercentage = null;\r\n    },\r\n\r\n    scrollTo: function (selector) {\r\n        $('html, body').animate({\r\n            scrollTop: ($(selector).offset().top - 100)\r\n        }, 500);\r\n    }\r\n};\r\n$(function () {\r\n    invEdit.Init();\r\n    $('.collapse-member-information a').click(function (e) {\r\n        e.preventDefault();\r\n        toggleMemberInfo(this);\r\n    });\r\n\r\n    $(\"#taxAmount\").keypress(function () {\r\n        \r\n        var model = $('#taxAmount').prop(\"kendoBindingTarget\").source;\r\n        if (model) {\r\n            model.invoice.set(\"IsCustomerTaxEdited\", true);\r\n        }\r\n    });\r\n\r\n    $(\"#taxPercentage\").keypress(function () {\r\n\r\n        var model = $('#taxPercentage').prop(\"kendoBindingTarget\").source;\r\n        if (model) {\r\n            model.invoice.set(\"IsCustomerTaxEdited\", true);\r\n        }\r\n    });\r\n\r\n    // Set functionality when clicking the arrow of the estimate S&H Fragment.\r\n    $(document).on('click', '.selectRate', function () {\r\n        var val = $(this).parent().parent().children('td').eq(1).html();\r\n\r\n        if (val.indexOf('span') >= 0) {\r\n            val = $(this).parent().parent().children('td').eq(0).html();\r\n        }\r\n\r\n        var model = $('#shippingPercentage').prop(\"kendoBindingTarget\").source;\r\n        if (val && model) {\r\n            model.invoice.InvoicePrice.set(\"ShippingPercentage\", val.substring(0, val.indexOf('%')));\r\n            model.invoice.InvoicePrice.set(\"ShippingAmount\", 0);\r\n            model.invoice.InvoicePrice.set(\"TaxAmount\", 0);\r\n            model.invoice.InvoicePrice.set(\"TaxPercentage\", 0);\r\n            $(\"#shippingPercentage\").prev().removeClass(\"k-state-disabled\");\r\n            $(\"#shippingAmount\").prev().addClass(\"k-state-disabled\");\r\n            var wnd = $(\"#dvPlg\").data(\"kendoWindow\");\r\n            wnd.close();\r\n\r\n\r\n        }\r\n        return false;\r\n    });\r\n    if ($('#dgProducts > table').length > 0) {\r\n        $('.collapse-member-information').css('margin-top', ($('#dgProducts > table').offset().top - $('#dgTotals > table').offset().top));\r\n    }\r\n    \r\n});\r\n\r\nfunction toggleMemberInfo(_this) {\r\n    var member_info = $('div.member-information');\r\n\r\n    member_info.animate({\r\n        left: (parseInt(member_info.css('left'), 10) == 0 || isNaN(parseInt(member_info.css('left'), 10)))\r\n            ? -member_info.outerWidth()\r\n            : 0\r\n    }, {\r\n        start: function () {\r\n            $(_this).toggleClass('icon-arrow-circle-fl-8');\r\n            if ($(_this).hasClass('icon-arrow-circle-fl-8')) {\r\n                member_info.css('z-index', -1);\r\n                $(_this).html(\"<span>\" + showText + \"</span>\");\r\n            } else {\r\n                $(_this).html(\"<span>\" + collapse + \"</span>\");\r\n            }\r\n        },\r\n        complete: function () {\r\n            if (!$(_this).hasClass('icon-arrow-circle-fl-8')) {\r\n                member_info.css('z-index', 'auto');\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nfunction RedirectToReceipts() {\r\n    var locale = _AnalyticsFacts_.LanguageCode + '-' + _AnalyticsFacts_.CountryCode;\r\n    var _countries = ['EN-US', 'ES-US', 'ES-PR'];\r\n\r\n    if (is_page('invoice') && (_countries.indexOf(locale.toUpperCase()) > -1)) {\r\n        logger.log('Page not longer available, please use Receipts page!');\r\n        return '/' + locale + '/Shop/Receipts/Invoice/Index/Ds';;\r\n    }\r\n    return false;\r\n}","var inventoryDetails = {\r\n    Init: function () {\r\n        if ($('#inventoryGrid').length > 0) {\r\n            var detailsModel = kendo.observable(new inventoryDetails.DetailsviewModel());\r\n            kendo.bind($('#inventoryGrid'), detailsModel);\r\n            detailsModel.loadInventory();\r\n        }\r\n        \r\n        //detailsModel.loadErrorMessages();\r\n    },\r\n    \r\n    DetailsviewModel: function () {\r\n        this.Location = null;\r\n        this.ListEmpty = false;\r\n        this.details = [];\r\n        this.isLoading = false;\r\n        this.isLoaded = true;\r\n        \r\n        this.loadInventory = function() {\r\n            var self = this;\r\n            $(\"#principalContent\").css('position', 'relative');\r\n            kendo.ui.progress($(\"#principalContent\"), true);\r\n            $.ajax({\r\n                type: 'get',\r\n                dataType: 'json',\r\n                cache: true,\r\n                url: '/Ordering/api/BackOrderDetail/GetInventoryDetails',\r\n                success: function(data) {\r\n                    self.dataHandler(data);\r\n                },\r\n                error: function() {\r\n                    self.error = true;\r\n                },\r\n                complete: function() {\r\n                    $(\"#principalContent\").css('position', 'static');\r\n                    kendo.ui.progress($(\"#principalContent\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n        this.dataHandler = function (data) {\r\n            if (data) {\r\n\r\n                //Let's generate the show data frame\r\n                drawShowData(data.WhDetails, data.HasShipping);\r\n\r\n                //Let's generate the table\r\n                drawTable(data);\r\n\r\n                if (this.details.length == 0)\r\n                    this.set(\"ListEmpty\", true);\r\n                else\r\n                    this.set(\"ListEmpty\", false);\r\n            }\r\n        };\r\n\r\n    }\r\n        \r\n};\r\n\r\n$(function () {\r\n    inventoryDetails.Init();\r\n});\r\n\r\nfunction drawShowData(dataWareHouses, hasShipping) {\r\n    var wareHouse = $(\"<tr />\");\r\n    \r\n    $(\"#showDataGrid\").append(wareHouse);\r\n\r\n    for (var x = 0; x < dataWareHouses.length; x++) {\r\n        if (hasShipping == true) {\r\n            if (dataWareHouses[x].Option == \"Shipping\") {\r\n                wareHouse.append($(\"<td><input id='dwhouse\" + x + \"' type='checkbox' name='dwhouse' checked='checked' /> \" + dataWareHouses[x].Name + \" (\" + dataWareHouses[x].OptionText + \")</input></td>\"));\r\n            } else {\r\n                wareHouse.append($(\"<td><input id='dwhouse\" + x + \"' type='checkbox' name='dwhouse'/> \" + dataWareHouses[x].Name + \" (\" + dataWareHouses[x].OptionText + \")</input></td>\"));\r\n            }\r\n        } else {\r\n            wareHouse.append($(\"<td><input id='dwhouse\" + x + \"' type='checkbox' name='dwhouse' checked='checked' /> \" + dataWareHouses[x].Name + \" (\" + dataWareHouses[x].OptionText + \")</input></td>\"));\r\n        }\r\n    }\r\n}\r\n\r\nfunction drawTable(data) {\r\n\r\n    //Let's draw the header\r\n    var rowHeader = $(\"<tr />\");\r\n    $(\"#inventoryGrid\").append(rowHeader);\r\n\r\n    rowHeader.append($(\"<th class='col-SKU'>\" + SkuColumnTitleText + \"</th>\"));\r\n    rowHeader.append($(\"<th class='col-Product'>\" + DescriptionColumnText + \"</th>\"));\r\n    \r\n    for (var x = 0; x < data.WhDetails.length; x++) {\r\n        if (data.HasShipping == true) {\r\n            if (data.WhDetails[x].Option == \"Shipping\") {\r\n                rowHeader.append($(\"<th reference=dwhouse\" + x + \">\" + data.WhDetails[x].Name + \"</th>\"));\r\n            } else {\r\n                rowHeader.append($(\"<th reference=dwhouse\" + x + \">\" + data.WhDetails[x].Name + \"</th>\").hide());\r\n            }\r\n        } else {\r\n            rowHeader.append($(\"<th reference=dwhouse\" + x + \">\" + data.WhDetails[x].Name + \"</th>\"));\r\n        }\r\n    }\r\n\r\n    //Let's draw the subheader\r\n    var rowsubHeader = $(\"<tr />\");\r\n    $(\"#inventoryGrid\").append(rowsubHeader);\r\n\r\n    rowsubHeader.append($(\"<th class='invSubHeader'></th>\"));\r\n    rowsubHeader.append($(\"<th class='invSubHeader'></th>\"));\r\n\r\n    for (var x = 0; x < data.WhDetails.length; x++) {\r\n        if (data.HasShipping == true) {\r\n            if (data.WhDetails[x].Option == \"Shipping\") {\r\n                rowsubHeader.append($(\"<th class='invSubHeader' reference=dwhouse\" + x + \">\" + data.WhDetails[x].OptionText + \"</th>\"));\r\n            } else {\r\n                rowsubHeader.append($(\"<th class='invSubHeader' reference=dwhouse\" + x + \">\" + data.WhDetails[x].OptionText + \"</th>\").hide());\r\n            }\r\n        //} else {\r\n        //    //rowsubHeader.append($(\"<th class='invSubHeader' reference=dwhouse\" + x + \">\" + data.WhDetails[x].OptionText + \"</th>\"));\r\n        }\r\n    }\r\n\r\n\r\n    //Let's draw the body\r\n    for (var x = 0; x < data.FullCatalog.length; x++) {\r\n        var row = $(\"<tr rowRef=\" + x + \" />\");\r\n        $(\"#inventoryGrid\").append(row);\r\n\r\n        row.append($(\"<td class='col-SKU'>\" + data.FullCatalog[x].SKU + \"</td>\"));\r\n        row.append($(\"<td class='col-Product'>\" + data.FullCatalog[x].SKUDescription + \"</td>\"));\r\n\r\n        //Let's compare the dataWareHouse position against the location on the Full Catalog array. If they match, we placed it in a new array with the corresponding position\r\n        var skuInfo = new Array(data.WhDetails.length);\r\n        var skuStatus;\r\n        \r\n        for (var y = 0; y < data.FullCatalog[x].InventoryDetails.length; y++) {    \r\n            for (var z = 0; z < data.WhDetails.length; z++) {\r\n                if ((data.FullCatalog[x].InventoryDetails[y].WHCode == data.WhDetails[z].WHCode) && (data.FullCatalog[x].InventoryDetails[y].DeliveryType == data.WhDetails[z].Option) && (data.FullCatalog[x].InventoryDetails[y].Location == data.WhDetails[z].Name)) {\r\n                    var img;\r\n                    var link = true;\r\n                    var skuStatus = false;\r\n\r\n                    if (((data.FullCatalog[x].InventoryDetails[y].Status == \"Unavailable\") || (data.FullCatalog[x].InventoryDetails[y].Status == null)) && (data.FullCatalog[x].InventoryDetails[y].DeliveryType == data.WhDetails[z].Option)) {\r\n                        img = \"<img src='/Content/Global/Products/Img/circle_red.gif' />\";\r\n                    } else if ((data.FullCatalog[x].InventoryDetails[y].Status == \"Available\") && (data.FullCatalog[x].InventoryDetails[y].DeliveryType == data.WhDetails[z].Option)) {\r\n                            img = \"<img src='/Content/Global/Products/Img/circle_green.gif' />\";\r\n                            link = false;\r\n                            skuStatus = true;\r\n                    } else if ((data.FullCatalog[x].InventoryDetails[y].Status == \"AllowBackOrder\") && (data.FullCatalog[x].InventoryDetails[y].DeliveryType == data.WhDetails[z].Option)) {\r\n                            img = \"<img src='/Content/Global/Products/Img/circle_orange.gif' />\";\r\n                            link = false;\r\n                            skuStatus = true;\r\n                    } else if ((data.FullCatalog[x].InventoryDetails[y].Status == \"UnavailableInPrimaryWh\") && (data.FullCatalog[x].InventoryDetails[y].DeliveryType == data.WhDetails[z].Option)) {\r\n                            img = \"<img src='/Content/Global/Products/Img/circle_blue.gif' />\";\r\n                            link = false;\r\n                            skuStatus = true;\r\n                    } else {\r\n                            img = data.FullCatalog[x].InventoryDetails[y].Status;\r\n                            link = false;\r\n                    }\r\n\r\n                    if (link) {\r\n                        skuInfo[z] = img + \"<div class='ttip'><a href='#' location='\" + data.FullCatalog[x].InventoryDetails[y].Location + \"' dateAvailability='\" + data.FullCatalog[x].InventoryDetails[y].AvailabilityDate + \"' type='\" + data.FullCatalog[x].InventoryDetails[y].Type + \"' tooltipcomments='\" + data.FullCatalog[x].InventoryDetails[y].ToolTipComments + \"' comments='\" + data.FullCatalog[x].InventoryDetails[y].Comments + \"' x='\" + x + \"' z='\" + z + \"'>\" + StatusText + \"</a></div>\";\r\n                    } else {\r\n                        skuInfo[z] = img;\r\n                    }\r\n                } \r\n                continue;\r\n            }\r\n        }\r\n\r\n        //Let's draw the row with the position values correct\r\n        for (var i = 0; i < skuInfo.length; i++) {\r\n            if (typeof skuInfo[i] !== \"undefined\") {\r\n                if (data.HasShipping == true) {\r\n                    if (data.WhDetails[i].Option == 'Shipping') {\r\n                        row.append($(\"<td reference=dwhouse\" + i + \">\" + skuInfo[i] + \"</td>\").css('background-color', '#f3f3f3'));\r\n                    } else {\r\n                        row.append($(\"<td reference=dwhouse\" + i + \">\" + skuInfo[i] + \"</td>\").hide());\r\n                    }\r\n                } else {\r\n                    row.append($(\"<td reference=dwhouse\" + i + \">\" + skuInfo[i] + \"</td>\").css('background-color', '#f3f3f3'));\r\n                }\r\n            } else {\r\n                row.append($(\"<td reference=dwhouse\" + i + \"><img src='/Content/Global/Products/Img/circle_red.gif' /></td>\"));\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n$(document).ready(function () {\r\n    \r\n    $(\"input[name='dwhouse']\").live('click', function () {\r\n        if ($(this).prop(\"checked\") == true) {\r\n            $('#inventoryGrid [reference=\"' + this.id + '\"]').show();\r\n        } else {\r\n            $('#inventoryGrid [reference=\"' + this.id + '\"]').hide();\r\n        }\r\n    });\r\n\r\n    $(function () {\r\n        $(\".ttip a\").live('click', function ( event ) {\r\n            event.preventDefault();\r\n            var location = $(this).attr('location');\r\n            var dateAvailability = $(this).attr('dateAvailability');\r\n            var type = $(this).attr('type');\r\n            var tooltipcomments = $(this).attr('tooltipcomments');\r\n            var comments = $(this).attr('comments');\r\n            var row = $(this).attr('x');\r\n            var cell = $(this).attr('z');\r\n\r\n            $(\"#inventoryGrid tr[rowRef] td[reference] div.ttip > div\").hide();\r\n                        \r\n            var tooltipContent = $(\"<div />\");\r\n            $(\"#inventoryGrid tr[rowRef=\" + row + \"] td[reference='dwhouse\" + cell + \"'] div.ttip\").append(tooltipContent);\r\n            tooltipContent.append($(\"<div class='tooltipContent'>\" + location + \"<br /> \" + type + \" <br /> \" + dateAvailability + \" <br /> \" + comments + \" <br /> \" + tooltipcomments + \" </div>\"));\r\n\r\n            $(\"#inventoryGrid tr[rowRef] td[reference] div.ttip > div\").hide();\r\n            $(\"#inventoryGrid tr[rowRef=\" + row + \"] td[reference='dwhouse\" + cell + \"'] div.ttip > div\").show();\r\n        });\r\n    });\r\n});\r\n\r\n\r\n$(document).mouseup(function (e) {\r\n    \r\n    var container = $(\"#inventoryGrid tr[rowRef] td[reference] div.ttip > div\");\r\n\r\n    if (!container.is(e.target) // if the target of the click isn't the container...\r\n        && container.has(e.target).length === 0) // ... nor a descendant of the container\r\n    {\r\n        if (container.is(':visible')) {\r\n            container.hide();\r\n        }\r\n    }\r\n});","// --------------------------------------------------------------------------------------------------------------------\r\n// <copyright file=\"jquery.ajaxPost.js\" company=\"Herbalife\">\r\n//   Herbalife 2012\r\n// </copyright>\r\n// <summary>\r\n//   Handle the json ajax posts.\r\n// </summary>\r\n// --------------------------------------------------------------------------------------------------------------------\r\n\r\n$.ajaxPost = function (method, data, success, error) {\r\n    $.ajax({\r\n        type: \"POST\",\r\n        url: window.location.href.replace('#', '') + \"/\" + method,\r\n        data: data,\r\n        contentType: \"application/json; charset=utf-8\",\r\n        dataType: \"json\",\r\n        success: success,\r\n        error: function showError(xhr, status, exc) { location.reload(true); }\r\n    });\r\n};","/*!\n * jQuery Cookie Plugin v1.3.1\n * https://github.com/carhartl/jquery-cookie\n *\n * Copyright 2013 Klaus Hartl\n * Released under the MIT license\n */\n(function ($, document, undefined) {\n\n\tvar pluses = /\\+/g;\n\n\tfunction raw(s) {\n\t\treturn s;\n\t}\n\n\tfunction decoded(s) {\n\t\treturn unRfc2068(decodeURIComponent(s.replace(pluses, ' ')));\n\t}\n\n\tfunction unRfc2068(value) {\n\t\tif (value.indexOf('\"') === 0) {\n\t\t\t// This is a quoted cookie as according to RFC2068, unescape\n\t\t\tvalue = value.slice(1, -1).replace(/\\\\\"/g, '\"').replace(/\\\\\\\\/g, '\\\\');\n\t\t}\n\t\treturn value;\n\t}\n\n\tfunction fromJSON(value) {\n\t\treturn config.json ? JSON.parse(value) : value;\n\t}\n\n\tvar config = $.cookie = function (key, value, options) {\n\n\t\t// write\n\t\tif (value !== undefined) {\n\t\t\toptions = $.extend({}, config.defaults, options);\n\n\t\t\tif (value === null) {\n\t\t\t\toptions.expires = -1;\n\t\t\t}\n\n\t\t\tif (typeof options.expires === 'number') {\n\t\t\t\tvar days = options.expires, t = options.expires = new Date();\n\t\t\t\tt.setDate(t.getDate() + days);\n\t\t\t}\n\n\t\t\tvalue = config.json ? JSON.stringify(value) : String(value);\n\n\t\t\treturn (document.cookie = [\n\t\t\t\tencodeURIComponent(key), '=', config.raw ? value : encodeURIComponent(value),\n\t\t\t\toptions.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\n\t\t\t\toptions.path    ? '; path=' + options.path : '',\n\t\t\t\toptions.domain  ? '; domain=' + options.domain : '',\n\t\t\t\toptions.secure  ? '; secure' : ''\n\t\t\t].join(''));\n\t\t}\n\n\t\t// read\n\t\tvar decode = config.raw ? raw : decoded;\n\t\tvar cookies = document.cookie.split('; ');\n\t\tvar result = key ? null : {};\n\t\tfor (var i = 0, l = cookies.length; i < l; i++) {\n\t\t\tvar parts = cookies[i].split('=');\n\t\t\tvar name = decode(parts.shift());\n\t\t\tvar cookie = decode(parts.join('='));\n\n\t\t\tif (key && key === name) {\n\t\t\t\tresult = fromJSON(cookie);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (!key) {\n\t\t\t\tresult[name] = fromJSON(cookie);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tconfig.defaults = {};\n\n\t$.removeCookie = function (key, options) {\n\t\tif ($.cookie(key) !== null) {\n\t\t\t$.cookie(key, null, options);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n})(jQuery, document);\n","/* FileSaver.js\r\n * A saveAs() FileSaver implementation.\r\n * 2014-07-25\r\n *\r\n * By Eli Grey, http://eligrey.com\r\n * License: X11/MIT\r\n *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\r\n */\r\n\r\n/*global self */\r\n/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\r\n\r\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\r\n\r\nvar saveAs = saveAs\r\n  // IE 10+ (native saveAs)\r\n  || (typeof navigator !== \"undefined\" &&\r\n      navigator.msSaveOrOpenBlob && navigator.msSaveOrOpenBlob.bind(navigator))\r\n  // Everyone else\r\n  || (function(view) {\r\n\t\"use strict\";\r\n\t// IE <10 is explicitly unsupported\r\n\tif (typeof navigator !== \"undefined\" &&\r\n\t    /MSIE [1-9]\\./.test(navigator.userAgent)) {\r\n\t\treturn;\r\n\t}\r\n\tvar\r\n\t\t  doc = view.document\r\n\t\t  // only get URL when necessary in case Blob.js hasn't overridden it yet\r\n\t\t, get_URL = function() {\r\n\t\t\treturn view.URL || view.webkitURL || view;\r\n\t\t}\r\n\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\r\n\t\t, can_use_save_link = !view.externalHost && \"download\" in save_link\r\n\t\t, click = function(node) {\r\n\t\t\tvar event = doc.createEvent(\"MouseEvents\");\r\n\t\t\tevent.initMouseEvent(\r\n\t\t\t\t\"click\", true, false, view, 0, 0, 0, 0, 0\r\n\t\t\t\t, false, false, false, false, 0, null\r\n\t\t\t);\r\n\t\t\tnode.dispatchEvent(event);\r\n\t\t}\r\n\t\t, webkit_req_fs = view.webkitRequestFileSystem\r\n\t\t, req_fs = view.requestFileSystem || webkit_req_fs || view.mozRequestFileSystem\r\n\t\t, throw_outside = function(ex) {\r\n\t\t\t(view.setImmediate || view.setTimeout)(function() {\r\n\t\t\t\tthrow ex;\r\n\t\t\t}, 0);\r\n\t\t}\r\n\t\t, force_saveable_type = \"application/octet-stream\"\r\n\t\t, fs_min_size = 0\r\n\t\t// See https://code.google.com/p/chromium/issues/detail?id=375297#c7 for\r\n\t\t// the reasoning behind the timeout and revocation flow\r\n\t\t, arbitrary_revoke_timeout = 10\r\n\t\t, revoke = function(file) {\r\n\t\t\tvar revoker = function() {\r\n\t\t\t\tif (typeof file === \"string\") { // file is an object URL\r\n\t\t\t\t\tget_URL().revokeObjectURL(file);\r\n\t\t\t\t} else { // file is a File\r\n\t\t\t\t\tfile.remove();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tif (view.chrome) {\r\n\t\t\t\trevoker();\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(revoker, arbitrary_revoke_timeout);\r\n\t\t\t}\r\n\t\t}\r\n\t\t, dispatch = function(filesaver, event_types, event) {\r\n\t\t\tevent_types = [].concat(event_types);\r\n\t\t\tvar i = event_types.length;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\r\n\t\t\t\tif (typeof listener === \"function\") {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\r\n\t\t\t\t\t} catch (ex) {\r\n\t\t\t\t\t\tthrow_outside(ex);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t, FileSaver = function(blob, name) {\r\n\t\t\t// First try a.download, then web filesystem, then object URLs\r\n\t\t\tvar\r\n\t\t\t\t  filesaver = this\r\n\t\t\t\t, type = blob.type\r\n\t\t\t\t, blob_changed = false\r\n\t\t\t\t, object_url\r\n\t\t\t\t, target_view\r\n\t\t\t\t, dispatch_all = function() {\r\n\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\r\n\t\t\t\t}\r\n\t\t\t\t// on any filesys errors revert to saving with object URLs\r\n\t\t\t\t, fs_error = function() {\r\n\t\t\t\t\t// don't create more object URLs than needed\r\n\t\t\t\t\tif (blob_changed || !object_url) {\r\n\t\t\t\t\t\tobject_url = get_URL().createObjectURL(blob);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (target_view) {\r\n\t\t\t\t\t\ttarget_view.location.href = object_url;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar new_tab = view.open(object_url, \"_blank\");\r\n\t\t\t\t\t\tif (new_tab == undefined && typeof safari !== \"undefined\") {\r\n\t\t\t\t\t\t\t//Apple do not allow window.open, see http://bit.ly/1kZffRI\r\n\t\t\t\t\t\t\tview.location.href = object_url\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\tdispatch_all();\r\n\t\t\t\t\trevoke(object_url);\r\n\t\t\t\t}\r\n\t\t\t\t, abortable = function(func) {\r\n\t\t\t\t\treturn function() {\r\n\t\t\t\t\t\tif (filesaver.readyState !== filesaver.DONE) {\r\n\t\t\t\t\t\t\treturn func.apply(this, arguments);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\t, create_if_not_found = {create: true, exclusive: false}\r\n\t\t\t\t, slice\r\n\t\t\t;\r\n\t\t\tfilesaver.readyState = filesaver.INIT;\r\n\t\t\tif (!name) {\r\n\t\t\t\tname = \"download\";\r\n\t\t\t}\r\n\t\t\tif (can_use_save_link) {\r\n\t\t\t\tobject_url = get_URL().createObjectURL(blob);\r\n\t\t\t\tsave_link.href = object_url;\r\n\t\t\t\tsave_link.download = name;\r\n\t\t\t\tclick(save_link);\r\n\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\tdispatch_all();\r\n\t\t\t\trevoke(object_url);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// Object and web filesystem URLs have a problem saving in Google Chrome when\r\n\t\t\t// viewed in a tab, so I force save with application/octet-stream\r\n\t\t\t// http://code.google.com/p/chromium/issues/detail?id=91158\r\n\t\t\t// Update: Google errantly closed 91158, I submitted it again:\r\n\t\t\t// https://code.google.com/p/chromium/issues/detail?id=389642\r\n\t\t\tif (view.chrome && type && type !== force_saveable_type) {\r\n\t\t\t\tslice = blob.slice || blob.webkitSlice;\r\n\t\t\t\tblob = slice.call(blob, 0, blob.size, force_saveable_type);\r\n\t\t\t\tblob_changed = true;\r\n\t\t\t}\r\n\t\t\t// Since I can't be sure that the guessed media type will trigger a download\r\n\t\t\t// in WebKit, I append .download to the filename.\r\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=65440\r\n\t\t\tif (webkit_req_fs && name !== \"download\") {\r\n\t\t\t\tname += \".download\";\r\n\t\t\t}\r\n\t\t\tif (type === force_saveable_type || webkit_req_fs) {\r\n\t\t\t\ttarget_view = view;\r\n\t\t\t}\r\n\t\t\tif (!req_fs) {\r\n\t\t\t\tfs_error();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tfs_min_size += blob.size;\r\n\t\t\treq_fs(view.TEMPORARY, fs_min_size, abortable(function(fs) {\r\n\t\t\t\tfs.root.getDirectory(\"saved\", create_if_not_found, abortable(function(dir) {\r\n\t\t\t\t\tvar save = function() {\r\n\t\t\t\t\t\tdir.getFile(name, create_if_not_found, abortable(function(file) {\r\n\t\t\t\t\t\t\tfile.createWriter(abortable(function(writer) {\r\n\t\t\t\t\t\t\t\twriter.onwriteend = function(event) {\r\n\t\t\t\t\t\t\t\t\ttarget_view.location.href = file.toURL();\r\n\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\t\t\t\t\tdispatch(filesaver, \"writeend\", event);\r\n\t\t\t\t\t\t\t\t\trevoke(file);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\twriter.onerror = function() {\r\n\t\t\t\t\t\t\t\t\tvar error = writer.error;\r\n\t\t\t\t\t\t\t\t\tif (error.code !== error.ABORT_ERR) {\r\n\t\t\t\t\t\t\t\t\t\tfs_error();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\"writestart progress write abort\".split(\" \").forEach(function(event) {\r\n\t\t\t\t\t\t\t\t\twriter[\"on\" + event] = filesaver[\"on\" + event];\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\twriter.write(blob);\r\n\t\t\t\t\t\t\t\tfilesaver.abort = function() {\r\n\t\t\t\t\t\t\t\t\twriter.abort();\r\n\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.WRITING;\r\n\t\t\t\t\t\t\t}), fs_error);\r\n\t\t\t\t\t\t}), fs_error);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tdir.getFile(name, {create: false}, abortable(function(file) {\r\n\t\t\t\t\t\t// delete file if it already exists\r\n\t\t\t\t\t\tfile.remove();\r\n\t\t\t\t\t\tsave();\r\n\t\t\t\t\t}), abortable(function(ex) {\r\n\t\t\t\t\t\tif (ex.code === ex.NOT_FOUND_ERR) {\r\n\t\t\t\t\t\t\tsave();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfs_error();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}));\r\n\t\t\t\t}), fs_error);\r\n\t\t\t}), fs_error);\r\n\t\t}\r\n\t\t, FS_proto = FileSaver.prototype\r\n\t\t, saveAs = function(blob, name) {\r\n\t\t\treturn new FileSaver(blob, name);\r\n\t\t}\r\n\t;\r\n\tFS_proto.abort = function() {\r\n\t\tvar filesaver = this;\r\n\t\tfilesaver.readyState = filesaver.DONE;\r\n\t\tdispatch(filesaver, \"abort\");\r\n\t};\r\n\tFS_proto.readyState = FS_proto.INIT = 0;\r\n\tFS_proto.WRITING = 1;\r\n\tFS_proto.DONE = 2;\r\n\r\n\tFS_proto.error =\r\n\tFS_proto.onwritestart =\r\n\tFS_proto.onprogress =\r\n\tFS_proto.onwrite =\r\n\tFS_proto.onabort =\r\n\tFS_proto.onerror =\r\n\tFS_proto.onwriteend =\r\n\t\tnull;\r\n\r\n\treturn saveAs;\r\n}(\r\n\t   typeof self !== \"undefined\" && self\r\n\t|| typeof window !== \"undefined\" && window\r\n\t|| this.content\r\n));\r\n// `self` is undefined in Firefox for Android content script context\r\n// while `this` is nsIContentFrameMessageManager\r\n// with an attribute `content` that corresponds to the window\r\n\r\nif (typeof module !== \"undefined\" && module !== null) {\r\n  module.exports = saveAs;\r\n} else if ((typeof define !== \"undefined\" && define !== null) && (define.amd != null)) {\r\n  define([], function() {\r\n    return saveAs;\r\n  });\r\n}","//! moment.js\r\n//! version : 2.8.4\r\n//! authors : Tim Wood, Iskren Chernev, Moment.js contributors\r\n//! license : MIT\r\n//! momentjs.com\r\n\r\n(function (undefined) {\r\n    /************************************\r\n        Constants\r\n    ************************************/\r\n\r\n    var moment,\r\n        VERSION = '2.8.4',\r\n        // the global-scope this is NOT the global object in Node.js\r\n        globalScope = typeof global !== 'undefined' ? global : this,\r\n        oldGlobalMoment,\r\n        round = Math.round,\r\n        hasOwnProperty = Object.prototype.hasOwnProperty,\r\n        i,\r\n\r\n        YEAR = 0,\r\n        MONTH = 1,\r\n        DATE = 2,\r\n        HOUR = 3,\r\n        MINUTE = 4,\r\n        SECOND = 5,\r\n        MILLISECOND = 6,\r\n\r\n        // internal storage for locale config files\r\n        locales = {},\r\n\r\n        // extra moment internal properties (plugins register props here)\r\n        momentProperties = [],\r\n\r\n        // check for nodeJS\r\n        hasModule = (typeof module !== 'undefined' && module && module.exports),\r\n\r\n        // ASP.NET json date format regex\r\n        aspNetJsonRegex = /^\\/?Date\\((\\-?\\d+)/i,\r\n        aspNetTimeSpanJsonRegex = /(\\-)?(?:(\\d*)\\.)?(\\d+)\\:(\\d+)(?:\\:(\\d+)\\.?(\\d{3})?)?/,\r\n\r\n        // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html\r\n        // somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere\r\n        isoDurationRegex = /^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,\r\n\r\n        // format tokens\r\n        formattingTokens = /(\\[[^\\[]*\\])|(\\\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,\r\n        localFormattingTokens = /(\\[[^\\[]*\\])|(\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g,\r\n\r\n        // parsing token regexes\r\n        parseTokenOneOrTwoDigits = /\\d\\d?/, // 0 - 99\r\n        parseTokenOneToThreeDigits = /\\d{1,3}/, // 0 - 999\r\n        parseTokenOneToFourDigits = /\\d{1,4}/, // 0 - 9999\r\n        parseTokenOneToSixDigits = /[+\\-]?\\d{1,6}/, // -999,999 - 999,999\r\n        parseTokenDigits = /\\d+/, // nonzero number of digits\r\n        parseTokenWord = /[0-9]*['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+|[\\u0600-\\u06FF\\/]+(\\s*?[\\u0600-\\u06FF]+){1,2}/i, // any word (or two) characters or numbers including two/three word month in arabic.\r\n        parseTokenTimezone = /Z|[\\+\\-]\\d\\d:?\\d\\d/gi, // +00:00 -00:00 +0000 -0000 or Z\r\n        parseTokenT = /T/i, // T (ISO separator)\r\n        parseTokenOffsetMs = /[\\+\\-]?\\d+/, // 1234567890123\r\n        parseTokenTimestampMs = /[\\+\\-]?\\d+(\\.\\d{1,3})?/, // 123456789 123456789.123\r\n\r\n        //strict parsing regexes\r\n        parseTokenOneDigit = /\\d/, // 0 - 9\r\n        parseTokenTwoDigits = /\\d\\d/, // 00 - 99\r\n        parseTokenThreeDigits = /\\d{3}/, // 000 - 999\r\n        parseTokenFourDigits = /\\d{4}/, // 0000 - 9999\r\n        parseTokenSixDigits = /[+-]?\\d{6}/, // -999,999 - 999,999\r\n        parseTokenSignedNumber = /[+-]?\\d+/, // -inf - inf\r\n\r\n        // iso 8601 regex\r\n        // 0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)\r\n        isoRegex = /^\\s*(?:[+-]\\d{6}|\\d{4})-(?:(\\d\\d-\\d\\d)|(W\\d\\d$)|(W\\d\\d-\\d)|(\\d\\d\\d))((T| )(\\d\\d(:\\d\\d(:\\d\\d(\\.\\d+)?)?)?)?([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/,\r\n\r\n        isoFormat = 'YYYY-MM-DDTHH:mm:ssZ',\r\n\r\n        isoDates = [\r\n            ['YYYYYY-MM-DD', /[+-]\\d{6}-\\d{2}-\\d{2}/],\r\n            ['YYYY-MM-DD', /\\d{4}-\\d{2}-\\d{2}/],\r\n            ['GGGG-[W]WW-E', /\\d{4}-W\\d{2}-\\d/],\r\n            ['GGGG-[W]WW', /\\d{4}-W\\d{2}/],\r\n            ['YYYY-DDD', /\\d{4}-\\d{3}/]\r\n        ],\r\n\r\n        // iso time formats and regexes\r\n        isoTimes = [\r\n            ['HH:mm:ss.SSSS', /(T| )\\d\\d:\\d\\d:\\d\\d\\.\\d+/],\r\n            ['HH:mm:ss', /(T| )\\d\\d:\\d\\d:\\d\\d/],\r\n            ['HH:mm', /(T| )\\d\\d:\\d\\d/],\r\n            ['HH', /(T| )\\d\\d/]\r\n        ],\r\n\r\n        // timezone chunker '+10:00' > ['10', '00'] or '-1530' > ['-15', '30']\r\n        parseTimezoneChunker = /([\\+\\-]|\\d\\d)/gi,\r\n\r\n        // getter and setter names\r\n        proxyGettersAndSetters = 'Date|Hours|Minutes|Seconds|Milliseconds'.split('|'),\r\n        unitMillisecondFactors = {\r\n            'Milliseconds': 1,\r\n            'Seconds': 1e3,\r\n            'Minutes': 6e4,\r\n            'Hours': 36e5,\r\n            'Days': 864e5,\r\n            'Months': 2592e6,\r\n            'Years': 31536e6\r\n        },\r\n\r\n        unitAliases = {\r\n            ms: 'millisecond',\r\n            s: 'second',\r\n            m: 'minute',\r\n            h: 'hour',\r\n            d: 'day',\r\n            D: 'date',\r\n            w: 'week',\r\n            W: 'isoWeek',\r\n            M: 'month',\r\n            Q: 'quarter',\r\n            y: 'year',\r\n            DDD: 'dayOfYear',\r\n            e: 'weekday',\r\n            E: 'isoWeekday',\r\n            gg: 'weekYear',\r\n            GG: 'isoWeekYear'\r\n        },\r\n\r\n        camelFunctions = {\r\n            dayofyear: 'dayOfYear',\r\n            isoweekday: 'isoWeekday',\r\n            isoweek: 'isoWeek',\r\n            weekyear: 'weekYear',\r\n            isoweekyear: 'isoWeekYear'\r\n        },\r\n\r\n        // format function strings\r\n        formatFunctions = {},\r\n\r\n        // default relative time thresholds\r\n        relativeTimeThresholds = {\r\n            s: 45,  // seconds to minute\r\n            m: 45,  // minutes to hour\r\n            h: 22,  // hours to day\r\n            d: 26,  // days to month\r\n            M: 11   // months to year\r\n        },\r\n\r\n        // tokens to ordinalize and pad\r\n        ordinalizeTokens = 'DDD w W M D d'.split(' '),\r\n        paddedTokens = 'M D H h m s w W'.split(' '),\r\n\r\n        formatTokenFunctions = {\r\n            M: function () {\r\n                return this.month() + 1;\r\n            },\r\n            MMM: function (format) {\r\n                return this.localeData().monthsShort(this, format);\r\n            },\r\n            MMMM: function (format) {\r\n                return this.localeData().months(this, format);\r\n            },\r\n            D: function () {\r\n                return this.date();\r\n            },\r\n            DDD: function () {\r\n                return this.dayOfYear();\r\n            },\r\n            d: function () {\r\n                return this.day();\r\n            },\r\n            dd: function (format) {\r\n                return this.localeData().weekdaysMin(this, format);\r\n            },\r\n            ddd: function (format) {\r\n                return this.localeData().weekdaysShort(this, format);\r\n            },\r\n            dddd: function (format) {\r\n                return this.localeData().weekdays(this, format);\r\n            },\r\n            w: function () {\r\n                return this.week();\r\n            },\r\n            W: function () {\r\n                return this.isoWeek();\r\n            },\r\n            YY: function () {\r\n                return leftZeroFill(this.year() % 100, 2);\r\n            },\r\n            YYYY: function () {\r\n                return leftZeroFill(this.year(), 4);\r\n            },\r\n            YYYYY: function () {\r\n                return leftZeroFill(this.year(), 5);\r\n            },\r\n            YYYYYY: function () {\r\n                var y = this.year(), sign = y >= 0 ? '+' : '-';\r\n                return sign + leftZeroFill(Math.abs(y), 6);\r\n            },\r\n            gg: function () {\r\n                return leftZeroFill(this.weekYear() % 100, 2);\r\n            },\r\n            gggg: function () {\r\n                return leftZeroFill(this.weekYear(), 4);\r\n            },\r\n            ggggg: function () {\r\n                return leftZeroFill(this.weekYear(), 5);\r\n            },\r\n            GG: function () {\r\n                return leftZeroFill(this.isoWeekYear() % 100, 2);\r\n            },\r\n            GGGG: function () {\r\n                return leftZeroFill(this.isoWeekYear(), 4);\r\n            },\r\n            GGGGG: function () {\r\n                return leftZeroFill(this.isoWeekYear(), 5);\r\n            },\r\n            e: function () {\r\n                return this.weekday();\r\n            },\r\n            E: function () {\r\n                return this.isoWeekday();\r\n            },\r\n            a: function () {\r\n                return this.localeData().meridiem(this.hours(), this.minutes(), true);\r\n            },\r\n            A: function () {\r\n                return this.localeData().meridiem(this.hours(), this.minutes(), false);\r\n            },\r\n            H: function () {\r\n                return this.hours();\r\n            },\r\n            h: function () {\r\n                return this.hours() % 12 || 12;\r\n            },\r\n            m: function () {\r\n                return this.minutes();\r\n            },\r\n            s: function () {\r\n                return this.seconds();\r\n            },\r\n            S: function () {\r\n                return toInt(this.milliseconds() / 100);\r\n            },\r\n            SS: function () {\r\n                return leftZeroFill(toInt(this.milliseconds() / 10), 2);\r\n            },\r\n            SSS: function () {\r\n                return leftZeroFill(this.milliseconds(), 3);\r\n            },\r\n            SSSS: function () {\r\n                return leftZeroFill(this.milliseconds(), 3);\r\n            },\r\n            Z: function () {\r\n                var a = -this.zone(),\r\n                    b = '+';\r\n                if (a < 0) {\r\n                    a = -a;\r\n                    b = '-';\r\n                }\r\n                return b + leftZeroFill(toInt(a / 60), 2) + ':' + leftZeroFill(toInt(a) % 60, 2);\r\n            },\r\n            ZZ: function () {\r\n                var a = -this.zone(),\r\n                    b = '+';\r\n                if (a < 0) {\r\n                    a = -a;\r\n                    b = '-';\r\n                }\r\n                return b + leftZeroFill(toInt(a / 60), 2) + leftZeroFill(toInt(a) % 60, 2);\r\n            },\r\n            z: function () {\r\n                return this.zoneAbbr();\r\n            },\r\n            zz: function () {\r\n                return this.zoneName();\r\n            },\r\n            x: function () {\r\n                return this.valueOf();\r\n            },\r\n            X: function () {\r\n                return this.unix();\r\n            },\r\n            Q: function () {\r\n                return this.quarter();\r\n            }\r\n        },\r\n\r\n        deprecations = {},\r\n\r\n        lists = ['months', 'monthsShort', 'weekdays', 'weekdaysShort', 'weekdaysMin'];\r\n\r\n    // Pick the first defined of two or three arguments. dfl comes from\r\n    // default.\r\n    function dfl(a, b, c) {\r\n        switch (arguments.length) {\r\n            case 2: return a != null ? a : b;\r\n            case 3: return a != null ? a : b != null ? b : c;\r\n            default: throw new Error('Implement me');\r\n        }\r\n    }\r\n\r\n    function hasOwnProp(a, b) {\r\n        return hasOwnProperty.call(a, b);\r\n    }\r\n\r\n    function defaultParsingFlags() {\r\n        // We need to deep clone this object, and es5 standard is not very\r\n        // helpful.\r\n        return {\r\n            empty: false,\r\n            unusedTokens: [],\r\n            unusedInput: [],\r\n            overflow: -2,\r\n            charsLeftOver: 0,\r\n            nullInput: false,\r\n            invalidMonth: null,\r\n            invalidFormat: false,\r\n            userInvalidated: false,\r\n            iso: false\r\n        };\r\n    }\r\n\r\n    function printMsg(msg) {\r\n        if (moment.suppressDeprecationWarnings === false &&\r\n                typeof console !== 'undefined' && console.warn) {\r\n            console.warn('Deprecation warning: ' + msg);\r\n        }\r\n    }\r\n\r\n    function deprecate(msg, fn) {\r\n        var firstTime = true;\r\n        return extend(function () {\r\n            if (firstTime) {\r\n                printMsg(msg);\r\n                firstTime = false;\r\n            }\r\n            return fn.apply(this, arguments);\r\n        }, fn);\r\n    }\r\n\r\n    function deprecateSimple(name, msg) {\r\n        if (!deprecations[name]) {\r\n            printMsg(msg);\r\n            deprecations[name] = true;\r\n        }\r\n    }\r\n\r\n    function padToken(func, count) {\r\n        return function (a) {\r\n            return leftZeroFill(func.call(this, a), count);\r\n        };\r\n    }\r\n    function ordinalizeToken(func, period) {\r\n        return function (a) {\r\n            return this.localeData().ordinal(func.call(this, a), period);\r\n        };\r\n    }\r\n\r\n    while (ordinalizeTokens.length) {\r\n        i = ordinalizeTokens.pop();\r\n        formatTokenFunctions[i + 'o'] = ordinalizeToken(formatTokenFunctions[i], i);\r\n    }\r\n    while (paddedTokens.length) {\r\n        i = paddedTokens.pop();\r\n        formatTokenFunctions[i + i] = padToken(formatTokenFunctions[i], 2);\r\n    }\r\n    formatTokenFunctions.DDDD = padToken(formatTokenFunctions.DDD, 3);\r\n\r\n\r\n    /************************************\r\n        Constructors\r\n    ************************************/\r\n\r\n    function Locale() {\r\n    }\r\n\r\n    // Moment prototype object\r\n    function Moment(config, skipOverflow) {\r\n        if (skipOverflow !== false) {\r\n            checkOverflow(config);\r\n        }\r\n        copyConfig(this, config);\r\n        this._d = new Date(+config._d);\r\n    }\r\n\r\n    // Duration Constructor\r\n    function Duration(duration) {\r\n        var normalizedInput = normalizeObjectUnits(duration),\r\n            years = normalizedInput.year || 0,\r\n            quarters = normalizedInput.quarter || 0,\r\n            months = normalizedInput.month || 0,\r\n            weeks = normalizedInput.week || 0,\r\n            days = normalizedInput.day || 0,\r\n            hours = normalizedInput.hour || 0,\r\n            minutes = normalizedInput.minute || 0,\r\n            seconds = normalizedInput.second || 0,\r\n            milliseconds = normalizedInput.millisecond || 0;\r\n\r\n        // representation for dateAddRemove\r\n        this._milliseconds = +milliseconds +\r\n            seconds * 1e3 + // 1000\r\n            minutes * 6e4 + // 1000 * 60\r\n            hours * 36e5; // 1000 * 60 * 60\r\n        // Because of dateAddRemove treats 24 hours as different from a\r\n        // day when working around DST, we need to store them separately\r\n        this._days = +days +\r\n            weeks * 7;\r\n        // It is impossible translate months into days without knowing\r\n        // which months you are are talking about, so we have to store\r\n        // it separately.\r\n        this._months = +months +\r\n            quarters * 3 +\r\n            years * 12;\r\n\r\n        this._data = {};\r\n\r\n        this._locale = moment.localeData();\r\n\r\n        this._bubble();\r\n    }\r\n\r\n    /************************************\r\n        Helpers\r\n    ************************************/\r\n\r\n\r\n    function extend(a, b) {\r\n        for (var i in b) {\r\n            if (hasOwnProp(b, i)) {\r\n                a[i] = b[i];\r\n            }\r\n        }\r\n\r\n        if (hasOwnProp(b, 'toString')) {\r\n            a.toString = b.toString;\r\n        }\r\n\r\n        if (hasOwnProp(b, 'valueOf')) {\r\n            a.valueOf = b.valueOf;\r\n        }\r\n\r\n        return a;\r\n    }\r\n\r\n    function copyConfig(to, from) {\r\n        var i, prop, val;\r\n\r\n        if (typeof from._isAMomentObject !== 'undefined') {\r\n            to._isAMomentObject = from._isAMomentObject;\r\n        }\r\n        if (typeof from._i !== 'undefined') {\r\n            to._i = from._i;\r\n        }\r\n        if (typeof from._f !== 'undefined') {\r\n            to._f = from._f;\r\n        }\r\n        if (typeof from._l !== 'undefined') {\r\n            to._l = from._l;\r\n        }\r\n        if (typeof from._strict !== 'undefined') {\r\n            to._strict = from._strict;\r\n        }\r\n        if (typeof from._tzm !== 'undefined') {\r\n            to._tzm = from._tzm;\r\n        }\r\n        if (typeof from._isUTC !== 'undefined') {\r\n            to._isUTC = from._isUTC;\r\n        }\r\n        if (typeof from._offset !== 'undefined') {\r\n            to._offset = from._offset;\r\n        }\r\n        if (typeof from._pf !== 'undefined') {\r\n            to._pf = from._pf;\r\n        }\r\n        if (typeof from._locale !== 'undefined') {\r\n            to._locale = from._locale;\r\n        }\r\n\r\n        if (momentProperties.length > 0) {\r\n            for (i in momentProperties) {\r\n                prop = momentProperties[i];\r\n                val = from[prop];\r\n                if (typeof val !== 'undefined') {\r\n                    to[prop] = val;\r\n                }\r\n            }\r\n        }\r\n\r\n        return to;\r\n    }\r\n\r\n    function absRound(number) {\r\n        if (number < 0) {\r\n            return Math.ceil(number);\r\n        } else {\r\n            return Math.floor(number);\r\n        }\r\n    }\r\n\r\n    // left zero fill a number\r\n    // see http://jsperf.com/left-zero-filling for performance comparison\r\n    function leftZeroFill(number, targetLength, forceSign) {\r\n        var output = '' + Math.abs(number),\r\n            sign = number >= 0;\r\n\r\n        while (output.length < targetLength) {\r\n            output = '0' + output;\r\n        }\r\n        return (sign ? (forceSign ? '+' : '') : '-') + output;\r\n    }\r\n\r\n    function positiveMomentsDifference(base, other) {\r\n        var res = { milliseconds: 0, months: 0 };\r\n\r\n        res.months = other.month() - base.month() +\r\n            (other.year() - base.year()) * 12;\r\n        if (base.clone().add(res.months, 'M').isAfter(other)) {\r\n            --res.months;\r\n        }\r\n\r\n        res.milliseconds = +other - +(base.clone().add(res.months, 'M'));\r\n\r\n        return res;\r\n    }\r\n\r\n    function momentsDifference(base, other) {\r\n        var res;\r\n        other = makeAs(other, base);\r\n        if (base.isBefore(other)) {\r\n            res = positiveMomentsDifference(base, other);\r\n        } else {\r\n            res = positiveMomentsDifference(other, base);\r\n            res.milliseconds = -res.milliseconds;\r\n            res.months = -res.months;\r\n        }\r\n\r\n        return res;\r\n    }\r\n\r\n    // TODO: remove 'name' arg after deprecation is removed\r\n    function createAdder(direction, name) {\r\n        return function (val, period) {\r\n            var dur, tmp;\r\n            //invert the arguments, but complain about it\r\n            if (period !== null && !isNaN(+period)) {\r\n                deprecateSimple(name, 'moment().' + name + '(period, number) is deprecated. Please use moment().' + name + '(number, period).');\r\n                tmp = val; val = period; period = tmp;\r\n            }\r\n\r\n            val = typeof val === 'string' ? +val : val;\r\n            dur = moment.duration(val, period);\r\n            addOrSubtractDurationFromMoment(this, dur, direction);\r\n            return this;\r\n        };\r\n    }\r\n\r\n    function addOrSubtractDurationFromMoment(mom, duration, isAdding, updateOffset) {\r\n        var milliseconds = duration._milliseconds,\r\n            days = duration._days,\r\n            months = duration._months;\r\n        updateOffset = updateOffset == null ? true : updateOffset;\r\n\r\n        if (milliseconds) {\r\n            mom._d.setTime(+mom._d + milliseconds * isAdding);\r\n        }\r\n        if (days) {\r\n            rawSetter(mom, 'Date', rawGetter(mom, 'Date') + days * isAdding);\r\n        }\r\n        if (months) {\r\n            rawMonthSetter(mom, rawGetter(mom, 'Month') + months * isAdding);\r\n        }\r\n        if (updateOffset) {\r\n            moment.updateOffset(mom, days || months);\r\n        }\r\n    }\r\n\r\n    // check if is an array\r\n    function isArray(input) {\r\n        return Object.prototype.toString.call(input) === '[object Array]';\r\n    }\r\n\r\n    function isDate(input) {\r\n        return Object.prototype.toString.call(input) === '[object Date]' ||\r\n            input instanceof Date;\r\n    }\r\n\r\n    // compare two arrays, return the number of differences\r\n    function compareArrays(array1, array2, dontConvert) {\r\n        var len = Math.min(array1.length, array2.length),\r\n            lengthDiff = Math.abs(array1.length - array2.length),\r\n            diffs = 0,\r\n            i;\r\n        for (i = 0; i < len; i++) {\r\n            if ((dontConvert && array1[i] !== array2[i]) ||\r\n                (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))) {\r\n                diffs++;\r\n            }\r\n        }\r\n        return diffs + lengthDiff;\r\n    }\r\n\r\n    function normalizeUnits(units) {\r\n        if (units) {\r\n            var lowered = units.toLowerCase().replace(/(.)s$/, '$1');\r\n            units = unitAliases[units] || camelFunctions[lowered] || lowered;\r\n        }\r\n        return units;\r\n    }\r\n\r\n    function normalizeObjectUnits(inputObject) {\r\n        var normalizedInput = {},\r\n            normalizedProp,\r\n            prop;\r\n\r\n        for (prop in inputObject) {\r\n            if (hasOwnProp(inputObject, prop)) {\r\n                normalizedProp = normalizeUnits(prop);\r\n                if (normalizedProp) {\r\n                    normalizedInput[normalizedProp] = inputObject[prop];\r\n                }\r\n            }\r\n        }\r\n\r\n        return normalizedInput;\r\n    }\r\n\r\n    function makeList(field) {\r\n        var count, setter;\r\n\r\n        if (field.indexOf('week') === 0) {\r\n            count = 7;\r\n            setter = 'day';\r\n        }\r\n        else if (field.indexOf('month') === 0) {\r\n            count = 12;\r\n            setter = 'month';\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n\r\n        moment[field] = function (format, index) {\r\n            var i, getter,\r\n                method = moment._locale[field],\r\n                results = [];\r\n\r\n            if (typeof format === 'number') {\r\n                index = format;\r\n                format = undefined;\r\n            }\r\n\r\n            getter = function (i) {\r\n                var m = moment().utc().set(setter, i);\r\n                return method.call(moment._locale, m, format || '');\r\n            };\r\n\r\n            if (index != null) {\r\n                return getter(index);\r\n            }\r\n            else {\r\n                for (i = 0; i < count; i++) {\r\n                    results.push(getter(i));\r\n                }\r\n                return results;\r\n            }\r\n        };\r\n    }\r\n\r\n    function toInt(argumentForCoercion) {\r\n        var coercedNumber = +argumentForCoercion,\r\n            value = 0;\r\n\r\n        if (coercedNumber !== 0 && isFinite(coercedNumber)) {\r\n            if (coercedNumber >= 0) {\r\n                value = Math.floor(coercedNumber);\r\n            } else {\r\n                value = Math.ceil(coercedNumber);\r\n            }\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    function daysInMonth(year, month) {\r\n        return new Date(Date.UTC(year, month + 1, 0)).getUTCDate();\r\n    }\r\n\r\n    function weeksInYear(year, dow, doy) {\r\n        return weekOfYear(moment([year, 11, 31 + dow - doy]), dow, doy).week;\r\n    }\r\n\r\n    function daysInYear(year) {\r\n        return isLeapYear(year) ? 366 : 365;\r\n    }\r\n\r\n    function isLeapYear(year) {\r\n        return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\r\n    }\r\n\r\n    function checkOverflow(m) {\r\n        var overflow;\r\n        if (m._a && m._pf.overflow === -2) {\r\n            overflow =\r\n                m._a[MONTH] < 0 || m._a[MONTH] > 11 ? MONTH :\r\n                m._a[DATE] < 1 || m._a[DATE] > daysInMonth(m._a[YEAR], m._a[MONTH]) ? DATE :\r\n                m._a[HOUR] < 0 || m._a[HOUR] > 24 ||\r\n                    (m._a[HOUR] === 24 && (m._a[MINUTE] !== 0 ||\r\n                                           m._a[SECOND] !== 0 ||\r\n                                           m._a[MILLISECOND] !== 0)) ? HOUR :\r\n                m._a[MINUTE] < 0 || m._a[MINUTE] > 59 ? MINUTE :\r\n                m._a[SECOND] < 0 || m._a[SECOND] > 59 ? SECOND :\r\n                m._a[MILLISECOND] < 0 || m._a[MILLISECOND] > 999 ? MILLISECOND :\r\n                -1;\r\n\r\n            if (m._pf._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {\r\n                overflow = DATE;\r\n            }\r\n\r\n            m._pf.overflow = overflow;\r\n        }\r\n    }\r\n\r\n    function isValid(m) {\r\n        if (m._isValid == null) {\r\n            m._isValid = !isNaN(m._d.getTime()) &&\r\n                m._pf.overflow < 0 &&\r\n                !m._pf.empty &&\r\n                !m._pf.invalidMonth &&\r\n                !m._pf.nullInput &&\r\n                !m._pf.invalidFormat &&\r\n                !m._pf.userInvalidated;\r\n\r\n            if (m._strict) {\r\n                m._isValid = m._isValid &&\r\n                    m._pf.charsLeftOver === 0 &&\r\n                    m._pf.unusedTokens.length === 0 &&\r\n                    m._pf.bigHour === undefined;\r\n            }\r\n        }\r\n        return m._isValid;\r\n    }\r\n\r\n    function normalizeLocale(key) {\r\n        return key ? key.toLowerCase().replace('_', '-') : key;\r\n    }\r\n\r\n    // pick the locale from the array\r\n    // try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each\r\n    // substring from most specific to least, but move to the next array item if it's a more specific variant than the current root\r\n    function chooseLocale(names) {\r\n        var i = 0, j, next, locale, split;\r\n\r\n        while (i < names.length) {\r\n            split = normalizeLocale(names[i]).split('-');\r\n            j = split.length;\r\n            next = normalizeLocale(names[i + 1]);\r\n            next = next ? next.split('-') : null;\r\n            while (j > 0) {\r\n                locale = loadLocale(split.slice(0, j).join('-'));\r\n                if (locale) {\r\n                    return locale;\r\n                }\r\n                if (next && next.length >= j && compareArrays(split, next, true) >= j - 1) {\r\n                    //the next array item is better than a shallower substring of this one\r\n                    break;\r\n                }\r\n                j--;\r\n            }\r\n            i++;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    function loadLocale(name) {\r\n        var oldLocale = null;\r\n        if (!locales[name] && hasModule) {\r\n            try {\r\n                oldLocale = moment.locale();\r\n                require('./locale/' + name);\r\n                // because defineLocale currently also sets the global locale, we want to undo that for lazy loaded locales\r\n                moment.locale(oldLocale);\r\n            } catch (e) { }\r\n        }\r\n        return locales[name];\r\n    }\r\n\r\n    // Return a moment from input, that is local/utc/zone equivalent to model.\r\n    function makeAs(input, model) {\r\n        var res, diff;\r\n        if (model._isUTC) {\r\n            res = model.clone();\r\n            diff = (moment.isMoment(input) || isDate(input) ?\r\n                    +input : +moment(input)) - (+res);\r\n            // Use low-level api, because this fn is low-level api.\r\n            res._d.setTime(+res._d + diff);\r\n            moment.updateOffset(res, false);\r\n            return res;\r\n        } else {\r\n            return moment(input).local();\r\n        }\r\n    }\r\n\r\n    /************************************\r\n        Locale\r\n    ************************************/\r\n\r\n\r\n    extend(Locale.prototype, {\r\n\r\n        set: function (config) {\r\n            var prop, i;\r\n            for (i in config) {\r\n                prop = config[i];\r\n                if (typeof prop === 'function') {\r\n                    this[i] = prop;\r\n                } else {\r\n                    this['_' + i] = prop;\r\n                }\r\n            }\r\n            // Lenient ordinal parsing accepts just a number in addition to\r\n            // number + (possibly) stuff coming from _ordinalParseLenient.\r\n            this._ordinalParseLenient = new RegExp(this._ordinalParse.source + '|' + /\\d{1,2}/.source);\r\n        },\r\n\r\n        _months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),\r\n        months: function (m) {\r\n            return this._months[m.month()];\r\n        },\r\n\r\n        _monthsShort: 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),\r\n        monthsShort: function (m) {\r\n            return this._monthsShort[m.month()];\r\n        },\r\n\r\n        monthsParse: function (monthName, format, strict) {\r\n            var i, mom, regex;\r\n\r\n            if (!this._monthsParse) {\r\n                this._monthsParse = [];\r\n                this._longMonthsParse = [];\r\n                this._shortMonthsParse = [];\r\n            }\r\n\r\n            for (i = 0; i < 12; i++) {\r\n                // make the regex if we don't have it already\r\n                mom = moment.utc([2000, i]);\r\n                if (strict && !this._longMonthsParse[i]) {\r\n                    this._longMonthsParse[i] = new RegExp('^' + this.months(mom, '').replace('.', '') + '$', 'i');\r\n                    this._shortMonthsParse[i] = new RegExp('^' + this.monthsShort(mom, '').replace('.', '') + '$', 'i');\r\n                }\r\n                if (!strict && !this._monthsParse[i]) {\r\n                    regex = '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');\r\n                    this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');\r\n                }\r\n                // test the regex\r\n                if (strict && format === 'MMMM' && this._longMonthsParse[i].test(monthName)) {\r\n                    return i;\r\n                } else if (strict && format === 'MMM' && this._shortMonthsParse[i].test(monthName)) {\r\n                    return i;\r\n                } else if (!strict && this._monthsParse[i].test(monthName)) {\r\n                    return i;\r\n                }\r\n            }\r\n        },\r\n\r\n        _weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),\r\n        weekdays: function (m) {\r\n            return this._weekdays[m.day()];\r\n        },\r\n\r\n        _weekdaysShort: 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),\r\n        weekdaysShort: function (m) {\r\n            return this._weekdaysShort[m.day()];\r\n        },\r\n\r\n        _weekdaysMin: 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),\r\n        weekdaysMin: function (m) {\r\n            return this._weekdaysMin[m.day()];\r\n        },\r\n\r\n        weekdaysParse: function (weekdayName) {\r\n            var i, mom, regex;\r\n\r\n            if (!this._weekdaysParse) {\r\n                this._weekdaysParse = [];\r\n            }\r\n\r\n            for (i = 0; i < 7; i++) {\r\n                // make the regex if we don't have it already\r\n                if (!this._weekdaysParse[i]) {\r\n                    mom = moment([2000, 1]).day(i);\r\n                    regex = '^' + this.weekdays(mom, '') + '|^' + this.weekdaysShort(mom, '') + '|^' + this.weekdaysMin(mom, '');\r\n                    this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');\r\n                }\r\n                // test the regex\r\n                if (this._weekdaysParse[i].test(weekdayName)) {\r\n                    return i;\r\n                }\r\n            }\r\n        },\r\n\r\n        _longDateFormat: {\r\n            LTS: 'h:mm:ss A',\r\n            LT: 'h:mm A',\r\n            L: 'MM/DD/YYYY',\r\n            LL: 'MMMM D, YYYY',\r\n            LLL: 'MMMM D, YYYY LT',\r\n            LLLL: 'dddd, MMMM D, YYYY LT'\r\n        },\r\n        longDateFormat: function (key) {\r\n            var output = this._longDateFormat[key];\r\n            if (!output && this._longDateFormat[key.toUpperCase()]) {\r\n                output = this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g, function (val) {\r\n                    return val.slice(1);\r\n                });\r\n                this._longDateFormat[key] = output;\r\n            }\r\n            return output;\r\n        },\r\n\r\n        isPM: function (input) {\r\n            // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays\r\n            // Using charAt should be more compatible.\r\n            return ((input + '').toLowerCase().charAt(0) === 'p');\r\n        },\r\n\r\n        _meridiemParse: /[ap]\\.?m?\\.?/i,\r\n        meridiem: function (hours, minutes, isLower) {\r\n            if (hours > 11) {\r\n                return isLower ? 'pm' : 'PM';\r\n            } else {\r\n                return isLower ? 'am' : 'AM';\r\n            }\r\n        },\r\n\r\n        _calendar: {\r\n            sameDay: '[Today at] LT',\r\n            nextDay: '[Tomorrow at] LT',\r\n            nextWeek: 'dddd [at] LT',\r\n            lastDay: '[Yesterday at] LT',\r\n            lastWeek: '[Last] dddd [at] LT',\r\n            sameElse: 'L'\r\n        },\r\n        calendar: function (key, mom, now) {\r\n            var output = this._calendar[key];\r\n            return typeof output === 'function' ? output.apply(mom, [now]) : output;\r\n        },\r\n\r\n        _relativeTime: {\r\n            future: 'in %s',\r\n            past: '%s ago',\r\n            s: 'a few seconds',\r\n            m: 'a minute',\r\n            mm: '%d minutes',\r\n            h: 'an hour',\r\n            hh: '%d hours',\r\n            d: 'a day',\r\n            dd: '%d days',\r\n            M: 'a month',\r\n            MM: '%d months',\r\n            y: 'a year',\r\n            yy: '%d years'\r\n        },\r\n\r\n        relativeTime: function (number, withoutSuffix, string, isFuture) {\r\n            var output = this._relativeTime[string];\r\n            return (typeof output === 'function') ?\r\n                output(number, withoutSuffix, string, isFuture) :\r\n                output.replace(/%d/i, number);\r\n        },\r\n\r\n        pastFuture: function (diff, output) {\r\n            var format = this._relativeTime[diff > 0 ? 'future' : 'past'];\r\n            return typeof format === 'function' ? format(output) : format.replace(/%s/i, output);\r\n        },\r\n\r\n        ordinal: function (number) {\r\n            return this._ordinal.replace('%d', number);\r\n        },\r\n        _ordinal: '%d',\r\n        _ordinalParse: /\\d{1,2}/,\r\n\r\n        preparse: function (string) {\r\n            return string;\r\n        },\r\n\r\n        postformat: function (string) {\r\n            return string;\r\n        },\r\n\r\n        week: function (mom) {\r\n            return weekOfYear(mom, this._week.dow, this._week.doy).week;\r\n        },\r\n\r\n        _week: {\r\n            dow: 0, // Sunday is the first day of the week.\r\n            doy: 6  // The week that contains Jan 1st is the first week of the year.\r\n        },\r\n\r\n        _invalidDate: 'Invalid date',\r\n        invalidDate: function () {\r\n            return this._invalidDate;\r\n        }\r\n    });\r\n\r\n    /************************************\r\n        Formatting\r\n    ************************************/\r\n\r\n\r\n    function removeFormattingTokens(input) {\r\n        if (input.match(/\\[[\\s\\S]/)) {\r\n            return input.replace(/^\\[|\\]$/g, '');\r\n        }\r\n        return input.replace(/\\\\/g, '');\r\n    }\r\n\r\n    function makeFormatFunction(format) {\r\n        var array = format.match(formattingTokens), i, length;\r\n\r\n        for (i = 0, length = array.length; i < length; i++) {\r\n            if (formatTokenFunctions[array[i]]) {\r\n                array[i] = formatTokenFunctions[array[i]];\r\n            } else {\r\n                array[i] = removeFormattingTokens(array[i]);\r\n            }\r\n        }\r\n\r\n        return function (mom) {\r\n            var output = '';\r\n            for (i = 0; i < length; i++) {\r\n                output += array[i] instanceof Function ? array[i].call(mom, format) : array[i];\r\n            }\r\n            return output;\r\n        };\r\n    }\r\n\r\n    // format date using native date object\r\n    function formatMoment(m, format) {\r\n        if (!m.isValid()) {\r\n            return m.localeData().invalidDate();\r\n        }\r\n\r\n        format = expandFormat(format, m.localeData());\r\n\r\n        if (!formatFunctions[format]) {\r\n            formatFunctions[format] = makeFormatFunction(format);\r\n        }\r\n\r\n        return formatFunctions[format](m);\r\n    }\r\n\r\n    function expandFormat(format, locale) {\r\n        var i = 5;\r\n\r\n        function replaceLongDateFormatTokens(input) {\r\n            return locale.longDateFormat(input) || input;\r\n        }\r\n\r\n        localFormattingTokens.lastIndex = 0;\r\n        while (i >= 0 && localFormattingTokens.test(format)) {\r\n            format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);\r\n            localFormattingTokens.lastIndex = 0;\r\n            i -= 1;\r\n        }\r\n\r\n        return format;\r\n    }\r\n\r\n\r\n    /************************************\r\n        Parsing\r\n    ************************************/\r\n\r\n\r\n    // get the regex to find the next token\r\n    function getParseRegexForToken(token, config) {\r\n        var a, strict = config._strict;\r\n        switch (token) {\r\n            case 'Q':\r\n                return parseTokenOneDigit;\r\n            case 'DDDD':\r\n                return parseTokenThreeDigits;\r\n            case 'YYYY':\r\n            case 'GGGG':\r\n            case 'gggg':\r\n                return strict ? parseTokenFourDigits : parseTokenOneToFourDigits;\r\n            case 'Y':\r\n            case 'G':\r\n            case 'g':\r\n                return parseTokenSignedNumber;\r\n            case 'YYYYYY':\r\n            case 'YYYYY':\r\n            case 'GGGGG':\r\n            case 'ggggg':\r\n                return strict ? parseTokenSixDigits : parseTokenOneToSixDigits;\r\n            case 'S':\r\n                if (strict) {\r\n                    return parseTokenOneDigit;\r\n                }\r\n                /* falls through */\r\n            case 'SS':\r\n                if (strict) {\r\n                    return parseTokenTwoDigits;\r\n                }\r\n                /* falls through */\r\n            case 'SSS':\r\n                if (strict) {\r\n                    return parseTokenThreeDigits;\r\n                }\r\n                /* falls through */\r\n            case 'DDD':\r\n                return parseTokenOneToThreeDigits;\r\n            case 'MMM':\r\n            case 'MMMM':\r\n            case 'dd':\r\n            case 'ddd':\r\n            case 'dddd':\r\n                return parseTokenWord;\r\n            case 'a':\r\n            case 'A':\r\n                return config._locale._meridiemParse;\r\n            case 'x':\r\n                return parseTokenOffsetMs;\r\n            case 'X':\r\n                return parseTokenTimestampMs;\r\n            case 'Z':\r\n            case 'ZZ':\r\n                return parseTokenTimezone;\r\n            case 'T':\r\n                return parseTokenT;\r\n            case 'SSSS':\r\n                return parseTokenDigits;\r\n            case 'MM':\r\n            case 'DD':\r\n            case 'YY':\r\n            case 'GG':\r\n            case 'gg':\r\n            case 'HH':\r\n            case 'hh':\r\n            case 'mm':\r\n            case 'ss':\r\n            case 'ww':\r\n            case 'WW':\r\n                return strict ? parseTokenTwoDigits : parseTokenOneOrTwoDigits;\r\n            case 'M':\r\n            case 'D':\r\n            case 'd':\r\n            case 'H':\r\n            case 'h':\r\n            case 'm':\r\n            case 's':\r\n            case 'w':\r\n            case 'W':\r\n            case 'e':\r\n            case 'E':\r\n                return parseTokenOneOrTwoDigits;\r\n            case 'Do':\r\n                return strict ? config._locale._ordinalParse : config._locale._ordinalParseLenient;\r\n            default:\r\n                a = new RegExp(regexpEscape(unescapeFormat(token.replace('\\\\', '')), 'i'));\r\n                return a;\r\n        }\r\n    }\r\n\r\n    function timezoneMinutesFromString(string) {\r\n        string = string || '';\r\n        var possibleTzMatches = (string.match(parseTokenTimezone) || []),\r\n            tzChunk = possibleTzMatches[possibleTzMatches.length - 1] || [],\r\n            parts = (tzChunk + '').match(parseTimezoneChunker) || ['-', 0, 0],\r\n            minutes = +(parts[1] * 60) + toInt(parts[2]);\r\n\r\n        return parts[0] === '+' ? -minutes : minutes;\r\n    }\r\n\r\n    // function to convert string input to date\r\n    function addTimeToArrayFromToken(token, input, config) {\r\n        var a, datePartArray = config._a;\r\n\r\n        switch (token) {\r\n            // QUARTER\r\n            case 'Q':\r\n                if (input != null) {\r\n                    datePartArray[MONTH] = (toInt(input) - 1) * 3;\r\n                }\r\n                break;\r\n                // MONTH\r\n            case 'M': // fall through to MM\r\n            case 'MM':\r\n                if (input != null) {\r\n                    datePartArray[MONTH] = toInt(input) - 1;\r\n                }\r\n                break;\r\n            case 'MMM': // fall through to MMMM\r\n            case 'MMMM':\r\n                a = config._locale.monthsParse(input, token, config._strict);\r\n                // if we didn't find a month name, mark the date as invalid.\r\n                if (a != null) {\r\n                    datePartArray[MONTH] = a;\r\n                } else {\r\n                    config._pf.invalidMonth = input;\r\n                }\r\n                break;\r\n                // DAY OF MONTH\r\n            case 'D': // fall through to DD\r\n            case 'DD':\r\n                if (input != null) {\r\n                    datePartArray[DATE] = toInt(input);\r\n                }\r\n                break;\r\n            case 'Do':\r\n                if (input != null) {\r\n                    datePartArray[DATE] = toInt(parseInt(\r\n                                input.match(/\\d{1,2}/)[0], 10));\r\n                }\r\n                break;\r\n                // DAY OF YEAR\r\n            case 'DDD': // fall through to DDDD\r\n            case 'DDDD':\r\n                if (input != null) {\r\n                    config._dayOfYear = toInt(input);\r\n                }\r\n\r\n                break;\r\n                // YEAR\r\n            case 'YY':\r\n                datePartArray[YEAR] = moment.parseTwoDigitYear(input);\r\n                break;\r\n            case 'YYYY':\r\n            case 'YYYYY':\r\n            case 'YYYYYY':\r\n                datePartArray[YEAR] = toInt(input);\r\n                break;\r\n                // AM / PM\r\n            case 'a': // fall through to A\r\n            case 'A':\r\n                config._isPm = config._locale.isPM(input);\r\n                break;\r\n                // HOUR\r\n            case 'h': // fall through to hh\r\n            case 'hh':\r\n                config._pf.bigHour = true;\r\n                /* falls through */\r\n            case 'H': // fall through to HH\r\n            case 'HH':\r\n                datePartArray[HOUR] = toInt(input);\r\n                break;\r\n                // MINUTE\r\n            case 'm': // fall through to mm\r\n            case 'mm':\r\n                datePartArray[MINUTE] = toInt(input);\r\n                break;\r\n                // SECOND\r\n            case 's': // fall through to ss\r\n            case 'ss':\r\n                datePartArray[SECOND] = toInt(input);\r\n                break;\r\n                // MILLISECOND\r\n            case 'S':\r\n            case 'SS':\r\n            case 'SSS':\r\n            case 'SSSS':\r\n                datePartArray[MILLISECOND] = toInt(('0.' + input) * 1000);\r\n                break;\r\n                // UNIX OFFSET (MILLISECONDS)\r\n            case 'x':\r\n                config._d = new Date(toInt(input));\r\n                break;\r\n                // UNIX TIMESTAMP WITH MS\r\n            case 'X':\r\n                config._d = new Date(parseFloat(input) * 1000);\r\n                break;\r\n                // TIMEZONE\r\n            case 'Z': // fall through to ZZ\r\n            case 'ZZ':\r\n                config._useUTC = true;\r\n                config._tzm = timezoneMinutesFromString(input);\r\n                break;\r\n                // WEEKDAY - human\r\n            case 'dd':\r\n            case 'ddd':\r\n            case 'dddd':\r\n                a = config._locale.weekdaysParse(input);\r\n                // if we didn't get a weekday name, mark the date as invalid\r\n                if (a != null) {\r\n                    config._w = config._w || {};\r\n                    config._w['d'] = a;\r\n                } else {\r\n                    config._pf.invalidWeekday = input;\r\n                }\r\n                break;\r\n                // WEEK, WEEK DAY - numeric\r\n            case 'w':\r\n            case 'ww':\r\n            case 'W':\r\n            case 'WW':\r\n            case 'd':\r\n            case 'e':\r\n            case 'E':\r\n                token = token.substr(0, 1);\r\n                /* falls through */\r\n            case 'gggg':\r\n            case 'GGGG':\r\n            case 'GGGGG':\r\n                token = token.substr(0, 2);\r\n                if (input) {\r\n                    config._w = config._w || {};\r\n                    config._w[token] = toInt(input);\r\n                }\r\n                break;\r\n            case 'gg':\r\n            case 'GG':\r\n                config._w = config._w || {};\r\n                config._w[token] = moment.parseTwoDigitYear(input);\r\n        }\r\n    }\r\n\r\n    function dayOfYearFromWeekInfo(config) {\r\n        var w, weekYear, week, weekday, dow, doy, temp;\r\n\r\n        w = config._w;\r\n        if (w.GG != null || w.W != null || w.E != null) {\r\n            dow = 1;\r\n            doy = 4;\r\n\r\n            // TODO: We need to take the current isoWeekYear, but that depends on\r\n            // how we interpret now (local, utc, fixed offset). So create\r\n            // a now version of current config (take local/utc/offset flags, and\r\n            // create now).\r\n            weekYear = dfl(w.GG, config._a[YEAR], weekOfYear(moment(), 1, 4).year);\r\n            week = dfl(w.W, 1);\r\n            weekday = dfl(w.E, 1);\r\n        } else {\r\n            dow = config._locale._week.dow;\r\n            doy = config._locale._week.doy;\r\n\r\n            weekYear = dfl(w.gg, config._a[YEAR], weekOfYear(moment(), dow, doy).year);\r\n            week = dfl(w.w, 1);\r\n\r\n            if (w.d != null) {\r\n                // weekday -- low day numbers are considered next week\r\n                weekday = w.d;\r\n                if (weekday < dow) {\r\n                    ++week;\r\n                }\r\n            } else if (w.e != null) {\r\n                // local weekday -- counting starts from begining of week\r\n                weekday = w.e + dow;\r\n            } else {\r\n                // default to begining of week\r\n                weekday = dow;\r\n            }\r\n        }\r\n        temp = dayOfYearFromWeeks(weekYear, week, weekday, doy, dow);\r\n\r\n        config._a[YEAR] = temp.year;\r\n        config._dayOfYear = temp.dayOfYear;\r\n    }\r\n\r\n    // convert an array to a date.\r\n    // the array should mirror the parameters below\r\n    // note: all values past the year are optional and will default to the lowest possible value.\r\n    // [year, month, day , hour, minute, second, millisecond]\r\n    function dateFromConfig(config) {\r\n        var i, date, input = [], currentDate, yearToUse;\r\n\r\n        if (config._d) {\r\n            return;\r\n        }\r\n\r\n        currentDate = currentDateArray(config);\r\n\r\n        //compute day of the year from weeks and weekdays\r\n        if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {\r\n            dayOfYearFromWeekInfo(config);\r\n        }\r\n\r\n        //if the day of the year is set, figure out what it is\r\n        if (config._dayOfYear) {\r\n            yearToUse = dfl(config._a[YEAR], currentDate[YEAR]);\r\n\r\n            if (config._dayOfYear > daysInYear(yearToUse)) {\r\n                config._pf._overflowDayOfYear = true;\r\n            }\r\n\r\n            date = makeUTCDate(yearToUse, 0, config._dayOfYear);\r\n            config._a[MONTH] = date.getUTCMonth();\r\n            config._a[DATE] = date.getUTCDate();\r\n        }\r\n\r\n        // Default to current date.\r\n        // * if no year, month, day of month are given, default to today\r\n        // * if day of month is given, default month and year\r\n        // * if month is given, default only year\r\n        // * if year is given, don't default anything\r\n        for (i = 0; i < 3 && config._a[i] == null; ++i) {\r\n            config._a[i] = input[i] = currentDate[i];\r\n        }\r\n\r\n        // Zero out whatever was not defaulted, including time\r\n        for (; i < 7; i++) {\r\n            config._a[i] = input[i] = (config._a[i] == null) ? (i === 2 ? 1 : 0) : config._a[i];\r\n        }\r\n\r\n        // Check for 24:00:00.000\r\n        if (config._a[HOUR] === 24 &&\r\n                config._a[MINUTE] === 0 &&\r\n                config._a[SECOND] === 0 &&\r\n                config._a[MILLISECOND] === 0) {\r\n            config._nextDay = true;\r\n            config._a[HOUR] = 0;\r\n        }\r\n\r\n        config._d = (config._useUTC ? makeUTCDate : makeDate).apply(null, input);\r\n        // Apply timezone offset from input. The actual zone can be changed\r\n        // with parseZone.\r\n        if (config._tzm != null) {\r\n            config._d.setUTCMinutes(config._d.getUTCMinutes() + config._tzm);\r\n        }\r\n\r\n        if (config._nextDay) {\r\n            config._a[HOUR] = 24;\r\n        }\r\n    }\r\n\r\n    function dateFromObject(config) {\r\n        var normalizedInput;\r\n\r\n        if (config._d) {\r\n            return;\r\n        }\r\n\r\n        normalizedInput = normalizeObjectUnits(config._i);\r\n        config._a = [\r\n            normalizedInput.year,\r\n            normalizedInput.month,\r\n            normalizedInput.day || normalizedInput.date,\r\n            normalizedInput.hour,\r\n            normalizedInput.minute,\r\n            normalizedInput.second,\r\n            normalizedInput.millisecond\r\n        ];\r\n\r\n        dateFromConfig(config);\r\n    }\r\n\r\n    function currentDateArray(config) {\r\n        var now = new Date();\r\n        if (config._useUTC) {\r\n            return [\r\n                now.getUTCFullYear(),\r\n                now.getUTCMonth(),\r\n                now.getUTCDate()\r\n            ];\r\n        } else {\r\n            return [now.getFullYear(), now.getMonth(), now.getDate()];\r\n        }\r\n    }\r\n\r\n    // date from string and format string\r\n    function makeDateFromStringAndFormat(config) {\r\n        if (config._f === moment.ISO_8601) {\r\n            parseISO(config);\r\n            return;\r\n        }\r\n\r\n        config._a = [];\r\n        config._pf.empty = true;\r\n\r\n        // This array is used to make a Date, either with `new Date` or `Date.UTC`\r\n        var string = '' + config._i,\r\n            i, parsedInput, tokens, token, skipped,\r\n            stringLength = string.length,\r\n            totalParsedInputLength = 0;\r\n\r\n        tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];\r\n\r\n        for (i = 0; i < tokens.length; i++) {\r\n            token = tokens[i];\r\n            parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[0];\r\n            if (parsedInput) {\r\n                skipped = string.substr(0, string.indexOf(parsedInput));\r\n                if (skipped.length > 0) {\r\n                    config._pf.unusedInput.push(skipped);\r\n                }\r\n                string = string.slice(string.indexOf(parsedInput) + parsedInput.length);\r\n                totalParsedInputLength += parsedInput.length;\r\n            }\r\n            // don't parse if it's not a known token\r\n            if (formatTokenFunctions[token]) {\r\n                if (parsedInput) {\r\n                    config._pf.empty = false;\r\n                }\r\n                else {\r\n                    config._pf.unusedTokens.push(token);\r\n                }\r\n                addTimeToArrayFromToken(token, parsedInput, config);\r\n            }\r\n            else if (config._strict && !parsedInput) {\r\n                config._pf.unusedTokens.push(token);\r\n            }\r\n        }\r\n\r\n        // add remaining unparsed input length to the string\r\n        config._pf.charsLeftOver = stringLength - totalParsedInputLength;\r\n        if (string.length > 0) {\r\n            config._pf.unusedInput.push(string);\r\n        }\r\n\r\n        // clear _12h flag if hour is <= 12\r\n        if (config._pf.bigHour === true && config._a[HOUR] <= 12) {\r\n            config._pf.bigHour = undefined;\r\n        }\r\n        // handle am pm\r\n        if (config._isPm && config._a[HOUR] < 12) {\r\n            config._a[HOUR] += 12;\r\n        }\r\n        // if is 12 am, change hours to 0\r\n        if (config._isPm === false && config._a[HOUR] === 12) {\r\n            config._a[HOUR] = 0;\r\n        }\r\n        dateFromConfig(config);\r\n        checkOverflow(config);\r\n    }\r\n\r\n    function unescapeFormat(s) {\r\n        return s.replace(/\\\\(\\[)|\\\\(\\])|\\[([^\\]\\[]*)\\]|\\\\(.)/g, function (matched, p1, p2, p3, p4) {\r\n            return p1 || p2 || p3 || p4;\r\n        });\r\n    }\r\n\r\n    // Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript\r\n    function regexpEscape(s) {\r\n        return s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\r\n    }\r\n\r\n    // date from string and array of format strings\r\n    function makeDateFromStringAndArray(config) {\r\n        var tempConfig,\r\n            bestMoment,\r\n\r\n            scoreToBeat,\r\n            i,\r\n            currentScore;\r\n\r\n        if (config._f.length === 0) {\r\n            config._pf.invalidFormat = true;\r\n            config._d = new Date(NaN);\r\n            return;\r\n        }\r\n\r\n        for (i = 0; i < config._f.length; i++) {\r\n            currentScore = 0;\r\n            tempConfig = copyConfig({}, config);\r\n            if (config._useUTC != null) {\r\n                tempConfig._useUTC = config._useUTC;\r\n            }\r\n            tempConfig._pf = defaultParsingFlags();\r\n            tempConfig._f = config._f[i];\r\n            makeDateFromStringAndFormat(tempConfig);\r\n\r\n            if (!isValid(tempConfig)) {\r\n                continue;\r\n            }\r\n\r\n            // if there is any input that was not parsed add a penalty for that format\r\n            currentScore += tempConfig._pf.charsLeftOver;\r\n\r\n            //or tokens\r\n            currentScore += tempConfig._pf.unusedTokens.length * 10;\r\n\r\n            tempConfig._pf.score = currentScore;\r\n\r\n            if (scoreToBeat == null || currentScore < scoreToBeat) {\r\n                scoreToBeat = currentScore;\r\n                bestMoment = tempConfig;\r\n            }\r\n        }\r\n\r\n        extend(config, bestMoment || tempConfig);\r\n    }\r\n\r\n    // date from iso format\r\n    function parseISO(config) {\r\n        var i, l,\r\n            string = config._i,\r\n            match = isoRegex.exec(string);\r\n\r\n        if (match) {\r\n            config._pf.iso = true;\r\n            for (i = 0, l = isoDates.length; i < l; i++) {\r\n                if (isoDates[i][1].exec(string)) {\r\n                    // match[5] should be 'T' or undefined\r\n                    config._f = isoDates[i][0] + (match[6] || ' ');\r\n                    break;\r\n                }\r\n            }\r\n            for (i = 0, l = isoTimes.length; i < l; i++) {\r\n                if (isoTimes[i][1].exec(string)) {\r\n                    config._f += isoTimes[i][0];\r\n                    break;\r\n                }\r\n            }\r\n            if (string.match(parseTokenTimezone)) {\r\n                config._f += 'Z';\r\n            }\r\n            makeDateFromStringAndFormat(config);\r\n        } else {\r\n            config._isValid = false;\r\n        }\r\n    }\r\n\r\n    // date from iso format or fallback\r\n    function makeDateFromString(config) {\r\n        parseISO(config);\r\n        if (config._isValid === false) {\r\n            delete config._isValid;\r\n            moment.createFromInputFallback(config);\r\n        }\r\n    }\r\n\r\n    function map(arr, fn) {\r\n        var res = [], i;\r\n        for (i = 0; i < arr.length; ++i) {\r\n            res.push(fn(arr[i], i));\r\n        }\r\n        return res;\r\n    }\r\n\r\n    function makeDateFromInput(config) {\r\n        var input = config._i, matched;\r\n        if (input === undefined) {\r\n            config._d = new Date();\r\n        } else if (isDate(input)) {\r\n            config._d = new Date(+input);\r\n        } else if ((matched = aspNetJsonRegex.exec(input)) !== null) {\r\n            config._d = new Date(+matched[1]);\r\n        } else if (typeof input === 'string') {\r\n            makeDateFromString(config);\r\n        } else if (isArray(input)) {\r\n            config._a = map(input.slice(0), function (obj) {\r\n                return parseInt(obj, 10);\r\n            });\r\n            dateFromConfig(config);\r\n        } else if (typeof (input) === 'object') {\r\n            dateFromObject(config);\r\n        } else if (typeof (input) === 'number') {\r\n            // from milliseconds\r\n            config._d = new Date(input);\r\n        } else {\r\n            moment.createFromInputFallback(config);\r\n        }\r\n    }\r\n\r\n    function makeDate(y, m, d, h, M, s, ms) {\r\n        //can't just apply() to create a date:\r\n        //http://stackoverflow.com/questions/181348/instantiating-a-javascript-object-by-calling-prototype-constructor-apply\r\n        var date = new Date(y, m, d, h, M, s, ms);\r\n\r\n        //the date constructor doesn't accept years < 1970\r\n        if (y < 1970) {\r\n            date.setFullYear(y);\r\n        }\r\n        return date;\r\n    }\r\n\r\n    function makeUTCDate(y) {\r\n        var date = new Date(Date.UTC.apply(null, arguments));\r\n        if (y < 1970) {\r\n            date.setUTCFullYear(y);\r\n        }\r\n        return date;\r\n    }\r\n\r\n    function parseWeekday(input, locale) {\r\n        if (typeof input === 'string') {\r\n            if (!isNaN(input)) {\r\n                input = parseInt(input, 10);\r\n            }\r\n            else {\r\n                input = locale.weekdaysParse(input);\r\n                if (typeof input !== 'number') {\r\n                    return null;\r\n                }\r\n            }\r\n        }\r\n        return input;\r\n    }\r\n\r\n    /************************************\r\n        Relative Time\r\n    ************************************/\r\n\r\n\r\n    // helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize\r\n    function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {\r\n        return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);\r\n    }\r\n\r\n    function relativeTime(posNegDuration, withoutSuffix, locale) {\r\n        var duration = moment.duration(posNegDuration).abs(),\r\n            seconds = round(duration.as('s')),\r\n            minutes = round(duration.as('m')),\r\n            hours = round(duration.as('h')),\r\n            days = round(duration.as('d')),\r\n            months = round(duration.as('M')),\r\n            years = round(duration.as('y')),\r\n\r\n            args = seconds < relativeTimeThresholds.s && ['s', seconds] ||\r\n                minutes === 1 && ['m'] ||\r\n                minutes < relativeTimeThresholds.m && ['mm', minutes] ||\r\n                hours === 1 && ['h'] ||\r\n                hours < relativeTimeThresholds.h && ['hh', hours] ||\r\n                days === 1 && ['d'] ||\r\n                days < relativeTimeThresholds.d && ['dd', days] ||\r\n                months === 1 && ['M'] ||\r\n                months < relativeTimeThresholds.M && ['MM', months] ||\r\n                years === 1 && ['y'] || ['yy', years];\r\n\r\n        args[2] = withoutSuffix;\r\n        args[3] = +posNegDuration > 0;\r\n        args[4] = locale;\r\n        return substituteTimeAgo.apply({}, args);\r\n    }\r\n\r\n\r\n    /************************************\r\n        Week of Year\r\n    ************************************/\r\n\r\n\r\n    // firstDayOfWeek       0 = sun, 6 = sat\r\n    //                      the day of the week that starts the week\r\n    //                      (usually sunday or monday)\r\n    // firstDayOfWeekOfYear 0 = sun, 6 = sat\r\n    //                      the first week is the week that contains the first\r\n    //                      of this day of the week\r\n    //                      (eg. ISO weeks use thursday (4))\r\n    function weekOfYear(mom, firstDayOfWeek, firstDayOfWeekOfYear) {\r\n        var end = firstDayOfWeekOfYear - firstDayOfWeek,\r\n            daysToDayOfWeek = firstDayOfWeekOfYear - mom.day(),\r\n            adjustedMoment;\r\n\r\n\r\n        if (daysToDayOfWeek > end) {\r\n            daysToDayOfWeek -= 7;\r\n        }\r\n\r\n        if (daysToDayOfWeek < end - 7) {\r\n            daysToDayOfWeek += 7;\r\n        }\r\n\r\n        adjustedMoment = moment(mom).add(daysToDayOfWeek, 'd');\r\n        return {\r\n            week: Math.ceil(adjustedMoment.dayOfYear() / 7),\r\n            year: adjustedMoment.year()\r\n        };\r\n    }\r\n\r\n    //http://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday\r\n    function dayOfYearFromWeeks(year, week, weekday, firstDayOfWeekOfYear, firstDayOfWeek) {\r\n        var d = makeUTCDate(year, 0, 1).getUTCDay(), daysToAdd, dayOfYear;\r\n\r\n        d = d === 0 ? 7 : d;\r\n        weekday = weekday != null ? weekday : firstDayOfWeek;\r\n        daysToAdd = firstDayOfWeek - d + (d > firstDayOfWeekOfYear ? 7 : 0) - (d < firstDayOfWeek ? 7 : 0);\r\n        dayOfYear = 7 * (week - 1) + (weekday - firstDayOfWeek) + daysToAdd + 1;\r\n\r\n        return {\r\n            year: dayOfYear > 0 ? year : year - 1,\r\n            dayOfYear: dayOfYear > 0 ? dayOfYear : daysInYear(year - 1) + dayOfYear\r\n        };\r\n    }\r\n\r\n    /************************************\r\n        Top Level Functions\r\n    ************************************/\r\n\r\n    function makeMoment(config) {\r\n        var input = config._i,\r\n            format = config._f,\r\n            res;\r\n\r\n        config._locale = config._locale || moment.localeData(config._l);\r\n\r\n        if (input === null || (format === undefined && input === '')) {\r\n            return moment.invalid({ nullInput: true });\r\n        }\r\n\r\n        if (typeof input === 'string') {\r\n            config._i = input = config._locale.preparse(input);\r\n        }\r\n\r\n        if (moment.isMoment(input)) {\r\n            return new Moment(input, true);\r\n        } else if (format) {\r\n            if (isArray(format)) {\r\n                makeDateFromStringAndArray(config);\r\n            } else {\r\n                makeDateFromStringAndFormat(config);\r\n            }\r\n        } else {\r\n            makeDateFromInput(config);\r\n        }\r\n\r\n        res = new Moment(config);\r\n        if (res._nextDay) {\r\n            // Adding is smart enough around DST\r\n            res.add(1, 'd');\r\n            res._nextDay = undefined;\r\n        }\r\n\r\n        return res;\r\n    }\r\n\r\n    moment = function (input, format, locale, strict) {\r\n        var c;\r\n\r\n        if (typeof (locale) === 'boolean') {\r\n            strict = locale;\r\n            locale = undefined;\r\n        }\r\n        // object construction must be done this way.\r\n        // https://github.com/moment/moment/issues/1423\r\n        c = {};\r\n        c._isAMomentObject = true;\r\n        c._i = input;\r\n        c._f = format;\r\n        c._l = locale;\r\n        c._strict = strict;\r\n        c._isUTC = false;\r\n        c._pf = defaultParsingFlags();\r\n\r\n        return makeMoment(c);\r\n    };\r\n\r\n    moment.suppressDeprecationWarnings = false;\r\n\r\n    moment.createFromInputFallback = deprecate(\r\n        'moment construction falls back to js Date. This is ' +\r\n        'discouraged and will be removed in upcoming major ' +\r\n        'release. Please refer to ' +\r\n        'https://github.com/moment/moment/issues/1407 for more info.',\r\n        function (config) {\r\n            config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));\r\n        }\r\n    );\r\n\r\n    // Pick a moment m from moments so that m[fn](other) is true for all\r\n    // other. This relies on the function fn to be transitive.\r\n    //\r\n    // moments should either be an array of moment objects or an array, whose\r\n    // first element is an array of moment objects.\r\n    function pickBy(fn, moments) {\r\n        var res, i;\r\n        if (moments.length === 1 && isArray(moments[0])) {\r\n            moments = moments[0];\r\n        }\r\n        if (!moments.length) {\r\n            return moment();\r\n        }\r\n        res = moments[0];\r\n        for (i = 1; i < moments.length; ++i) {\r\n            if (moments[i][fn](res)) {\r\n                res = moments[i];\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n\r\n    moment.min = function () {\r\n        var args = [].slice.call(arguments, 0);\r\n\r\n        return pickBy('isBefore', args);\r\n    };\r\n\r\n    moment.max = function () {\r\n        var args = [].slice.call(arguments, 0);\r\n\r\n        return pickBy('isAfter', args);\r\n    };\r\n\r\n    // creating with utc\r\n    moment.utc = function (input, format, locale, strict) {\r\n        var c;\r\n\r\n        if (typeof (locale) === 'boolean') {\r\n            strict = locale;\r\n            locale = undefined;\r\n        }\r\n        // object construction must be done this way.\r\n        // https://github.com/moment/moment/issues/1423\r\n        c = {};\r\n        c._isAMomentObject = true;\r\n        c._useUTC = true;\r\n        c._isUTC = true;\r\n        c._l = locale;\r\n        c._i = input;\r\n        c._f = format;\r\n        c._strict = strict;\r\n        c._pf = defaultParsingFlags();\r\n\r\n        return makeMoment(c).utc();\r\n    };\r\n\r\n    // creating with unix timestamp (in seconds)\r\n    moment.unix = function (input) {\r\n        return moment(input * 1000);\r\n    };\r\n\r\n    // duration\r\n    moment.duration = function (input, key) {\r\n        var duration = input,\r\n            // matching against regexp is expensive, do it on demand\r\n            match = null,\r\n            sign,\r\n            ret,\r\n            parseIso,\r\n            diffRes;\r\n\r\n        if (moment.isDuration(input)) {\r\n            duration = {\r\n                ms: input._milliseconds,\r\n                d: input._days,\r\n                M: input._months\r\n            };\r\n        } else if (typeof input === 'number') {\r\n            duration = {};\r\n            if (key) {\r\n                duration[key] = input;\r\n            } else {\r\n                duration.milliseconds = input;\r\n            }\r\n        } else if (!!(match = aspNetTimeSpanJsonRegex.exec(input))) {\r\n            sign = (match[1] === '-') ? -1 : 1;\r\n            duration = {\r\n                y: 0,\r\n                d: toInt(match[DATE]) * sign,\r\n                h: toInt(match[HOUR]) * sign,\r\n                m: toInt(match[MINUTE]) * sign,\r\n                s: toInt(match[SECOND]) * sign,\r\n                ms: toInt(match[MILLISECOND]) * sign\r\n            };\r\n        } else if (!!(match = isoDurationRegex.exec(input))) {\r\n            sign = (match[1] === '-') ? -1 : 1;\r\n            parseIso = function (inp) {\r\n                // We'd normally use ~~inp for this, but unfortunately it also\r\n                // converts floats to ints.\r\n                // inp may be undefined, so careful calling replace on it.\r\n                var res = inp && parseFloat(inp.replace(',', '.'));\r\n                // apply sign while we're at it\r\n                return (isNaN(res) ? 0 : res) * sign;\r\n            };\r\n            duration = {\r\n                y: parseIso(match[2]),\r\n                M: parseIso(match[3]),\r\n                d: parseIso(match[4]),\r\n                h: parseIso(match[5]),\r\n                m: parseIso(match[6]),\r\n                s: parseIso(match[7]),\r\n                w: parseIso(match[8])\r\n            };\r\n        } else if (typeof duration === 'object' &&\r\n                ('from' in duration || 'to' in duration)) {\r\n            diffRes = momentsDifference(moment(duration.from), moment(duration.to));\r\n\r\n            duration = {};\r\n            duration.ms = diffRes.milliseconds;\r\n            duration.M = diffRes.months;\r\n        }\r\n\r\n        ret = new Duration(duration);\r\n\r\n        if (moment.isDuration(input) && hasOwnProp(input, '_locale')) {\r\n            ret._locale = input._locale;\r\n        }\r\n\r\n        return ret;\r\n    };\r\n\r\n    // version number\r\n    moment.version = VERSION;\r\n\r\n    // default format\r\n    moment.defaultFormat = isoFormat;\r\n\r\n    // constant that refers to the ISO standard\r\n    moment.ISO_8601 = function () { };\r\n\r\n    // Plugins that add properties should also add the key here (null value),\r\n    // so we can properly clone ourselves.\r\n    moment.momentProperties = momentProperties;\r\n\r\n    // This function will be called whenever a moment is mutated.\r\n    // It is intended to keep the offset in sync with the timezone.\r\n    moment.updateOffset = function () { };\r\n\r\n    // This function allows you to set a threshold for relative time strings\r\n    moment.relativeTimeThreshold = function (threshold, limit) {\r\n        if (relativeTimeThresholds[threshold] === undefined) {\r\n            return false;\r\n        }\r\n        if (limit === undefined) {\r\n            return relativeTimeThresholds[threshold];\r\n        }\r\n        relativeTimeThresholds[threshold] = limit;\r\n        return true;\r\n    };\r\n\r\n    moment.lang = deprecate(\r\n        'moment.lang is deprecated. Use moment.locale instead.',\r\n        function (key, value) {\r\n            return moment.locale(key, value);\r\n        }\r\n    );\r\n\r\n    // This function will load locale and then set the global locale.  If\r\n    // no arguments are passed in, it will simply return the current global\r\n    // locale key.\r\n    moment.locale = function (key, values) {\r\n        var data;\r\n        if (key) {\r\n            if (typeof (values) !== 'undefined') {\r\n                data = moment.defineLocale(key, values);\r\n            }\r\n            else {\r\n                data = moment.localeData(key);\r\n            }\r\n\r\n            if (data) {\r\n                moment.duration._locale = moment._locale = data;\r\n            }\r\n        }\r\n\r\n        return moment._locale._abbr;\r\n    };\r\n\r\n    moment.defineLocale = function (name, values) {\r\n        if (values !== null) {\r\n            values.abbr = name;\r\n            if (!locales[name]) {\r\n                locales[name] = new Locale();\r\n            }\r\n            locales[name].set(values);\r\n\r\n            // backwards compat for now: also set the locale\r\n            moment.locale(name);\r\n\r\n            return locales[name];\r\n        } else {\r\n            // useful for testing\r\n            delete locales[name];\r\n            return null;\r\n        }\r\n    };\r\n\r\n    moment.langData = deprecate(\r\n        'moment.langData is deprecated. Use moment.localeData instead.',\r\n        function (key) {\r\n            return moment.localeData(key);\r\n        }\r\n    );\r\n\r\n    // returns locale data\r\n    moment.localeData = function (key) {\r\n        var locale;\r\n\r\n        if (key && key._locale && key._locale._abbr) {\r\n            key = key._locale._abbr;\r\n        }\r\n\r\n        if (!key) {\r\n            return moment._locale;\r\n        }\r\n\r\n        if (!isArray(key)) {\r\n            //short-circuit everything else\r\n            locale = loadLocale(key);\r\n            if (locale) {\r\n                return locale;\r\n            }\r\n            key = [key];\r\n        }\r\n\r\n        return chooseLocale(key);\r\n    };\r\n\r\n    // compare moment object\r\n    moment.isMoment = function (obj) {\r\n        return obj instanceof Moment ||\r\n            (obj != null && hasOwnProp(obj, '_isAMomentObject'));\r\n    };\r\n\r\n    // for typechecking Duration objects\r\n    moment.isDuration = function (obj) {\r\n        return obj instanceof Duration;\r\n    };\r\n\r\n    for (i = lists.length - 1; i >= 0; --i) {\r\n        makeList(lists[i]);\r\n    }\r\n\r\n    moment.normalizeUnits = function (units) {\r\n        return normalizeUnits(units);\r\n    };\r\n\r\n    moment.invalid = function (flags) {\r\n        var m = moment.utc(NaN);\r\n        if (flags != null) {\r\n            extend(m._pf, flags);\r\n        }\r\n        else {\r\n            m._pf.userInvalidated = true;\r\n        }\r\n\r\n        return m;\r\n    };\r\n\r\n    moment.parseZone = function () {\r\n        return moment.apply(null, arguments).parseZone();\r\n    };\r\n\r\n    moment.parseTwoDigitYear = function (input) {\r\n        return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);\r\n    };\r\n\r\n    /************************************\r\n        Moment Prototype\r\n    ************************************/\r\n\r\n\r\n    extend(moment.fn = Moment.prototype, {\r\n\r\n        clone: function () {\r\n            return moment(this);\r\n        },\r\n\r\n        valueOf: function () {\r\n            return +this._d + ((this._offset || 0) * 60000);\r\n        },\r\n\r\n        unix: function () {\r\n            return Math.floor(+this / 1000);\r\n        },\r\n\r\n        toString: function () {\r\n            return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');\r\n        },\r\n\r\n        toDate: function () {\r\n            return this._offset ? new Date(+this) : this._d;\r\n        },\r\n\r\n        toISOString: function () {\r\n            var m = moment(this).utc();\r\n            if (0 < m.year() && m.year() <= 9999) {\r\n                if ('function' === typeof Date.prototype.toISOString) {\r\n                    // native implementation is ~50x faster, use it when we can\r\n                    return this.toDate().toISOString();\r\n                } else {\r\n                    return formatMoment(m, 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]');\r\n                }\r\n            } else {\r\n                return formatMoment(m, 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]');\r\n            }\r\n        },\r\n\r\n        toArray: function () {\r\n            var m = this;\r\n            return [\r\n                m.year(),\r\n                m.month(),\r\n                m.date(),\r\n                m.hours(),\r\n                m.minutes(),\r\n                m.seconds(),\r\n                m.milliseconds()\r\n            ];\r\n        },\r\n\r\n        isValid: function () {\r\n            return isValid(this);\r\n        },\r\n\r\n        isDSTShifted: function () {\r\n            if (this._a) {\r\n                return this.isValid() && compareArrays(this._a, (this._isUTC ? moment.utc(this._a) : moment(this._a)).toArray()) > 0;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        parsingFlags: function () {\r\n            return extend({}, this._pf);\r\n        },\r\n\r\n        invalidAt: function () {\r\n            return this._pf.overflow;\r\n        },\r\n\r\n        utc: function (keepLocalTime) {\r\n            return this.zone(0, keepLocalTime);\r\n        },\r\n\r\n        local: function (keepLocalTime) {\r\n            if (this._isUTC) {\r\n                this.zone(0, keepLocalTime);\r\n                this._isUTC = false;\r\n\r\n                if (keepLocalTime) {\r\n                    this.add(this._dateTzOffset(), 'm');\r\n                }\r\n            }\r\n            return this;\r\n        },\r\n\r\n        format: function (inputString) {\r\n            var output = formatMoment(this, inputString || moment.defaultFormat);\r\n            return this.localeData().postformat(output);\r\n        },\r\n\r\n        add: createAdder(1, 'add'),\r\n\r\n        subtract: createAdder(-1, 'subtract'),\r\n\r\n        diff: function (input, units, asFloat) {\r\n            var that = makeAs(input, this),\r\n                zoneDiff = (this.zone() - that.zone()) * 6e4,\r\n                diff, output, daysAdjust;\r\n\r\n            units = normalizeUnits(units);\r\n\r\n            if (units === 'year' || units === 'month') {\r\n                // average number of days in the months in the given dates\r\n                diff = (this.daysInMonth() + that.daysInMonth()) * 432e5; // 24 * 60 * 60 * 1000 / 2\r\n                // difference in months\r\n                output = ((this.year() - that.year()) * 12) + (this.month() - that.month());\r\n                // adjust by taking difference in days, average number of days\r\n                // and dst in the given months.\r\n                daysAdjust = (this - moment(this).startOf('month')) -\r\n                    (that - moment(that).startOf('month'));\r\n                // same as above but with zones, to negate all dst\r\n                daysAdjust -= ((this.zone() - moment(this).startOf('month').zone()) -\r\n                        (that.zone() - moment(that).startOf('month').zone())) * 6e4;\r\n                output += daysAdjust / diff;\r\n                if (units === 'year') {\r\n                    output = output / 12;\r\n                }\r\n            } else {\r\n                diff = (this - that);\r\n                output = units === 'second' ? diff / 1e3 : // 1000\r\n                    units === 'minute' ? diff / 6e4 : // 1000 * 60\r\n                    units === 'hour' ? diff / 36e5 : // 1000 * 60 * 60\r\n                    units === 'day' ? (diff - zoneDiff) / 864e5 : // 1000 * 60 * 60 * 24, negate dst\r\n                    units === 'week' ? (diff - zoneDiff) / 6048e5 : // 1000 * 60 * 60 * 24 * 7, negate dst\r\n                    diff;\r\n            }\r\n            return asFloat ? output : absRound(output);\r\n        },\r\n\r\n        from: function (time, withoutSuffix) {\r\n            return moment.duration({ to: this, from: time }).locale(this.locale()).humanize(!withoutSuffix);\r\n        },\r\n\r\n        fromNow: function (withoutSuffix) {\r\n            return this.from(moment(), withoutSuffix);\r\n        },\r\n\r\n        calendar: function (time) {\r\n            // We want to compare the start of today, vs this.\r\n            // Getting start-of-today depends on whether we're zone'd or not.\r\n            var now = time || moment(),\r\n                sod = makeAs(now, this).startOf('day'),\r\n                diff = this.diff(sod, 'days', true),\r\n                format = diff < -6 ? 'sameElse' :\r\n                    diff < -1 ? 'lastWeek' :\r\n                    diff < 0 ? 'lastDay' :\r\n                    diff < 1 ? 'sameDay' :\r\n                    diff < 2 ? 'nextDay' :\r\n                    diff < 7 ? 'nextWeek' : 'sameElse';\r\n            return this.format(this.localeData().calendar(format, this, moment(now)));\r\n        },\r\n\r\n        isLeapYear: function () {\r\n            return isLeapYear(this.year());\r\n        },\r\n\r\n        isDST: function () {\r\n            return (this.zone() < this.clone().month(0).zone() ||\r\n                this.zone() < this.clone().month(5).zone());\r\n        },\r\n\r\n        day: function (input) {\r\n            var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();\r\n            if (input != null) {\r\n                input = parseWeekday(input, this.localeData());\r\n                return this.add(input - day, 'd');\r\n            } else {\r\n                return day;\r\n            }\r\n        },\r\n\r\n        month: makeAccessor('Month', true),\r\n\r\n        startOf: function (units) {\r\n            units = normalizeUnits(units);\r\n            // the following switch intentionally omits break keywords\r\n            // to utilize falling through the cases.\r\n            switch (units) {\r\n                case 'year':\r\n                    this.month(0);\r\n                    /* falls through */\r\n                case 'quarter':\r\n                case 'month':\r\n                    this.date(1);\r\n                    /* falls through */\r\n                case 'week':\r\n                case 'isoWeek':\r\n                case 'day':\r\n                    this.hours(0);\r\n                    /* falls through */\r\n                case 'hour':\r\n                    this.minutes(0);\r\n                    /* falls through */\r\n                case 'minute':\r\n                    this.seconds(0);\r\n                    /* falls through */\r\n                case 'second':\r\n                    this.milliseconds(0);\r\n                    /* falls through */\r\n            }\r\n\r\n            // weeks are a special case\r\n            if (units === 'week') {\r\n                this.weekday(0);\r\n            } else if (units === 'isoWeek') {\r\n                this.isoWeekday(1);\r\n            }\r\n\r\n            // quarters are also special\r\n            if (units === 'quarter') {\r\n                this.month(Math.floor(this.month() / 3) * 3);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        endOf: function (units) {\r\n            units = normalizeUnits(units);\r\n            if (units === undefined || units === 'millisecond') {\r\n                return this;\r\n            }\r\n            return this.startOf(units).add(1, (units === 'isoWeek' ? 'week' : units)).subtract(1, 'ms');\r\n        },\r\n\r\n        isAfter: function (input, units) {\r\n            var inputMs;\r\n            units = normalizeUnits(typeof units !== 'undefined' ? units : 'millisecond');\r\n            if (units === 'millisecond') {\r\n                input = moment.isMoment(input) ? input : moment(input);\r\n                return +this > +input;\r\n            } else {\r\n                inputMs = moment.isMoment(input) ? +input : +moment(input);\r\n                return inputMs < +this.clone().startOf(units);\r\n            }\r\n        },\r\n\r\n        isBefore: function (input, units) {\r\n            var inputMs;\r\n            units = normalizeUnits(typeof units !== 'undefined' ? units : 'millisecond');\r\n            if (units === 'millisecond') {\r\n                input = moment.isMoment(input) ? input : moment(input);\r\n                return +this < +input;\r\n            } else {\r\n                inputMs = moment.isMoment(input) ? +input : +moment(input);\r\n                return +this.clone().endOf(units) < inputMs;\r\n            }\r\n        },\r\n\r\n        isSame: function (input, units) {\r\n            var inputMs;\r\n            units = normalizeUnits(units || 'millisecond');\r\n            if (units === 'millisecond') {\r\n                input = moment.isMoment(input) ? input : moment(input);\r\n                return +this === +input;\r\n            } else {\r\n                inputMs = +moment(input);\r\n                return +(this.clone().startOf(units)) <= inputMs && inputMs <= +(this.clone().endOf(units));\r\n            }\r\n        },\r\n\r\n        min: deprecate(\r\n                 'moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548',\r\n                 function (other) {\r\n                     other = moment.apply(null, arguments);\r\n                     return other < this ? this : other;\r\n                 }\r\n         ),\r\n\r\n        max: deprecate(\r\n                'moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548',\r\n                function (other) {\r\n                    other = moment.apply(null, arguments);\r\n                    return other > this ? this : other;\r\n                }\r\n        ),\r\n\r\n        // keepLocalTime = true means only change the timezone, without\r\n        // affecting the local hour. So 5:31:26 +0300 --[zone(2, true)]-->\r\n        // 5:31:26 +0200 It is possible that 5:31:26 doesn't exist int zone\r\n        // +0200, so we adjust the time as needed, to be valid.\r\n        //\r\n        // Keeping the time actually adds/subtracts (one hour)\r\n        // from the actual represented time. That is why we call updateOffset\r\n        // a second time. In case it wants us to change the offset again\r\n        // _changeInProgress == true case, then we have to adjust, because\r\n        // there is no such time in the given timezone.\r\n        zone: function (input, keepLocalTime) {\r\n            var offset = this._offset || 0,\r\n                localAdjust;\r\n            if (input != null) {\r\n                if (typeof input === 'string') {\r\n                    input = timezoneMinutesFromString(input);\r\n                }\r\n                if (Math.abs(input) < 16) {\r\n                    input = input * 60;\r\n                }\r\n                if (!this._isUTC && keepLocalTime) {\r\n                    localAdjust = this._dateTzOffset();\r\n                }\r\n                this._offset = input;\r\n                this._isUTC = true;\r\n                if (localAdjust != null) {\r\n                    this.subtract(localAdjust, 'm');\r\n                }\r\n                if (offset !== input) {\r\n                    if (!keepLocalTime || this._changeInProgress) {\r\n                        addOrSubtractDurationFromMoment(this,\r\n                                moment.duration(offset - input, 'm'), 1, false);\r\n                    } else if (!this._changeInProgress) {\r\n                        this._changeInProgress = true;\r\n                        moment.updateOffset(this, true);\r\n                        this._changeInProgress = null;\r\n                    }\r\n                }\r\n            } else {\r\n                return this._isUTC ? offset : this._dateTzOffset();\r\n            }\r\n            return this;\r\n        },\r\n\r\n        zoneAbbr: function () {\r\n            return this._isUTC ? 'UTC' : '';\r\n        },\r\n\r\n        zoneName: function () {\r\n            return this._isUTC ? 'Coordinated Universal Time' : '';\r\n        },\r\n\r\n        parseZone: function () {\r\n            if (this._tzm) {\r\n                this.zone(this._tzm);\r\n            } else if (typeof this._i === 'string') {\r\n                this.zone(this._i);\r\n            }\r\n            return this;\r\n        },\r\n\r\n        hasAlignedHourOffset: function (input) {\r\n            if (!input) {\r\n                input = 0;\r\n            }\r\n            else {\r\n                input = moment(input).zone();\r\n            }\r\n\r\n            return (this.zone() - input) % 60 === 0;\r\n        },\r\n\r\n        daysInMonth: function () {\r\n            return daysInMonth(this.year(), this.month());\r\n        },\r\n\r\n        dayOfYear: function (input) {\r\n            var dayOfYear = round((moment(this).startOf('day') - moment(this).startOf('year')) / 864e5) + 1;\r\n            return input == null ? dayOfYear : this.add((input - dayOfYear), 'd');\r\n        },\r\n\r\n        quarter: function (input) {\r\n            return input == null ? Math.ceil((this.month() + 1) / 3) : this.month((input - 1) * 3 + this.month() % 3);\r\n        },\r\n\r\n        weekYear: function (input) {\r\n            var year = weekOfYear(this, this.localeData()._week.dow, this.localeData()._week.doy).year;\r\n            return input == null ? year : this.add((input - year), 'y');\r\n        },\r\n\r\n        isoWeekYear: function (input) {\r\n            var year = weekOfYear(this, 1, 4).year;\r\n            return input == null ? year : this.add((input - year), 'y');\r\n        },\r\n\r\n        week: function (input) {\r\n            var week = this.localeData().week(this);\r\n            return input == null ? week : this.add((input - week) * 7, 'd');\r\n        },\r\n\r\n        isoWeek: function (input) {\r\n            var week = weekOfYear(this, 1, 4).week;\r\n            return input == null ? week : this.add((input - week) * 7, 'd');\r\n        },\r\n\r\n        weekday: function (input) {\r\n            var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;\r\n            return input == null ? weekday : this.add(input - weekday, 'd');\r\n        },\r\n\r\n        isoWeekday: function (input) {\r\n            // behaves the same as moment#day except\r\n            // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)\r\n            // as a setter, sunday should belong to the previous week.\r\n            return input == null ? this.day() || 7 : this.day(this.day() % 7 ? input : input - 7);\r\n        },\r\n\r\n        isoWeeksInYear: function () {\r\n            return weeksInYear(this.year(), 1, 4);\r\n        },\r\n\r\n        weeksInYear: function () {\r\n            var weekInfo = this.localeData()._week;\r\n            return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);\r\n        },\r\n\r\n        get: function (units) {\r\n            units = normalizeUnits(units);\r\n            return this[units]();\r\n        },\r\n\r\n        set: function (units, value) {\r\n            units = normalizeUnits(units);\r\n            if (typeof this[units] === 'function') {\r\n                this[units](value);\r\n            }\r\n            return this;\r\n        },\r\n\r\n        // If passed a locale key, it will set the locale for this\r\n        // instance.  Otherwise, it will return the locale configuration\r\n        // variables for this instance.\r\n        locale: function (key) {\r\n            var newLocaleData;\r\n\r\n            if (key === undefined) {\r\n                return this._locale._abbr;\r\n            } else {\r\n                newLocaleData = moment.localeData(key);\r\n                if (newLocaleData != null) {\r\n                    this._locale = newLocaleData;\r\n                }\r\n                return this;\r\n            }\r\n        },\r\n\r\n        lang: deprecate(\r\n            'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',\r\n            function (key) {\r\n                if (key === undefined) {\r\n                    return this.localeData();\r\n                } else {\r\n                    return this.locale(key);\r\n                }\r\n            }\r\n        ),\r\n\r\n        localeData: function () {\r\n            return this._locale;\r\n        },\r\n\r\n        _dateTzOffset: function () {\r\n            // On Firefox.24 Date#getTimezoneOffset returns a floating point.\r\n            // https://github.com/moment/moment/pull/1871\r\n            return Math.round(this._d.getTimezoneOffset() / 15) * 15;\r\n        }\r\n    });\r\n\r\n    function rawMonthSetter(mom, value) {\r\n        var dayOfMonth;\r\n\r\n        // TODO: Move this out of here!\r\n        if (typeof value === 'string') {\r\n            value = mom.localeData().monthsParse(value);\r\n            // TODO: Another silent failure?\r\n            if (typeof value !== 'number') {\r\n                return mom;\r\n            }\r\n        }\r\n\r\n        dayOfMonth = Math.min(mom.date(),\r\n                daysInMonth(mom.year(), value));\r\n        mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);\r\n        return mom;\r\n    }\r\n\r\n    function rawGetter(mom, unit) {\r\n        return mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]();\r\n    }\r\n\r\n    function rawSetter(mom, unit, value) {\r\n        if (unit === 'Month') {\r\n            return rawMonthSetter(mom, value);\r\n        } else {\r\n            return mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);\r\n        }\r\n    }\r\n\r\n    function makeAccessor(unit, keepTime) {\r\n        return function (value) {\r\n            if (value != null) {\r\n                rawSetter(this, unit, value);\r\n                moment.updateOffset(this, keepTime);\r\n                return this;\r\n            } else {\r\n                return rawGetter(this, unit);\r\n            }\r\n        };\r\n    }\r\n\r\n    moment.fn.millisecond = moment.fn.milliseconds = makeAccessor('Milliseconds', false);\r\n    moment.fn.second = moment.fn.seconds = makeAccessor('Seconds', false);\r\n    moment.fn.minute = moment.fn.minutes = makeAccessor('Minutes', false);\r\n    // Setting the hour should keep the time, because the user explicitly\r\n    // specified which hour he wants. So trying to maintain the same hour (in\r\n    // a new timezone) makes sense. Adding/subtracting hours does not follow\r\n    // this rule.\r\n    moment.fn.hour = moment.fn.hours = makeAccessor('Hours', true);\r\n    // moment.fn.month is defined separately\r\n    moment.fn.date = makeAccessor('Date', true);\r\n    moment.fn.dates = deprecate('dates accessor is deprecated. Use date instead.', makeAccessor('Date', true));\r\n    moment.fn.year = makeAccessor('FullYear', true);\r\n    moment.fn.years = deprecate('years accessor is deprecated. Use year instead.', makeAccessor('FullYear', true));\r\n\r\n    // add plural methods\r\n    moment.fn.days = moment.fn.day;\r\n    moment.fn.months = moment.fn.month;\r\n    moment.fn.weeks = moment.fn.week;\r\n    moment.fn.isoWeeks = moment.fn.isoWeek;\r\n    moment.fn.quarters = moment.fn.quarter;\r\n\r\n    // add aliased format methods\r\n    moment.fn.toJSON = moment.fn.toISOString;\r\n\r\n    /************************************\r\n        Duration Prototype\r\n    ************************************/\r\n\r\n\r\n    function daysToYears(days) {\r\n        // 400 years have 146097 days (taking into account leap year rules)\r\n        return days * 400 / 146097;\r\n    }\r\n\r\n    function yearsToDays(years) {\r\n        // years * 365 + absRound(years / 4) -\r\n        //     absRound(years / 100) + absRound(years / 400);\r\n        return years * 146097 / 400;\r\n    }\r\n\r\n    extend(moment.duration.fn = Duration.prototype, {\r\n\r\n        _bubble: function () {\r\n            var milliseconds = this._milliseconds,\r\n                days = this._days,\r\n                months = this._months,\r\n                data = this._data,\r\n                seconds, minutes, hours, years = 0;\r\n\r\n            // The following code bubbles up values, see the tests for\r\n            // examples of what that means.\r\n            data.milliseconds = milliseconds % 1000;\r\n\r\n            seconds = absRound(milliseconds / 1000);\r\n            data.seconds = seconds % 60;\r\n\r\n            minutes = absRound(seconds / 60);\r\n            data.minutes = minutes % 60;\r\n\r\n            hours = absRound(minutes / 60);\r\n            data.hours = hours % 24;\r\n\r\n            days += absRound(hours / 24);\r\n\r\n            // Accurately convert days to years, assume start from year 0.\r\n            years = absRound(daysToYears(days));\r\n            days -= absRound(yearsToDays(years));\r\n\r\n            // 30 days to a month\r\n            // TODO (iskren): Use anchor date (like 1st Jan) to compute this.\r\n            months += absRound(days / 30);\r\n            days %= 30;\r\n\r\n            // 12 months -> 1 year\r\n            years += absRound(months / 12);\r\n            months %= 12;\r\n\r\n            data.days = days;\r\n            data.months = months;\r\n            data.years = years;\r\n        },\r\n\r\n        abs: function () {\r\n            this._milliseconds = Math.abs(this._milliseconds);\r\n            this._days = Math.abs(this._days);\r\n            this._months = Math.abs(this._months);\r\n\r\n            this._data.milliseconds = Math.abs(this._data.milliseconds);\r\n            this._data.seconds = Math.abs(this._data.seconds);\r\n            this._data.minutes = Math.abs(this._data.minutes);\r\n            this._data.hours = Math.abs(this._data.hours);\r\n            this._data.months = Math.abs(this._data.months);\r\n            this._data.years = Math.abs(this._data.years);\r\n\r\n            return this;\r\n        },\r\n\r\n        weeks: function () {\r\n            return absRound(this.days() / 7);\r\n        },\r\n\r\n        valueOf: function () {\r\n            return this._milliseconds +\r\n              this._days * 864e5 +\r\n              (this._months % 12) * 2592e6 +\r\n              toInt(this._months / 12) * 31536e6;\r\n        },\r\n\r\n        humanize: function (withSuffix) {\r\n            var output = relativeTime(this, !withSuffix, this.localeData());\r\n\r\n            if (withSuffix) {\r\n                output = this.localeData().pastFuture(+this, output);\r\n            }\r\n\r\n            return this.localeData().postformat(output);\r\n        },\r\n\r\n        add: function (input, val) {\r\n            // supports only 2.0-style add(1, 's') or add(moment)\r\n            var dur = moment.duration(input, val);\r\n\r\n            this._milliseconds += dur._milliseconds;\r\n            this._days += dur._days;\r\n            this._months += dur._months;\r\n\r\n            this._bubble();\r\n\r\n            return this;\r\n        },\r\n\r\n        subtract: function (input, val) {\r\n            var dur = moment.duration(input, val);\r\n\r\n            this._milliseconds -= dur._milliseconds;\r\n            this._days -= dur._days;\r\n            this._months -= dur._months;\r\n\r\n            this._bubble();\r\n\r\n            return this;\r\n        },\r\n\r\n        get: function (units) {\r\n            units = normalizeUnits(units);\r\n            return this[units.toLowerCase() + 's']();\r\n        },\r\n\r\n        as: function (units) {\r\n            var days, months;\r\n            units = normalizeUnits(units);\r\n\r\n            if (units === 'month' || units === 'year') {\r\n                days = this._days + this._milliseconds / 864e5;\r\n                months = this._months + daysToYears(days) * 12;\r\n                return units === 'month' ? months : months / 12;\r\n            } else {\r\n                // handle milliseconds separately because of floating point math errors (issue #1867)\r\n                days = this._days + Math.round(yearsToDays(this._months / 12));\r\n                switch (units) {\r\n                    case 'week': return days / 7 + this._milliseconds / 6048e5;\r\n                    case 'day': return days + this._milliseconds / 864e5;\r\n                    case 'hour': return days * 24 + this._milliseconds / 36e5;\r\n                    case 'minute': return days * 24 * 60 + this._milliseconds / 6e4;\r\n                    case 'second': return days * 24 * 60 * 60 + this._milliseconds / 1000;\r\n                        // Math.floor prevents floating point math errors here\r\n                    case 'millisecond': return Math.floor(days * 24 * 60 * 60 * 1000) + this._milliseconds;\r\n                    default: throw new Error('Unknown unit ' + units);\r\n                }\r\n            }\r\n        },\r\n\r\n        lang: moment.fn.lang,\r\n        locale: moment.fn.locale,\r\n\r\n        toIsoString: deprecate(\r\n            'toIsoString() is deprecated. Please use toISOString() instead ' +\r\n            '(notice the capitals)',\r\n            function () {\r\n                return this.toISOString();\r\n            }\r\n        ),\r\n\r\n        toISOString: function () {\r\n            // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js\r\n            var years = Math.abs(this.years()),\r\n                months = Math.abs(this.months()),\r\n                days = Math.abs(this.days()),\r\n                hours = Math.abs(this.hours()),\r\n                minutes = Math.abs(this.minutes()),\r\n                seconds = Math.abs(this.seconds() + this.milliseconds() / 1000);\r\n\r\n            if (!this.asSeconds()) {\r\n                // this is the same as C#'s (Noda) and python (isodate)...\r\n                // but not other JS (goog.date)\r\n                return 'P0D';\r\n            }\r\n\r\n            return (this.asSeconds() < 0 ? '-' : '') +\r\n                'P' +\r\n                (years ? years + 'Y' : '') +\r\n                (months ? months + 'M' : '') +\r\n                (days ? days + 'D' : '') +\r\n                ((hours || minutes || seconds) ? 'T' : '') +\r\n                (hours ? hours + 'H' : '') +\r\n                (minutes ? minutes + 'M' : '') +\r\n                (seconds ? seconds + 'S' : '');\r\n        },\r\n\r\n        localeData: function () {\r\n            return this._locale;\r\n        }\r\n    });\r\n\r\n    moment.duration.fn.toString = moment.duration.fn.toISOString;\r\n\r\n    function makeDurationGetter(name) {\r\n        moment.duration.fn[name] = function () {\r\n            return this._data[name];\r\n        };\r\n    }\r\n\r\n    for (i in unitMillisecondFactors) {\r\n        if (hasOwnProp(unitMillisecondFactors, i)) {\r\n            makeDurationGetter(i.toLowerCase());\r\n        }\r\n    }\r\n\r\n    moment.duration.fn.asMilliseconds = function () {\r\n        return this.as('ms');\r\n    };\r\n    moment.duration.fn.asSeconds = function () {\r\n        return this.as('s');\r\n    };\r\n    moment.duration.fn.asMinutes = function () {\r\n        return this.as('m');\r\n    };\r\n    moment.duration.fn.asHours = function () {\r\n        return this.as('h');\r\n    };\r\n    moment.duration.fn.asDays = function () {\r\n        return this.as('d');\r\n    };\r\n    moment.duration.fn.asWeeks = function () {\r\n        return this.as('weeks');\r\n    };\r\n    moment.duration.fn.asMonths = function () {\r\n        return this.as('M');\r\n    };\r\n    moment.duration.fn.asYears = function () {\r\n        return this.as('y');\r\n    };\r\n\r\n    /************************************\r\n        Default Locale\r\n    ************************************/\r\n\r\n\r\n    // Set default locale, other locale will inherit from English.\r\n    moment.locale('en', {\r\n        ordinalParse: /\\d{1,2}(th|st|nd|rd)/,\r\n        ordinal: function (number) {\r\n            var b = number % 10,\r\n                output = (toInt(number % 100 / 10) === 1) ? 'th' :\r\n                (b === 1) ? 'st' :\r\n                (b === 2) ? 'nd' :\r\n                (b === 3) ? 'rd' : 'th';\r\n            return number + output;\r\n        }\r\n    });\r\n\r\n    /* EMBED_LOCALES */\r\n\r\n    /************************************\r\n        Exposing Moment\r\n    ************************************/\r\n\r\n    function makeGlobal(shouldDeprecate) {\r\n        /*global ender:false */\r\n        if (typeof ender !== 'undefined') {\r\n            return;\r\n        }\r\n        oldGlobalMoment = globalScope.moment;\r\n        if (shouldDeprecate) {\r\n            globalScope.moment = deprecate(\r\n                    'Accessing Moment through the global scope is ' +\r\n                    'deprecated, and will be removed in an upcoming ' +\r\n                    'release.',\r\n                    moment);\r\n        } else {\r\n            globalScope.moment = moment;\r\n        }\r\n    }\r\n\r\n    // CommonJS module is defined\r\n    if (hasModule) {\r\n        module.exports = moment;\r\n    } else if (typeof define === 'function' && define.amd) {\r\n        define('moment', function (require, exports, module) {\r\n            if (module.config && module.config() && module.config().noGlobal === true) {\r\n                // release the global variable\r\n                globalScope.moment = oldGlobalMoment;\r\n            }\r\n\r\n            return moment;\r\n        });\r\n        makeGlobal(true);\r\n    } else {\r\n        makeGlobal();\r\n    }\r\n}).call(this);\r\n","\r\nvar invSearch = {\r\n    Init: function () {\r\n        var searchModel = kendo.observable(new invSearch.SearchModel());\r\n        kendo.bind($('#dvInvSearch'), searchModel);\r\n        searchModel.loadInvoice();\r\n        searchModel.loadErrorMessages();\r\n    },\r\n\r\n    deleteInv: function () { return kendo.template($('#deleteInvTpl').html()); },\r\n    createOrderInv: function () { return kendo.template($('#createOrderInvTpl').html()); },\r\n    displayInv: function () { return kendo.template($('#displayInvTpl').html()); },\r\n    selectMyOrdersTemplate: function () { return kendo.template($('#selectMyOrdersTpl').html()); },\r\n    dateMyOrdersTemplate: function () { return kendo.template($('#dateMyOrdersTpl').html()); },\r\n    statusTemplate: function () { return kendo.template($('#statusInvTpl').html()); },\r\n\r\n\r\n\r\n    SearchModel: function () {\r\n        this.isLoading = true;\r\n        this.isLoaded = false;\r\n        this.from = \"\";\r\n        this.to = \"\";\r\n        this.filterBy = \"\";\r\n        this.filterValue = \"\";\r\n        this.invoices = [];\r\n        this.ListEmpty = false;\r\n        this.selectedFilterItem = null;\r\n        this.filterByValue = \"\";\r\n        this.currentInvoiceId = 0;\r\n        this.memberInvoiceNumber = 0;\r\n        this.myOrdersFilter = \"\";\r\n        this.index_Invoice_Action = window.index_Invoice_Action;\r\n        this.myOrdersErrorText = \"\";\r\n        this.errorMessages = [];\r\n        this.statusUpdateText = \"\";\r\n\r\n        this.loadInvoice = function () {\r\n            var self = this;\r\n            if (this.index_Invoice_Action == \"Invoice_Search\") {\r\n                kendo.ui.progress($(\"#loading\"), true);\r\n                $.ajax({\r\n                    type: 'get',\r\n                    dataType: 'json',\r\n                    cache: true,\r\n                    url: '/Ordering/api/InvoiceSearch/LoadAll',\r\n                    success: function (data) {\r\n                        self.dataHandler(data);\r\n                    },\r\n                    error: function () {\r\n                        self.error = true;\r\n                    },\r\n                    complete: function () {\r\n                        kendo.ui.progress($(\"#loading\"), false);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n\r\n        this.filterCategoriesSource = new kendo.data.DataSource({\r\n            type: \"json\",\r\n            transport: {\r\n                read:\r\n                {\r\n                    url: \"/Ordering/api/InvoiceSearch/LoadFilterCategory\"\r\n                }\r\n            }\r\n        });\r\n\r\n        this.statusDataSource = new kendo.data.DataSource({\r\n            type: \"json\",\r\n            transport: {\r\n                read:\r\n                {\r\n                    url: \"/Ordering/api/InvoiceBase/LoadStatus\"\r\n                }\r\n            }\r\n        });\r\n\r\n        this.onStatusChange = function (e) {\r\n            var self = this;\r\n            var model = {\r\n                Id: e.data.Id,\r\n                Status: e.data.Status\r\n            };\r\n\r\n            kendo.ui.progress($(\"#loading\"), true);\r\n            $.ajax({\r\n                url: \"/Ordering/api/InvoiceBase/UpdateStatus\",\r\n                type: 'POST',\r\n                data: JSON.stringify(model),\r\n                contentType: \"application/json; charset=utf-8\",\r\n                success: function (data) {\r\n                    if (data) {\r\n                        self.set('statusUpdateText', self.errorMessages['statusUpdateText']);\r\n                    } else {\r\n                        self.set('statusUpdateText', '');\r\n                    }\r\n                },\r\n                error: function (data) {\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#loading\"), false);\r\n                    self.loadInvoice();\r\n                }\r\n            });\r\n        };\r\n\r\n        this.loadErrorMessages = function () {\r\n            if (this.index_Invoice_Action == \"Invoice_Search\") {\r\n                var self = this;\r\n                $.ajax({\r\n                    type: 'get',\r\n                    dataType: 'json',\r\n                    cache: true,\r\n                    url: '/Ordering/api/InvoiceEdit/LoadErrorMessage',\r\n                    success: function (data) {\r\n                        if (data) {\r\n                            self.set(\"errorMessages\", data);\r\n                        }\r\n                    },\r\n                    error: function () {\r\n                        self.error = true;\r\n                    },\r\n                    complete: function () {\r\n                    }\r\n                });\r\n            }\r\n        };\r\n\r\n        this.doSearch = function () {\r\n            var self = this;\r\n\r\n            var invoiceFilterModel = {\r\n                From: this.from,\r\n                To: this.to\r\n            };\r\n\r\n            if (null != this.selectedFilterItem) {\r\n                invoiceFilterModel.SelectedFilterId = this.selectedFilterItem;\r\n                invoiceFilterModel.SelectedFilterValue = this.filterByValue;\r\n            }\r\n            kendo.ui.progress($(\"#loading\"), true);\r\n            $.ajax({\r\n                url: \"/Ordering/api/InvoiceSearch/Filter\",\r\n                type: 'POST',\r\n                data: JSON.stringify(invoiceFilterModel),\r\n                contentType: \"application/json; charset=utf-8\",\r\n                success: function (data) {\r\n                    self.dataHandler(data);\r\n                },\r\n                error: function (data) {\r\n                },\r\n                complete: function () {\r\n                    self.set('statusUpdateText', '');\r\n                    kendo.ui.progress($(\"#loading\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n\r\n        this.doClear = function () {\r\n            this.set(\"from\", \"\");\r\n            this.set(\"to\", \"\");\r\n            this.set(\"filterByValue\", \"\");\r\n            this.set(\"selectedFilterItem\", null);\r\n            this.set('statusUpdateText', '');\r\n            this.loadInvoice();\r\n        },\r\n            this.dataHandler = function (data) {\r\n                if (data) {\r\n                    this.set(\"invoices\", data);\r\n                    this.set(\"isLoading \", false);\r\n                    this.set(\"isLoaded \", true);\r\n                    if (this.invoices.length == 0)\r\n                        this.set(\"ListEmpty\", true);\r\n                    else\r\n                        this.set(\"ListEmpty\", false);\r\n                }\r\n            };\r\n\r\n        this.viewDeletePopUp = function (e) {\r\n            var self = this;\r\n            var memberInvoiceNumber = e.data.DisplayMemberInvoiceNumber;\r\n            var invoiceId = e.data.Id;\r\n            self.set('currentInvoiceId', invoiceId);\r\n            self.set('memberInvoiceNumber', memberInvoiceNumber);\r\n            if (invoiceId != 0) {\r\n                var wnd = $('#confirmDeleteInvoice').data('kendoWindow');\r\n                wnd.center().open();\r\n            }\r\n        };\r\n\r\n        this.closeDeleteInvoice = function () {\r\n            var enterCertWnd = $('#confirmDeleteInvoice').data('kendoWindow');\r\n            if (enterCertWnd) {\r\n                enterCertWnd.close();\r\n            }\r\n        };\r\n\r\n        this.DeleteInvoice = function () {\r\n            var self = this;\r\n            var invtoDelete = this.currentInvoiceId;\r\n            $.ajax({\r\n                url: \"/Ordering/api/InvoiceSearch/Delete/\" + invtoDelete,\r\n                type: 'POST',\r\n                contentType: \"application/json; charset=utf-8\",\r\n                success: function () {\r\n                },\r\n                error: function () {\r\n\r\n                },\r\n                complete: function () {\r\n                    self.loadInvoice();\r\n                    self.closeDeleteInvoice();\r\n                }\r\n            });\r\n        };\r\n\r\n        this.createOrderRedirect = function () {\r\n            var self = this;\r\n            $.ajax({\r\n                url: \"/Ordering/Invoice/CreateOrderRedirect/\",\r\n                type: 'POST',\r\n                contentType: \"application/json; charset=utf-8\",\r\n                success: function () {\r\n                },\r\n                error: function () {\r\n                },\r\n                complete: function () {\r\n                }\r\n            });\r\n        };\r\n\r\n        this.clickMyOrders = function () {\r\n            kendo.ui.progress($(\"#loading\"), true);\r\n            var wnd = $('#dvInvMyOrders').data('kendoWindow');\r\n            wnd.center().open();\r\n            this.myOrdersDataSource.read();\r\n            kendo.ui.progress($(\"#loading\"), false);\r\n        };\r\n\r\n        this.selectMyOrders = function (e) {\r\n            window.location.href = \"/Ordering/Invoice/EditByOrderId/\" + e.data.Id;\r\n            return false;\r\n        };\r\n\r\n        this.searchMyOrders = function () {\r\n            this.myOrdersDataSource.filter([\r\n                {\r\n                    \"logic\": \"or\",\r\n                    \"filters\": [\r\n                        {\r\n                            \"field\": \"Id\",\r\n                            \"operator\": \"startswith\",\r\n                            \"value\": this.myOrdersFilter\r\n                        },\r\n                        {\r\n                            \"field\": \"Name\",\r\n                            \"operator\": \"startswith\",\r\n                            \"value\": this.contactsFilter\r\n                        }\r\n                    ]\r\n                }\r\n            ]);\r\n        };\r\n\r\n        this.myOrdersDataSource = new kendo.data.DataSource({\r\n            type: \"json\",\r\n            serverFiltering: true,\r\n            serverPaging: true,\r\n            pageSize: 10,\r\n            transport: {\r\n                read: {\r\n                    url: '/Ordering/api/MyOrders',\r\n                    type: \"POST\"\r\n                }\r\n            },\r\n            schema: {\r\n                data: function (data) {\r\n                    if (data && data.Items && data.Items.$values) {\r\n                        return data.Items.$values;\r\n                    } else if (data && data.Items) {\r\n                        return data.Items;\r\n                    } else {\r\n                        return null;\r\n                    }\r\n                },\r\n                total: function (data) {\r\n                    if (data) {\r\n                        return data.TotalCount;\r\n                    } else {\r\n                        return 0;\r\n                    }\r\n                }\r\n            },\r\n            requestStart: function (e) {\r\n                kendo.ui.progress($(\"#dgMyOrders\"), true);\r\n            },\r\n            requestEnd: function (e) {\r\n                kendo.ui.progress($(\"#dgMyOrders\"), false);\r\n            }\r\n        });\r\n\r\n        this.myOrdersDataBound = function (e) {\r\n            kendo.ui.progress($(\"#dgMyOrders\"), false);\r\n            if (this.myOrdersDataSource && this.myOrdersDataSource.total() == 0) {\r\n                this.set('myOrdersErrorText', this.errorMessages['myOrdersError']);\r\n            } else {\r\n                this.set('myOrdersErrorText', '');\r\n            }\r\n        };\r\n\r\n        this.loadMyOrders = function () {\r\n            var self = this;\r\n            $.ajax({\r\n                type: 'get',\r\n                dataType: 'json',\r\n                cache: true,\r\n                url: '/Ordering/api/MyOrders',\r\n                success: function (data) {\r\n                    self.set(\"myOrders\", data);\r\n                },\r\n                error: function () {\r\n                    self.error = true;\r\n                },\r\n                beforeSend: function () {\r\n                    kendo.ui.progress($(\"#dgMyOrders\"), true);\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#dgMyOrders\"), false);\r\n                }\r\n            });\r\n        };\r\n\r\n        this.ExportToCSV = function () {\r\n            kendo.ui.progress($(\"#loading\"), true);\r\n            var fileName = 'Invoices.csv';\r\n            var grid = $(\"#dgInvoices\").data(\"kendoGrid\");\r\n            var csv = '';\r\n\r\n            var data = grid.dataSource.view();\r\n\r\n            //add the header row\r\n            for (var i = 0; i < grid.columns.length; i++) {\r\n                var field = grid.columns[i].field;\r\n                var title = grid.columns[i].title || field;\r\n\r\n                //NO DATA\r\n                if (!field || field == \"Delete\" || field == \"CreateOrder\") {\r\n                    continue;\r\n                }\r\n\r\n                title = title.replace(/\"/g, '\"\"');\r\n                csv += '\"' + title + '\"';\r\n                if (i < grid.columns.length - 1) {\r\n                    csv += ',';\r\n                }\r\n            }\r\n            csv += '\\n';\r\n\r\n            //add each row of data\r\n            for (var row in data) {\r\n                for (var i = 0; i < grid.columns.length; i++) {\r\n                    var fieldName = grid.columns[i].field;\r\n\r\n                    //VALIDATE COLUMN\r\n                    if (!fieldName || fieldName == \"Delete\" || fieldName == \"CreateOrder\") continue;\r\n                    var value = '';\r\n                    if (fieldName.indexOf('.') >= 0) {\r\n                        var properties = fieldName.split('.');\r\n                        var value = data[row] || '';\r\n                        for (var j = 0; j < properties.length; j++) {\r\n                            var prop = properties[j];\r\n                            value = value[prop] || '';\r\n                        }\r\n                    } else {\r\n\r\n                        value = data[row][fieldName] || '';\r\n                    }\r\n\r\n                    value = value.toString().replace(/\"/g, '\"\"');\r\n                    csv += '\"' + value + '\"';\r\n                    if (i < grid.columns.length - 1) {\r\n                        csv += ',';\r\n                    }\r\n                }\r\n                csv += '\\n';\r\n            }\r\n\r\n            //EXPORT TO BROWSER\r\n            var blob = new Blob([csv], { type: 'text/csv;charset=utf-8' }); //Blob.js\r\n            saveAs(blob, fileName); //FileSaver.js\r\n            kendo.ui.progress($(\"#loading\"), false);\r\n        };\r\n    }\r\n};\r\n\r\n$(function () {\r\n    invSearch.Init();\r\n});","\r\nvar invDisplay = {\r\n    Init: function() {\r\n        var displayModel = kendo.observable(new invDisplay.invoiceDisplayViewModel());\r\n        kendo.bind($('#dvInvDisplay'), displayModel);\r\n        displayModel.loadInvoicedata();\r\n    },\r\n\r\n    productDescTemplate: function () { return kendo.template($('#productDescTpl').html()); },\r\n\r\n    invoiceDisplayViewModel: function () {\r\n        this.display_InvoiceId = window.display_InvoiceId;\r\n        this.display_Invoice_Action = window.display_Invoice_Action;\r\n\r\n        this.loadInvoicedata = function () {\r\n            if (this.display_Invoice_Action == \"Invoice_Display\") {\r\n                var self = this;\r\n                if (self.display_InvoiceId > 0) {\r\n                    var invoiceId = self.display_InvoiceId;\r\n                    kendo.ui.progress($(\"#dvinvProduct\"), true);\r\n                    $.ajax({\r\n                        type: 'get',\r\n                        dataType: 'json',\r\n                        cache: true,\r\n                        data: JSON.stringify(invoiceId),\r\n                        url: '/Ordering/api/InvoiceSearch/Load/' + invoiceId,\r\n                        success: function(data) {\r\n                            if (data && data.Id >0) {\r\n                                self.setInvoiceData(data);\r\n                            } else {\r\n                                window.location.href = \"/Ordering/Invoice\";\r\n                                return false;\r\n                            }\r\n                        },\r\n                        error: function() {\r\n                            self.error = true;\r\n                        },\r\n                        complete: function() {\r\n                            kendo.ui.progress($(\"#dvinvProduct\"), false);\r\n                        }\r\n                    });\r\n                    // get the id from edit_InvoiceId and load the invoice for the id\r\n                }\r\n            }\r\n        };\r\n\r\n        this.setInvoiceData = function(data) {\r\n            if (data) {\r\n                this.set('invoice', data);\r\n                this.set('invoiceDate', kendo.toString(new Date(moment(data.InvoiceDate)), \"MM/dd/yyyy\"));\r\n            }\r\n        };\r\n                     \r\n        this.sendEmailClick = function () {\r\n            var self = this;\r\n            if (self.invoice.Email){\r\n                self.viewConfirmationEmailPopUp();\r\n            }\r\n        };\r\n\r\n        this.confirmEmailClick = function() {\r\n            var self = this;\r\n            kendo.ui.progress($(\"#dvinvProduct\"), true);\r\n\r\n            $.ajax({\r\n                type: 'POST',\r\n                dataType: 'json',\r\n                cache: true,\r\n                data: JSON.stringify(self.invoice),\r\n                contentType: \"application/json; charset=utf-8\",\r\n                url: '/Ordering/api/InvoiceBase/SendInvoiceEmail',\r\n                success: function (data) {\r\n                },\r\n                error: function () {\r\n                    self.error = true;\r\n                },\r\n                complete: function () {\r\n                    kendo.ui.progress($(\"#dvinvProduct\"), false);\r\n                    self.cancelEmailClick();\r\n                }\r\n            });\r\n        };\r\n\r\n        this.cancelEmailClick = function () {\r\n            var wnd = $('#emailSendedConfirmation').data('kendoWindow');\r\n            if (wnd) {\r\n                wnd.close();\r\n            }\r\n        };\r\n\r\n        this.viewConfirmationEmailPopUp = function () {\r\n            var wnd = $('#emailSendedConfirmation').data('kendoWindow');\r\n            wnd.center().open();\r\n        };\r\n\r\n        this.editInvoiceClick = function () {\r\n            var scope = this;\r\n            window.location.href = \"/Ordering/Invoice/Edit/\" + scope.display_InvoiceId;\r\n            return false;\r\n        };\r\n\r\n        this.deleteInvoiceClick = function() {\r\n            var scope = this;\r\n            window.location.href = \"/Ordering/Invoice/Delete/\" + scope.display_InvoiceId;\r\n            scope.closeDeleteInvoice();\r\n            return false;\r\n        };\r\n\r\n        this.viewDeletePopUp = function (e) {\r\n                var wnd = $('#confirmDeleteInvoice').data('kendoWindow');\r\n                wnd.center().open();\r\n        };\r\n\r\n        this.closeDeleteInvoice = function () {\r\n            var enterCertWnd = $('#confirmDeleteInvoice').data('kendoWindow');\r\n            if (enterCertWnd) {\r\n                enterCertWnd.close();\r\n            }\r\n        };\r\n\r\n        this.printInvoiceClick = function () {\r\n            var scope = this;\r\n            window.open(\"/Ordering/Invoice/Print/\" + scope.display_InvoiceId, '_blank');\r\n            return false;\r\n        };\r\n\r\n        this.copyInvoiceClick = function () {\r\n            var scope = this;\r\n            window.location.href = \"/Ordering/Invoice/Copy/\" + scope.display_InvoiceId;\r\n            return false;\r\n        };\r\n\r\n        this.createOrderClick = function () {\r\n            var scope = this;\r\n            window.location.href = \"/Ordering/ShoppingCart.aspx?memberInvoiceId=\" + scope.display_InvoiceId + \"&invoiceNum=\" + scope.invoice.MemberInvoiceNumber;\r\n            return false;\r\n        };\r\n\r\n        this.onInvoiceLinesDataBinding = function (e) {\r\n            var grid = e.sender;\r\n\r\n            if (this.invoice.Type == \"Distributor\") {\r\n                grid.showColumn(\"EarnBase\");\r\n            } else {\r\n                grid.hideColumn(\"EarnBase\");\r\n            }\r\n        };\r\n        \r\n        this.createOrderRedirect = function () {\r\n            var self = this;\r\n            $.ajax({\r\n                url: \"/Ordering/Invoice/CreateOrderRedirect/\",\r\n                type: 'POST',\r\n                contentType: \"application/json; charset=utf-8\",\r\n                success: function () {\r\n                    self.createOrderClick();\r\n                },\r\n                error: function () {\r\n                },\r\n                complete: function () {\r\n                }\r\n            });\r\n        };\r\n\r\n    },\r\n\r\n\r\n    InvoiceModel: function() {\r\n        this.Id = null;\r\n        this.MemberId = null;\r\n        this.MemberInvoiceNumber = null;\r\n        this.FirstName = null;\r\n        this.LastName = null;\r\n        this.InvoiceDate = \"\";\r\n        this.CreatedDate = \"\";\r\n        this.CustomerId = null;\r\n        this.Address = new invEdit.InvoiceAddressModel();\r\n        this.InvoiceLines = [];\r\n        this.InvoicePrice = new invEdit.InvoicePriceModel();\r\n        this.InvoiceContact = null;\r\n        this.Email = null;\r\n        this.Type = null;\r\n        this.OrderId = null;\r\n        this.Notes = null;\r\n        this.Status = null;\r\n        this.Phone = null;\r\n        this.PaymentAddress = null;\r\n        this.TotalVolumePoints = null;\r\n        this.Total = null;\r\n        this.DisplayTotal = null;\r\n        this.ShippingMethod = null;\r\n        this.InvoiceShipToAddress = false;\r\n        this.MemberAddress = new invEdit.InvoiceAddressModel();\r\n        this.MemberEmailAddress = null;\r\n        this.MemberFirstName = \"\";\r\n        this.MemberLastName = \"\";\r\n        this.OrderSource = \"\";\r\n        this.PricingType = \"\";\r\n        this.ShippingMethod = \"\";\r\n        this.Source = \"\";\r\n        this.IsFaceToFace = false;\r\n        this.IsGdoMemberPricing = true;\r\n        this.DisplayInvoiceStatus = \"\";\r\n        this.IsDisplayFreeShipping = false;\r\n        this.HideTax = false;\r\n    },\r\n\r\n    InvoiceAddressModel: function() {\r\n        this.Address1 = null;\r\n        this.Address2 = null;\r\n        this.City = null;\r\n        this.Country = null;\r\n        this.County = null;\r\n        this.PostalCode = null;\r\n        this.State = null;\r\n    },\r\n    InvoiceLineModel: function() {\r\n        this.Sku = null;\r\n        this.ProductName = null;\r\n        this.Quantity = null;\r\n        this.RetailPrice = null;\r\n        this.TotalRetailPrice = null;\r\n        this.EarnBase = null;\r\n        this.StockingSku = null;\r\n        this.ProductType = null;\r\n        this.ProductCategory = null;\r\n        this.VolumePoint = null;\r\n        //Will get calculated/Populated by a PriceFactory\r\n        this.TotalEarnBase = null;\r\n        this.TotalVolumePoint = null;\r\n        this.YourPrice = null;\r\n        this.DisplayRetailPrice = null;\r\n        this.DisplayTotalRetailPrice = null;\r\n        this.DisplayCurrencySymbol = null;\r\n        this.DisplayTotalVp = null;\r\n        this.DisplayYourPrice = null;\r\n        this.FreightCharge = 0;\r\n        this.CalcDiscountedAmount = 0;\r\n    },\r\n    InvoicePriceModel: function() {\r\n        this.DiscountPercentage = 0;\r\n        this.DiscountAmount = 0;\r\n        this.CalcDiscountAmount = 0;\r\n        this.TaxPercentage = 0;\r\n        this.TaxAmount = 0;\r\n        this.ShippingPercentage = 0;\r\n        this.ShippingAmount = 0;\r\n        this.TotalDue = 0;\r\n        this.SubTotal = 0;\r\n\r\n        this.TotalEarnBase = 0;\r\n\r\n        this.CalcShippingAmount = 0;\r\n        this.CalcTaxAmount = 0;\r\n        this.TotalDiscountedAmount = 0;\r\n\r\n\r\n        this.MemberTax = 0;\r\n        this.MemberFreight = 0;\r\n        this.MemberTotal = 0;\r\n        this.TotalYourPrice = 0;\r\n        this.Profit = 0;\r\n        this.ProfitPercentage = 0;\r\n\r\n        //Will get calculated by a PriceFactory\r\n        this.DisplayDiscountedAmount = null;\r\n        this.DisplayCurrencySymbol = null;\r\n        this.DisplaySubtotal = null;\r\n        this.DisplayDiscount = \"$0.00\";\r\n        this.DisplayShipping = null;\r\n        this.DisplayTax = null;\r\n        this.DisplayTotalDue = null;\r\n        this.DisplayCalculatedTax = null;\r\n\r\n        this.DisplayProfit = null;\r\n        this.DisplayMemberTax = null;\r\n        this.DisplayMemberFreight = null;\r\n        this.DisplayMemberTotal = null;\r\n        this.DisplayTotalYourPrice = null;\r\n        this.DisplayProfitPercentage = null;\r\n    },\r\n\r\n};\r\n$(function() {\r\n    invDisplay.Init();\r\n});"]}